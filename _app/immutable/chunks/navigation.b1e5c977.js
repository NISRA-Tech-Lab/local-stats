import{S as ve,i as we,s as Ee,k as w,a as R,l as E,m as C,c as j,h as g,n as b,Z as L,b as N,C as k,G as I,D as Y,I as B,U as Ce,p as W,w as H,q as S,r as q,a6 as X,u as V,e as K,Y as ie}from"./index.baf6a862.js";import{j as Ne}from"./singletons.a6609a82.js";var x={},G={},J=34,Z=10,Q=13;function oe(l){return new Function("d","return {"+l.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function Te(l,e){var t=oe(l);return function(n,s){return e(t(n),s,l)}}function $(l){var e=Object.create(null),t=[];return l.forEach(function(n){for(var s in n)s in e||t.push(e[s]=s)}),t}function A(l,e){var t=l+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function ye(l){return l<0?"-"+A(-l,6):l>9999?"+"+A(l,6):A(l,4)}function Ae(l){var e=l.getUTCHours(),t=l.getUTCMinutes(),n=l.getUTCSeconds(),s=l.getUTCMilliseconds();return isNaN(l)?"Invalid Date":ye(l.getUTCFullYear())+"-"+A(l.getUTCMonth()+1,2)+"-"+A(l.getUTCDate(),2)+(s?"T"+A(e,2)+":"+A(t,2)+":"+A(n,2)+"."+A(s,3)+"Z":n?"T"+A(e,2)+":"+A(t,2)+":"+A(n,2)+"Z":t||e?"T"+A(e,2)+":"+A(t,2)+"Z":"")}function Ie(l){var e=new RegExp('["'+l+`
\r]`),t=l.charCodeAt(0);function n(f,h){var p,_,d=s(f,function(v,T){if(p)return p(v,T-1);_=v,p=h?Te(v,h):oe(v)});return d.columns=_||[],d}function s(f,h){var p=[],_=f.length,d=0,v=0,T,P=_<=0,y=!1;f.charCodeAt(_-1)===Z&&--_,f.charCodeAt(_-1)===Q&&--_;function D(){if(P)return G;if(y)return y=!1,x;var O,U=d,M;if(f.charCodeAt(U)===J){for(;d++<_&&f.charCodeAt(d)!==J||f.charCodeAt(++d)===J;);return(O=d)>=_?P=!0:(M=f.charCodeAt(d++))===Z?y=!0:M===Q&&(y=!0,f.charCodeAt(d)===Z&&++d),f.slice(U+1,O-1).replace(/""/g,'"')}for(;d<_;){if((M=f.charCodeAt(O=d++))===Z)y=!0;else if(M===Q)y=!0,f.charCodeAt(d)===Z&&++d;else if(M!==t)continue;return f.slice(U,O)}return P=!0,f.slice(U,_)}for(;(T=D())!==G;){for(var F=[];T!==x&&T!==G;)F.push(T),T=D();h&&(F=h(F,v++))==null||p.push(F)}return p}function i(f,h){return f.map(function(p){return h.map(function(_){return m(p[_])}).join(l)})}function r(f,h){return h==null&&(h=$(f)),[h.map(m).join(l)].concat(i(f,h)).join(`
`)}function c(f,h){return h==null&&(h=$(f)),i(f,h).join(`
`)}function o(f){return f.map(a).join(`
`)}function a(f){return f.map(m).join(l)}function m(f){return f==null?"":f instanceof Date?Ae(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:n,parseRows:s,format:r,formatBody:c,formatRows:o,formatRow:a,formatValue:m}}var Se=Ie(","),qe=Se.parse;function De(l){for(var e in l){var t=l[e].trim(),n,s;if(!t)t=null;else if(t==="true")t=!0;else if(t==="false")t=!1;else if(t==="NaN")t=NaN;else if(!isNaN(n=+t))t=n;else if(s=t.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Le&&s[4]&&!s[7]&&(t=t.replace(/-/g,"/").replace(/T/," ")),t=new Date(t);else continue;l[e]=t}return l}const Le=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function Ge(l,e=window.fetch){let n=await(await e(l)).text();return await qe(n,De)}function Je(l){let e=Math.round(l)%10;return l==11?"th":e==1?"st":e==2?"nd":e==3?"rd":"th"}function Qe(l){return l>0?"increase":l<0?"decrease":"nochange"}function We(l,e="",t=0){return l!=0?Math.abs(l).toFixed(t)+e:e=="pp"?"n/c":"No change"}function Xe(l,e="",t=0){return l!=0?Math.abs(l).toFixed(t)+e:e=="pp"?"n/c":"<1%)"}function ee(l,e,t){const n=l.slice();return n[34]=e[t],n[37]=e,n[36]=t,n}function te(l,e,t){const n=l.slice();return n[34]=e[t],n[35]=e,n[36]=t,n}function Ue(l){let e,t,n,s,i,r,c;return{c(){e=w("a"),t=w("input"),n=R(),s=w("span"),i=S(" "),this.h()},l(o){e=E(o,"A",{id:!0,class:!0});var a=C(e);t=E(a,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),n=j(a),s=E(a,"SPAN",{class:!0});var m=C(s);i=q(m," "),m.forEach(g),a.forEach(g),this.h()},h(){b(t,"type","text"),b(t,"placeholder",l[0]),b(t,"autocomplete","false"),t.autofocus="autofocus",b(t,"onfocus","this.select()"),b(t,"class","svelte-1sq8f31"),b(s,"class","button svelte-1sq8f31"),L(s,"search",l[3]),L(s,"down",!l[3]),b(e,"id","toggle"),b(e,"class","svelte-1sq8f31")},m(o,a){N(o,e,a),k(e,t),X(t,l[4]),l[25](t),k(e,n),k(e,s),k(s,i),t.focus(),r||(c=[I(t,"keydown",l[13]),I(t,"input",l[24]),I(t,"keyup",l[17]),I(e,"click",l[12]),I(e,"focus",l[12])],r=!0)},p(o,a){a[0]&1&&b(t,"placeholder",o[0]),a[0]&16&&t.value!==o[4]&&X(t,o[4]),a[0]&8&&L(s,"search",o[3]),a[0]&8&&L(s,"down",!o[3])},d(o){o&&g(e),l[25](null),r=!1,B(c)}}}function Pe(l){let e,t,n=l[5][l[1]]+"",s,i,r,c,o,a,m,f=l[2]&&le(l);return{c(){e=w("a"),t=w("span"),s=S(n),i=R(),f&&f.c(),r=R(),c=w("span"),o=S(" "),this.h()},l(h){e=E(h,"A",{id:!0,class:!0});var p=C(e);t=E(p,"SPAN",{class:!0});var _=C(t);s=q(_,n),i=j(_),f&&f.l(_),_.forEach(g),r=j(p),c=E(p,"SPAN",{class:!0});var d=C(c);o=q(d," "),d.forEach(g),p.forEach(g),this.h()},h(){b(t,"class","selection svelte-1sq8f31"),b(c,"class","button close svelte-1sq8f31"),b(e,"id","toggle"),b(e,"class","selected svelte-1sq8f31")},m(h,p){N(h,e,p),k(e,t),k(t,s),k(t,i),f&&f.m(t,null),k(e,r),k(e,c),k(c,o),a||(m=[I(c,"click",l[15]),I(e,"click",l[12])],a=!0)},p(h,p){p[0]&34&&n!==(n=h[5][h[1]]+"")&&V(s,n),h[2]?f?f.p(h,p):(f=le(h),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},d(h){h&&g(e),f&&f.d(),a=!1,B(m)}}}function le(l){let e,t=l[5][l[2]]+"",n;return{c(){e=w("small"),n=S(t),this.h()},l(s){e=E(s,"SMALL",{class:!0});var i=C(e);n=q(i,t),i.forEach(g),this.h()},h(){b(e,"class","svelte-1sq8f31")},m(s,i){N(s,e,i),k(e,n)},p(s,i){i[0]&36&&t!==(t=s[5][s[2]]+"")&&V(n,t)},d(s){s&&g(e)}}}function ne(l){let e,t;function n(r,c){return r[4].length<3?Ve:r[8][0]&&r[2]?Me:r[8][0]?je:Re}let s=n(l),i=s(l);return{c(){e=w("div"),t=w("ul"),i.c(),this.h()},l(r){e=E(r,"DIV",{id:!0,style:!0,class:!0});var c=C(e);t=E(c,"UL",{class:!0});var o=C(t);i.l(o),o.forEach(g),c.forEach(g),this.h()},h(){b(t,"class","svelte-1sq8f31"),b(e,"id","dropdown"),W(e,"top","0"),W(e,"margin-top","50px"),b(e,"class","svelte-1sq8f31")},m(r,c){N(r,e,c),k(e,t),i.m(t,null),l[32](e)},p(r,c){s===(s=n(r))&&i?i.p(r,c):(i.d(1),i=s(r),i&&(i.c(),i.m(t,null)))},d(r){r&&g(e),i.d(),l[32](null)}}}function Re(l){let e,t;return{c(){e=w("li"),t=S("No results"),this.h()},l(n){e=E(n,"LI",{class:!0});var s=C(e);t=q(s,"No results"),s.forEach(g),this.h()},h(){b(e,"class","svelte-1sq8f31")},m(n,s){N(n,e,s),k(e,t)},p:Y,d(n){n&&g(e)}}}function je(l){let e,t=l[8],n=[];for(let s=0;s<t.length;s+=1)n[s]=se(ee(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=K()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=K()},m(s,i){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,i);N(s,e,i)},p(s,i){if(i[0]&18818){t=s[8];let r;for(r=0;r<t.length;r+=1){const c=ee(s,t,r);n[r]?n[r].p(c,i):(n[r]=se(c),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(s){ie(n,s),s&&g(e)}}}function Me(l){let e,t=l[8],n=[];for(let s=0;s<t.length;s+=1)n[s]=re(te(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=K()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=K()},m(s,i){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,i);N(s,e,i)},p(s,i){if(i[0]&18822){t=s[8];let r;for(r=0;r<t.length;r+=1){const c=te(s,t,r);n[r]?n[r].p(c,i):(n[r]=re(c),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(s){ie(n,s),s&&g(e)}}}function Ve(l){let e,t;return{c(){e=w("li"),t=S("Type a name..."),this.h()},l(n){e=E(n,"LI",{class:!0});var s=C(e);t=q(s,"Type a name..."),s.forEach(g),this.h()},h(){b(e,"class","svelte-1sq8f31")},m(n,s){N(n,e,s),k(e,t)},p:Y,d(n){n&&g(e)}}}function se(l){let e,t=l[34][l[1]]+"",n,s,i=l[36],r,c;function o(){return l[29](l[34])}function a(){return l[30](l[36])}const m=()=>l[31](e,i),f=()=>l[31](null,i);return{c(){e=w("li"),n=S(t),s=R(),this.h()},l(h){e=E(h,"LI",{class:!0});var p=C(e);n=q(p,t),s=j(p),p.forEach(g),this.h()},h(){b(e,"class","svelte-1sq8f31"),L(e,"highlight",l[7]==l[36])},m(h,p){N(h,e,p),k(e,n),k(e,s),m(),r||(c=[I(e,"click",o),I(e,"mouseover",a)],r=!0)},p(h,p){l=h,p[0]&258&&t!==(t=l[34][l[1]]+"")&&V(n,t),i!==l[36]&&(f(),i=l[36],m()),p[0]&128&&L(e,"highlight",l[7]==l[36])},d(h){h&&g(e),f(),r=!1,B(c)}}}function Fe(l){let e,t,n=l[34][l[1]]+"",s,i,r=l[34][l[2]]+"",c;return{c(){e=w("span"),t=S("View: "),s=S(n),i=R(),c=S(r),this.h()},l(o){e=E(o,"SPAN",{class:!0});var a=C(e);t=q(a,"View: "),s=q(a,n),i=j(a),c=q(a,r),a.forEach(g),this.h()},h(){b(e,"class","view svelte-1sq8f31")},m(o,a){N(o,e,a),k(e,t),k(e,s),k(e,i),k(e,c)},p(o,a){a[0]&258&&n!==(n=o[34][o[1]]+"")&&V(s,n),a[0]&260&&r!==(r=o[34][o[2]]+"")&&V(c,r)},d(o){o&&g(e)}}}function Oe(l){let e,t=l[34][l[1]]+"",n,s,i,r=l[34][l[2]]+"",c;return{c(){e=w("small"),n=S(t),s=R(),i=w("span"),c=S(r),this.h()},l(o){e=E(o,"SMALL",{class:!0});var a=C(e);n=q(a,t),a.forEach(g),s=j(o),i=E(o,"SPAN",{class:!0});var m=C(i);c=q(m,r),m.forEach(g),this.h()},h(){b(e,"class","svelte-1sq8f31"),b(i,"class","view svelte-1sq8f31")},m(o,a){N(o,e,a),k(e,n),N(o,s,a),N(o,i,a),k(i,c)},p(o,a){a[0]&258&&t!==(t=o[34][o[1]]+"")&&V(n,t),a[0]&260&&r!==(r=o[34][o[2]]+"")&&V(c,r)},d(o){o&&g(e),o&&g(s),o&&g(i)}}}function re(l){let e,t,n,s=l[36],i,r;function c(_,d){return d[0]&260&&(t=null),t==null&&(t=_[34][_[2]].slice(0,4)=="View"),t?Oe:Fe}let o=c(l,[-1,-1]),a=o(l);function m(){return l[26](l[34])}function f(){return l[27](l[36])}const h=()=>l[28](e,s),p=()=>l[28](null,s);return{c(){e=w("li"),a.c(),n=R(),this.h()},l(_){e=E(_,"LI",{class:!0});var d=C(e);a.l(d),n=j(d),d.forEach(g),this.h()},h(){b(e,"class","svelte-1sq8f31"),L(e,"highlight",l[7]==l[36])},m(_,d){N(_,e,d),a.m(e,null),k(e,n),h(),i||(r=[I(e,"click",m),I(e,"mouseover",f)],i=!0)},p(_,d){l=_,o===(o=c(l,d))&&a?a.p(l,d):(a.d(1),a=o(l),a&&(a.c(),a.m(e,n))),s!==l[36]&&(p(),s=l[36],h()),d[0]&128&&L(e,"highlight",l[7]==l[36])},d(_){_&&g(e),a.d(),p(),i=!1,B(r)}}}function Ze(l){let e,t,n,s;function i(a,m){return a[5]&&!a[3]?Pe:Ue}let r=i(l),c=r(l),o=l[6]&&ne(l);return{c(){e=w("div"),c.c(),t=R(),o&&o.c(),this.h()},l(a){e=E(a,"DIV",{id:!0,class:!0});var m=C(e);c.l(m),t=j(m),o&&o.l(m),m.forEach(g),this.h()},h(){b(e,"id","select"),b(e,"class","svelte-1sq8f31"),L(e,"active",l[6])},m(a,m){N(a,e,m),c.m(e,null),k(e,t),o&&o.m(e,null),n||(s=[I(window,"click",l[18]),I(e,"keydown",l[16])],n=!0)},p(a,m){r===(r=i(a))&&c?c.p(a,m):(c.d(1),c=r(a),c&&(c.c(),c.m(e,t))),a[6]?o?o.p(a,m):(o=ne(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null),m[0]&64&&L(e,"active",a[6])},i:Y,o:Y,d(a){a&&g(e),c.d(),o&&o.d(),n=!1,B(s)}}}function Be(l){return new Promise(e=>setTimeout(e,l))}function He(l){return l.length>5&&l.substr(0,2).toUpperCase()=="BT"&&l.indexOf(" ")==-1&&(l=l.slice(0,-3)+" "+l.substr(-3)),l}function Ye(l,e,t){let n;const s=Ce();let{search_data:i}=e,{selected:r=null}=e,{placeholder:c="Enter a town, postcode or area name"}=e,{value:o="code"}=e,{label:a="name"}=e,{group:m=null}=e,{search:f=!1}=e,h=r,p=r?i.find(u=>{u[o]==r[o]}):null,_=!1,d="",v=null,T,P,y,D=[];function F(u){u.stopPropagation(),t(4,d=""),t(6,_=!_),Be(10).then(()=>{y&&_&&y.focus()})}function O(u){t(6,_=!0)}function U(u){t(19,r=u),t(6,_=!1),localStorage.setItem("search_code",u.code),localStorage.setItem("search_name",u.name),t(10,y.value="",y),s("select",{selected:u,value:u[o]})}function M(u){u.stopPropagation(),t(19,r=null),t(22,h=null),t(5,p=null),s("select",{selected:null,value:null})}function ae(u){_&&T[0]&&Number.isInteger(v)&&(u.keyCode===38?(t(7,v-=v>0?1:0),D[v].scrollIntoView({block:"nearest",inline:"start"})):u.keyCode===40&&(t(7,v+=v<T.length-1?1:0),D[v].scrollIntoView({block:"nearest",inline:"end"})))}function fe(u){T[0]&&Number.isInteger(v)&&u.keyCode===13&&U(T[v])}function ue(u){u.target!==P&&(t(6,_=!1),t(7,v=0))}function ce(){d=this.value,t(4,d)}function he(u){H[u?"unshift":"push"](()=>{y=u,t(10,y)})}const _e=u=>U(u),de=u=>t(7,v=u);function pe(u,z){H[u?"unshift":"push"](()=>{D[z]=u,t(11,D)})}const me=u=>U(u),ge=u=>t(7,v=u);function be(u,z){H[u?"unshift":"push"](()=>{D[z]=u,t(11,D)})}function ke(u){H[u?"unshift":"push"](()=>{P=u,t(9,P)})}return l.$$set=u=>{"search_data"in u&&t(20,i=u.search_data),"selected"in u&&t(19,r=u.selected),"placeholder"in u&&t(0,c=u.placeholder),"value"in u&&t(21,o=u.value),"label"in u&&t(1,a=u.label),"group"in u&&t(2,m=u.group),"search"in u&&t(3,f=u.search)},l.$$.update=()=>{l.$$.dirty[0]&16&&t(23,n=d?new RegExp(He(d),"i"):null),l.$$.dirty[0]&9437186&&(t(8,T=n?i.filter(u=>n.test(u[a])):i),t(7,v=0)),l.$$.dirty[0]&7864320&&h!=r&&(t(5,p=i.find(u=>u[o]==r[o])),t(22,h=r))},[c,a,m,f,d,p,_,v,T,P,y,D,F,O,U,M,ae,fe,ue,r,i,o,h,n,ce,he,_e,de,pe,me,ge,be,ke]}class xe extends ve{constructor(e){super(),we(this,e,Ye,Ze,Ee,{search_data:20,selected:19,placeholder:0,value:21,label:1,group:2,search:3},null,[-1,-1])}}const $e=Ne("goto");export{xe as S,$e as a,Qe as b,Xe as c,We as d,Ge as g,Je as s};
