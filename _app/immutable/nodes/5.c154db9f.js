import{g as n_,c as yd,a as _d,s as a_,b as o_,d as s_,S as l_}from"../chunks/navigation.7ed85aa9.js";import{g as zn,a as wp,m as ts,b as ap,c as u_,d as Qr,e as vd}from"../chunks/config.857abbfe.js";import{S as sn,i as ln,s as un,k as Oe,l as Ne,m as Be,h as ne,n as Y,R as ju,b as Re,T as Gu,g as ct,v as Wn,d as gt,f as Xn,P as ag,o as Rh,K as Bu,M as Fu,N as Ou,O as Nu,w as Bs,e as ni,E as Zu,U as c_,Q as Kt,V as Ei,p as Qe,W as Kn,X as Hn,C as xe,D as Xi,Y as on,Z as is,q as Et,r as kt,u as vi,y as ui,z as ci,A as pi,B as hi,a as vt,c as bt,_ as Pp,G as Sp,I as p_,F as Ep,$ as Rl,a0 as Bl,L as h_,a1 as f_,a2 as d_,a3 as gp,a4 as yp,a5 as _p}from"../chunks/index.baf6a862.js";import{b as ri,a as m_}from"../chunks/paths.99e3b6ea.js";import{S as g_}from"../chunks/Section.6106804d.js";/* empty css                                                              */import{w as ki,h as Pr}from"../chunks/singletons.330f90ee.js";async function bd(l,p){return await(await p(wp.app_json_data+l+".json")).json()}async function y_({params:l,fetch:p}){let d=l.code,h=await n_(wp.search_data,p),_={};h.forEach(T=>_[T.code]=T.name),h.forEach(T=>{T.typepl=zn[T.type].pl,T.typenm=zn[T.type].name,T.typestr=_[T.parent]&&T.parent==T.code?`View:  ${_[T.parent]}
        ${zn[T.parent_type].name}  `:_[T.parent]&&T.parent!=T.code?`${zn[T.type].name} `:""});let v=h.sort((T,B)=>T.name.localeCompare(B.name)),a=await bd("N92000002",p),z=await bd(d,p);return{search_data:v,place:z,ni:a}}const ib=Object.freeze(Object.defineProperty({__proto__:null,load:y_},Symbol.toStringTag,{value:"Module"}));var __=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v_(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var b_={rgb2hsl:Ku,rgb2hsv:Cp,rgb2hwb:Hu,rgb2cmyk:Wu,rgb2keyword:Xu,rgb2xyz:Bh,rgb2lab:Fh,rgb2lch:x_,hsl2rgb:Mp,hsl2hsv:w_,hsl2hwb:S_,hsl2cmyk:E_,hsl2keyword:k_,hsv2rgb:Dp,hsv2hsl:z_,hsv2hwb:T_,hsv2cmyk:I_,hsv2keyword:A_,hwb2rgb:Yu,hwb2hsl:P_,hwb2hsv:C_,hwb2cmyk:M_,hwb2keyword:D_,cmyk2rgb:Ju,cmyk2hsl:L_,cmyk2hsv:R_,cmyk2hwb:B_,cmyk2keyword:F_,keyword2rgb:Fs,keyword2hsl:V_,keyword2hsv:q_,keyword2hwb:j_,keyword2cmyk:G_,keyword2lab:Z_,keyword2xyz:K_,xyz2rgb:og,xyz2lab:sg,xyz2lch:O_,lab2xyz:Oh,lab2rgb:lg,lab2lch:Nh,lch2lab:Uh,lch2xyz:N_,lch2rgb:U_};function Ku(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255,_=Math.min(p,d,h),v=Math.max(p,d,h),a=v-_,z,T,B;return v==_?z=0:p==v?z=(d-h)/a:d==v?z=2+(h-p)/a:h==v&&(z=4+(p-d)/a),z=Math.min(z*60,360),z<0&&(z+=360),B=(_+v)/2,v==_?T=0:B<=.5?T=a/(v+_):T=a/(2-v-_),[z,T*100,B*100]}function Cp(l){var p=l[0],d=l[1],h=l[2],_=Math.min(p,d,h),v=Math.max(p,d,h),a=v-_,z,T,B;return v==0?T=0:T=a/v*1e3/10,v==_?z=0:p==v?z=(d-h)/a:d==v?z=2+(h-p)/a:h==v&&(z=4+(p-d)/a),z=Math.min(z*60,360),z<0&&(z+=360),B=v/255*1e3/10,[z,T,B]}function Hu(l){var p=l[0],d=l[1],v=l[2],h=Ku(l)[0],_=1/255*Math.min(p,Math.min(d,v)),v=1-1/255*Math.max(p,Math.max(d,v));return[h,_*100,v*100]}function Wu(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255,_,v,a,z;return z=Math.min(1-p,1-d,1-h),_=(1-p-z)/(1-z)||0,v=(1-d-z)/(1-z)||0,a=(1-h-z)/(1-z)||0,[_*100,v*100,a*100,z*100]}function Xu(l){return ug[JSON.stringify(l)]}function Bh(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255;p=p>.04045?Math.pow((p+.055)/1.055,2.4):p/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92;var _=p*.4124+d*.3576+h*.1805,v=p*.2126+d*.7152+h*.0722,a=p*.0193+d*.1192+h*.9505;return[_*100,v*100,a*100]}function Fh(l){var p=Bh(l),d=p[0],h=p[1],_=p[2],v,a,z;return d/=95.047,h/=100,_/=108.883,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,v=116*h-16,a=500*(d-h),z=200*(h-_),[v,a,z]}function x_(l){return Nh(Fh(l))}function Mp(l){var p=l[0]/360,d=l[1]/100,h=l[2]/100,_,v,a,z,T;if(d==0)return T=h*255,[T,T,T];h<.5?v=h*(1+d):v=h+d-h*d,_=2*h-v,z=[0,0,0];for(var B=0;B<3;B++)a=p+1/3*-(B-1),a<0&&a++,a>1&&a--,6*a<1?T=_+(v-_)*6*a:2*a<1?T=v:3*a<2?T=_+(v-_)*(2/3-a)*6:T=_,z[B]=T*255;return z}function w_(l){var p=l[0],d=l[1]/100,h=l[2]/100,_,v;return h===0?[0,0,0]:(h*=2,d*=h<=1?h:2-h,v=(h+d)/2,_=2*d/(h+d),[p,_*100,v*100])}function S_(l){return Hu(Mp(l))}function E_(l){return Wu(Mp(l))}function k_(l){return Xu(Mp(l))}function Dp(l){var p=l[0]/60,d=l[1]/100,T=l[2]/100,h=Math.floor(p)%6,_=p-Math.floor(p),v=255*T*(1-d),a=255*T*(1-d*_),z=255*T*(1-d*(1-_)),T=255*T;switch(h){case 0:return[T,z,v];case 1:return[a,T,v];case 2:return[v,T,z];case 3:return[v,a,T];case 4:return[z,v,T];case 5:return[T,v,a]}}function z_(l){var p=l[0],d=l[1]/100,h=l[2]/100,_,v;return v=(2-d)*h,_=d*h,_/=v<=1?v:2-v,_=_||0,v/=2,[p,_*100,v*100]}function T_(l){return Hu(Dp(l))}function I_(l){return Wu(Dp(l))}function A_(l){return Xu(Dp(l))}function Yu(l){var p=l[0]/360,d=l[1]/100,h=l[2]/100,_=d+h,v,a,z,T;switch(_>1&&(d/=_,h/=_),v=Math.floor(6*p),a=1-h,z=6*p-v,v&1&&(z=1-z),T=d+z*(a-d),v){default:case 6:case 0:r=a,g=T,b=d;break;case 1:r=T,g=a,b=d;break;case 2:r=d,g=a,b=T;break;case 3:r=d,g=T,b=a;break;case 4:r=T,g=d,b=a;break;case 5:r=a,g=d,b=T;break}return[r*255,g*255,b*255]}function P_(l){return Ku(Yu(l))}function C_(l){return Cp(Yu(l))}function M_(l){return Wu(Yu(l))}function D_(l){return Xu(Yu(l))}function Ju(l){var p=l[0]/100,d=l[1]/100,h=l[2]/100,_=l[3]/100,v,a,z;return v=1-Math.min(1,p*(1-_)+_),a=1-Math.min(1,d*(1-_)+_),z=1-Math.min(1,h*(1-_)+_),[v*255,a*255,z*255]}function L_(l){return Ku(Ju(l))}function R_(l){return Cp(Ju(l))}function B_(l){return Hu(Ju(l))}function F_(l){return Xu(Ju(l))}function og(l){var p=l[0]/100,d=l[1]/100,h=l[2]/100,_,v,a;return _=p*3.2406+d*-1.5372+h*-.4986,v=p*-.9689+d*1.8758+h*.0415,a=p*.0557+d*-.204+h*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v=v*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,_=Math.min(Math.max(0,_),1),v=Math.min(Math.max(0,v),1),a=Math.min(Math.max(0,a),1),[_*255,v*255,a*255]}function sg(l){var p=l[0],d=l[1],h=l[2],_,v,a;return p/=95.047,d/=100,h/=108.883,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,_=116*d-16,v=500*(p-d),a=200*(d-h),[_,v,a]}function O_(l){return Nh(sg(l))}function Oh(l){var p=l[0],d=l[1],h=l[2],_,v,a,z;return p<=8?(v=p*100/903.3,z=7.787*(v/100)+16/116):(v=100*Math.pow((p+16)/116,3),z=Math.pow(v/100,1/3)),_=_/95.047<=.008856?_=95.047*(d/500+z-16/116)/7.787:95.047*Math.pow(d/500+z,3),a=a/108.883<=.008859?a=108.883*(z-h/200-16/116)/7.787:108.883*Math.pow(z-h/200,3),[_,v,a]}function Nh(l){var p=l[0],d=l[1],h=l[2],_,v,a;return _=Math.atan2(h,d),v=_*360/2/Math.PI,v<0&&(v+=360),a=Math.sqrt(d*d+h*h),[p,a,v]}function lg(l){return og(Oh(l))}function Uh(l){var p=l[0],d=l[1],h=l[2],_,v,a;return a=h/360*2*Math.PI,_=d*Math.cos(a),v=d*Math.sin(a),[p,_,v]}function N_(l){return Oh(Uh(l))}function U_(l){return lg(Uh(l))}function Fs(l){return Ih[l]}function V_(l){return Ku(Fs(l))}function q_(l){return Cp(Fs(l))}function j_(l){return Hu(Fs(l))}function G_(l){return Wu(Fs(l))}function Z_(l){return Fh(Fs(l))}function K_(l){return Bh(Fs(l))}var Ih={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ug={};for(var xd in Ih)ug[JSON.stringify(Ih[xd])]=xd;var wh=b_,Ml=function(){return new Qu};for(var Du in wh){Ml[Du+"Raw"]=function(l){return function(p){return typeof p=="number"&&(p=Array.prototype.slice.call(arguments)),wh[l](p)}}(Du);var wd=/(\w+)2(\w+)/.exec(Du),Sh=wd[1],H_=wd[2];Ml[Sh]=Ml[Sh]||{},Ml[Sh][H_]=Ml[Du]=function(l){return function(p){typeof p=="number"&&(p=Array.prototype.slice.call(arguments));var d=wh[l](p);if(typeof d=="string"||d===void 0)return d;for(var h=0;h<d.length;h++)d[h]=Math.round(d[h]);return d}}(Du)}var Qu=function(){this.convs={}};Qu.prototype.routeSpace=function(l,p){var d=p[0];return d===void 0?this.getValues(l):(typeof d=="number"&&(d=Array.prototype.slice.call(p)),this.setValues(l,d))};Qu.prototype.setValues=function(l,p){return this.space=l,this.convs={},this.convs[l]=p,this};Qu.prototype.getValues=function(l){var p=this.convs[l];if(!p){var d=this.space,h=this.convs[d];p=Ml[d][l](h),this.convs[l]=p}return p};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(l){Qu.prototype[l]=function(p){return this.routeSpace(l,arguments)}});var cg={exports:{}};(function(l,p){(function(d,h){l.exports=h()})(__,function(){var d,h,_;function v(a,z){if(!d)d=z;else if(!h)h=z;else{var T="var sharedChunk = {}; ("+d+")(sharedChunk); ("+h+")(sharedChunk);",B={};d(B),_=z(B),typeof window<"u"&&(_.workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"})))}}return v(["exports"],function(a){function z(e,t){return e(t={exports:{}},t.exports),t.exports}var T=B;function B(e,t,i,u){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=i,this.p2y=u}B.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},B.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},B.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},B.prototype.solveCurveX=function(e,t){var i,u,f,m,x;for(t===void 0&&(t=1e-6),f=e,x=0;x<8;x++){if(m=this.sampleCurveX(f)-e,Math.abs(m)<t)return f;var E=this.sampleCurveDerivativeX(f);if(Math.abs(E)<1e-6)break;f-=m/E}if((f=e)<(i=0))return i;if(f>(u=1))return u;for(;i<u;){if(m=this.sampleCurveX(f),Math.abs(m-e)<t)return f;e>m?i=f:u=f,f=.5*(u-i)+i}return f},B.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var M=U;function U(e,t){this.x=e,this.y=t}U.prototype={clone:function(){return new U(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),u=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=u,this},_rotateAround:function(e,t){var i=Math.cos(e),u=Math.sin(e),f=t.y+u*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-u*(this.y-t.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},U.convert=function(e){return e instanceof U?e:Array.isArray(e)?new U(e[0],e[1]):e};var R=typeof self<"u"?self:{},W=Math.pow(2,53)-1;function X(e,t,i,u){var f=new T(e,t,i,u);return function(m){return f.solve(m)}}var ae=X(.25,.1,.25,1);function se(e,t,i){return Math.min(i,Math.max(t,e))}function pe(e,t,i){var u=i-t,f=((e-t)%u+u)%u+t;return f===t?i:f}function ge(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var u=0,f=t;u<f.length;u+=1){var m=f[u];for(var x in m)e[x]=m[x]}return e}var rt=1;function Ue(){return rt++}function Ae(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Ke(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function xt(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function Pt(e,t){return e.indexOf(t,e.length-t.length)!==-1}function Ge(e,t,i){var u={};for(var f in e)u[f]=t.call(i||this,e[f],f,e);return u}function He(e,t,i){var u={};for(var f in e)t.call(i||this,e[f],f,e)&&(u[f]=e[f]);return u}function ht(e){return Array.isArray(e)?e.map(ht):typeof e=="object"&&e?Ge(e,ht):e}var Pe={};function je(e){Pe[e]||(typeof console<"u"&&console.warn(e),Pe[e]=!0)}function lt(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function De(e){for(var t=0,i=0,u=e.length,f=u-1,m=void 0,x=void 0;i<u;f=i++)t+=((x=e[f]).x-(m=e[i]).x)*(m.y+x.y);return t}function wt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ot(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,f,m,x){var E=m||x;return t[f]=!E||E.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Dt=null;function Lt(e){if(Dt==null){var t=e.navigator?e.navigator.userAgent:null;Dt=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Dt}function yi(e){try{var t=R[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var qe,Xt,zi,$r,nr=R.performance&&R.performance.now?R.performance.now.bind(R.performance):Date.now.bind(Date),Mn=R.requestAnimationFrame||R.mozRequestAnimationFrame||R.webkitRequestAnimationFrame||R.msRequestAnimationFrame,Oi=R.cancelAnimationFrame||R.mozCancelAnimationFrame||R.webkitCancelAnimationFrame||R.msCancelAnimationFrame,yn={now:nr,frame:function(e){var t=Mn(e);return{cancel:function(){return Oi(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=R.document.createElement("canvas"),u=i.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return qe||(qe=R.document.createElement("a")),qe.href=e,qe.href},hardwareConcurrency:R.navigator&&R.navigator.hardwareConcurrency||4,get devicePixelRatio(){return R.devicePixelRatio},get prefersReducedMotion(){return!!R.matchMedia&&(Xt==null&&(Xt=R.matchMedia("(prefers-reduced-motion: reduce)")),Xt.matches)}},Gt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},fr={supported:!1,testSupport:function(e){!cn&&$r&&(en?Nt(e):zi=e)}},cn=!1,en=!1;function Nt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,$r),e.isContextLost())return;fr.supported=!0}catch{}e.deleteTexture(t),cn=!0}R.document&&(($r=R.document.createElement("img")).onload=function(){zi&&Nt(zi),zi=null,en=!0},$r.onerror=function(){cn=!0,zi=null},$r.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var dr="01",ar=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function or(e){return e.indexOf("mapbox:")===0}ar.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",dr,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},ar.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ar.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},ar.prototype.normalizeStyleURL=function(e,t){if(!or(e))return e;var i=mr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},ar.prototype.normalizeGlyphsURL=function(e,t){if(!or(e))return e;var i=mr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},ar.prototype.normalizeSourceURL=function(e,t){if(!or(e))return e;var i=mr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},ar.prototype.normalizeSpriteURL=function(e,t,i,u){var f=mr(e);return or(e)?(f.path="/styles/v1"+f.path+"/sprite"+t+i,this._makeAPIURL(f,this._customAccessToken||u)):(f.path+=""+t+i,Vr(f))},ar.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!or(e))return e;var i=mr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(yn.devicePixelRatio>=2||t===512?"@2x":"")+(fr.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var u=this._customAccessToken||function(f){for(var m=0,x=f;m<x.length;m+=1){var E=x[m].match(/^access_token=(.*)$/);if(E)return E[1]}return null}(i.params)||Gt.ACCESS_TOKEN;return Gt.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,u)},ar.prototype.canonicalizeTileURL=function(e,t){var i=mr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=i.path.replace("/v4/","");var f=i.params;return t&&(f=f.filter(function(m){return!m.match(/^access_token=/)})),f.length&&(u+="?"+f.join("&")),u},ar.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&or(t),u=[],f=0,m=e.tiles||[];f<m.length;f+=1){var x=m[f];Cr(x)?u.push(this.canonicalizeTileURL(x,i)):u.push(x)}return u},ar.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=mr(Gt.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,e.protocol==="http"){var f=e.params.indexOf("secure");f>=0&&e.params.splice(f,1)}if(u.path!=="/"&&(e.path=""+u.path+e.path),!Gt.REQUIRE_ACCESS_TOKEN)return Vr(e);if(!(t=t||Gt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(m){return m.indexOf("access_token")===-1}),e.params.push("access_token="+t),Vr(e)};var tn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Cr(e){return tn.test(e)}var Mr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function mr(e){var t=e.match(Mr);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Vr(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Ti(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(R.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ni=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ni.prototype.getStorageKey=function(e){var t,i=Ti(Gt.ACCESS_TOKEN);return t=i&&i.u?R.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,f){return String.fromCharCode(+("0x"+f))})):Gt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Ni.prototype.fetchEventData=function(){var e=yi("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var u=R.localStorage.getItem(t);u&&(this.eventData=JSON.parse(u));var f=R.localStorage.getItem(i);f&&(this.anonId=f)}catch{je("Unable to read from LocalStorage")}},Ni.prototype.saveEventData=function(){var e=yi("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{R.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&R.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{je("Unable to write to LocalStorage")}},Ni.prototype.processRequests=function(e){},Ni.prototype.postEvent=function(e,t,i,u){var f=this;if(Gt.EVENTS_URL){var m=mr(Gt.EVENTS_URL);m.params.push("access_token="+(u||Gt.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:dr,userId:this.anonId},E=t?ge(x,t):x,A={url:Vr(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=Si(A,function(P){f.pendingRequest=null,i(P),f.saveEventData(),f.processRequests(u)})}},Ni.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var sr,lr,gr=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,u,f,m){this.skuToken=f,(Gt.EVENTS_URL&&m||Gt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(x){return or(x)||Cr(x)}))&&this.queueRequest({id:u,timestamp:Date.now()},m)},t.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){var f=this.queue.shift(),m=f.id,x=f.timestamp;m&&this.success[m]||(this.anonId||this.fetchEventData(),Ke(this.anonId)||(this.anonId=Ae()),this.postEvent(x,{skuToken:this.skuToken},function(E){E||m&&(u.success[m]=!0)},i))}},t}(Ni),Dr=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,u){Gt.EVENTS_URL&&Gt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(f){return or(f)||Cr(f)})&&this.queueRequest(Date.now(),u)},t.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var f=Ti(Gt.ACCESS_TOKEN),m=f?f.u:Gt.ACCESS_TOKEN,x=m!==this.eventData.tokenU;Ke(this.anonId)||(this.anonId=Ae(),x=!0);var E=this.queue.shift();if(this.eventData.lastSuccess){var A=new Date(this.eventData.lastSuccess),P=new Date(E),D=(E-this.eventData.lastSuccess)/864e5;x=x||D>=1||D<-1||A.getDate()!==P.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(E,{"enabled.telemetry":!1},function(F){F||(u.eventData.lastSuccess=E,u.eventData.tokenU=m)},i)}},t}(Ni)),Yn=Dr.postTurnstileEvent.bind(Dr),qr=new gr,Dn=qr.postMapLoadEvent.bind(qr),Lr=500,Jn=50;function Rr(){R.caches&&!sr&&(sr=R.caches.open("mapbox-tiles"))}function Ln(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var xr,jr=1/0;function Gi(){return xr==null&&(xr=R.OffscreenCanvas&&new R.OffscreenCanvas(1,1).getContext("2d")&&typeof R.createImageBitmap=="function"),xr}var ra={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ra);var Rn=function(e){function t(i,u,f){u===401&&Cr(f)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=u,this.url=f,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Qi=wt()?function(){return self.worker&&self.worker.referrer}:function(){return(R.location.protocol==="blob:"?R.parent:R).location.href},_n,pn,Ui=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Qi())&&!/^\w+:/.test(i))){if(R.fetch&&R.Request&&R.AbortController&&R.Request.prototype.hasOwnProperty("signal"))return function(u,f){var m,x=new R.AbortController,E=new R.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Qi(),signal:x.signal}),A=!1,P=!1,D=(m=E.url).indexOf("sku=")>0&&Cr(m);u.type==="json"&&E.headers.set("Accept","application/json");var F=function(j,$,te){if(!P){if(j&&j.message!=="SecurityError"&&je(j),$&&te)return V($);var he=Date.now();R.fetch(E).then(function(oe){if(oe.ok){var ye=D?oe.clone():null;return V(oe,ye,he)}return f(new Rn(oe.statusText,oe.status,u.url))}).catch(function(oe){oe.code!==20&&f(new Error(oe.message))})}},V=function(j,$,te){(u.type==="arrayBuffer"?j.arrayBuffer():u.type==="json"?j.json():j.text()).then(function(he){P||($&&te&&function(oe,ye,be){if(Rr(),sr){var Se={status:ye.status,statusText:ye.statusText,headers:new R.Headers};ye.headers.forEach(function(Me,Ze){return Se.headers.set(Ze,Me)});var ze=ot(ye.headers.get("Cache-Control")||"");ze["no-store"]||(ze["max-age"]&&Se.headers.set("Expires",new Date(be+1e3*ze["max-age"]).toUTCString()),new Date(Se.headers.get("Expires")).getTime()-be<42e4||function(Me,Ze){if(lr===void 0)try{new Response(new ReadableStream),lr=!0}catch{lr=!1}lr?Ze(Me.body):Me.blob().then(Ze)}(ye,function(Me){var Ze=new R.Response(Me,Se);Rr(),sr&&sr.then(function(tt){return tt.put(Ln(oe.url),Ze)}).catch(function(tt){return je(tt.message)})}))}}(E,$,te),A=!0,f(null,he,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(function(he){P||f(new Error(he.message))})};return D?function(j,$){if(Rr(),!sr)return $(null);var te=Ln(j.url);sr.then(function(he){he.match(te).then(function(oe){var ye=function(be){if(!be)return!1;var Se=new Date(be.headers.get("Expires")||0),ze=ot(be.headers.get("Cache-Control")||"");return Se>Date.now()&&!ze["no-cache"]}(oe);he.delete(te),ye&&he.put(te,oe.clone()),$(null,oe,ye)}).catch($)}).catch($)}(E,F):F(null,null),{cancel:function(){P=!0,A||x.abort()}}}(e,t);if(wt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(u,f){var m=new R.XMLHttpRequest;for(var x in m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer"),u.headers)m.setRequestHeader(x,u.headers[x]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=function(){f(new Error(m.statusText))},m.onload=function(){if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){var E=m.response;if(u.type==="json")try{E=JSON.parse(m.response)}catch(A){return f(A)}f(null,E,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else f(new Rn(m.statusText,m.status,u.url))},m.send(u.body),{cancel:function(){return m.abort()}}}(e,t)},Tn=function(e,t){return Ui(ge(e,{type:"arrayBuffer"}),t)},Si=function(e,t){return Ui(ge(e,{method:"POST"}),t)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";_n=[],pn=0;var k=function(e,t){if(fr.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),pn>=Gt.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return _n.push(i),i}pn++;var u=!1,f=function(){if(!u)for(u=!0,pn--;_n.length&&pn<Gt.MAX_PARALLEL_IMAGE_REQUESTS;){var x=_n.shift();x.cancelled||(x.cancel=k(x.requestParameters,x.callback).cancel)}},m=Tn(e,function(x,E,A,P){f(),x?t(x):E&&(Gi()?function(D,F){var V=new R.Blob([new Uint8Array(D)],{type:"image/png"});R.createImageBitmap(V).then(function(j){F(null,j)}).catch(function(j){F(new Error("Could not load image because of "+j.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(E,t):function(D,F,V,j){var $=new R.Image,te=R.URL;$.onload=function(){F(null,$),te.revokeObjectURL($.src),$.onload=null,R.requestAnimationFrame(function(){$.src=L})},$.onerror=function(){return F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var he=new R.Blob([new Uint8Array(D)],{type:"image/png"});$.cacheControl=V,$.expires=j,$.src=D.byteLength?te.createObjectURL(he):L}(E,t,A,P))});return{cancel:function(){m.cancel(),f()}}};function N(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function K(e,t,i){if(i&&i[e]){var u=i[e].indexOf(t);u!==-1&&i[e].splice(u,1)}}var Q=function(e,t){t===void 0&&(t={}),ge(this,t),this.type=e},le=function(e){function t(i,u){u===void 0&&(u={}),e.call(this,"error",ge({error:i},u))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Q),fe=function(){};fe.prototype.on=function(e,t){return this._listeners=this._listeners||{},N(e,t,this._listeners),this},fe.prototype.off=function(e,t){return K(e,t,this._listeners),K(e,t,this._oneTimeListeners),this},fe.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},N(e,t,this._oneTimeListeners),this},fe.prototype.fire=function(e,t){typeof e=="string"&&(e=new Q(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var u=0,f=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];u<f.length;u+=1)f[u].call(this,e);for(var m=0,x=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];m<x.length;m+=1){var E=x[m];K(i,E,this._oneTimeListeners),E.call(this,e)}var A=this._eventedParent;A&&(ge(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(e))}else e instanceof le&&console.error(e.error);return this},fe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},fe.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var q={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ee=function(e,t,i,u){this.message=(e?e+": ":"")+i,u&&(this.identifier=u),t!=null&&t.__line__&&(this.line=t.__line__)};function me(e){var t=e.value;return t?[new ee(e.key,t,"constants have been deprecated as of v8")]:[]}function Ce(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var u=0,f=t;u<f.length;u+=1){var m=f[u];for(var x in m)e[x]=m[x]}return e}function Fe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function we(e){if(Array.isArray(e))return e.map(we);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=we(e[i]);return t}return Fe(e)}var Le=function(e){function t(i,u){e.call(this,u),this.message=u,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),st=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,u=t;i<u.length;i+=1){var f=u[i];this.bindings[f[0]]=f[1]}};st.prototype.concat=function(e){return new st(this,e)},st.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},st.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var it={kind:"null"},ke={kind:"number"},$e={kind:"string"},Ye={kind:"boolean"},et={kind:"color"},qt={kind:"object"},nt={kind:"value"},Yt={kind:"collator"},jt={kind:"formatted"},Ht={kind:"resolvedImage"};function oi(e,t){return{kind:"array",itemType:e,N:t}}function ei(e){if(e.kind==="array"){var t=ei(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var yr=[it,ke,$e,Ye,et,jt,qt,oi(nt),Ht];function fi(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!fi(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,u=yr;i<u.length;i+=1)if(!fi(u[i],t))return null}}return"Expected "+ei(e)+" but found "+ei(t)+" instead."}function Li(e,t){return t.some(function(i){return i.kind===e.kind})}function _i(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Qt=z(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(E){return(E=Math.round(E))<0?0:E>255?255:E}function f(E){return u(E[E.length-1]==="%"?parseFloat(E)/100*255:parseInt(E))}function m(E){return(A=E[E.length-1]==="%"?parseFloat(E)/100:parseFloat(E))<0?0:A>1?1:A;var A}function x(E,A,P){return P<0?P+=1:P>1&&(P-=1),6*P<1?E+(A-E)*P*6:2*P<1?A:3*P<2?E+(A-E)*(2/3-P)*6:E}try{t.parseCSSColor=function(E){var A,P=E.replace(/ /g,"").toLowerCase();if(P in i)return i[P].slice();if(P[0]==="#")return P.length===4?(A=parseInt(P.substr(1),16))>=0&&A<=4095?[(3840&A)>>4|(3840&A)>>8,240&A|(240&A)>>4,15&A|(15&A)<<4,1]:null:P.length===7&&(A=parseInt(P.substr(1),16))>=0&&A<=16777215?[(16711680&A)>>16,(65280&A)>>8,255&A,1]:null;var D=P.indexOf("("),F=P.indexOf(")");if(D!==-1&&F+1===P.length){var V=P.substr(0,D),j=P.substr(D+1,F-(D+1)).split(","),$=1;switch(V){case"rgba":if(j.length!==4)return null;$=m(j.pop());case"rgb":return j.length!==3?null:[f(j[0]),f(j[1]),f(j[2]),$];case"hsla":if(j.length!==4)return null;$=m(j.pop());case"hsl":if(j.length!==3)return null;var te=(parseFloat(j[0])%360+360)%360/360,he=m(j[1]),oe=m(j[2]),ye=oe<=.5?oe*(he+1):oe+he-oe*he,be=2*oe-ye;return[u(255*x(be,ye,te+1/3)),u(255*x(be,ye,te)),u(255*x(be,ye,te-1/3)),$];default:return null}}return null}}catch{}}).parseCSSColor,si=function(e,t,i,u){u===void 0&&(u=1),this.r=e,this.g=t,this.b=i,this.a=u};si.parse=function(e){if(e){if(e instanceof si)return e;if(typeof e=="string"){var t=Qt(e);if(t)return new si(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},si.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+u+")"},si.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},si.black=new si(0,0,0,1),si.white=new si(1,1,1,1),si.transparent=new si(0,0,0,0),si.red=new si(1,0,0,1);var wr=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};wr.prototype.compare=function(e,t){return this.collator.compare(e,t)},wr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ha=function(e,t,i,u,f){this.text=e,this.image=t,this.scale=i,this.fontStack=u,this.textColor=f},$i=function(e){this.sections=e};$i.fromString=function(e){return new $i([new ha(e,null,null,null,null)])},$i.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},$i.factory=function(e){return e instanceof $i?e:$i.fromString(e)},$i.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},$i.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var u=i[t];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(f)}}return e};var Br=function(e){this.name=e.name,this.available=e.available};function Na(e,t,i,u){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,t,i,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof u=="number"?[e,t,i,u]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function va(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof si||e instanceof wr||e instanceof $i||e instanceof Br)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!va(i[t]))return!1;return!0}if(typeof e=="object"){for(var u in e)if(!va(e[u]))return!1;return!0}return!1}function Vi(e){if(e===null)return it;if(typeof e=="string")return $e;if(typeof e=="boolean")return Ye;if(typeof e=="number")return ke;if(e instanceof si)return et;if(e instanceof wr)return Yt;if(e instanceof $i)return jt;if(e instanceof Br)return Ht;if(Array.isArray(e)){for(var t,i=e.length,u=0,f=e;u<f.length;u+=1){var m=Vi(f[u]);if(t){if(t===m)continue;t=nt;break}t=m}return oi(t||nt,i)}return qt}function ba(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof si||e instanceof $i||e instanceof Br?e.toString():JSON.stringify(e)}Br.prototype.toString=function(){return this.name},Br.fromString=function(e){return e?new Br({name:e,available:!1}):null},Br.prototype.serialize=function(){return["image",this.name]};var Sr=function(e,t){this.type=e,this.value=t};Sr.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!va(e[1]))return t.error("invalid value");var i=e[1],u=Vi(i),f=t.expectedType;return u.kind!=="array"||u.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(u=f),new Sr(u,i)},Sr.prototype.evaluate=function(){return this.value},Sr.prototype.eachChild=function(){},Sr.prototype.outputDefined=function(){return!0},Sr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof si?["rgba"].concat(this.value.toArray()):this.value instanceof $i?this.value.serialize():this.value};var er=function(e){this.name="ExpressionEvaluationError",this.message=e};er.prototype.toJSON=function(){return this.message};var hn={string:$e,number:ke,boolean:Ye,object:qt},Pi=function(e,t){this.type=e,this.args=t};Pi.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,u=1,f=e[0];if(f==="array"){var m,x;if(e.length>2){var E=e[1];if(typeof E!="string"||!(E in hn)||E==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);m=hn[E],u++}else m=nt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);x=e[2],u++}i=oi(m,x)}else i=hn[f];for(var A=[];u<e.length;u++){var P=t.parse(e[u],u,nt);if(!P)return null;A.push(P)}return new Pi(i,A)},Pi.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!fi(this.type,Vi(i)))return i;if(t===this.args.length-1)throw new er("Expected value to be of type "+ei(this.type)+", but found "+ei(Vi(i))+" instead.")}return null},Pi.prototype.eachChild=function(e){this.args.forEach(e)},Pi.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Pi.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var u=e.N;(typeof u=="number"||this.args.length>1)&&t.push(u)}}return t.concat(this.args.map(function(f){return f.serialize()}))};var Bn=function(e){this.type=jt,this.sections=e};Bn.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var u=[],f=!1,m=1;m<=e.length-1;++m){var x=e[m];if(f&&typeof x=="object"&&!Array.isArray(x)){f=!1;var E=null;if(x["font-scale"]&&!(E=t.parse(x["font-scale"],1,ke)))return null;var A=null;if(x["text-font"]&&!(A=t.parse(x["text-font"],1,oi($e))))return null;var P=null;if(x["text-color"]&&!(P=t.parse(x["text-color"],1,et)))return null;var D=u[u.length-1];D.scale=E,D.font=A,D.textColor=P}else{var F=t.parse(e[m],1,nt);if(!F)return null;var V=F.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,u.push({content:F,scale:null,font:null,textColor:null})}}return new Bn(u)},Bn.prototype.evaluate=function(e){return new $i(this.sections.map(function(t){var i=t.content.evaluate(e);return Vi(i)===Ht?new ha("",i,null,null,null):new ha(ba(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Bn.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var u=i[t];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},Bn.prototype.outputDefined=function(){return!1},Bn.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var u=i[t];e.push(u.content.serialize());var f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),e.push(f)}return e};var vn=function(e){this.type=Ht,this.input=e};vn.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,$e);return i?new vn(i):t.error("No image name provided.")},vn.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=Br.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},vn.prototype.eachChild=function(e){e(this.input)},vn.prototype.outputDefined=function(){return!1},vn.prototype.serialize=function(){return["image",this.input.serialize()]};var rs={"to-boolean":Ye,"to-color":et,"to-number":ke,"to-string":$e},Er=function(e,t){this.type=e,this.args=t};Er.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var u=rs[i],f=[],m=1;m<e.length;m++){var x=t.parse(e[m],m,nt);if(!x)return null;f.push(x)}return new Er(u,f)},Er.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var t,i,u=0,f=this.args;u<f.length;u+=1){if(i=null,(t=f[u].evaluate(e))instanceof si)return t;if(typeof t=="string"){var m=e.parseColor(t);if(m)return m}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Na(t[0],t[1],t[2],t[3])))return new si(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new er(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var x=null,E=0,A=this.args;E<A.length;E+=1){if((x=A[E].evaluate(e))===null)return 0;var P=Number(x);if(!isNaN(P))return P}throw new er("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?$i.fromString(ba(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Br.fromString(ba(this.args[0].evaluate(e))):ba(this.args[0].evaluate(e))},Er.prototype.eachChild=function(e){this.args.forEach(e)},Er.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Er.prototype.serialize=function(){if(this.type.kind==="formatted")return new Bn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new vn(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var xa=["Unknown","Point","LineString","Polygon"],Gr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Gr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Gr.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?xa[this.feature.type]:this.feature.type:null},Gr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Gr.prototype.canonicalID=function(){return this.canonical},Gr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Gr.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=si.parse(e)),t};var kr=function(e,t,i,u){this.name=e,this.type=t,this._evaluate=i,this.args=u};kr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},kr.prototype.eachChild=function(e){this.args.forEach(e)},kr.prototype.outputDefined=function(){return!1},kr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},kr.parse=function(e,t){var i,u=e[0],f=kr.definitions[u];if(!f)return t.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var m=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,E=x.filter(function(It){var pt=It[0];return!Array.isArray(pt)||pt.length===e.length-1}),A=null,P=0,D=E;P<D.length;P+=1){var F=D[P],V=F[0],j=F[1];A=new qi(t.registry,t.path,null,t.scope);for(var $=[],te=!1,he=1;he<e.length;he++){var oe=e[he],ye=Array.isArray(V)?V[he-1]:V.type,be=A.parse(oe,1+$.length,ye);if(!be){te=!0;break}$.push(be)}if(!te)if(Array.isArray(V)&&V.length!==$.length)A.error("Expected "+V.length+" arguments, but found "+$.length+" instead.");else{for(var Se=0;Se<$.length;Se++){var ze=Array.isArray(V)?V[Se]:V.type,Me=$[Se];A.concat(Se+1).checkSubtype(ze,Me.type)}if(A.errors.length===0)return new kr(u,m,j,$)}}if(E.length===1)(i=t.errors).push.apply(i,A.errors);else{for(var Ze=(E.length?E:x).map(function(It){var pt;return pt=It[0],Array.isArray(pt)?"("+pt.map(ei).join(", ")+")":"("+ei(pt.type)+"...)"}).join(" | "),tt=[],St=1;St<e.length;St++){var ut=t.parse(e[St],1+tt.length);if(!ut)return null;tt.push(ei(ut.type))}t.error("Expected arguments of type "+Ze+", but found ("+tt.join(", ")+") instead.")}return null},kr.register=function(e,t){for(var i in kr.definitions=t,t)e[i]=kr};var Qn=function(e,t,i){this.type=Yt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function Zr(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function wa(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function ns(e,t){var i=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(i*f*8192),Math.round(u*f*8192)]}function Fl(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function uo(e,t){for(var i,u,f,m,x,E,A,P=!1,D=0,F=t.length;D<F;D++)for(var V=t[D],j=0,$=V.length;j<$-1;j++){if((m=(i=e)[0]-(u=V[j])[0])*(A=i[1]-(f=V[j+1])[1])-(E=i[0]-f[0])*(x=i[1]-u[1])==0&&m*E<=0&&x*A<=0)return!1;Fl(e,V[j],V[j+1])&&(P=!P)}return P}function Ol(e,t){for(var i=0;i<t.length;i++)if(uo(e,t[i]))return!0;return!1}function Ro(e,t,i,u){var f=u[0]-i[0],m=u[1]-i[1],x=(e[0]-i[0])*m-f*(e[1]-i[1]),E=(t[0]-i[0])*m-f*(t[1]-i[1]);return x>0&&E<0||x<0&&E>0}function Nl(e,t,i){for(var u=0,f=i;u<f.length;u+=1)for(var m=f[u],x=0;x<m.length-1;++x)if((F=[(D=m[x+1])[0]-(P=m[x])[0],D[1]-P[1]])[0]*(V=[(A=t)[0]-(E=e)[0],A[1]-E[1]])[1]-F[1]*V[0]!=0&&Ro(E,A,P,D)&&Ro(P,D,E,A))return!0;var E,A,P,D,F,V;return!1}function Bo(e,t){for(var i=0;i<e.length;++i)if(!uo(e[i],t))return!1;for(var u=0;u<e.length-1;++u)if(Nl(e[u],e[u+1],t))return!1;return!0}function Os(e,t){for(var i=0;i<t.length;i++)if(Bo(e,t[i]))return!0;return!1}function Ua(e,t,i){for(var u=[],f=0;f<e.length;f++){for(var m=[],x=0;x<e[f].length;x++){var E=ns(e[f][x],i);Zr(t,E),m.push(E)}u.push(m)}return u}function as(e,t,i){for(var u=[],f=0;f<e.length;f++){var m=Ua(e[f],t,i);u.push(m)}return u}function co(e,t,i,u){if(e[0]<i[0]||e[0]>i[2]){var f=.5*u,m=e[0]-i[0]>f?-u:i[0]-e[0]>f?u:0;m===0&&(m=e[0]-i[2]>f?-u:i[2]-e[0]>f?u:0),e[0]+=m}Zr(t,e)}function Ns(e,t,i,u){for(var f=8192*Math.pow(2,u.z),m=[8192*u.x,8192*u.y],x=[],E=0,A=e;E<A.length;E+=1)for(var P=0,D=A[E];P<D.length;P+=1){var F=D[P],V=[F.x+m[0],F.y+m[1]];co(V,t,i,f),x.push(V)}return x}function Va(e,t,i,u){for(var f,m=8192*Math.pow(2,u.z),x=[8192*u.x,8192*u.y],E=[],A=0,P=e;A<P.length;A+=1){for(var D=[],F=0,V=P[A];F<V.length;F+=1){var j=V[F],$=[j.x+x[0],j.y+x[1]];Zr(t,$),D.push($)}E.push(D)}if(t[2]-t[0]<=m/2){(f=t)[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var te=0,he=E;te<he.length;te+=1)for(var oe=0,ye=he[te];oe<ye.length;oe+=1)co(ye[oe],t,i,m)}return E}Qn.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var u=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Ye);if(!u)return null;var f=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Ye);if(!f)return null;var m=null;return i.locale&&!(m=t.parse(i.locale,1,$e))?null:new Qn(u,f,m)},Qn.prototype.evaluate=function(e){return new wr(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Qn.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Qn.prototype.outputDefined=function(){return!1},Qn.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Fn=function(e,t){this.type=Ye,this.geojson=e,this.geometries=t};function Sa(e){if(e instanceof kr&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Fn)return!1;var t=!0;return e.eachChild(function(i){t&&!Sa(i)&&(t=!1)}),t}function _e(e){if(e instanceof kr&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!_e(i)&&(t=!1)}),t}function fn(e,t){if(e instanceof kr&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(u){i&&!fn(u,t)&&(i=!1)}),i}Fn.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(va(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var u=0;u<i.features.length;++u){var f=i.features[u].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Fn(i,i.features[u].geometry)}else if(i.type==="Feature"){var m=i.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Fn(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Fn(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Fn.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],m=t.canonicalID();if(i.type==="Polygon"){var x=Ua(i.coordinates,f,m),E=Ns(t.geometry(),u,f,m);if(!wa(u,f))return!1;for(var A=0,P=E;A<P.length;A+=1)if(!uo(P[A],x))return!1}if(i.type==="MultiPolygon"){var D=as(i.coordinates,f,m),F=Ns(t.geometry(),u,f,m);if(!wa(u,f))return!1;for(var V=0,j=F;V<j.length;V+=1)if(!Ol(j[V],D))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],m=t.canonicalID();if(i.type==="Polygon"){var x=Ua(i.coordinates,f,m),E=Va(t.geometry(),u,f,m);if(!wa(u,f))return!1;for(var A=0,P=E;A<P.length;A+=1)if(!Bo(P[A],x))return!1}if(i.type==="MultiPolygon"){var D=as(i.coordinates,f,m),F=Va(t.geometry(),u,f,m);if(!wa(u,f))return!1;for(var V=0,j=F;V<j.length;V+=1)if(!Os(j[V],D))return!1}return!0}(e,this.geometries)}return!1},Fn.prototype.eachChild=function(){},Fn.prototype.outputDefined=function(){return!0},Fn.prototype.serialize=function(){return["within",this.geojson]};var Kr=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Kr.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Kr(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Kr.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Kr.prototype.eachChild=function(){},Kr.prototype.outputDefined=function(){return!1},Kr.prototype.serialize=function(){return["var",this.name]};var qi=function(e,t,i,u,f){t===void 0&&(t=[]),u===void 0&&(u=new st),f===void 0&&(f=[]),this.registry=e,this.path=t,this.key=t.map(function(m){return"["+m+"]"}).join(""),this.scope=u,this.errors=f,this.expectedType=i};function Ea(e,t){for(var i,u=e.length-1,f=0,m=u,x=0;f<=m;)if((i=e[x=Math.floor((f+m)/2)])<=t){if(x===u||t<e[x+1])return x;f=x+1}else{if(!(i>t))throw new er("Input is not a number.");m=x-1}return 0}qi.prototype.parse=function(e,t,i,u,f){return f===void 0&&(f={}),t?this.concat(t,i,u)._parse(e,f):this._parse(e,f)},qi.prototype._parse=function(e,t){function i(P,D,F){return F==="assert"?new Pi(D,[P]):F==="coerce"?new Er(D,[P]):P}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if(typeof u!="string")return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var f=this.registry[u];if(f){var m=f.parse(e,this);if(!m)return null;if(this.expectedType){var x=this.expectedType,E=m.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||E.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(x,E))return null}else m=i(m,x,t.typeAnnotation||"coerce");else m=i(m,x,t.typeAnnotation||"assert")}if(!(m instanceof Sr)&&m.type.kind!=="resolvedImage"&&function P(D){if(D instanceof Kr)return P(D.boundExpression);if(D instanceof kr&&D.name==="error"||D instanceof Qn||D instanceof Fn)return!1;var F=D instanceof Er||D instanceof Pi,V=!0;return D.eachChild(function(j){V=F?V&&P(j):V&&j instanceof Sr}),!!V&&Sa(D)&&fn(D,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(m)){var A=new Gr;try{m=new Sr(m.type,m.evaluate(A))}catch(P){return this.error(P.message),null}}return m}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},qi.prototype.concat=function(e,t,i){var u=typeof e=="number"?this.path.concat(e):this.path,f=i?this.scope.concat(i):this.scope;return new qi(this.registry,u,t||null,f,this.errors)},qi.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var u=""+this.key+t.map(function(f){return"["+f+"]"}).join("");this.errors.push(new Le(u,e))},qi.prototype.checkSubtype=function(e,t){var i=fi(e,t);return i&&this.error(i),i};var On=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var u=0,f=i;u<f.length;u+=1){var m=f[u],x=m[1];this.labels.push(m[0]),this.outputs.push(x)}};function _r(e,t,i){return e*(1-i)+t*i}On.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,ke);if(!i)return null;var u=[],f=null;t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(var m=1;m<e.length;m+=2){var x=m===1?-1/0:e[m],E=e[m+1],A=m,P=m+1;if(typeof x!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(u.length&&u[u.length-1][0]>=x)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);var D=t.parse(E,P,f);if(!D)return null;f=f||D.type,u.push([x,D])}return new On(f,i,u)},On.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return i[0].evaluate(e);var f=t.length;return u>=t[f-1]?i[f-1].evaluate(e):i[Ea(t,u)].evaluate(e)},On.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},On.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},On.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Fo=Object.freeze({__proto__:null,number:_r,color:function(e,t,i){return new si(_r(e.r,t.r,i),_r(e.g,t.g,i),_r(e.b,t.b,i),_r(e.a,t.a,i))},array:function(e,t,i){return e.map(function(u,f){return _r(u,t[f],i)})}}),ec=6/29*3*(6/29),Rp=Math.PI/180,Bp=180/Math.PI;function Ul(e){return e>.008856451679035631?Math.pow(e,1/3):e/ec+4/29}function Vl(e){return e>6/29?e*e*e:ec*(e-4/29)}function ql(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function jl(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tc(e){var t=jl(e.r),i=jl(e.g),u=jl(e.b),f=Ul((.4124564*t+.3575761*i+.1804375*u)/.95047),m=Ul((.2126729*t+.7151522*i+.072175*u)/1);return{l:116*m-16,a:500*(f-m),b:200*(m-Ul((.0193339*t+.119192*i+.9503041*u)/1.08883)),alpha:e.a}}function ic(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,u=isNaN(e.b)?t:t-e.b/200;return t=1*Vl(t),i=.95047*Vl(i),u=1.08883*Vl(u),new si(ql(3.2404542*i-1.5371385*t-.4985314*u),ql(-.969266*i+1.8760108*t+.041556*u),ql(.0556434*i-.2040259*t+1.0572252*u),e.alpha)}function Fp(e,t,i){var u=t-e;return e+i*(u>180||u<-180?u-360*Math.round(u/360):u)}var os={forward:tc,reverse:ic,interpolate:function(e,t,i){return{l:_r(e.l,t.l,i),a:_r(e.a,t.a,i),b:_r(e.b,t.b,i),alpha:_r(e.alpha,t.alpha,i)}}},ss={forward:function(e){var t=tc(e),i=t.l,u=t.a,f=t.b,m=Math.atan2(f,u)*Bp;return{h:m<0?m+360:m,c:Math.sqrt(u*u+f*f),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Rp,i=e.c;return ic({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Fp(e.h,t.h,i),c:_r(e.c,t.c,i),l:_r(e.l,t.l,i),alpha:_r(e.alpha,t.alpha,i)}}},rc=Object.freeze({__proto__:null,lab:os,hcl:ss}),rn=function(e,t,i,u,f){this.type=e,this.operator=t,this.interpolation=i,this.input=u,this.labels=[],this.outputs=[];for(var m=0,x=f;m<x.length;m+=1){var E=x[m],A=E[1];this.labels.push(E[0]),this.outputs.push(A)}};function Gl(e,t,i,u){var f=u-i,m=e-i;return f===0?0:t===1?m/f:(Math.pow(t,m)-1)/(Math.pow(t,f)-1)}rn.interpolationFactor=function(e,t,i,u){var f=0;if(e.name==="exponential")f=Gl(t,e.base,i,u);else if(e.name==="linear")f=Gl(t,1,i,u);else if(e.name==="cubic-bezier"){var m=e.controlPoints;f=new T(m[0],m[1],m[2],m[3]).solve(Gl(t,1,i,u))}return f},rn.parse=function(e,t){var i=e[0],u=e[1],f=e[2],m=e.slice(3);if(!Array.isArray(u)||u.length===0)return t.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){var x=u[1];if(typeof x!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:x}}else{if(u[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(u[0]),1,0);var E=u.slice(1);if(E.length!==4||E.some(function(he){return typeof he!="number"||he<0||he>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:E}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(f=t.parse(f,2,ke)))return null;var A=[],P=null;i==="interpolate-hcl"||i==="interpolate-lab"?P=et:t.expectedType&&t.expectedType.kind!=="value"&&(P=t.expectedType);for(var D=0;D<m.length;D+=2){var F=m[D],V=m[D+1],j=D+3,$=D+4;if(typeof F!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(A.length&&A[A.length-1][0]>=F)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);var te=t.parse(V,$,P);if(!te)return null;P=P||te.type,A.push([F,te])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new rn(P,i,u,f,A):t.error("Type "+ei(P)+" is not interpolatable.")},rn.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return i[0].evaluate(e);var f=t.length;if(u>=t[f-1])return i[f-1].evaluate(e);var m=Ea(t,u),x=rn.interpolationFactor(this.interpolation,u,t[m],t[m+1]),E=i[m].evaluate(e),A=i[m+1].evaluate(e);return this.operator==="interpolate"?Fo[this.type.kind.toLowerCase()](E,A,x):this.operator==="interpolate-hcl"?ss.reverse(ss.interpolate(ss.forward(E),ss.forward(A),x)):os.reverse(os.interpolate(os.forward(E),os.forward(A),x))},rn.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},rn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},rn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var qa=function(e,t){this.type=e,this.args=t};qa.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,u=t.expectedType;u&&u.kind!=="value"&&(i=u);for(var f=[],m=0,x=e.slice(1);m<x.length;m+=1){var E=t.parse(x[m],1+f.length,i,void 0,{typeAnnotation:"omit"});if(!E)return null;i=i||E.type,f.push(E)}var A=u&&f.some(function(P){return fi(u,P.type)});return new qa(A?nt:i,f)},qa.prototype.evaluate=function(e){for(var t,i=null,u=0,f=0,m=this.args;f<m.length&&(u++,(i=m[f].evaluate(e))&&i instanceof Br&&!i.available&&(t||(t=i.name),i=null,u===this.args.length&&(i=t)),i===null);f+=1);return i},qa.prototype.eachChild=function(e){this.args.forEach(e)},qa.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},qa.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ja=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};ja.prototype.evaluate=function(e){return this.result.evaluate(e)},ja.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},ja.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],u=1;u<e.length-1;u+=2){var f=e[u];if(typeof f!="string")return t.error("Expected string, but found "+typeof f+" instead.",u);if(/[^a-zA-Z0-9_]/.test(f))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);var m=t.parse(e[u+1],u+1);if(!m)return null;i.push([f,m])}var x=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return x?new ja(i,x):null},ja.prototype.outputDefined=function(){return this.result.outputDefined()},ja.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var u=i[t];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var po=function(e,t,i){this.type=e,this.index=t,this.input=i};po.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,ke),u=t.parse(e[2],2,oi(t.expectedType||nt));return i&&u?new po(u.type.itemType,i,u):null},po.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new er("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new er("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new er("Array index must be an integer, but found "+t+" instead.");return i[t]},po.prototype.eachChild=function(e){e(this.index),e(this.input)},po.prototype.outputDefined=function(){return!1},po.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ho=function(e,t){this.type=Ye,this.needle=e,this.haystack=t};ho.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,nt),u=t.parse(e[2],2,nt);return i&&u?Li(i.type,[Ye,$e,ke,it,nt])?new ho(i,u):t.error("Expected first argument to be of type boolean, string, number or null, but found "+ei(i.type)+" instead"):null},ho.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!_i(t,["boolean","string","number","null"]))throw new er("Expected first argument to be of type boolean, string, number or null, but found "+ei(Vi(t))+" instead.");if(!_i(i,["string","array"]))throw new er("Expected second argument to be of type array or string, but found "+ei(Vi(i))+" instead.");return i.indexOf(t)>=0},ho.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},ho.prototype.outputDefined=function(){return!0},ho.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ga=function(e,t,i){this.type=ke,this.needle=e,this.haystack=t,this.fromIndex=i};Ga.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,nt),u=t.parse(e[2],2,nt);if(!i||!u)return null;if(!Li(i.type,[Ye,$e,ke,it,nt]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+ei(i.type)+" instead");if(e.length===4){var f=t.parse(e[3],3,ke);return f?new Ga(i,u,f):null}return new Ga(i,u)},Ga.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!_i(t,["boolean","string","number","null"]))throw new er("Expected first argument to be of type boolean, string, number or null, but found "+ei(Vi(t))+" instead.");if(!_i(i,["string","array"]))throw new er("Expected second argument to be of type array or string, but found "+ei(Vi(i))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return i.indexOf(t,u)}return i.indexOf(t)},Ga.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Ga.prototype.outputDefined=function(){return!1},Ga.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var fo=function(e,t,i,u,f,m){this.inputType=e,this.type=t,this.input=i,this.cases=u,this.outputs=f,this.otherwise=m};fo.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,u;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(var f={},m=[],x=2;x<e.length-1;x+=2){var E=e[x],A=e[x+1];Array.isArray(E)||(E=[E]);var P=t.concat(x);if(E.length===0)return P.error("Expected at least one branch label.");for(var D=0,F=E;D<F.length;D+=1){var V=F[D];if(typeof V!="number"&&typeof V!="string")return P.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return P.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof V=="number"&&Math.floor(V)!==V)return P.error("Numeric branch labels must be integer values.");if(i){if(P.checkSubtype(i,Vi(V)))return null}else i=Vi(V);if(f[String(V)]!==void 0)return P.error("Branch labels must be unique.");f[String(V)]=m.length}var j=t.parse(A,x,u);if(!j)return null;u=u||j.type,m.push(j)}var $=t.parse(e[1],1,nt);if(!$)return null;var te=t.parse(e[e.length-1],e.length-1,u);return te?$.type.kind!=="value"&&t.concat(1).checkSubtype(i,$.type)?null:new fo(i,u,$,f,m,te):null},fo.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Vi(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},fo.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},fo.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},fo.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],u={},f=0,m=Object.keys(this.cases).sort();f<m.length;f+=1){var x=m[f];(F=u[this.cases[x]])===void 0?(u[this.cases[x]]=i.length,i.push([this.cases[x],[x]])):i[F][1].push(x)}for(var E=function(j){return e.inputType.kind==="number"?Number(j):j},A=0,P=i;A<P.length;A+=1){var D=P[A],F=D[0],V=D[1];t.push(V.length===1?E(V[0]):V.map(E)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var mo=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};mo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var u=[],f=1;f<e.length-1;f+=2){var m=t.parse(e[f],f,Ye);if(!m)return null;var x=t.parse(e[f+1],f+1,i);if(!x)return null;u.push([m,x]),i=i||x.type}var E=t.parse(e[e.length-1],e.length-1,i);return E?new mo(i,u,E):null},mo.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var u=i[t],f=u[1];if(u[0].evaluate(e))return f.evaluate(e)}return this.otherwise.evaluate(e)},mo.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var u=i[t],f=u[1];e(u[0]),e(f)}e(this.otherwise)},mo.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},mo.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Za=function(e,t,i,u){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=u};function nc(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function ac(e,t,i,u){return u.compare(t,i)===0}function Mi(e,t,i){var u=e!=="=="&&e!=="!=";return function(){function f(m,x,E){this.type=Ye,this.lhs=m,this.rhs=x,this.collator=E,this.hasUntypedArgument=m.type.kind==="value"||x.type.kind==="value"}return f.parse=function(m,x){if(m.length!==3&&m.length!==4)return x.error("Expected two or three arguments.");var E=m[0],A=x.parse(m[1],1,nt);if(!A)return null;if(!nc(E,A.type))return x.concat(1).error('"'+E+`" comparisons are not supported for type '`+ei(A.type)+"'.");var P=x.parse(m[2],2,nt);if(!P)return null;if(!nc(E,P.type))return x.concat(2).error('"'+E+`" comparisons are not supported for type '`+ei(P.type)+"'.");if(A.type.kind!==P.type.kind&&A.type.kind!=="value"&&P.type.kind!=="value")return x.error("Cannot compare types '"+ei(A.type)+"' and '"+ei(P.type)+"'.");u&&(A.type.kind==="value"&&P.type.kind!=="value"?A=new Pi(P.type,[A]):A.type.kind!=="value"&&P.type.kind==="value"&&(P=new Pi(A.type,[P])));var D=null;if(m.length===4){if(A.type.kind!=="string"&&P.type.kind!=="string"&&A.type.kind!=="value"&&P.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(D=x.parse(m[3],3,Yt)))return null}return new f(A,P,D)},f.prototype.evaluate=function(m){var x=this.lhs.evaluate(m),E=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){var A=Vi(x),P=Vi(E);if(A.kind!==P.kind||A.kind!=="string"&&A.kind!=="number")throw new er('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+A.kind+", "+P.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var D=Vi(x),F=Vi(E);if(D.kind!=="string"||F.kind!=="string")return t(m,x,E)}return this.collator?i(m,x,E,this.collator.evaluate(m)):t(m,x,E)},f.prototype.eachChild=function(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)},f.prototype.outputDefined=function(){return!0},f.prototype.serialize=function(){var m=[e];return this.eachChild(function(x){m.push(x.serialize())}),m},f}()}Za.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,nt),u=t.parse(e[2],2,ke);if(!i||!u)return null;if(!Li(i.type,[oi(nt),$e,nt]))return t.error("Expected first argument to be of type array or string, but found "+ei(i.type)+" instead");if(e.length===4){var f=t.parse(e[3],3,ke);return f?new Za(i.type,i,u,f):null}return new Za(i.type,i,u)},Za.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!_i(t,["string","array"]))throw new er("Expected first argument to be of type array or string, but found "+ei(Vi(t))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return t.slice(i,u)}return t.slice(i)},Za.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Za.prototype.outputDefined=function(){return!1},Za.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Op=Mi("==",function(e,t,i){return t===i},ac),Us=Mi("!=",function(e,t,i){return t!==i},function(e,t,i,u){return!ac(0,t,i,u)}),oc=Mi("<",function(e,t,i){return t<i},function(e,t,i,u){return u.compare(t,i)<0}),sc=Mi(">",function(e,t,i){return t>i},function(e,t,i,u){return u.compare(t,i)>0}),lc=Mi("<=",function(e,t,i){return t<=i},function(e,t,i,u){return u.compare(t,i)<=0}),uc=Mi(">=",function(e,t,i){return t>=i},function(e,t,i,u){return u.compare(t,i)>=0}),go=function(e,t,i,u,f){this.type=$e,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=u,this.maxFractionDigits=f};go.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,ke);if(!i)return null;var u=e[2];if(typeof u!="object"||Array.isArray(u))return t.error("NumberFormat options argument must be an object.");var f=null;if(u.locale&&!(f=t.parse(u.locale,1,$e)))return null;var m=null;if(u.currency&&!(m=t.parse(u.currency,1,$e)))return null;var x=null;if(u["min-fraction-digits"]&&!(x=t.parse(u["min-fraction-digits"],1,ke)))return null;var E=null;return u["max-fraction-digits"]&&!(E=t.parse(u["max-fraction-digits"],1,ke))?null:new go(i,f,m,x,E)},go.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},go.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},go.prototype.outputDefined=function(){return!1},go.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Ka=function(e){this.type=ke,this.input=e};Ka.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+ei(i.type)+" instead."):new Ka(i):null},Ka.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new er("Expected value to be of type string or array, but found "+ei(Vi(t))+" instead.")},Ka.prototype.eachChild=function(e){e(this.input)},Ka.prototype.outputDefined=function(){return!1},Ka.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var yo={"==":Op,"!=":Us,">":sc,"<":oc,">=":uc,"<=":lc,array:Pi,at:po,boolean:Pi,case:mo,coalesce:qa,collator:Qn,format:Bn,image:vn,in:ho,"index-of":Ga,interpolate:rn,"interpolate-hcl":rn,"interpolate-lab":rn,length:Ka,let:ja,literal:Sr,match:fo,number:Pi,"number-format":go,object:Pi,slice:Za,step:On,string:Pi,"to-boolean":Er,"to-color":Er,"to-number":Er,"to-string":Er,var:Kr,within:Fn};function cc(e,t){var i=t[0],u=t[1],f=t[2],m=t[3];i=i.evaluate(e),u=u.evaluate(e),f=f.evaluate(e);var x=m?m.evaluate(e):1,E=Na(i,u,f,x);if(E)throw new er(E);return new si(i/255*x,u/255*x,f/255*x,x)}function pc(e,t){return e in t}function Zl(e,t){var i=t[e];return i===void 0?null:i}function _o(e){return{type:e}}function hc(e){return{result:"success",value:e}}function vo(e){return{result:"error",value:e}}function bo(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function fc(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ls(e){return!!e.expression&&e.expression.interpolated}function Ri(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Vs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Np(e){return e}function Oo(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function dc(e,t,i,u,f){return Oo(typeof i===f?u[i]:void 0,e.default,t.default)}function Up(e,t,i){if(Ri(i)!=="number")return Oo(e.default,t.default);var u=e.stops.length;if(u===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[u-1][0])return e.stops[u-1][1];var f=Ea(e.stops.map(function(m){return m[0]}),i);return e.stops[f][1]}function mc(e,t,i){var u=e.base!==void 0?e.base:1;if(Ri(i)!=="number")return Oo(e.default,t.default);var f=e.stops.length;if(f===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[f-1][0])return e.stops[f-1][1];var m=Ea(e.stops.map(function(F){return F[0]}),i),x=function(F,V,j,$){var te=$-j,he=F-j;return te===0?0:V===1?he/te:(Math.pow(V,he)-1)/(Math.pow(V,te)-1)}(i,u,e.stops[m][0],e.stops[m+1][0]),E=e.stops[m][1],A=e.stops[m+1][1],P=Fo[t.type]||Np;if(e.colorSpace&&e.colorSpace!=="rgb"){var D=rc[e.colorSpace];P=function(F,V){return D.reverse(D.interpolate(D.forward(F),D.forward(V),x))}}return typeof E.evaluate=="function"?{evaluate:function(){for(var F=[],V=arguments.length;V--;)F[V]=arguments[V];var j=E.evaluate.apply(void 0,F),$=A.evaluate.apply(void 0,F);if(j!==void 0&&$!==void 0)return P(j,$,x)}}:P(E,A,x)}function qs(e,t,i){return t.type==="color"?i=si.parse(i):t.type==="formatted"?i=$i.fromString(i.toString()):t.type==="resolvedImage"?i=Br.fromString(i.toString()):Ri(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),Oo(i,e.default,t.default)}kr.register(yo,{error:[{kind:"error"},[$e],function(e,t){throw new er(t[0].evaluate(e))}],typeof:[$e,[nt],function(e,t){return ei(Vi(t[0].evaluate(e)))}],"to-rgba":[oi(ke,4),[et],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[et,[ke,ke,ke],cc],rgba:[et,[ke,ke,ke,ke],cc],has:{type:Ye,overloads:[[[$e],function(e,t){return pc(t[0].evaluate(e),e.properties())}],[[$e,qt],function(e,t){var i=t[1];return pc(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:nt,overloads:[[[$e],function(e,t){return Zl(t[0].evaluate(e),e.properties())}],[[$e,qt],function(e,t){var i=t[1];return Zl(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[nt,[$e],function(e,t){return Zl(t[0].evaluate(e),e.featureState||{})}],properties:[qt,[],function(e){return e.properties()}],"geometry-type":[$e,[],function(e){return e.geometryType()}],id:[nt,[],function(e){return e.id()}],zoom:[ke,[],function(e){return e.globals.zoom}],"heatmap-density":[ke,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[ke,[],function(e){return e.globals.lineProgress||0}],accumulated:[nt,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[ke,_o(ke),function(e,t){for(var i=0,u=0,f=t;u<f.length;u+=1)i+=f[u].evaluate(e);return i}],"*":[ke,_o(ke),function(e,t){for(var i=1,u=0,f=t;u<f.length;u+=1)i*=f[u].evaluate(e);return i}],"-":{type:ke,overloads:[[[ke,ke],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[ke],function(e,t){return-t[0].evaluate(e)}]]},"/":[ke,[ke,ke],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[ke,[ke,ke],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[ke,[],function(){return Math.LN2}],pi:[ke,[],function(){return Math.PI}],e:[ke,[],function(){return Math.E}],"^":[ke,[ke,ke],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[ke,[ke],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[ke,[ke],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[ke,[ke],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[ke,[ke],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[ke,[ke],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[ke,[ke],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[ke,[ke],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[ke,[ke],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[ke,[ke],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[ke,[ke],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[ke,_o(ke),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[ke,_o(ke),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[ke,[ke],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[ke,[ke],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[ke,[ke],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[ke,[ke],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Ye,[$e,nt],function(e,t){var i=t[0],u=t[1];return e.properties()[i.value]===u.value}],"filter-id-==":[Ye,[nt],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Ye,[$e],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Ye,[$e,nt],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f<m}],"filter-id-<":[Ye,[nt],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u<f}],"filter->":[Ye,[$e,nt],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f>m}],"filter-id->":[Ye,[nt],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u>f}],"filter-<=":[Ye,[$e,nt],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[Ye,[nt],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u<=f}],"filter->=":[Ye,[$e,nt],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[Ye,[nt],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u>=f}],"filter-has":[Ye,[nt],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Ye,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Ye,[oi($e)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ye,[oi(nt)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ye,[$e,oi(nt)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Ye,[$e,oi(nt)],function(e,t){var i=t[0],u=t[1];return function(f,m,x,E){for(;x<=E;){var A=x+E>>1;if(m[A]===f)return!0;m[A]>f?E=A-1:x=A+1}return!1}(e.properties()[i.value],u.value,0,u.value.length-1)}],all:{type:Ye,overloads:[[[Ye,Ye],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[_o(Ye),function(e,t){for(var i=0,u=t;i<u.length;i+=1)if(!u[i].evaluate(e))return!1;return!0}]]},any:{type:Ye,overloads:[[[Ye,Ye],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[_o(Ye),function(e,t){for(var i=0,u=t;i<u.length;i+=1)if(u[i].evaluate(e))return!0;return!1}]]},"!":[Ye,[Ye],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Ye,[$e],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[$e,[$e],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[$e,[$e],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[$e,_o(nt),function(e,t){return t.map(function(i){return ba(i.evaluate(e))}).join("")}],"resolved-locale":[$e,[Yt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var No=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Gr,this._defaultValue=t?function(i){return i.type==="color"&&Vs(i.default)?new si(0,0,0,0):i.type==="color"?si.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function us(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in yo}function js(e,t){var i=new qi(yo,[],t?function(f){var m={color:et,string:$e,number:ke,enum:$e,boolean:Ye,formatted:jt,resolvedImage:Ht};return f.type==="array"?oi(m[f.value]||nt,f.length):m[f.type]}(t):void 0),u=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?hc(new No(u,t)):vo(i.errors)}No.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=u,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)},No.prototype.evaluate=function(e,t,i,u,f,m){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=u,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new er("Expected value to be one of "+Object.keys(this._enumValues).map(function(E){return JSON.stringify(E)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}};var cs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!_e(t.expression)};cs.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,u,f,m)},cs.prototype.evaluate=function(e,t,i,u,f,m){return this._styleExpression.evaluate(e,t,i,u,f,m)};var Uo=function(e,t,i,u){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!_e(t.expression),this.interpolationType=u};function gc(e,t){if((e=js(e,t)).result==="error")return e;var i=e.value.expression,u=Sa(i);if(!u&&!bo(t))return vo([new Le("","data expressions not supported")]);var f=fn(i,["zoom"]);if(!f&&!fc(t))return vo([new Le("","zoom expressions not supported")]);var m=function x(E){var A=null;if(E instanceof ja)A=x(E.result);else if(E instanceof qa)for(var P=0,D=E.args;P<D.length&&!(A=x(D[P]));P+=1);else(E instanceof On||E instanceof rn)&&E.input instanceof kr&&E.input.name==="zoom"&&(A=E);return A instanceof Le||E.eachChild(function(F){var V=x(F);V instanceof Le?A=V:!A&&V?A=new Le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&V&&A!==V&&(A=new Le("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}(i);return m||f?m instanceof Le?vo([m]):m instanceof rn&&!ls(t)?vo([new Le("",'"interpolate" expressions cannot be used with this property')]):hc(m?new Uo(u?"camera":"composite",e.value,m.labels,m instanceof rn?m.interpolation:void 0):new cs(u?"constant":"source",e.value)):vo([new Le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Uo.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,u,f,m)},Uo.prototype.evaluate=function(e,t,i,u,f,m){return this._styleExpression.evaluate(e,t,i,u,f,m)},Uo.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?rn.interpolationFactor(this.interpolationType,e,t,i):0};var Vo=function(e,t){this._parameters=e,this._specification=t,Ce(this,function i(u,f){var m,x,E,A=f.type==="color",P=u.stops&&typeof u.stops[0][0]=="object",D=P||!(P||u.property!==void 0),F=u.type||(ls(f)?"exponential":"interval");if(A&&((u=Ce({},u)).stops&&(u.stops=u.stops.map(function(ut){return[ut[0],si.parse(ut[1])]})),u.default=si.parse(u.default?u.default:f.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!rc[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if(F==="exponential")m=mc;else if(F==="interval")m=Up;else if(F==="categorical"){m=dc,x=Object.create(null);for(var V=0,j=u.stops;V<j.length;V+=1){var $=j[V];x[$[0]]=$[1]}E=typeof u.stops[0][0]}else{if(F!=="identity")throw new Error('Unknown function type "'+F+'"');m=qs}if(P){for(var te={},he=[],oe=0;oe<u.stops.length;oe++){var ye=u.stops[oe],be=ye[0].zoom;te[be]===void 0&&(te[be]={zoom:be,type:u.type,property:u.property,default:u.default,stops:[]},he.push(be)),te[be].stops.push([ye[0].value,ye[1]])}for(var Se=[],ze=0,Me=he;ze<Me.length;ze+=1){var Ze=Me[ze];Se.push([te[Ze].zoom,i(te[Ze],f)])}var tt={name:"linear"};return{kind:"composite",interpolationType:tt,interpolationFactor:rn.interpolationFactor.bind(void 0,tt),zoomStops:Se.map(function(ut){return ut[0]}),evaluate:function(ut,It){var pt=ut.zoom;return mc({stops:Se,base:u.base},f,pt).evaluate(pt,It)}}}if(D){var St=F==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:St,interpolationFactor:rn.interpolationFactor.bind(void 0,St),zoomStops:u.stops.map(function(ut){return ut[0]}),evaluate:function(ut){return m(u,f,ut.zoom,x,E)}}}return{kind:"source",evaluate:function(ut,It){var pt=It&&It.properties?It.properties[u.property]:void 0;return pt===void 0?Oo(u.default,f.default):m(u,f,pt,x,E)}}}(this._parameters,this._specification))};function fa(e){var t=e.key,i=e.value,u=e.valueSpec||{},f=e.objectElementValidators||{},m=e.style,x=e.styleSpec,E=[],A=Ri(i);if(A!=="object")return[new ee(t,i,"object expected, "+A+" found")];for(var P in i){var D=P.split(".")[0],F=u[D]||u["*"],V=void 0;if(f[D])V=f[D];else if(u[D])V=li;else if(f["*"])V=f["*"];else{if(!u["*"]){E.push(new ee(t,i[P],'unknown property "'+P+'"'));continue}V=li}E=E.concat(V({key:(t&&t+".")+P,value:i[P],valueSpec:F,style:m,styleSpec:x,object:i,objectKey:P},i))}for(var j in u)f[j]||u[j].required&&u[j].default===void 0&&i[j]===void 0&&E.push(new ee(t,i,'missing required property "'+j+'"'));return E}function yc(e){var t=e.value,i=e.valueSpec,u=e.style,f=e.styleSpec,m=e.key,x=e.arrayElementValidator||li;if(Ri(t)!=="array")return[new ee(m,t,"array expected, "+Ri(t)+" found")];if(i.length&&t.length!==i.length)return[new ee(m,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new ee(m,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var E={type:i.value,values:i.values};f.$version<7&&(E.function=i.function),Ri(i.value)==="object"&&(E=i.value);for(var A=[],P=0;P<t.length;P++)A=A.concat(x({array:t,arrayIndex:P,value:t[P],valueSpec:E,style:u,styleSpec:f,key:m+"["+P+"]"}));return A}function _c(e){var t=e.key,i=e.value,u=e.valueSpec,f=Ri(i);return f==="number"&&i!=i&&(f="NaN"),f!=="number"?[new ee(t,i,"number expected, "+f+" found")]:"minimum"in u&&i<u.minimum?[new ee(t,i,i+" is less than the minimum value "+u.minimum)]:"maximum"in u&&i>u.maximum?[new ee(t,i,i+" is greater than the maximum value "+u.maximum)]:[]}function vc(e){var t,i,u,f=e.valueSpec,m=Fe(e.value.type),x={},E=m!=="categorical"&&e.value.property===void 0,A=!E,P=Ri(e.value.stops)==="array"&&Ri(e.value.stops[0])==="array"&&Ri(e.value.stops[0][0])==="object",D=fa({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(j){if(m==="identity")return[new ee(j.key,j.value,'identity function may not have a "stops" property')];var $=[],te=j.value;return $=$.concat(yc({key:j.key,value:te,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:F})),Ri(te)==="array"&&te.length===0&&$.push(new ee(j.key,te,"array must have at least one stop")),$},default:function(j){return li({key:j.key,value:j.value,valueSpec:f,style:j.style,styleSpec:j.styleSpec})}}});return m==="identity"&&E&&D.push(new ee(e.key,e.value,'missing required property "property"')),m==="identity"||e.value.stops||D.push(new ee(e.key,e.value,'missing required property "stops"')),m==="exponential"&&e.valueSpec.expression&&!ls(e.valueSpec)&&D.push(new ee(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(A&&!bo(e.valueSpec)?D.push(new ee(e.key,e.value,"property functions not supported")):E&&!fc(e.valueSpec)&&D.push(new ee(e.key,e.value,"zoom functions not supported"))),m!=="categorical"&&!P||e.value.property!==void 0||D.push(new ee(e.key,e.value,'"property" property is required')),D;function F(j){var $=[],te=j.value,he=j.key;if(Ri(te)!=="array")return[new ee(he,te,"array expected, "+Ri(te)+" found")];if(te.length!==2)return[new ee(he,te,"array length 2 expected, length "+te.length+" found")];if(P){if(Ri(te[0])!=="object")return[new ee(he,te,"object expected, "+Ri(te[0])+" found")];if(te[0].zoom===void 0)return[new ee(he,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new ee(he,te,"object stop key must have value")];if(u&&u>Fe(te[0].zoom))return[new ee(he,te[0].zoom,"stop zoom values must appear in ascending order")];Fe(te[0].zoom)!==u&&(u=Fe(te[0].zoom),i=void 0,x={}),$=$.concat(fa({key:he+"[0]",value:te[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:_c,value:V}}))}else $=$.concat(V({key:he+"[0]",value:te[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},te));return us(we(te[1]))?$.concat([new ee(he+"[1]",te[1],"expressions are not allowed in function stops.")]):$.concat(li({key:he+"[1]",value:te[1],valueSpec:f,style:j.style,styleSpec:j.styleSpec}))}function V(j,$){var te=Ri(j.value),he=Fe(j.value),oe=j.value!==null?j.value:$;if(t){if(te!==t)return[new ee(j.key,oe,te+" stop domain type must match previous stop domain type "+t)]}else t=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new ee(j.key,oe,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&m!=="categorical"){var ye="number expected, "+te+" found";return bo(f)&&m===void 0&&(ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ee(j.key,oe,ye)]}return m!=="categorical"||te!=="number"||isFinite(he)&&Math.floor(he)===he?m!=="categorical"&&te==="number"&&i!==void 0&&he<i?[new ee(j.key,oe,"stop domain values must appear in ascending order")]:(i=he,m==="categorical"&&he in x?[new ee(j.key,oe,"stop domain values must be unique")]:(x[he]=!0,[])):[new ee(j.key,oe,"integer expected, found "+he)]}}function xo(e){var t=(e.expressionContext==="property"?gc:js)(we(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(u){return new ee(""+e.key+u.key,e.value,u.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new ee(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!_e(i))return[new ee(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!_e(i))return[new ee(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!fn(i,["zoom","feature-state"]))return[new ee(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Sa(i))return[new ee(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ps(e){var t=e.key,i=e.value,u=e.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(Fe(i))===-1&&f.push(new ee(t,i,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(u.values).indexOf(Fe(i))===-1&&f.push(new ee(t,i,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(i)+" found")),f}function Gs(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var u=i[t];if(!Gs(u)&&typeof u!="boolean")return!1}return!0;default:return!0}}Vo.deserialize=function(e){return new Vo(e._parameters,e._specification)},Vo.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Kl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Zs(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Gs(e)||(e=Ks(e));var t=js(e,Kl);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,u,f){return t.value.evaluate(i,u,{},f)},needGeometry:function i(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(var f=1;f<u.length;f++)if(i(u[f]))return!0;return!1}(e)}}function Vp(e,t){return e<t?-1:e>t?1:0}function Ks(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?Hl(e[1],e[2],"=="):i==="!="?Hs(Hl(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Hl(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(Ks))):i==="all"?["all"].concat(e.slice(1).map(Ks)):i==="none"?["all"].concat(e.slice(1).map(Ks).map(Hs)):i==="in"?bc(e[1],e.slice(2)):i==="!in"?Hs(bc(e[1],e.slice(2))):i==="has"?xc(e[1]):i==="!has"?Hs(xc(e[1])):i!=="within"||e}function Hl(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function bc(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Vp)]]:["filter-in-small",e,["literal",t]]}}function xc(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Hs(e){return["!",e]}function Wl(e){return Gs(we(e.value))?xo(Ce({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var u=i.value,f=i.key;if(Ri(u)!=="array")return[new ee(f,u,"array expected, "+Ri(u)+" found")];var m,x=i.styleSpec,E=[];if(u.length<1)return[new ee(f,u,"filter array must have at least 1 element")];switch(E=E.concat(ps({key:f+"[0]",value:u[0],valueSpec:x.filter_operator,style:i.style,styleSpec:i.styleSpec})),Fe(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Fe(u[1])==="$type"&&E.push(new ee(f,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":u.length!==3&&E.push(new ee(f,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&(m=Ri(u[1]))!=="string"&&E.push(new ee(f+"[1]",u[1],"string expected, "+m+" found"));for(var A=2;A<u.length;A++)m=Ri(u[A]),Fe(u[1])==="$type"?E=E.concat(ps({key:f+"["+A+"]",value:u[A],valueSpec:x.geometry_type,style:i.style,styleSpec:i.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&E.push(new ee(f+"["+A+"]",u[A],"string, number, or boolean expected, "+m+" found"));break;case"any":case"all":case"none":for(var P=1;P<u.length;P++)E=E.concat(t({key:f+"["+P+"]",value:u[P],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":m=Ri(u[1]),u.length!==2?E.push(new ee(f,u,'filter array for "'+u[0]+'" operator must have 2 elements')):m!=="string"&&E.push(new ee(f+"[1]",u[1],"string expected, "+m+" found"));break;case"within":m=Ri(u[1]),u.length!==2?E.push(new ee(f,u,'filter array for "'+u[0]+'" operator must have 2 elements')):m!=="object"&&E.push(new ee(f+"[1]",u[1],"object expected, "+m+" found"))}return E}(e)}function Xl(e,t){var i=e.key,u=e.style,f=e.styleSpec,m=e.value,x=e.objectKey,E=f[t+"_"+e.layerType];if(!E)return[];var A=x.match(/^(.*)-transition$/);if(t==="paint"&&A&&E[A[1]]&&E[A[1]].transition)return li({key:i,value:m,valueSpec:f.transition,style:u,styleSpec:f});var P,D=e.valueSpec||E[x];if(!D)return[new ee(i,m,'unknown property "'+x+'"')];if(Ri(m)==="string"&&bo(D)&&!D.tokens&&(P=/^{([^}]+)}$/.exec(m)))return[new ee(i,m,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(P[1])+" }`.")];var F=[];return e.layerType==="symbol"&&(x==="text-field"&&u&&!u.glyphs&&F.push(new ee(i,m,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Vs(we(m))&&Fe(m.type)==="identity"&&F.push(new ee(i,m,'"text-font" does not support identity functions'))),F.concat(li({key:e.key,value:m,valueSpec:D,style:u,styleSpec:f,expressionContext:"property",propertyType:t,propertyKey:x}))}function Yl(e){return Xl(e,"paint")}function hs(e){return Xl(e,"layout")}function wc(e){var t=[],i=e.value,u=e.key,f=e.style,m=e.styleSpec;i.type||i.ref||t.push(new ee(u,i,'either "type" or "ref" is required'));var x,E=Fe(i.type),A=Fe(i.ref);if(i.id)for(var P=Fe(i.id),D=0;D<e.arrayIndex;D++){var F=f.layers[D];Fe(F.id)===P&&t.push(new ee(u,i.id,'duplicate layer id "'+i.id+'", previously used at line '+F.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function($){$ in i&&t.push(new ee(u,i[$],'"'+$+'" is prohibited for ref layers'))}),f.layers.forEach(function($){Fe($.id)===A&&(x=$)}),x?x.ref?t.push(new ee(u,i.ref,"ref cannot reference another ref layer")):E=Fe(x.type):t.push(new ee(u,i.ref,'ref layer "'+A+'" not found'));else if(E!=="background")if(i.source){var V=f.sources&&f.sources[i.source],j=V&&Fe(V.type);V?j==="vector"&&E==="raster"?t.push(new ee(u,i.source,'layer "'+i.id+'" requires a raster source')):j==="raster"&&E!=="raster"?t.push(new ee(u,i.source,'layer "'+i.id+'" requires a vector source')):j!=="vector"||i["source-layer"]?j==="raster-dem"&&E!=="hillshade"?t.push(new ee(u,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!i.paint||!i.paint["line-gradient"]||j==="geojson"&&V.lineMetrics||t.push(new ee(u,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new ee(u,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new ee(u,i.source,'source "'+i.source+'" not found'))}else t.push(new ee(u,i,'missing required property "source"'));return t=t.concat(fa({key:u,value:i,valueSpec:m.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return li({key:u+".type",value:i.type,valueSpec:m.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Wl,layout:function($){return fa({layer:i,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":function(te){return hs(Ce({layerType:E},te))}}})},paint:function($){return fa({layer:i,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":function(te){return Yl(Ce({layerType:E},te))}}})}}}))}function wo(e){var t=e.value,i=e.key,u=Ri(t);return u!=="string"?[new ee(i,t,"string expected, "+u+" found")]:[]}var Zi={promoteId:function(e){var t=e.key,i=e.value;if(Ri(i)==="string")return wo({key:t,value:i});var u=[];for(var f in i)u.push.apply(u,wo({key:t+"."+f,value:i[f]}));return u}};function Ws(e){var t=e.value,i=e.key,u=e.styleSpec,f=e.style;if(!t.type)return[new ee(i,t,'"type" is required')];var m,x=Fe(t.type);switch(x){case"vector":case"raster":case"raster-dem":return fa({key:i,value:t,valueSpec:u["source_"+x.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Zi});case"geojson":if(m=fa({key:i,value:t,valueSpec:u.source_geojson,style:f,styleSpec:u,objectElementValidators:Zi}),t.cluster)for(var E in t.clusterProperties){var A=t.clusterProperties[E],P=A[0],D=typeof P=="string"?[P,["accumulated"],["get",E]]:P;m.push.apply(m,xo({key:i+"."+E+".map",value:A[1],expressionContext:"cluster-map"})),m.push.apply(m,xo({key:i+"."+E+".reduce",value:D,expressionContext:"cluster-reduce"}))}return m;case"video":return fa({key:i,value:t,valueSpec:u.source_video,style:f,styleSpec:u});case"image":return fa({key:i,value:t,valueSpec:u.source_image,style:f,styleSpec:u});case"canvas":return[new ee(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ps({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,styleSpec:u})}}function So(e){var t=e.value,i=e.styleSpec,u=i.light,f=e.style,m=[],x=Ri(t);if(t===void 0)return m;if(x!=="object")return m.concat([new ee("light",t,"object expected, "+x+" found")]);for(var E in t){var A=E.match(/^(.*)-transition$/);m=m.concat(A&&u[A[1]]&&u[A[1]].transition?li({key:E,value:t[E],valueSpec:i.transition,style:f,styleSpec:i}):u[E]?li({key:E,value:t[E],valueSpec:u[E],style:f,styleSpec:i}):[new ee(E,t[E],'unknown property "'+E+'"')])}return m}var Ha={"*":function(){return[]},array:yc,boolean:function(e){var t=e.value,i=e.key,u=Ri(t);return u!=="boolean"?[new ee(i,t,"boolean expected, "+u+" found")]:[]},number:_c,color:function(e){var t=e.key,i=e.value,u=Ri(i);return u!=="string"?[new ee(t,i,"color expected, "+u+" found")]:Qt(i)===null?[new ee(t,i,'color expected, "'+i+'" found')]:[]},constants:me,enum:ps,filter:Wl,function:vc,layer:wc,object:fa,source:Ws,light:So,string:wo,formatted:function(e){return wo(e).length===0?[]:xo(e)},resolvedImage:function(e){return wo(e).length===0?[]:xo(e)}};function li(e){var t=e.value,i=e.valueSpec,u=e.styleSpec;return i.expression&&Vs(Fe(t))?vc(e):i.expression&&us(we(t))?xo(e):i.type&&Ha[i.type]?Ha[i.type](e):fa(Ce({},e,{valueSpec:i.type?u[i.type]:i}))}function Bi(e){var t=e.value,i=e.key,u=wo(e);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new ee(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new ee(i,t,'"glyphs" url must include a "{range}" token'))),u}function $n(e,t){t===void 0&&(t=q);var i=[];return i=i.concat(li({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Bi,"*":function(){return[]}}})),e.constants&&(i=i.concat(me({key:"constants",value:e.constants,style:e,styleSpec:t}))),fs(i)}function fs(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function qo(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return fs(e.apply(this,t))}}$n.source=qo(Ws),$n.light=qo(So),$n.layer=qo(wc),$n.filter=qo(Wl),$n.paintProperty=qo(Yl),$n.layoutProperty=qo(hs);var ds=$n,qp=ds.light,jp=ds.paintProperty,ms=ds.layoutProperty;function gs(e,t){var i=!1;if(t&&t.length)for(var u=0,f=t;u<f.length;u+=1)e.fire(new le(new Error(f[u].message))),i=!0;return i}var Ca=zr;function zr(e,t,i){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var f=new Int32Array(this.arrayBuffer);e=f[0],this.d=(t=f[1])+2*(i=f[2]);for(var m=0;m<this.d*this.d;m++){var x=f[3+m],E=f[3+m+1];u.push(x===E?null:f.subarray(x,E))}var A=f[3+u.length+1];this.keys=f.subarray(f[3+u.length],A),this.bboxes=f.subarray(A),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var P=0;P<this.d*this.d;P++)u.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var D=i/t*e;this.min=-D,this.max=e+D}zr.prototype.insert=function(e,t,i,u,f){this._forEachCell(t,i,u,f,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(f)},zr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},zr.prototype._insertCell=function(e,t,i,u,f,m){this.cells[f].push(m)},zr.prototype.query=function(e,t,i,u,f){var m=this.min,x=this.max;if(e<=m&&t<=m&&x<=i&&x<=u&&!f)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(e,t,i,u,this._queryCell,E,{},f),E},zr.prototype._queryCell=function(e,t,i,u,f,m,x,E){var A=this.cells[f];if(A!==null)for(var P=this.keys,D=this.bboxes,F=0;F<A.length;F++){var V=A[F];if(x[V]===void 0){var j=4*V;(E?E(D[j+0],D[j+1],D[j+2],D[j+3]):e<=D[j+2]&&t<=D[j+3]&&i>=D[j+0]&&u>=D[j+1])?(x[V]=!0,m.push(P[V])):x[V]=!1}}},zr.prototype._forEachCell=function(e,t,i,u,f,m,x,E){for(var A=this._convertToCellCoord(e),P=this._convertToCellCoord(t),D=this._convertToCellCoord(i),F=this._convertToCellCoord(u),V=A;V<=D;V++)for(var j=P;j<=F;j++){var $=this.d*j+V;if((!E||E(this._convertFromCellCoord(V),this._convertFromCellCoord(j),this._convertFromCellCoord(V+1),this._convertFromCellCoord(j+1)))&&f.call(this,e,t,i,u,$,m,x,E))return}},zr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},zr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},zr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,u=0;u<this.cells.length;u++)i+=this.cells[u].length;var f=new Int32Array(t+i+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var m=t,x=0;x<e.length;x++){var E=e[x];f[3+x]=m,f.set(E,m),m+=E.length}return f[3+e.length]=m,f.set(this.keys,m),f[3+e.length+1]=m+=this.keys.length,f.set(this.bboxes,m),m+=this.bboxes.length,f.buffer};var ys=R.ImageData,Sc=R.ImageBitmap,vr={};function mt(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),vr[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Nn in mt("Object",Object),Ca.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Ca.deserialize=function(e){return new Ca(e.buffer)},mt("Grid",Ca),mt("Color",si),mt("Error",Error),mt("ResolvedImage",Br),mt("StylePropertyFunction",Vo),mt("StyleExpression",No,{omit:["_evaluator"]}),mt("ZoomDependentExpression",Uo),mt("ZoomConstantExpression",cs),mt("CompoundExpression",kr,{omit:["_evaluate"]}),yo)yo[Nn]._classRegistryKey||mt("Expression_"+Nn,yo[Nn]);function Xs(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function jo(e){return Sc&&e instanceof Sc}function da(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Xs(e)||jo(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof ys)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],f=0,m=e;f<m.length;f+=1)u.push(da(m[f],t));return u}if(typeof e=="object"){var x=e.constructor,E=x._classRegistryKey;if(!E)throw new Error("can't serialize object of unregistered class");var A=x.serialize?x.serialize(e,t):{};if(!x.serialize){for(var P in e)if(e.hasOwnProperty(P)&&!(vr[E].omit.indexOf(P)>=0)){var D=e[P];A[P]=vr[E].shallow.indexOf(P)>=0?D:da(D,t)}e instanceof Error&&(A.message=e.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return E!=="Object"&&(A.$name=E),A}throw new Error("can't serialize object of type "+typeof e)}function Un(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Xs(e)||jo(e)||ArrayBuffer.isView(e)||e instanceof ys)return e;if(Array.isArray(e))return e.map(Un);if(typeof e=="object"){var t=e.$name||"Object",i=vr[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var u=Object.create(i.prototype),f=0,m=Object.keys(e);f<m.length;f+=1){var x=m[f];if(x!=="$name"){var E=e[x];u[x]=vr[t].shallow.indexOf(x)>=0?E:Un(E)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var Jl=function(){this.first=!0};Jl.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var at={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Ql(e){for(var t=0,i=e;t<i.length;t+=1)if(Ys(i[t].charCodeAt(0)))return!0;return!1}function Ys(e){return!(e!==746&&e!==747&&(e<4352||!(at["Bopomofo Extended"](e)||at.Bopomofo(e)||at["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||at["CJK Compatibility Ideographs"](e)||at["CJK Compatibility"](e)||at["CJK Radicals Supplement"](e)||at["CJK Strokes"](e)||!(!at["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||at["CJK Unified Ideographs Extension A"](e)||at["CJK Unified Ideographs"](e)||at["Enclosed CJK Letters and Months"](e)||at["Hangul Compatibility Jamo"](e)||at["Hangul Jamo Extended-A"](e)||at["Hangul Jamo Extended-B"](e)||at["Hangul Jamo"](e)||at["Hangul Syllables"](e)||at.Hiragana(e)||at["Ideographic Description Characters"](e)||at.Kanbun(e)||at["Kangxi Radicals"](e)||at["Katakana Phonetic Extensions"](e)||at.Katakana(e)&&e!==12540||!(!at["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!at["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||at["Unified Canadian Aboriginal Syllabics"](e)||at["Unified Canadian Aboriginal Syllabics Extended"](e)||at["Vertical Forms"](e)||at["Yijing Hexagram Symbols"](e)||at["Yi Syllables"](e)||at["Yi Radicals"](e))))}function $l(e){return!(Ys(e)||function(t){return!!(at["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||at["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||at["Letterlike Symbols"](t)||at["Number Forms"](t)||at["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||at["Control Pictures"](t)&&t!==9251||at["Optical Character Recognition"](t)||at["Enclosed Alphanumerics"](t)||at["Geometric Shapes"](t)||at["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||at["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||at["CJK Symbols and Punctuation"](t)||at.Katakana(t)||at["Private Use Area"](t)||at["CJK Compatibility Forms"](t)||at["Small Form Variants"](t)||at["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function na(e){return e>=1424&&e<=2303||at["Arabic Presentation Forms-A"](e)||at["Arabic Presentation Forms-B"](e)}function Vn(e,t){return!(!t&&na(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||at.Khmer(e))}function Js(e){for(var t=0,i=e;t<i.length;t+=1)if(na(i[t].charCodeAt(0)))return!0;return!1}var Qs=null,qn="unavailable",Ma=null,Ec=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(qn="error"),Qs&&Qs(e)};function _s(){eu.fire(new Q("pluginStateChange",{pluginStatus:qn,pluginURL:Ma}))}var eu=new fe,tu=function(){return qn},ma=function(){if(qn!=="deferred"||!Ma)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qn="loading",_s(),Ma&&Tn({url:Ma},function(e){e?Ec(e):(qn="loaded",_s())})},ea={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return qn==="loaded"||ea.applyArabicShaping!=null},isLoading:function(){return qn==="loading"},setState:function(e){qn=e.pluginStatus,Ma=e.pluginURL},isParsed:function(){return ea.applyArabicShaping!=null&&ea.processBidirectionalText!=null&&ea.processStyledBidirectionalText!=null},getPluginURL:function(){return Ma}},ii=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Jl,this.transition={})};ii.prototype.isSupportedScript=function(e){return function(t,i){for(var u=0,f=t;u<f.length;u+=1)if(!Vn(f[u].charCodeAt(0),i))return!1;return!0}(e,ea.isLoaded())},ii.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ii.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var ka=function(e,t){this.property=e,this.value=t,this.expression=function(i,u){if(Vs(i))return new Vo(i,u);if(us(i)){var f=gc(i,u);if(f.result==="error")throw new Error(f.value.map(function(x){return x.key+": "+x.message}).join(", "));return f.value}var m=i;return typeof i=="string"&&u.type==="color"&&(m=si.parse(i)),{kind:"constant",evaluate:function(){return m}}}(t===void 0?e.specification.default:t,e.specification)};ka.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ka.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var aa=function(e){this.property=e,this.value=new ka(e,void 0)};aa.prototype.transitioned=function(e,t){return new Eo(this.property,this.value,t,ge({},e.transition,this.transition),e.now)},aa.prototype.untransitioned=function(){return new Eo(this.property,this.value,null,{},0)};var nn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};nn.prototype.getValue=function(e){return ht(this._values[e].value.value)},nn.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new aa(this._values[e].property)),this._values[e].value=new ka(this._values[e].property,t===null?void 0:ht(t))},nn.prototype.getTransition=function(e){return ht(this._values[e].transition)},nn.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new aa(this._values[e].property)),this._values[e].transition=ht(t)||void 0},nn.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t],f=this.getValue(u);f!==void 0&&(e[u]=f);var m=this.getTransition(u);m!==void 0&&(e[u+"-transition"]=m)}return e},nn.prototype.transitioned=function(e,t){for(var i=new Wa(this._properties),u=0,f=Object.keys(this._values);u<f.length;u+=1){var m=f[u];i._values[m]=this._values[m].transitioned(e,t._values[m])}return i},nn.prototype.untransitioned=function(){for(var e=new Wa(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t];e._values[u]=this._values[u].untransitioned()}return e};var Eo=function(e,t,i,u,f){this.property=e,this.value=t,this.begin=f+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=i)};Eo.prototype.possiblyEvaluate=function(e,t,i){var u=e.now||0,f=this.value.possiblyEvaluate(e,t,i),m=this.prior;if(m){if(u>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(u<this.begin)return m.possiblyEvaluate(e,t,i);var x=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,t,i),f,function(E){if(E<=0)return 0;if(E>=1)return 1;var A=E*E,P=A*E;return 4*(E<.5?P:3*(E-A)+P-.75)}(x))}return f};var Wa=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Wa.prototype.possiblyEvaluate=function(e,t,i){for(var u=new vs(this._properties),f=0,m=Object.keys(this._values);f<m.length;f+=1){var x=m[f];u._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return u},Wa.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var ga=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ga.prototype.getValue=function(e){return ht(this._values[e].value)},ga.prototype.setValue=function(e,t){this._values[e]=new ka(this._values[e].property,t===null?void 0:ht(t))},ga.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t],f=this.getValue(u);f!==void 0&&(e[u]=f)}return e},ga.prototype.possiblyEvaluate=function(e,t,i){for(var u=new vs(this._properties),f=0,m=Object.keys(this._values);f<m.length;f+=1){var x=m[f];u._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return u};var bn=function(e,t,i){this.property=e,this.value=t,this.parameters=i};bn.prototype.isConstant=function(){return this.value.kind==="constant"},bn.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},bn.prototype.evaluate=function(e,t,i,u){return this.property.evaluate(this.value,this.parameters,e,t,i,u)};var vs=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};vs.prototype.get=function(e){return this._values[e]};var zt=function(e){this.specification=e};zt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},zt.prototype.interpolate=function(e,t,i){var u=Fo[this.specification.type];return u?u(e,t,i):e};var yt=function(e,t){this.specification=e,this.overrides=t};yt.prototype.possiblyEvaluate=function(e,t,i,u){return new bn(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,u)}:e.expression,t)},yt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new bn(this,{kind:"constant",value:void 0},e.parameters);var u=Fo[this.specification.type];return u?new bn(this,{kind:"constant",value:u(e.value.value,t.value.value,i)},e.parameters):e},yt.prototype.evaluate=function(e,t,i,u,f,m){return e.kind==="constant"?e.value:e.evaluate(t,i,u,f,m)};var $s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,u,f,m){if(i.value===void 0)return new bn(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){var x=i.expression.evaluate(u,null,{},f,m),E=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,A=this._calculate(E,E,E,u);return new bn(this,{kind:"constant",value:A},u)}if(i.expression.kind==="camera"){var P=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new bn(this,{kind:"constant",value:P},u)}return new bn(this,i.expression,u)},t.prototype.evaluate=function(i,u,f,m,x,E){if(i.kind==="source"){var A=i.evaluate(u,f,m,x,E);return this._calculate(A,A,A,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},f,m),i.evaluate({zoom:Math.floor(u.zoom)},f,m),i.evaluate({zoom:Math.floor(u.zoom)+1},f,m),u):i.value},t.prototype._calculate=function(i,u,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:f,to:u}},t.prototype.interpolate=function(i){return i},t}(yt),xn=function(e){this.specification=e};xn.prototype.possiblyEvaluate=function(e,t,i,u){if(e.value!==void 0){if(e.expression.kind==="constant"){var f=e.expression.evaluate(t,null,{},i,u);return this._calculate(f,f,f,t)}return this._calculate(e.expression.evaluate(new ii(Math.floor(t.zoom-1),t)),e.expression.evaluate(new ii(Math.floor(t.zoom),t)),e.expression.evaluate(new ii(Math.floor(t.zoom+1),t)),t)}},xn.prototype._calculate=function(e,t,i,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},xn.prototype.interpolate=function(e){return e};var ya=function(e){this.specification=e};ya.prototype.possiblyEvaluate=function(e,t,i,u){return!!e.expression.evaluate(t,null,{},i,u)},ya.prototype.interpolate=function(){return!1};var an=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var u=this.defaultPropertyValues[t]=new ka(i,void 0),f=this.defaultTransitionablePropertyValues[t]=new aa(i);this.defaultTransitioningPropertyValues[t]=f.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=u.possiblyEvaluate({})}};mt("DataDrivenProperty",yt),mt("DataConstantProperty",zt),mt("CrossFadedDataDrivenProperty",$s),mt("CrossFadedProperty",xn),mt("ColorRampProperty",ya);var za=function(e){function t(i,u){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new ga(u.layout)),u.paint)){for(var f in this._transitionablePaint=new nn(u.paint),i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(var m in i.layout)this.setLayoutProperty(m,i.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vs(u.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,u,f){f===void 0&&(f={}),u!=null&&this._validate(ms,"layers."+this.id+".layout."+i,i,u,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)},t.prototype.getPaintProperty=function(i){return Pt(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,u,f){if(f===void 0&&(f={}),u!=null&&this._validate(jp,"layers."+this.id+".paint."+i,i,u,f))return!1;if(Pt(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;var m=this._transitionablePaint._values[i],x=m.property.specification["property-type"]==="cross-faded-data-driven",E=m.value.isDataDriven(),A=m.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);var P=this._transitionablePaint._values[i].value;return P.isDataDriven()||E||x||this._handleOverridablePaintPropertyUpdate(i,A,P)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,u,f){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),He(i,function(u,f){return!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length)})},t.prototype._validate=function(i,u,f,m,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&gs(this,i.call(ds,{key:u,layerType:this.type,objectKey:f,value:m,styleSpec:q,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var u=this.paint.get(i);if(u instanceof bn&&bo(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1},t}(fe),iu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},el=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ii=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Hr(e,t){t===void 0&&(t=1);var i=0,u=0;return{members:e.map(function(f){var m=iu[f.type].BYTES_PER_ELEMENT,x=i=kc(i,Math.max(t,m)),E=f.components||1;return u=Math.max(u,m),i+=m*E,{name:f.name,type:f.type,components:E,offset:x}}),size:kc(i,Math.max(u,t)),alignment:t}}function kc(e,t){return Math.ceil(e/t)*t}Ii.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Ii.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Ii.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ii.prototype.clear=function(){this.length=0},Ii.prototype.resize=function(e){this.reserve(e),this.length=e},Ii.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Ii.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ko=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.int16[m+0]=u,this.int16[m+1]=f,i},t}(Ii);ko.prototype.bytesPerElement=4,mt("StructArrayLayout2i4",ko);var ru=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=4*i;return this.int16[E+0]=u,this.int16[E+1]=f,this.int16[E+2]=m,this.int16[E+3]=x,i},t}(Ii);ru.prototype.bytesPerElement=8,mt("StructArrayLayout4i8",ru);var Da=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var A=this.length;return this.resize(A+1),this.emplace(A,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,A){var P=6*i;return this.int16[P+0]=u,this.int16[P+1]=f,this.int16[P+2]=m,this.int16[P+3]=x,this.int16[P+4]=E,this.int16[P+5]=A,i},t}(Ii);Da.prototype.bytesPerElement=12,mt("StructArrayLayout2i4i12",Da);var jn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var A=this.length;return this.resize(A+1),this.emplace(A,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,A){var P=4*i,D=8*i;return this.int16[P+0]=u,this.int16[P+1]=f,this.uint8[D+4]=m,this.uint8[D+5]=x,this.uint8[D+6]=E,this.uint8[D+7]=A,i},t}(Ii);jn.prototype.bytesPerElement=8,mt("StructArrayLayout2i4ub8",jn);var Go=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.float32[m+0]=u,this.float32[m+1]=f,i},t}(Ii);Go.prototype.bytesPerElement=8,mt("StructArrayLayout2f8",Go);var Ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,A,P,D,F){var V=this.length;return this.resize(V+1),this.emplace(V,i,u,f,m,x,E,A,P,D,F)},t.prototype.emplace=function(i,u,f,m,x,E,A,P,D,F,V){var j=10*i;return this.uint16[j+0]=u,this.uint16[j+1]=f,this.uint16[j+2]=m,this.uint16[j+3]=x,this.uint16[j+4]=E,this.uint16[j+5]=A,this.uint16[j+6]=P,this.uint16[j+7]=D,this.uint16[j+8]=F,this.uint16[j+9]=V,i},t}(Ii);Ta.prototype.bytesPerElement=20,mt("StructArrayLayout10ui20",Ta);var tl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,A,P,D,F,V,j){var $=this.length;return this.resize($+1),this.emplace($,i,u,f,m,x,E,A,P,D,F,V,j)},t.prototype.emplace=function(i,u,f,m,x,E,A,P,D,F,V,j,$){var te=12*i;return this.int16[te+0]=u,this.int16[te+1]=f,this.int16[te+2]=m,this.int16[te+3]=x,this.uint16[te+4]=E,this.uint16[te+5]=A,this.uint16[te+6]=P,this.uint16[te+7]=D,this.int16[te+8]=F,this.int16[te+9]=V,this.int16[te+10]=j,this.int16[te+11]=$,i},t}(Ii);tl.prototype.bytesPerElement=24,mt("StructArrayLayout4i4ui4i24",tl);var Zo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.float32[x+0]=u,this.float32[x+1]=f,this.float32[x+2]=m,i},t}(Ii);Zo.prototype.bytesPerElement=12,mt("StructArrayLayout3f12",Zo);var bs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.uint32[1*i+0]=u,i},t}(Ii);bs.prototype.bytesPerElement=4,mt("StructArrayLayout1ul4",bs);var nu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,A,P,D){var F=this.length;return this.resize(F+1),this.emplace(F,i,u,f,m,x,E,A,P,D)},t.prototype.emplace=function(i,u,f,m,x,E,A,P,D,F){var V=10*i,j=5*i;return this.int16[V+0]=u,this.int16[V+1]=f,this.int16[V+2]=m,this.int16[V+3]=x,this.int16[V+4]=E,this.int16[V+5]=A,this.uint32[j+3]=P,this.uint16[V+8]=D,this.uint16[V+9]=F,i},t}(Ii);nu.prototype.bytesPerElement=20,mt("StructArrayLayout6i1ul2ui20",nu);var Ko=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var A=this.length;return this.resize(A+1),this.emplace(A,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,A){var P=6*i;return this.int16[P+0]=u,this.int16[P+1]=f,this.int16[P+2]=m,this.int16[P+3]=x,this.int16[P+4]=E,this.int16[P+5]=A,i},t}(Ii);Ko.prototype.bytesPerElement=12,mt("StructArrayLayout2i2i2i12",Ko);var zo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x){var E=this.length;return this.resize(E+1),this.emplace(E,i,u,f,m,x)},t.prototype.emplace=function(i,u,f,m,x,E){var A=4*i,P=8*i;return this.float32[A+0]=u,this.float32[A+1]=f,this.float32[A+2]=m,this.int16[P+6]=x,this.int16[P+7]=E,i},t}(Ii);zo.prototype.bytesPerElement=16,mt("StructArrayLayout2f1f2i16",zo);var au=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=12*i,A=3*i;return this.uint8[E+0]=u,this.uint8[E+1]=f,this.float32[A+1]=m,this.float32[A+2]=x,i},t}(Ii);au.prototype.bytesPerElement=12,mt("StructArrayLayout2ub2f12",au);var Xa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.uint16[x+0]=u,this.uint16[x+1]=f,this.uint16[x+2]=m,i},t}(Ii);Xa.prototype.bytesPerElement=6,mt("StructArrayLayout3ui6",Xa);var Ya=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,A,P,D,F,V,j,$,te,he,oe,ye){var be=this.length;return this.resize(be+1),this.emplace(be,i,u,f,m,x,E,A,P,D,F,V,j,$,te,he,oe,ye)},t.prototype.emplace=function(i,u,f,m,x,E,A,P,D,F,V,j,$,te,he,oe,ye,be){var Se=24*i,ze=12*i,Me=48*i;return this.int16[Se+0]=u,this.int16[Se+1]=f,this.uint16[Se+2]=m,this.uint16[Se+3]=x,this.uint32[ze+2]=E,this.uint32[ze+3]=A,this.uint32[ze+4]=P,this.uint16[Se+10]=D,this.uint16[Se+11]=F,this.uint16[Se+12]=V,this.float32[ze+7]=j,this.float32[ze+8]=$,this.uint8[Me+36]=te,this.uint8[Me+37]=he,this.uint8[Me+38]=oe,this.uint32[ze+10]=ye,this.int16[Se+22]=be,i},t}(Ii);Ya.prototype.bytesPerElement=48,mt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ya);var il=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,A,P,D,F,V,j,$,te,he,oe,ye,be,Se,ze,Me,Ze,tt,St,ut,It,pt,$t){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,i,u,f,m,x,E,A,P,D,F,V,j,$,te,he,oe,ye,be,Se,ze,Me,Ze,tt,St,ut,It,pt,$t)},t.prototype.emplace=function(i,u,f,m,x,E,A,P,D,F,V,j,$,te,he,oe,ye,be,Se,ze,Me,Ze,tt,St,ut,It,pt,$t,Bt){var _t=34*i,ti=17*i;return this.int16[_t+0]=u,this.int16[_t+1]=f,this.int16[_t+2]=m,this.int16[_t+3]=x,this.int16[_t+4]=E,this.int16[_t+5]=A,this.int16[_t+6]=P,this.int16[_t+7]=D,this.uint16[_t+8]=F,this.uint16[_t+9]=V,this.uint16[_t+10]=j,this.uint16[_t+11]=$,this.uint16[_t+12]=te,this.uint16[_t+13]=he,this.uint16[_t+14]=oe,this.uint16[_t+15]=ye,this.uint16[_t+16]=be,this.uint16[_t+17]=Se,this.uint16[_t+18]=ze,this.uint16[_t+19]=Me,this.uint16[_t+20]=Ze,this.uint16[_t+21]=tt,this.uint16[_t+22]=St,this.uint32[ti+12]=ut,this.float32[ti+13]=It,this.float32[ti+14]=pt,this.float32[ti+15]=$t,this.float32[ti+16]=Bt,i},t}(Ii);il.prototype.bytesPerElement=68,mt("StructArrayLayout8i15ui1ul4f68",il);var Ja=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.float32[1*i+0]=u,i},t}(Ii);Ja.prototype.bytesPerElement=4,mt("StructArrayLayout1f4",Ja);var oa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.int16[x+0]=u,this.int16[x+1]=f,this.int16[x+2]=m,i},t}(Ii);oa.prototype.bytesPerElement=6,mt("StructArrayLayout3i6",oa);var ou=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=4*i;return this.uint32[2*i+0]=u,this.uint16[x+2]=f,this.uint16[x+3]=m,i},t}(Ii);ou.prototype.bytesPerElement=8,mt("StructArrayLayout1ul2ui8",ou);var xs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.uint16[m+0]=u,this.uint16[m+1]=f,i},t}(Ii);xs.prototype.bytesPerElement=4,mt("StructArrayLayout2ui4",xs);var su=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.uint16[1*i+0]=u,i},t}(Ii);su.prototype.bytesPerElement=2,mt("StructArrayLayout1ui2",su);var rl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=4*i;return this.float32[E+0]=u,this.float32[E+1]=f,this.float32[E+2]=m,this.float32[E+3]=x,i},t}(Ii);rl.prototype.bytesPerElement=16,mt("StructArrayLayout4f16",rl);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new M(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(el);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(nu);mt("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(el);o.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(Ya);mt("PlacedSymbolArray",c);var y=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(el);y.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new y(this,i)},t}(il);mt("SymbolInstanceArray",w);var S=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(Ja);mt("GlyphOffsetArray",S);var I=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(oa);mt("SymbolLineVertexArray",I);var C=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(el);C.prototype.size=8;var O=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new C(this,i)},t}(ou);mt("FeatureIndexArray",O);var G=Hr([{name:"a_pos",components:2,type:"Int16"}],4).members,Z=function(e){e===void 0&&(e=[]),this.segments=e};function H(e,t){return 256*(e=se(Math.floor(e),0,255))+se(Math.floor(t),0,255)}Z.prototype.prepareSegment=function(e,t,i,u){var f=this.segments[this.segments.length-1];return e>Z.MAX_VERTEX_ARRAY_LENGTH&&je("Max vertices per segment is "+Z.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!f||f.vertexLength+e>Z.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==u)&&(f={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},u!==void 0&&(f.sortKey=u),this.segments.push(f)),f},Z.prototype.get=function(){return this.segments},Z.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var u in i.vaos)i.vaos[u].destroy()}},Z.simpleSegment=function(e,t,i,u){return new Z([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:u,vaos:{},sortKey:0}])},Z.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,mt("SegmentVector",Z);var re=Hr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ie=z(function(e){e.exports=function(t,i){var u,f,m,x,E,A,P,D;for(f=t.length-(u=3&t.length),m=i,E=3432918353,A=461845907,D=0;D<f;)P=255&t.charCodeAt(D)|(255&t.charCodeAt(++D))<<8|(255&t.charCodeAt(++D))<<16|(255&t.charCodeAt(++D))<<24,++D,m=27492+(65535&(x=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*E+(((P>>>16)*E&65535)<<16)&4294967295)<<15|P>>>17))*A+(((P>>>16)*A&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(P=0,u){case 3:P^=(255&t.charCodeAt(D+2))<<16;case 2:P^=(255&t.charCodeAt(D+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&t.charCodeAt(D)))*E+(((P>>>16)*E&65535)<<16)&4294967295)<<15|P>>>17))*A+(((P>>>16)*A&65535)<<16)&4294967295}return m^=t.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}}),ce=z(function(e){e.exports=function(t,i){for(var u,f=t.length,m=i^f,x=0;f>=4;)u=1540483477*(65535&(u=255&t.charCodeAt(x)|(255&t.charCodeAt(++x))<<8|(255&t.charCodeAt(++x))<<16|(255&t.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:m^=(255&t.charCodeAt(x+2))<<16;case 2:m^=(255&t.charCodeAt(x+1))<<8;case 1:m=1540483477*(65535&(m^=255&t.charCodeAt(x)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}}),J=ie,ue=ce;J.murmur3=ie,J.murmur2=ue;var de=function(){this.ids=[],this.positions=[],this.indexed=!1};de.prototype.add=function(e,t,i,u){this.ids.push(Te(e)),this.positions.push(t,i,u)},de.prototype.getPositions=function(e){for(var t=Te(e),i=0,u=this.ids.length-1;i<u;){var f=i+u>>1;this.ids[f]>=t?u=f:i=f+1}for(var m=[];this.ids[i]===t;)m.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return m},de.serialize=function(e,t){var i=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function f(m,x,E,A){for(;E<A;){for(var P=m[E+A>>1],D=E-1,F=A+1;;){do D++;while(m[D]<P);do F--;while(m[F]>P);if(D>=F)break;Ee(m,D,F),Ee(x,3*D,3*F),Ee(x,3*D+1,3*F+1),Ee(x,3*D+2,3*F+2)}F-E<A-F?(f(m,x,E,F),E=F+1):(f(m,x,F+1,A),A=F)}}(i,u,0,i.length-1),t&&t.push(i.buffer,u.buffer),{ids:i,positions:u}},de.deserialize=function(e){var t=new de;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var ve=Math.pow(2,53)-1;function Te(e){var t=+e;return!isNaN(t)&&t<=ve?t:J(String(e))}function Ee(e,t,i){var u=e[t];e[t]=e[i],e[i]=u}mt("FeaturePositionMap",de);var Ie=function(e,t){this.gl=e.gl,this.location=t},Ve=function(e){function t(i,u){e.call(this,i,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Ie),Je=function(e){function t(i,u){e.call(this,i,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Ie),Xe=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Ie),ft=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Ie),Tt=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Ie),Mt=function(e){function t(i,u){e.call(this,i,u),this.current=si.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Ie),Ct=new Float32Array(16),mi=function(e){function t(i,u){e.call(this,i,u),this.current=Ct}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var u=1;u<16;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Ie);function dt(e){return[H(255*e.r,255*e.g),H(255*e.b,255*e.a)]}var Vt=function(e,t,i){this.value=e,this.uniformNames=t.map(function(u){return"u_"+u}),this.type=i};Vt.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Vt.prototype.getBinding=function(e,t,i){return this.type==="color"?new Mt(e,t):new Je(e,t)};var Jt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Jt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Jt.prototype.setUniform=function(e,t,i,u){var f=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;f&&e.set(f)},Jt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new Tt(e,t):new Je(e,t)};var Ut=function(e,t,i,u){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(f){return{name:"a_"+f,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new u};Ut.prototype.populatePaintArray=function(e,t,i,u,f){var m=this.paintVertexArray.length,x=this.expression.evaluate(new ii(0),t,{},u,[],f);this.paintVertexArray.resize(e),this._setPaintValue(m,e,x)},Ut.prototype.updatePaintArray=function(e,t,i,u){var f=this.expression.evaluate({zoom:0},i,u);this._setPaintValue(e,t,f)},Ut.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var u=dt(i),f=e;f<t;f++)this.paintVertexArray.emplace(f,u[0],u[1]);else{for(var m=e;m<t;m++)this.paintVertexArray.emplace(m,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Ut.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ut.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ot=function(e,t,i,u,f,m){this.expression=e,this.uniformNames=t.map(function(x){return"u_"+x+"_t"}),this.type=i,this.useIntegerZoom=u,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=t.map(function(x){return{name:"a_"+x,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new m};Ot.prototype.populatePaintArray=function(e,t,i,u,f){var m=this.expression.evaluate(new ii(this.zoom),t,{},u,[],f),x=this.expression.evaluate(new ii(this.zoom+1),t,{},u,[],f),E=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(E,e,m,x)},Ot.prototype.updatePaintArray=function(e,t,i,u){var f=this.expression.evaluate({zoom:this.zoom},i,u),m=this.expression.evaluate({zoom:this.zoom+1},i,u);this._setPaintValue(e,t,f,m)},Ot.prototype._setPaintValue=function(e,t,i,u){if(this.type==="color")for(var f=dt(i),m=dt(u),x=e;x<t;x++)this.paintVertexArray.emplace(x,f[0],f[1],m[0],m[1]);else{for(var E=e;E<t;E++)this.paintVertexArray.emplace(E,i,u);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(u))}},Ot.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ot.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ot.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,u=se(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(u)},Ot.prototype.getBinding=function(e,t,i){return new Je(e,t)};var Wt=function(e,t,i,u,f,m){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=u,this.layerId=m,this.zoomInPaintVertexArray=new f,this.zoomOutPaintVertexArray=new f};Wt.prototype.populatePaintArray=function(e,t,i){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,t.patterns&&t.patterns[this.layerId],i)},Wt.prototype.updatePaintArray=function(e,t,i,u,f){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],f)},Wt.prototype._setPaintValues=function(e,t,i,u){if(u&&i){var f=u[i.min],m=u[i.mid],x=u[i.max];if(f&&m&&x)for(var E=e;E<t;E++)this.zoomInPaintVertexArray.emplace(E,m.tl[0],m.tl[1],m.br[0],m.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1],m.pixelRatio,f.pixelRatio),this.zoomOutPaintVertexArray.emplace(E,m.tl[0],m.tl[1],m.br[0],m.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],m.pixelRatio,x.pixelRatio)}},Wt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,re.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,re.members,this.expression.isStateDependent))},Wt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ft=function(e,t,i){this.binders={},this._buffers=[];var u=[];for(var f in e.paint._values)if(i(f)){var m=e.paint.get(f);if(m instanceof bn&&bo(m.property.specification)){var x=Fr(f,e.type),E=m.value,A=m.property.specification.type,P=m.property.useIntegerZoom,D=m.property.specification["property-type"],F=D==="cross-faded"||D==="cross-faded-data-driven";if(E.kind==="constant")this.binders[f]=F?new Jt(E.value,x):new Vt(E.value,x,A),u.push("/u_"+f);else if(E.kind==="source"||F){var V=tr(f,A,"source");this.binders[f]=F?new Wt(E,A,P,t,V,e.id):new Ut(E,x,A,V),u.push("/a_"+f)}else{var j=tr(f,A,"composite");this.binders[f]=new Ot(E,x,A,P,t,j),u.push("/z_"+f)}}}this.cacheKey=u.sort().join("")};Ft.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Ut||t instanceof Ot?t.maxValue:0},Ft.prototype.populatePaintArrays=function(e,t,i,u,f){for(var m in this.binders){var x=this.binders[m];(x instanceof Ut||x instanceof Ot||x instanceof Wt)&&x.populatePaintArray(e,t,i,u,f)}},Ft.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var u=this.binders[i];u instanceof Jt&&u.setConstantPatternPositions(e,t)}},Ft.prototype.updatePaintArrays=function(e,t,i,u,f){var m=!1;for(var x in e)for(var E=0,A=t.getPositions(x);E<A.length;E+=1){var P=A[E],D=i.feature(P.index);for(var F in this.binders){var V=this.binders[F];if((V instanceof Ut||V instanceof Ot||V instanceof Wt)&&V.expression.isStateDependent===!0){var j=u.paint.get(F);V.expression=j.value,V.updatePaintArray(P.start,P.end,D,e[x],f),m=!0}}}return m},Ft.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Vt||i instanceof Jt)&&e.push.apply(e,i.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},Ft.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ut||i instanceof Ot)for(var u=0;u<i.paintVertexAttributes.length;u++)e.push(i.paintVertexAttributes[u].name);else if(i instanceof Wt)for(var f=0;f<re.members.length;f++)e.push(re.members[f].name)}return e},Ft.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Vt||i instanceof Jt||i instanceof Ot)for(var u=0,f=i.uniformNames;u<f.length;u+=1)e.push(f[u])}return e},Ft.prototype.getPaintVertexBuffers=function(){return this._buffers},Ft.prototype.getUniforms=function(e,t){var i=[];for(var u in this.binders){var f=this.binders[u];if(f instanceof Vt||f instanceof Jt||f instanceof Ot)for(var m=0,x=f.uniformNames;m<x.length;m+=1){var E=x[m];if(t[E]){var A=f.getBinding(e,t[E],E);i.push({name:E,property:u,binding:A})}}}return i},Ft.prototype.setUniforms=function(e,t,i,u){for(var f=0,m=t;f<m.length;f+=1){var x=m[f],E=x.name,A=x.property;this.binders[A].setUniform(x.binding,u,i.get(A),E)}},Ft.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Wt){var u=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(i instanceof Ut||i instanceof Ot)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Ft.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Ut||i instanceof Ot||i instanceof Wt)&&i.upload(e)}this.updatePaintBuffers()},Ft.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Ut||t instanceof Ot||t instanceof Wt)&&t.destroy()}};var Rt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var u=0,f=e;u<f.length;u+=1){var m=f[u];this.programConfigurations[m.id]=new Ft(m,t,i)}this.needsUpload=!1,this._featureMap=new de,this._bufferOffset=0};function Fr(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function tr(e,t,i){var u={color:{source:Go,composite:rl},number:{source:Ja,composite:Go}},f=function(m){return{"line-pattern":{source:Ta,composite:Ta},"fill-pattern":{source:Ta,composite:Ta},"fill-extrusion-pattern":{source:Ta,composite:Ta}}[m]}(e);return f&&f[i]||u[t][i]}Rt.prototype.populatePaintArrays=function(e,t,i,u,f,m){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,t,u,f,m);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Rt.prototype.updatePaintArrays=function(e,t,i,u){for(var f=0,m=i;f<m.length;f+=1){var x=m[f];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,t,x,u)||this.needsUpload}},Rt.prototype.get=function(e){return this.programConfigurations[e]},Rt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Rt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},mt("ConstantBinder",Vt),mt("CrossFadedConstantBinder",Jt),mt("SourceExpressionBinder",Ut),mt("CrossFadedCompositeBinder",Wt),mt("CompositeExpressionBinder",Ot),mt("ProgramConfiguration",Ft,{omit:["_buffers"]}),mt("ProgramConfigurationSet",Rt);var dn=Math.pow(2,14)-1,Wr=-dn-1;function Yi(e){for(var t=8192/e.extent,i=e.loadGeometry(),u=0;u<i.length;u++)for(var f=i[u],m=0;m<f.length;m++){var x=f[m],E=Math.round(x.x*t),A=Math.round(x.y*t);x.x=se(E,Wr,dn),x.y=se(A,Wr,dn),(E<x.x||E>x.x+1||A<x.y||A>x.y+1)&&je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function ur(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Yi(e):[]}}function Gn(e,t,i,u,f){e.emplaceBack(2*t+(u+1)/2,2*i+(f+1)/2)}var wn=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ko,this.indexArray=new Xa,this.segments=new Z,this.programConfigurations=new Rt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Qa(e,t){for(var i=0;i<e.length;i++)if(Ia(t,e[i]))return!0;for(var u=0;u<t.length;u++)if(Ia(e,t[u]))return!0;return!!ws(e,t)}function In(e,t,i){return!!Ia(e,t)||!!$a(t,e,i)}function _a(e,t){if(e.length===1)return Ss(t,e[0]);for(var i=0;i<t.length;i++)for(var u=t[i],f=0;f<u.length;f++)if(Ia(e,u[f]))return!0;for(var m=0;m<e.length;m++)if(Ss(t,e[m]))return!0;for(var x=0;x<t.length;x++)if(ws(e,t[x]))return!0;return!1}function sa(e,t,i){if(e.length>1){if(ws(e,t))return!0;for(var u=0;u<t.length;u++)if($a(t[u],e,i))return!0}for(var f=0;f<e.length;f++)if($a(e[f],t,i))return!0;return!1}function ws(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var u=e[i],f=e[i+1],m=0;m<t.length-1;m++)if(Ho(u,f,t[m],t[m+1]))return!0;return!1}function Ho(e,t,i,u){return lt(e,i,u)!==lt(t,i,u)&&lt(e,t,i)!==lt(e,t,u)}function $a(e,t,i){var u=i*i;if(t.length===1)return e.distSqr(t[0])<u;for(var f=1;f<t.length;f++)if(Wo(e,t[f-1],t[f])<u)return!0;return!1}function Wo(e,t,i){var u=t.distSqr(i);if(u===0)return e.distSqr(t);var f=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/u;return e.distSqr(f<0?t:f>1?i:i.sub(t)._mult(f)._add(t))}function Ss(e,t){for(var i,u,f,m=!1,x=0;x<e.length;x++)for(var E=0,A=(i=e[x]).length-1;E<i.length;A=E++)(u=i[E]).y>t.y!=(f=i[A]).y>t.y&&t.x<(f.x-u.x)*(t.y-u.y)/(f.y-u.y)+u.x&&(m=!m);return m}function Ia(e,t){for(var i=!1,u=0,f=e.length-1;u<e.length;f=u++){var m=e[u],x=e[f];m.y>t.y!=x.y>t.y&&t.x<(x.x-m.x)*(t.y-m.y)/(x.y-m.y)+m.x&&(i=!i)}return i}function Es(e,t,i){var u=i[0],f=i[2];if(e.x<u.x&&t.x<u.x||e.x>f.x&&t.x>f.x||e.y<u.y&&t.y<u.y||e.y>f.y&&t.y>f.y)return!1;var m=lt(e,t,i[0]);return m!==lt(e,t,i[1])||m!==lt(e,t,i[2])||m!==lt(e,t,i[3])}function Aa(e,t,i){var u=t.paint.get(e).value;return u.kind==="constant"?u.value:i.programConfigurations.get(t.id).getMaxValue(e)}function Or(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function La(e,t,i,u,f){if(!t[0]&&!t[1])return e;var m=M.convert(t)._mult(f);i==="viewport"&&m._rotate(-u);for(var x=[],E=0;E<e.length;E++)x.push(e[E].sub(m));return x}wn.prototype.populate=function(e,t,i){var u=this.layers[0],f=[],m=null;u.type==="circle"&&(m=u.layout.get("circle-sort-key"));for(var x=0,E=e;x<E.length;x+=1){var A=E[x],P=A.feature,D=A.id,F=A.index,V=A.sourceLayerIndex,j=this.layers[0]._featureFilter.needGeometry,$=ur(P,j);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),$,i)){var te=m?m.evaluate($,{},i):void 0,he={id:D,properties:P.properties,type:P.type,sourceLayerIndex:V,index:F,geometry:j?$.geometry:Yi(P),patterns:{},sortKey:te};f.push(he)}}m&&f.sort(function(tt,St){return tt.sortKey-St.sortKey});for(var oe=0,ye=f;oe<ye.length;oe+=1){var be=ye[oe],Se=be.geometry,ze=be.index,Me=be.sourceLayerIndex,Ze=e[ze].feature;this.addFeature(be,Se,ze,i),t.featureIndex.insert(Ze,Se,ze,Me,this.index)}},wn.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},wn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wn.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,G),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},wn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wn.prototype.addFeature=function(e,t,i,u){for(var f=0,m=t;f<m.length;f+=1)for(var x=0,E=m[f];x<E.length;x+=1){var A=E[x],P=A.x,D=A.y;if(!(P<0||P>=8192||D<0||D>=8192)){var F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),V=F.vertexLength;Gn(this.layoutVertexArray,P,D,-1,-1),Gn(this.layoutVertexArray,P,D,1,-1),Gn(this.layoutVertexArray,P,D,1,1),Gn(this.layoutVertexArray,P,D,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),F.vertexLength+=4,F.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},u)},mt("CircleBucket",wn,{omit:["layers"]});var eo=new an({"circle-sort-key":new yt(q.layout_circle["circle-sort-key"])}),To={paint:new an({"circle-radius":new yt(q.paint_circle["circle-radius"]),"circle-color":new yt(q.paint_circle["circle-color"]),"circle-blur":new yt(q.paint_circle["circle-blur"]),"circle-opacity":new yt(q.paint_circle["circle-opacity"]),"circle-translate":new zt(q.paint_circle["circle-translate"]),"circle-translate-anchor":new zt(q.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new zt(q.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new zt(q.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(q.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(q.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(q.paint_circle["circle-stroke-opacity"])}),layout:eo},wi=typeof Float32Array<"u"?Float32Array:Array;function ta(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function An(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3],E=t[4],A=t[5],P=t[6],D=t[7],F=t[8],V=t[9],j=t[10],$=t[11],te=t[12],he=t[13],oe=t[14],ye=t[15],be=i[0],Se=i[1],ze=i[2],Me=i[3];return e[0]=be*u+Se*E+ze*F+Me*te,e[1]=be*f+Se*A+ze*V+Me*he,e[2]=be*m+Se*P+ze*j+Me*oe,e[3]=be*x+Se*D+ze*$+Me*ye,e[4]=(be=i[4])*u+(Se=i[5])*E+(ze=i[6])*F+(Me=i[7])*te,e[5]=be*f+Se*A+ze*V+Me*he,e[6]=be*m+Se*P+ze*j+Me*oe,e[7]=be*x+Se*D+ze*$+Me*ye,e[8]=(be=i[8])*u+(Se=i[9])*E+(ze=i[10])*F+(Me=i[11])*te,e[9]=be*f+Se*A+ze*V+Me*he,e[10]=be*m+Se*P+ze*j+Me*oe,e[11]=be*x+Se*D+ze*$+Me*ye,e[12]=(be=i[12])*u+(Se=i[13])*E+(ze=i[14])*F+(Me=i[15])*te,e[13]=be*f+Se*A+ze*V+Me*he,e[14]=be*m+Se*P+ze*j+Me*oe,e[15]=be*x+Se*D+ze*$+Me*ye,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var Io,Gp=An;function nl(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3];return e[0]=i[0]*u+i[4]*f+i[8]*m+i[12]*x,e[1]=i[1]*u+i[5]*f+i[9]*m+i[13]*x,e[2]=i[2]*u+i[6]*f+i[10]*m+i[14]*x,e[3]=i[3]*u+i[7]*f+i[11]*m+i[15]*x,e}Io=new wi(3),wi!=Float32Array&&(Io[0]=0,Io[1]=0,Io[2]=0),function(){var e=new wi(4);wi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var Zp=(function(){var e=new wi(2);wi!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,To)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new wn(i)},t.prototype.queryRadius=function(i){var u=i;return Aa("circle-radius",this,u)+Aa("circle-stroke-width",this,u)+Or(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,A,P){for(var D=La(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,A),F=this.paint.get("circle-radius").evaluate(u,f)+this.paint.get("circle-stroke-width").evaluate(u,f),V=this.paint.get("circle-pitch-alignment")==="map",j=V?D:function(Ze,tt){return Ze.map(function(St){return ks(St,tt)})}(D,P),$=V?F*A:F,te=0,he=m;te<he.length;te+=1)for(var oe=0,ye=he[te];oe<ye.length;oe+=1){var be=ye[oe],Se=V?be:ks(be,P),ze=$,Me=nl([],[be.x,be.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ze*=Me[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ze*=E.cameraToCenterDistance/Me[3]),In(j,Se,ze))return!0}return!1},t}(za));function ks(e,t){var i=nl([],[e.x,e.y,0,1],t);return new M(i[0]/i[3],i[1]/i[3])}var zc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(wn);function Xo(e,t,i,u){var f=t.width,m=t.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==f*m*i)throw new RangeError("mismatched image size")}else u=new Uint8Array(f*m*i);return e.width=f,e.height=m,e.data=u,e}function al(e,t,i){var u=t.width,f=t.height;if(u!==e.width||f!==e.height){var m=Xo({},{width:u,height:f},i);Kp(e,m,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,f)},i),e.width=u,e.height=f,e.data=m.data}}function Kp(e,t,i,u,f,m){if(f.width===0||f.height===0)return t;if(f.width>e.width||f.height>e.height||i.x>e.width-f.width||i.y>e.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||u.x>t.width-f.width||u.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=e.data,E=t.data,A=0;A<f.height;A++)for(var P=((i.y+A)*e.width+i.x)*m,D=((u.y+A)*t.width+u.x)*m,F=0;F<f.width*m;F++)E[D+F]=x[P+F];return t}mt("HeatmapBucket",zc,{omit:["layers"]});var zs=function(e,t){Xo(this,e,1,t)};zs.prototype.resize=function(e){al(this,e,1)},zs.prototype.clone=function(){return new zs({width:this.width,height:this.height},new Uint8Array(this.data))},zs.copy=function(e,t,i,u,f){Kp(e,t,i,u,f,1)};var Zn=function(e,t){Xo(this,e,4,t)};Zn.prototype.resize=function(e){al(this,e,4)},Zn.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Zn.prototype.clone=function(){return new Zn({width:this.width,height:this.height},new Uint8Array(this.data))},Zn.copy=function(e,t,i,u,f){Kp(e,t,i,u,f,4)},mt("AlphaImage",zs),mt("RGBAImage",Zn);var zg={paint:new an({"heatmap-radius":new yt(q.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(q.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new zt(q.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ya(q.paint_heatmap["heatmap-color"]),"heatmap-opacity":new zt(q.paint_heatmap["heatmap-opacity"])})};function Yh(e){var t={},i=e.resolution||256,u=e.clips?e.clips.length:1,f=e.image||new Zn({width:i,height:u}),m=function($,te,he){t[e.evaluationKey]=he;var oe=e.expression.evaluate(t);f.data[$+te+0]=Math.floor(255*oe.r/oe.a),f.data[$+te+1]=Math.floor(255*oe.g/oe.a),f.data[$+te+2]=Math.floor(255*oe.b/oe.a),f.data[$+te+3]=Math.floor(255*oe.a)};if(e.clips)for(var x=0,E=0;x<u;++x,E+=4*i)for(var A=0,P=0;A<i;A++,P+=4){var D=A/(i-1),F=e.clips[x];m(E,P,F.start*(1-D)+F.end*D)}else for(var V=0,j=0;V<i;V++,j+=4)m(0,j,V/(i-1));return f}var Tg=function(e){function t(i){e.call(this,i,zg),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new zc(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Yh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(za),Ig={paint:new an({"hillshade-illumination-direction":new zt(q.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new zt(q.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new zt(q.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new zt(q.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new zt(q.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new zt(q.paint_hillshade["hillshade-accent-color"])})},Ag=function(e){function t(i){e.call(this,i,Ig)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(za),Pg=Hr([{name:"a_pos",components:2,type:"Int16"}],4).members,Hp=Tc,Cg=Tc;function Tc(e,t,i){i=i||2;var u,f,m,x,E,A,P,D=t&&t.length,F=D?t[0]*i:e.length,V=Jh(e,0,F,i,!0),j=[];if(!V||V.next===V.prev)return j;if(D&&(V=function(te,he,oe,ye){var be,Se,ze,Me=[];for(be=0,Se=he.length;be<Se;be++)(ze=Jh(te,he[be]*ye,be<Se-1?he[be+1]*ye:te.length,ye,!1))===ze.next&&(ze.steiner=!0),Me.push(Ng(ze));for(Me.sort(Bg),be=0;be<Me.length;be++)Fg(Me[be],oe),oe=Yo(oe,oe.next);return oe}(e,t,V,i)),e.length>80*i){u=m=e[0],f=x=e[1];for(var $=i;$<F;$+=i)(E=e[$])<u&&(u=E),(A=e[$+1])<f&&(f=A),E>m&&(m=E),A>x&&(x=A);P=(P=Math.max(m-u,x-f))!==0?1/P:0}return lu(V,j,i,u,f,P),j}function Jh(e,t,i,u,f){var m,x;if(f===Yp(e,t,i,u)>0)for(m=t;m<i;m+=u)x=ef(m,e[m],e[m+1],x);else for(m=i-u;m>=t;m-=u)x=ef(m,e[m],e[m+1],x);return x&&Ic(x,x.next)&&(cu(x),x=x.next),x}function Yo(e,t){if(!e)return e;t||(t=e);var i,u=e;do if(i=!1,u.steiner||!Ic(u,u.next)&&Tr(u.prev,u,u.next)!==0)u=u.next;else{if(cu(u),(u=t=u.prev)===u.next)break;i=!0}while(i||u!==t);return t}function lu(e,t,i,u,f,m,x){if(e){!x&&m&&function(D,F,V,j){var $=D;do $.z===null&&($.z=Wp($.x,$.y,F,V,j)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==D);$.prevZ.nextZ=null,$.prevZ=null,function(te){var he,oe,ye,be,Se,ze,Me,Ze,tt=1;do{for(oe=te,te=null,Se=null,ze=0;oe;){for(ze++,ye=oe,Me=0,he=0;he<tt&&(Me++,ye=ye.nextZ);he++);for(Ze=tt;Me>0||Ze>0&&ye;)Me!==0&&(Ze===0||!ye||oe.z<=ye.z)?(be=oe,oe=oe.nextZ,Me--):(be=ye,ye=ye.nextZ,Ze--),Se?Se.nextZ=be:te=be,be.prevZ=Se,Se=be;oe=ye}Se.nextZ=null,tt*=2}while(ze>1)}($)}(e,u,f,m);for(var E,A,P=e;e.prev!==e.next;)if(E=e.prev,A=e.next,m?Dg(e,u,f,m):Mg(e))t.push(E.i/i),t.push(e.i/i),t.push(A.i/i),cu(e),e=A.next,P=A.next;else if((e=A)===P){x?x===1?lu(e=Lg(Yo(e),t,i),t,i,u,f,m,2):x===2&&Rg(e,t,i,u,f,m):lu(Yo(e),t,i,u,f,m,1);break}}}function Mg(e){var t=e.prev,i=e,u=e.next;if(Tr(t,i,u)>=0)return!1;for(var f=e.next.next;f!==e.prev;){if(ol(t.x,t.y,i.x,i.y,u.x,u.y,f.x,f.y)&&Tr(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Dg(e,t,i,u){var f=e.prev,m=e,x=e.next;if(Tr(f,m,x)>=0)return!1;for(var E=f.x>m.x?f.x>x.x?f.x:x.x:m.x>x.x?m.x:x.x,A=f.y>m.y?f.y>x.y?f.y:x.y:m.y>x.y?m.y:x.y,P=Wp(f.x<m.x?f.x<x.x?f.x:x.x:m.x<x.x?m.x:x.x,f.y<m.y?f.y<x.y?f.y:x.y:m.y<x.y?m.y:x.y,t,i,u),D=Wp(E,A,t,i,u),F=e.prevZ,V=e.nextZ;F&&F.z>=P&&V&&V.z<=D;){if(F!==e.prev&&F!==e.next&&ol(f.x,f.y,m.x,m.y,x.x,x.y,F.x,F.y)&&Tr(F.prev,F,F.next)>=0||(F=F.prevZ,V!==e.prev&&V!==e.next&&ol(f.x,f.y,m.x,m.y,x.x,x.y,V.x,V.y)&&Tr(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;F&&F.z>=P;){if(F!==e.prev&&F!==e.next&&ol(f.x,f.y,m.x,m.y,x.x,x.y,F.x,F.y)&&Tr(F.prev,F,F.next)>=0)return!1;F=F.prevZ}for(;V&&V.z<=D;){if(V!==e.prev&&V!==e.next&&ol(f.x,f.y,m.x,m.y,x.x,x.y,V.x,V.y)&&Tr(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function Lg(e,t,i){var u=e;do{var f=u.prev,m=u.next.next;!Ic(f,m)&&Qh(f,u,u.next,m)&&uu(f,m)&&uu(m,f)&&(t.push(f.i/i),t.push(u.i/i),t.push(m.i/i),cu(u),cu(u.next),u=e=m),u=u.next}while(u!==e);return Yo(u)}function Rg(e,t,i,u,f,m){var x=e;do{for(var E=x.next.next;E!==x.prev;){if(x.i!==E.i&&Ug(x,E)){var A=$h(x,E);return x=Yo(x,x.next),A=Yo(A,A.next),lu(x,t,i,u,f,m),void lu(A,t,i,u,f,m)}E=E.next}x=x.next}while(x!==e)}function Bg(e,t){return e.x-t.x}function Fg(e,t){if(t=function(u,f){var m,x=f,E=u.x,A=u.y,P=-1/0;do{if(A<=x.y&&A>=x.next.y&&x.next.y!==x.y){var D=x.x+(A-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(D<=E&&D>P){if(P=D,D===E){if(A===x.y)return x;if(A===x.next.y)return x.next}m=x.x<x.next.x?x:x.next}}x=x.next}while(x!==f);if(!m)return null;if(E===P)return m;var F,V=m,j=m.x,$=m.y,te=1/0;x=m;do E>=x.x&&x.x>=j&&E!==x.x&&ol(A<$?E:P,A,j,$,A<$?P:E,A,x.x,x.y)&&(F=Math.abs(A-x.y)/(E-x.x),uu(x,u)&&(F<te||F===te&&(x.x>m.x||x.x===m.x&&Og(m,x)))&&(m=x,te=F)),x=x.next;while(x!==V);return m}(e,t)){var i=$h(t,e);Yo(t,t.next),Yo(i,i.next)}}function Og(e,t){return Tr(e.prev,e,t.prev)<0&&Tr(t.next,e,e.next)<0}function Wp(e,t,i,u,f){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*f)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-u)*f)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ng(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function ol(e,t,i,u,f,m,x,E){return(f-x)*(t-E)-(e-x)*(m-E)>=0&&(e-x)*(u-E)-(i-x)*(t-E)>=0&&(i-x)*(m-E)-(f-x)*(u-E)>=0}function Ug(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,u){var f=i;do{if(f.i!==i.i&&f.next.i!==i.i&&f.i!==u.i&&f.next.i!==u.i&&Qh(f,f.next,i,u))return!0;f=f.next}while(f!==i);return!1}(e,t)&&(uu(e,t)&&uu(t,e)&&function(i,u){var f=i,m=!1,x=(i.x+u.x)/2,E=(i.y+u.y)/2;do f.y>E!=f.next.y>E&&f.next.y!==f.y&&x<(f.next.x-f.x)*(E-f.y)/(f.next.y-f.y)+f.x&&(m=!m),f=f.next;while(f!==i);return m}(e,t)&&(Tr(e.prev,e,t.prev)||Tr(e,t.prev,t))||Ic(e,t)&&Tr(e.prev,e,e.next)>0&&Tr(t.prev,t,t.next)>0)}function Tr(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Ic(e,t){return e.x===t.x&&e.y===t.y}function Qh(e,t,i,u){var f=Pc(Tr(e,t,i)),m=Pc(Tr(e,t,u)),x=Pc(Tr(i,u,e)),E=Pc(Tr(i,u,t));return f!==m&&x!==E||!(f!==0||!Ac(e,i,t))||!(m!==0||!Ac(e,u,t))||!(x!==0||!Ac(i,e,u))||!(E!==0||!Ac(i,t,u))}function Ac(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Pc(e){return e>0?1:e<0?-1:0}function uu(e,t){return Tr(e.prev,e,e.next)<0?Tr(e,t,e.next)>=0&&Tr(e,e.prev,t)>=0:Tr(e,t,e.prev)<0||Tr(e,e.next,t)<0}function $h(e,t){var i=new Xp(e.i,e.x,e.y),u=new Xp(t.i,t.x,t.y),f=e.next,m=t.prev;return e.next=t,t.prev=e,i.next=f,f.prev=i,u.next=i,i.prev=u,m.next=u,u.prev=m,u}function ef(e,t,i,u){var f=new Xp(e,t,i);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function cu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Xp(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yp(e,t,i,u){for(var f=0,m=t,x=i-u;m<i;m+=u)f+=(e[x]-e[m])*(e[m+1]+e[x+1]),x=m;return f}function Vg(e,t,i,u,f){(function m(x,E,A,P,D){for(;P>A;){if(P-A>600){var F=P-A+1,V=E-A+1,j=Math.log(F),$=.5*Math.exp(2*j/3),te=.5*Math.sqrt(j*$*(F-$)/F)*(V-F/2<0?-1:1);m(x,E,Math.max(A,Math.floor(E-V*$/F+te)),Math.min(P,Math.floor(E+(F-V)*$/F+te)),D)}var he=x[E],oe=A,ye=P;for(pu(x,A,E),D(x[P],he)>0&&pu(x,A,P);oe<ye;){for(pu(x,oe,ye),oe++,ye--;D(x[oe],he)<0;)oe++;for(;D(x[ye],he)>0;)ye--}D(x[A],he)===0?pu(x,A,ye):pu(x,++ye,P),ye<=E&&(A=ye+1),E<=ye&&(P=ye-1)}})(e,t,i||0,u||e.length-1,f||qg)}function pu(e,t,i){var u=e[t];e[t]=e[i],e[i]=u}function qg(e,t){return e<t?-1:e>t?1:0}function Jp(e,t){var i=e.length;if(i<=1)return[e];for(var u,f,m=[],x=0;x<i;x++){var E=De(e[x]);E!==0&&(e[x].area=Math.abs(E),f===void 0&&(f=E<0),f===E<0?(u&&m.push(u),u=[e[x]]):u.push(e[x]))}if(u&&m.push(u),t>1)for(var A=0;A<m.length;A++)m[A].length<=t||(Vg(m[A],t,1,m[A].length-1,jg),m[A]=m[A].slice(0,t));return m}function jg(e,t){return t.area-e.area}function Qp(e,t,i){for(var u=i.patternDependencies,f=!1,m=0,x=t;m<x.length;m+=1){var E=x[m].paint.get(e+"-pattern");E.isConstant()||(f=!0);var A=E.constantOr(null);A&&(f=!0,u[A.to]=!0,u[A.from]=!0)}return f}function $p(e,t,i,u,f){for(var m=f.patternDependencies,x=0,E=t;x<E.length;x+=1){var A=E[x],P=A.paint.get(e+"-pattern").value;if(P.kind!=="constant"){var D=P.evaluate({zoom:u-1},i,{},f.availableImages),F=P.evaluate({zoom:u},i,{},f.availableImages),V=P.evaluate({zoom:u+1},i,{},f.availableImages);F=F&&F.name?F.name:F,V=V&&V.name?V.name:V,m[D=D&&D.name?D.name:D]=!0,m[F]=!0,m[V]=!0,i.patterns[A.id]={min:D,mid:F,max:V}}}return i}Tc.deviation=function(e,t,i,u){var f=t&&t.length,m=Math.abs(Yp(e,0,f?t[0]*i:e.length,i));if(f)for(var x=0,E=t.length;x<E;x++)m-=Math.abs(Yp(e,t[x]*i,x<E-1?t[x+1]*i:e.length,i));var A=0;for(x=0;x<u.length;x+=3){var P=u[x]*i,D=u[x+1]*i,F=u[x+2]*i;A+=Math.abs((e[P]-e[F])*(e[D+1]-e[P+1])-(e[P]-e[D])*(e[F+1]-e[P+1]))}return m===0&&A===0?0:Math.abs((A-m)/m)},Tc.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},u=0,f=0;f<e.length;f++){for(var m=0;m<e[f].length;m++)for(var x=0;x<t;x++)i.vertices.push(e[f][m][x]);f>0&&i.holes.push(u+=e[f-1].length)}return i},Hp.default=Cg;var Ra=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ko,this.indexArray=new Xa,this.indexArray2=new xs,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Z,this.segments2=new Z,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ra.prototype.populate=function(e,t,i){this.hasPattern=Qp("fill",this.layers,t);for(var u=this.layers[0].layout.get("fill-sort-key"),f=[],m=0,x=e;m<x.length;m+=1){var E=x[m],A=E.feature,P=E.id,D=E.index,F=E.sourceLayerIndex,V=this.layers[0]._featureFilter.needGeometry,j=ur(A,V);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),j,i)){var $=u?u.evaluate(j,{},i,t.availableImages):void 0,te={id:P,properties:A.properties,type:A.type,sourceLayerIndex:F,index:D,geometry:V?j.geometry:Yi(A),patterns:{},sortKey:$};f.push(te)}}u&&f.sort(function(Ze,tt){return Ze.sortKey-tt.sortKey});for(var he=0,oe=f;he<oe.length;he+=1){var ye=oe[he],be=ye.geometry,Se=ye.index,ze=ye.sourceLayerIndex;if(this.hasPattern){var Me=$p("fill",this.layers,ye,this.zoom,t);this.patternFeatures.push(Me)}else this.addFeature(ye,be,Se,i,{});t.featureIndex.insert(e[Se].feature,be,Se,ze,this.index)}},Ra.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ra.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.patternFeatures;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Ra.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ra.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ra.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pg),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Ra.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ra.prototype.addFeature=function(e,t,i,u,f){for(var m=0,x=Jp(t,500);m<x.length;m+=1){for(var E=x[m],A=0,P=0,D=E;P<D.length;P+=1)A+=D[P].length;for(var F=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),V=F.vertexLength,j=[],$=[],te=0,he=E;te<he.length;te+=1){var oe=he[te];if(oe.length!==0){oe!==E[0]&&$.push(j.length/2);var ye=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),be=ye.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(be+oe.length-1,be),j.push(oe[0].x),j.push(oe[0].y);for(var Se=1;Se<oe.length;Se++)this.layoutVertexArray.emplaceBack(oe[Se].x,oe[Se].y),this.indexArray2.emplaceBack(be+Se-1,be+Se),j.push(oe[Se].x),j.push(oe[Se].y);ye.vertexLength+=oe.length,ye.primitiveLength+=oe.length}}for(var ze=Hp(j,$),Me=0;Me<ze.length;Me+=3)this.indexArray.emplaceBack(V+ze[Me],V+ze[Me+1],V+ze[Me+2]);F.vertexLength+=A,F.primitiveLength+=ze.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},mt("FillBucket",Ra,{omit:["layers","patternFeatures"]});var Gg=new an({"fill-sort-key":new yt(q.layout_fill["fill-sort-key"])}),Zg={paint:new an({"fill-antialias":new zt(q.paint_fill["fill-antialias"]),"fill-opacity":new yt(q.paint_fill["fill-opacity"]),"fill-color":new yt(q.paint_fill["fill-color"]),"fill-outline-color":new yt(q.paint_fill["fill-outline-color"]),"fill-translate":new zt(q.paint_fill["fill-translate"]),"fill-translate-anchor":new zt(q.paint_fill["fill-translate-anchor"]),"fill-pattern":new $s(q.paint_fill["fill-pattern"])}),layout:Gg},Kg=function(e){function t(i){e.call(this,i,Zg)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u);var f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new Ra(i)},t.prototype.queryRadius=function(){return Or(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,A){return _a(La(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,A),m)},t.prototype.isTileClipped=function(){return!0},t}(za),Hg=Hr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,tf=sl;function sl(e,t,i,u,f){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=f,e.readFields(Wg,this,t)}function Wg(e,t,i){e==1?t.id=i.readVarint():e==2?function(u,f){for(var m=u.readVarint()+u.pos;u.pos<m;){var x=f._keys[u.readVarint()],E=f._values[u.readVarint()];f.properties[x]=E}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function Xg(e){for(var t,i,u=0,f=0,m=e.length,x=m-1;f<m;x=f++)u+=((i=e[x]).x-(t=e[f]).x)*(t.y+i.y);return u}sl.types=["Unknown","Point","LineString","Polygon"],sl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,u=1,f=0,m=0,x=0,E=[];e.pos<i;){if(f<=0){var A=e.readVarint();u=7&A,f=A>>3}if(f--,u===1||u===2)m+=e.readSVarint(),x+=e.readSVarint(),u===1&&(t&&E.push(t),t=[]),t.push(new M(m,x));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&E.push(t),E},sl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,u=0,f=0,m=0,x=1/0,E=-1/0,A=1/0,P=-1/0;e.pos<t;){if(u<=0){var D=e.readVarint();i=7&D,u=D>>3}if(u--,i===1||i===2)(f+=e.readSVarint())<x&&(x=f),f>E&&(E=f),(m+=e.readSVarint())<A&&(A=m),m>P&&(P=m);else if(i!==7)throw new Error("unknown command "+i)}return[x,A,E,P]},sl.prototype.toGeoJSON=function(e,t,i){var u,f,m=this.extent*Math.pow(2,i),x=this.extent*e,E=this.extent*t,A=this.loadGeometry(),P=sl.types[this.type];function D(j){for(var $=0;$<j.length;$++){var te=j[$];j[$]=[360*(te.x+x)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+E)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(u=0;u<A.length;u++)F[u]=A[u][0];D(A=F);break;case 2:for(u=0;u<A.length;u++)D(A[u]);break;case 3:for(A=function(j){var $=j.length;if($<=1)return[j];for(var te,he,oe=[],ye=0;ye<$;ye++){var be=Xg(j[ye]);be!==0&&(he===void 0&&(he=be<0),he===be<0?(te&&oe.push(te),te=[j[ye]]):te.push(j[ye]))}return te&&oe.push(te),oe}(A),u=0;u<A.length;u++)for(f=0;f<A[u].length;f++)D(A[u][f])}A.length===1?A=A[0]:P="Multi"+P;var V={type:"Feature",geometry:{type:P,coordinates:A},properties:this.properties};return"id"in this&&(V.id=this.id),V};var rf=nf;function nf(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Yg,this,t),this.length=this._features.length}function Yg(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(u){for(var f=null,m=u.readVarint()+u.pos;u.pos<m;){var x=u.readVarint()>>3;f=x===1?u.readString():x===2?u.readFloat():x===3?u.readDouble():x===4?u.readVarint64():x===5?u.readVarint():x===6?u.readSVarint():x===7?u.readBoolean():null}return f}(i))}function Jg(e,t,i){if(e===3){var u=new rf(i,i.readVarint()+i.pos);u.length&&(t[u.name]=u)}}nf.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new tf(this._pbf,t,this.extent,this._keys,this._values)};var ll={VectorTile:function(e,t){this.layers=e.readFields(Jg,{},t)},VectorTileFeature:tf,VectorTileLayer:rf},Qg=ll.VectorTileFeature.types,eh=Math.pow(2,13);function hu(e,t,i,u,f,m,x,E){e.emplaceBack(t,i,2*Math.floor(u*eh)+x,f*eh*2,m*eh*2,Math.round(E))}var Ba=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Da,this.indexArray=new Xa,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Z,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function $g(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Ba.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=Qp("fill-extrusion",this.layers,t);for(var u=0,f=e;u<f.length;u+=1){var m=f[u],x=m.feature,E=m.id,A=m.index,P=m.sourceLayerIndex,D=this.layers[0]._featureFilter.needGeometry,F=ur(x,D);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),F,i)){var V={id:E,sourceLayerIndex:P,index:A,geometry:D?F.geometry:Yi(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push($p("fill-extrusion",this.layers,V,this.zoom,t)):this.addFeature(V,V.geometry,A,i,{}),t.featureIndex.insert(x,V.geometry,A,P,this.index,!0)}}},Ba.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.features;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Ba.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ba.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ba.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ba.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ba.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ba.prototype.addFeature=function(e,t,i,u,f){for(var m=0,x=Jp(t,500);m<x.length;m+=1){for(var E=x[m],A=0,P=0,D=E;P<D.length;P+=1)A+=D[P].length;for(var F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),V=0,j=E;V<j.length;V+=1){var $=j[V];if($.length!==0&&!((ti=$).every(function(Zt){return Zt.x<0})||ti.every(function(Zt){return Zt.x>8192})||ti.every(function(Zt){return Zt.y<0})||ti.every(function(Zt){return Zt.y>8192})))for(var te=0,he=0;he<$.length;he++){var oe=$[he];if(he>=1){var ye=$[he-1];if(!$g(oe,ye)){F.vertexLength+4>Z.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var be=oe.sub(ye)._perp()._unit(),Se=ye.dist(oe);te+Se>32768&&(te=0),hu(this.layoutVertexArray,oe.x,oe.y,be.x,be.y,0,0,te),hu(this.layoutVertexArray,oe.x,oe.y,be.x,be.y,0,1,te),hu(this.layoutVertexArray,ye.x,ye.y,be.x,be.y,0,0,te+=Se),hu(this.layoutVertexArray,ye.x,ye.y,be.x,be.y,0,1,te);var ze=F.vertexLength;this.indexArray.emplaceBack(ze,ze+2,ze+1),this.indexArray.emplaceBack(ze+1,ze+2,ze+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+A>Z.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),Qg[e.type]==="Polygon"){for(var Me=[],Ze=[],tt=F.vertexLength,St=0,ut=E;St<ut.length;St+=1){var It=ut[St];if(It.length!==0){It!==E[0]&&Ze.push(Me.length/2);for(var pt=0;pt<It.length;pt++){var $t=It[pt];hu(this.layoutVertexArray,$t.x,$t.y,0,0,1,1,0),Me.push($t.x),Me.push($t.y)}}}for(var Bt=Hp(Me,Ze),_t=0;_t<Bt.length;_t+=3)this.indexArray.emplaceBack(tt+Bt[_t],tt+Bt[_t+2],tt+Bt[_t+1]);F.primitiveLength+=Bt.length/3,F.vertexLength+=A}}var ti;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},mt("FillExtrusionBucket",Ba,{omit:["layers","features"]});var ey={paint:new an({"fill-extrusion-opacity":new zt(q["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(q["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new zt(q["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new zt(q["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $s(q["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(q["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(q["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new zt(q["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ty=function(e){function t(i){e.call(this,i,ey)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Ba(i)},t.prototype.queryRadius=function(){return Or(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,A,P){var D=La(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,A),F=this.paint.get("fill-extrusion-height").evaluate(u,f),V=this.paint.get("fill-extrusion-base").evaluate(u,f),j=function(te,he,oe,ye){for(var be=[],Se=0,ze=te;Se<ze.length;Se+=1){var Me=ze[Se],Ze=[Me.x,Me.y,0,1];nl(Ze,Ze,he),be.push(new M(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return be}(D,P),$=function(te,he,oe,ye){for(var be=[],Se=[],ze=ye[8]*he,Me=ye[9]*he,Ze=ye[10]*he,tt=ye[11]*he,St=ye[8]*oe,ut=ye[9]*oe,It=ye[10]*oe,pt=ye[11]*oe,$t=0,Bt=te;$t<Bt.length;$t+=1){for(var _t=[],ti=[],Zt=0,di=Bt[$t];Zt<di.length;Zt+=1){var At=di[Zt],bi=At.x,Hi=At.y,ir=ye[0]*bi+ye[4]*Hi+ye[12],Ji=ye[1]*bi+ye[5]*Hi+ye[13],Wi=ye[2]*bi+ye[6]*Hi+ye[14],rr=ye[3]*bi+ye[7]*Hi+ye[15],Nr=Wi+Ze,Ur=rr+tt,En=ir+St,Yr=Ji+ut,kn=Wi+It,cr=rr+pt,Jr=new M((ir+ze)/Ur,(Ji+Me)/Ur);Jr.z=Nr/Ur,_t.push(Jr);var ai=new M(En/cr,Yr/cr);ai.z=kn/cr,ti.push(ai)}be.push(_t),Se.push(ti)}return[be,Se]}(m,V,F,P);return function(te,he,oe){var ye=1/0;_a(oe,he)&&(ye=af(oe,he[0]));for(var be=0;be<he.length;be++)for(var Se=he[be],ze=te[be],Me=0;Me<Se.length-1;Me++){var Ze=Se[Me],tt=[Ze,Se[Me+1],ze[Me+1],ze[Me],Ze];Qa(oe,tt)&&(ye=Math.min(ye,af(oe,tt)))}return ye!==1/0&&ye}($[0],$[1],j)},t}(za);function fu(e,t){return e.x*t.x+e.y*t.y}function af(e,t){if(e.length===1){for(var i,u=0,f=t[u++];!i||f.equals(i);)if(!(i=t[u++]))return 1/0;for(;u<t.length;u++){var m=t[u],x=e[0],E=i.sub(f),A=m.sub(f),P=x.sub(f),D=fu(E,E),F=fu(E,A),V=fu(A,A),j=fu(P,E),$=fu(P,A),te=D*V-F*F,he=(V*j-F*$)/te,oe=(D*$-F*j)/te,ye=f.z*(1-he-oe)+i.z*he+m.z*oe;if(isFinite(ye))return ye}return 1/0}for(var be=1/0,Se=0,ze=t;Se<ze.length;Se+=1)be=Math.min(be,ze[Se].z);return be}var iy=Hr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ry=Hr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,ny=ll.VectorTileFeature.types,ay=Math.cos(Math.PI/180*37.5),of=Math.pow(2,14)/.5,Pn=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new jn,this.layoutVertexArray2=new Go,this.indexArray=new Xa,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Z,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Pn.prototype.populate=function(e,t,i){this.hasPattern=Qp("line",this.layers,t);for(var u=this.layers[0].layout.get("line-sort-key"),f=[],m=0,x=e;m<x.length;m+=1){var E=x[m],A=E.feature,P=E.id,D=E.index,F=E.sourceLayerIndex,V=this.layers[0]._featureFilter.needGeometry,j=ur(A,V);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),j,i)){var $=u?u.evaluate(j,{},i):void 0,te={id:P,properties:A.properties,type:A.type,sourceLayerIndex:F,index:D,geometry:V?j.geometry:Yi(A),patterns:{},sortKey:$};f.push(te)}}u&&f.sort(function(Ze,tt){return Ze.sortKey-tt.sortKey});for(var he=0,oe=f;he<oe.length;he+=1){var ye=oe[he],be=ye.geometry,Se=ye.index,ze=ye.sourceLayerIndex;if(this.hasPattern){var Me=$p("line",this.layers,ye,this.zoom,t);this.patternFeatures.push(Me)}else this.addFeature(ye,be,Se,i,{});t.featureIndex.insert(e[Se].feature,be,Se,ze,this.index)}},Pn.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Pn.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.patternFeatures;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Pn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Pn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Pn.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ry)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,iy),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Pn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Pn.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Pn.prototype.addFeature=function(e,t,i,u,f){var m=this.layers[0].layout,x=m.get("line-join").evaluate(e,{}),E=m.get("line-cap"),A=m.get("line-miter-limit"),P=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var D=0,F=t;D<F.length;D+=1)this.addLine(F[D],e,x,E,A,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},Pn.prototype.addLine=function(e,t,i,u,f,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<e.length-1;x++)this.totalDistance+=e[x].dist(e[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var E=ny[t.type]==="Polygon",A=e.length;A>=2&&e[A-1].equals(e[A-2]);)A--;for(var P=0;P<A-1&&e[P].equals(e[P+1]);)P++;if(!(A<(E?3:2))){i==="bevel"&&(f=1.05);var D,F=this.overscaling<=16?122880/(512*this.overscaling):0,V=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),j=void 0,$=void 0,te=void 0,he=void 0;this.e1=this.e2=-1,E&&(he=e[P].sub(D=e[A-2])._unit()._perp());for(var oe=P;oe<A;oe++)if(!($=oe===A-1?E?e[P+1]:void 0:e[oe+1])||!e[oe].equals($)){he&&(te=he),D&&(j=D),D=e[oe],he=$?$.sub(D)._unit()._perp():te;var ye=(te=te||he).add(he);ye.x===0&&ye.y===0||ye._unit();var be=te.x*he.x+te.y*he.y,Se=ye.x*he.x+ye.y*he.y,ze=Se!==0?1/Se:1/0,Me=2*Math.sqrt(2-2*Se),Ze=Se<ay&&j&&$,tt=te.x*he.y-te.y*he.x>0;if(Ze&&oe>P){var St=D.dist(j);if(St>2*F){var ut=D.sub(D.sub(j)._mult(F/St)._round());this.updateDistance(j,ut),this.addCurrentVertex(ut,te,0,0,V),j=ut}}var It=j&&$,pt=It?i:E?"butt":u;if(It&&pt==="round"&&(ze<m?pt="miter":ze<=2&&(pt="fakeround")),pt==="miter"&&ze>f&&(pt="bevel"),pt==="bevel"&&(ze>2&&(pt="flipbevel"),ze<f&&(pt="miter")),j&&this.updateDistance(j,D),pt==="miter")ye._mult(ze),this.addCurrentVertex(D,ye,0,0,V);else if(pt==="flipbevel"){if(ze>100)ye=he.mult(-1);else{var $t=ze*te.add(he).mag()/te.sub(he).mag();ye._perp()._mult($t*(tt?-1:1))}this.addCurrentVertex(D,ye,0,0,V),this.addCurrentVertex(D,ye.mult(-1),0,0,V)}else if(pt==="bevel"||pt==="fakeround"){var Bt=-Math.sqrt(ze*ze-1),_t=tt?Bt:0,ti=tt?0:Bt;if(j&&this.addCurrentVertex(D,te,_t,ti,V),pt==="fakeround")for(var Zt=Math.round(180*Me/Math.PI/20),di=1;di<Zt;di++){var At=di/Zt;if(At!==.5){var bi=At-.5;At+=At*bi*(At-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*bi*bi+(.848013+be*(.215638*be-1.06021)))}var Hi=he.sub(te)._mult(At)._add(te)._unit()._mult(tt?-1:1);this.addHalfVertex(D,Hi.x,Hi.y,!1,tt,0,V)}$&&this.addCurrentVertex(D,he,-_t,-ti,V)}else if(pt==="butt")this.addCurrentVertex(D,ye,0,0,V);else if(pt==="square"){var ir=j?1:-1;this.addCurrentVertex(D,ye,ir,ir,V)}else pt==="round"&&(j&&(this.addCurrentVertex(D,te,0,0,V),this.addCurrentVertex(D,te,1,1,V,!0)),$&&(this.addCurrentVertex(D,he,-1,-1,V,!0),this.addCurrentVertex(D,he,0,0,V)));if(Ze&&oe<A-1){var Ji=D.dist($);if(Ji>2*F){var Wi=D.add($.sub(D)._mult(F/Ji)._round());this.updateDistance(D,Wi),this.addCurrentVertex(Wi,he,0,0,V),D=Wi}}}}},Pn.prototype.addCurrentVertex=function(e,t,i,u,f,m){m===void 0&&(m=!1);var x=t.y*u-t.x,E=-t.y-t.x*u;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,m,!1,i,f),this.addHalfVertex(e,x,E,m,!0,-u,f),this.distance>of/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,u,f,m))},Pn.prototype.addHalfVertex=function(e,t,i,u,f,m,x){var E=.5*(this.lineClips?this.scaledDistance*(of-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(f?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(m===0?0:m<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var A=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),x.primitiveLength++),f?this.e2=A:this.e1=A},Pn.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Pn.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},mt("LineBucket",Pn,{omit:["layers","patternFeatures"]});var oy=new an({"line-cap":new zt(q.layout_line["line-cap"]),"line-join":new yt(q.layout_line["line-join"]),"line-miter-limit":new zt(q.layout_line["line-miter-limit"]),"line-round-limit":new zt(q.layout_line["line-round-limit"]),"line-sort-key":new yt(q.layout_line["line-sort-key"])}),sf={paint:new an({"line-opacity":new yt(q.paint_line["line-opacity"]),"line-color":new yt(q.paint_line["line-color"]),"line-translate":new zt(q.paint_line["line-translate"]),"line-translate-anchor":new zt(q.paint_line["line-translate-anchor"]),"line-width":new yt(q.paint_line["line-width"]),"line-gap-width":new yt(q.paint_line["line-gap-width"]),"line-offset":new yt(q.paint_line["line-offset"]),"line-blur":new yt(q.paint_line["line-blur"]),"line-dasharray":new xn(q.paint_line["line-dasharray"]),"line-pattern":new $s(q.paint_line["line-pattern"]),"line-gradient":new ya(q.paint_line["line-gradient"])}),layout:oy},lf=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,u){return u=new ii(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,i,u)},t.prototype.evaluate=function(i,u,f,m){return u=ge({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,i,u,f,m)},t}(yt))(sf.paint.properties["line-width"].specification);lf.useIntegerZoom=!0;var sy=function(e){function t(i){e.call(this,i,sf),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof On,this.gradientVersion=(this.gradientVersion+1)%W)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u),this.paint._values["line-floorwidth"]=lf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new Pn(i)},t.prototype.queryRadius=function(i){var u=i,f=uf(Aa("line-width",this,u),Aa("line-gap-width",this,u)),m=Aa("line-offset",this,u);return f/2+Math.abs(m)+Or(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,A){var P=La(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,A),D=A/2*uf(this.paint.get("line-width").evaluate(u,f),this.paint.get("line-gap-width").evaluate(u,f)),F=this.paint.get("line-offset").evaluate(u,f);return F&&(m=function(V,j){for(var $=[],te=new M(0,0),he=0;he<V.length;he++){for(var oe=V[he],ye=[],be=0;be<oe.length;be++){var Se=oe[be],ze=oe[be+1],Me=be===0?te:Se.sub(oe[be-1])._unit()._perp(),Ze=be===oe.length-1?te:ze.sub(Se)._unit()._perp(),tt=Me._add(Ze)._unit();tt._mult(1/(tt.x*Ze.x+tt.y*Ze.y)),ye.push(tt._mult(j)._add(Se))}$.push(ye)}return $}(m,F*A)),function(V,j,$){for(var te=0;te<j.length;te++){var he=j[te];if(V.length>=3){for(var oe=0;oe<he.length;oe++)if(Ia(V,he[oe]))return!0}if(sa(V,he,$))return!0}return!1}(P,m,D)},t.prototype.isTileClipped=function(){return!0},t}(za);function uf(e,t){return t>0?t+2*e:e}var ly=Hr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uy=Hr([{name:"a_projected_pos",components:3,type:"Float32"}],4),cy=(Hr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Hr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),cf=(Hr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Hr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),py=Hr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hy(e,t,i){return e.sections.forEach(function(u){u.text=function(f,m,x){var E=m.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?f=f.toLocaleUpperCase():E==="lowercase"&&(f=f.toLocaleLowerCase()),ea.applyArabicShaping&&(f=ea.applyArabicShaping(f)),f}(u.text,t,i)}),e}Hr([{name:"triangle",components:3,type:"Uint16"}]),Hr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Hr([{type:"Float32",name:"offsetX"}]),Hr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var du={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},pf=function(e,t,i,u,f){var m,x,E=8*f-u-1,A=(1<<E)-1,P=A>>1,D=-7,F=i?f-1:0,V=i?-1:1,j=e[t+F];for(F+=V,m=j&(1<<-D)-1,j>>=-D,D+=E;D>0;m=256*m+e[t+F],F+=V,D-=8);for(x=m&(1<<-D)-1,m>>=-D,D+=u;D>0;x=256*x+e[t+F],F+=V,D-=8);if(m===0)m=1-P;else{if(m===A)return x?NaN:1/0*(j?-1:1);x+=Math.pow(2,u),m-=P}return(j?-1:1)*x*Math.pow(2,m-u)},hf=function(e,t,i,u,f,m){var x,E,A,P=8*m-f-1,D=(1<<P)-1,F=D>>1,V=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=u?0:m-1,$=u?1:-1,te=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(E=isNaN(t)?1:0,x=D):(x=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-x))<1&&(x--,A*=2),(t+=x+F>=1?V/A:V*Math.pow(2,1-F))*A>=2&&(x++,A/=2),x+F>=D?(E=0,x=D):x+F>=1?(E=(t*A-1)*Math.pow(2,f),x+=F):(E=t*Math.pow(2,F-1)*Math.pow(2,f),x=0));f>=8;e[i+j]=255&E,j+=$,E/=256,f-=8);for(x=x<<f|E,P+=f;P>0;e[i+j]=255&x,j+=$,x/=256,P-=8);e[i+j-$]|=128*te},Cc=Fi;function Fi(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Fi.Varint=0,Fi.Fixed64=1,Fi.Bytes=2,Fi.Fixed32=5;var ff=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ao(e){return e.type===Fi.Bytes?e.readVarint()+e.pos:e.pos+1}function ul(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function df(e,t,i){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(u);for(var f=i.pos-1;f>=e;f--)i.buf[f+u]=i.buf[f]}function fy(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function dy(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function my(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function gy(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function yy(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function _y(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function vy(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function by(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function xy(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Mc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function cl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function mf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function wy(e,t,i){e===1&&i.readMessage(Sy,t)}function Sy(e,t,i){if(e===3){var u=i.readMessage(Ey,{}),f=u.width,m=u.height,x=u.left,E=u.top,A=u.advance;t.push({id:u.id,bitmap:new zs({width:f+6,height:m+6},u.bitmap),metrics:{width:f,height:m,left:x,top:E,advance:A}})}}function Ey(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function gf(e){for(var t=0,i=0,u=0,f=e;u<f.length;u+=1){var m=f[u];t+=m.w*m.h,i=Math.max(i,m.w)}e.sort(function(te,he){return he.h-te.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],E=0,A=0,P=0,D=e;P<D.length;P+=1)for(var F=D[P],V=x.length-1;V>=0;V--){var j=x[V];if(!(F.w>j.w||F.h>j.h)){if(F.x=j.x,F.y=j.y,A=Math.max(A,F.y+F.h),E=Math.max(E,F.x+F.w),F.w===j.w&&F.h===j.h){var $=x.pop();V<x.length&&(x[V]=$)}else F.h===j.h?(j.x+=F.w,j.w-=F.w):F.w===j.w?(j.y+=F.h,j.h-=F.h):(x.push({x:j.x+F.w,y:j.y,w:j.w-F.w,h:F.h}),j.y+=F.h,j.h-=F.h);break}}return{w:E,h:A,fill:t/(E*A)||0}}Fi.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var u=this.readVarint(),f=u>>3,m=this.pos;this.type=7&u,e(f,t,this),this.pos===m&&this.skip(u)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Mc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=mf(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Mc(this.buf,this.pos)+4294967296*Mc(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Mc(this.buf,this.pos)+4294967296*mf(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=pf(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=pf(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,u=this.buf;return t=127&(i=u[this.pos++]),i<128?t:(t|=(127&(i=u[this.pos++]))<<7,i<128?t:(t|=(127&(i=u[this.pos++]))<<14,i<128?t:(t|=(127&(i=u[this.pos++]))<<21,i<128?t:function(f,m,x){var E,A,P=x.buf;if(E=(112&(A=P[x.pos++]))>>4,A<128||(E|=(127&(A=P[x.pos++]))<<3,A<128)||(E|=(127&(A=P[x.pos++]))<<10,A<128)||(E|=(127&(A=P[x.pos++]))<<17,A<128)||(E|=(127&(A=P[x.pos++]))<<24,A<128)||(E|=(1&(A=P[x.pos++]))<<31,A<128))return ul(f,E,m);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&ff?function(i,u,f){return ff.decode(i.subarray(u,f))}(this.buf,t,e):function(i,u,f){for(var m="",x=u;x<f;){var E,A,P,D=i[x],F=null,V=D>239?4:D>223?3:D>191?2:1;if(x+V>f)break;V===1?D<128&&(F=D):V===2?(192&(E=i[x+1]))==128&&(F=(31&D)<<6|63&E)<=127&&(F=null):V===3?(A=i[x+2],(192&(E=i[x+1]))==128&&(192&A)==128&&((F=(15&D)<<12|(63&E)<<6|63&A)<=2047||F>=55296&&F<=57343)&&(F=null)):V===4&&(A=i[x+2],P=i[x+3],(192&(E=i[x+1]))==128&&(192&A)==128&&(192&P)==128&&((F=(15&D)<<18|(63&E)<<12|(63&A)<<6|63&P)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,V=1):F>65535&&(F-=65536,m+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),m+=String.fromCharCode(F),x+=V}return m}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Fi.Bytes)return e.push(this.readVarint(t));var i=Ao(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Fi.Bytes)return e.push(this.readSVarint());var t=Ao(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Fi.Bytes)return e.push(this.readBoolean());var t=Ao(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Fi.Bytes)return e.push(this.readFloat());var t=Ao(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Fi.Bytes)return e.push(this.readDouble());var t=Ao(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Fi.Bytes)return e.push(this.readFixed32());var t=Ao(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Fi.Bytes)return e.push(this.readSFixed32());var t=Ao(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Fi.Bytes)return e.push(this.readFixed64());var t=Ao(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Fi.Bytes)return e.push(this.readSFixed64());var t=Ao(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Fi.Varint)for(;this.buf[this.pos++]>127;);else if(t===Fi.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Fi.Fixed32)this.pos+=4;else{if(t!==Fi.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),cl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),cl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),cl(this.buf,-1&e,this.pos),cl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),cl(this.buf,-1&e,this.pos),cl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var u,f;if(t>=0?(u=t%4294967296|0,f=t/4294967296|0):(f=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,f=f+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(m,x,E){E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,E.buf[E.pos]=127&(m>>>=7)}(u,0,i),function(m,x){var E=(7&m)<<4;x.buf[x.pos++]|=E|((m>>>=3)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m)))))}(f,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(u,f,m){for(var x,E,A=0;A<f.length;A++){if((x=f.charCodeAt(A))>55295&&x<57344){if(!E){x>56319||A+1===f.length?(u[m++]=239,u[m++]=191,u[m++]=189):E=x;continue}if(x<56320){u[m++]=239,u[m++]=191,u[m++]=189,E=x;continue}x=E-55296<<10|x-56320|65536,E=null}else E&&(u[m++]=239,u[m++]=191,u[m++]=189,E=null);x<128?u[m++]=x:(x<2048?u[m++]=x>>6|192:(x<65536?u[m++]=x>>12|224:(u[m++]=x>>18|240,u[m++]=x>>12&63|128),u[m++]=x>>6&63|128),u[m++]=63&x|128)}return m}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&df(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),hf(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),hf(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var u=this.pos-i;u>=128&&df(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,t,i){this.writeTag(e,Fi.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,fy,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,dy,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,yy,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,my,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,gy,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,_y,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,vy,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,by,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xy,t)},writeBytesField:function(e,t){this.writeTag(e,Fi.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Fi.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Fi.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Fi.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Fi.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Fi.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Fi.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Fi.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Fi.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Fi.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var Dc=function(e,t){var i=t.pixelRatio,u=t.version,f=t.stretchX,m=t.stretchY,x=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=f,this.stretchY=m,this.content=x,this.version=u},mu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};mu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},mu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},mu.tlbr.get=function(){return this.tl.concat(this.br)},mu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Dc.prototype,mu);var gu=function(e,t){var i={},u={};this.haveRenderCallbacks=[];var f=[];this.addImages(e,i,f),this.addImages(t,u,f);var m=gf(f),x=new Zn({width:m.w||1,height:m.h||1});for(var E in e){var A=e[E],P=i[E].paddedRect;Zn.copy(A.data,x,{x:0,y:0},{x:P.x+1,y:P.y+1},A.data)}for(var D in t){var F=t[D],V=u[D].paddedRect,j=V.x+1,$=V.y+1,te=F.data.width,he=F.data.height;Zn.copy(F.data,x,{x:0,y:0},{x:j,y:$},F.data),Zn.copy(F.data,x,{x:0,y:he-1},{x:j,y:$-1},{width:te,height:1}),Zn.copy(F.data,x,{x:0,y:0},{x:j,y:$+he},{width:te,height:1}),Zn.copy(F.data,x,{x:te-1,y:0},{x:j-1,y:$},{width:1,height:he}),Zn.copy(F.data,x,{x:0,y:0},{x:j+te,y:$},{width:1,height:he})}this.image=x,this.iconPositions=i,this.patternPositions=u};gu.prototype.addImages=function(e,t,i){for(var u in e){var f=e[u],m={x:0,y:0,w:f.data.width+2,h:f.data.height+2};i.push(m),t[u]=new Dc(m,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},gu.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},gu.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var u=e.tl;i.update(t.data,void 0,{x:u[0],y:u[1]})}},mt("ImagePosition",Dc),mt("ImageAtlas",gu);var la={horizontal:1,vertical:2,horizontalOnly:3},pl=function(){this.scale=1,this.fontStack="",this.imageName=null};pl.forText=function(e,t){var i=new pl;return i.scale=e||1,i.fontStack=t,i},pl.forImage=function(e){var t=new pl;return t.imageName=e,t};var Sn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Lc(e,t,i,u,f,m,x,E,A,P,D,F,V,j,$,te){var he,oe=Sn.fromFeature(e,f);F===la.vertical&&oe.verticalizePunctuation();var ye=ea.processBidirectionalText,be=ea.processStyledBidirectionalText;if(ye&&oe.sections.length===1){he=[];for(var Se=0,ze=ye(oe.toString(),th(oe,P,m,t,u,j,$));Se<ze.length;Se+=1){var Me=ze[Se],Ze=new Sn;Ze.text=Me,Ze.sections=oe.sections;for(var tt=0;tt<Me.length;tt++)Ze.sectionIndex.push(0);he.push(Ze)}}else if(be){he=[];for(var St=0,ut=be(oe.text,oe.sectionIndex,th(oe,P,m,t,u,j,$));St<ut.length;St+=1){var It=ut[St],pt=new Sn;pt.text=It[0],pt.sectionIndex=It[1],pt.sections=oe.sections,he.push(pt)}}else he=function(_t,ti){for(var Zt=[],di=_t.text,At=0,bi=0,Hi=ti;bi<Hi.length;bi+=1){var ir=Hi[bi];Zt.push(_t.substring(At,ir)),At=ir}return At<di.length&&Zt.push(_t.substring(At,di.length)),Zt}(oe,th(oe,P,m,t,u,j,$));var $t=[],Bt={positionedLines:$t,text:oe.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(_t,ti,Zt,di,At,bi,Hi,ir,Ji,Wi,rr,Nr){for(var Ur=0,En=-17,Yr=0,kn=0,cr=ir==="right"?1:ir==="left"?0:.5,Jr=0,ai=0,Di=At;ai<Di.length;ai+=1){var Ai=Di[ai];Ai.trim();var gi=Ai.getMaxScale(),Cn=24*(gi-1),mn={positionedGlyphs:[],lineOffset:0};_t.positionedLines[Jr]=mn;var ji=mn.positionedGlyphs,br=0;if(Ai.length()){for(var gn=0;gn<Ai.length();gn++){var xi=Ai.getSection(gn),to=Ai.getSectionIndex(gn),ua=Ai.getCharCode(gn),io=0,pr=null,ro=null,Pa=null,vl=24,Ps=!(Ji===la.horizontal||!rr&&!Ys(ua)||rr&&(Rc[ua]||(Do=ua,at.Arabic(Do)||at["Arabic Supplement"](Do)||at["Arabic Extended-A"](Do)||at["Arabic Presentation Forms-A"](Do)||at["Arabic Presentation Forms-B"](Do))));if(xi.imageName){var bl=di[xi.imageName];if(!bl)continue;Pa=xi.imageName,_t.iconsInText=_t.iconsInText||!0,ro=bl.paddedRect;var Mo=bl.displaySize;xi.scale=24*xi.scale/Nr,io=Cn+(24-Mo[1]*xi.scale),vl=(pr={width:Mo[0],height:Mo[1],left:1,top:-3,advance:Ps?Mo[1]:Mo[0]}).advance;var xl=Ps?Mo[0]*xi.scale-24*gi:Mo[1]*xi.scale-24*gi;xl>0&&xl>br&&(br=xl)}else{var Gc=Zt[xi.fontStack],wl=Gc&&Gc[ua];if(wl&&wl.rect)ro=wl.rect,pr=wl.metrics;else{var vu=ti[xi.fontStack],Zc=vu&&vu[ua];if(!Zc)continue;pr=Zc.metrics}io=24*(gi-xi.scale)}Ps?(_t.verticalizable=!0,ji.push({glyph:ua,imageName:Pa,x:Ur,y:En+io,vertical:Ps,scale:xi.scale,fontStack:xi.fontStack,sectionIndex:to,metrics:pr,rect:ro}),Ur+=vl*xi.scale+Wi):(ji.push({glyph:ua,imageName:Pa,x:Ur,y:En+io,vertical:Ps,scale:xi.scale,fontStack:xi.fontStack,sectionIndex:to,metrics:pr,rect:ro}),Ur+=pr.advance*xi.scale+Wi)}ji.length!==0&&(Yr=Math.max(Ur-Wi,Yr),zy(ji,0,ji.length-1,cr,br)),Ur=0;var Kc=bi*gi+br;mn.lineOffset=Math.max(br,Cn),En+=Kc,kn=Math.max(Kc,kn),++Jr}else En+=bi,++Jr}var Do,bu=En- -17,Sl=ih(Hi),Qo=Sl.horizontalAlign,El=Sl.verticalAlign;(function(Hc,Wc,xu,wu,Xc,Su,Eu,ku,Yc){var kl,Jc=(Wc-xu)*Xc;kl=Su!==Eu?-ku*wu- -17:(-wu*Yc+.5)*Eu;for(var zl=0,zu=Hc;zl<zu.length;zl+=1)for(var Cs=0,Tu=zu[zl].positionedGlyphs;Cs<Tu.length;Cs+=1){var Tl=Tu[Cs];Tl.x+=Jc,Tl.y+=kl}})(_t.positionedLines,cr,Qo,El,Yr,kn,bi,bu,At.length),_t.top+=-El*bu,_t.bottom=_t.top+bu,_t.left+=-Qo*Yr,_t.right=_t.left+Yr}(Bt,t,i,u,he,x,E,A,F,P,V,te),!function(_t){for(var ti=0,Zt=_t;ti<Zt.length;ti+=1)if(Zt[ti].positionedGlyphs.length!==0)return!1;return!0}($t)&&Bt}Sn.fromFeature=function(e,t){for(var i=new Sn,u=0;u<e.sections.length;u++){var f=e.sections[u];f.image?i.addImageSection(f):i.addTextSection(f,t)}return i},Sn.prototype.length=function(){return this.text.length},Sn.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Sn.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Sn.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Sn.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var u=e.charCodeAt(i+1)||null,f=e.charCodeAt(i-1)||null;t+=u&&$l(u)&&!du[e[i+1]]||f&&$l(f)&&!du[e[i-1]]||!du[e[i]]?e[i]:du[e[i]]}return t}(this.text)},Sn.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Rc[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,u=this.text.length-1;u>=0&&u>=e&&Rc[this.text.charCodeAt(u)];u--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},Sn.prototype.substring=function(e,t){var i=new Sn;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},Sn.prototype.toString=function(){return this.text},Sn.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},Sn.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(pl.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(i)},Sn.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(pl.forImage(t)),this.sectionIndex.push(this.sections.length-1)):je("Reached maximum number of images 6401")}else je("Can't add FormattedSection with an empty image.")},Sn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Rc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ia={};function yf(e,t,i,u,f,m){if(t.imageName){var x=u[t.imageName];return x?x.displaySize[0]*t.scale*24/m+f:0}var E=i[t.fontStack],A=E&&E[e];return A?A.metrics.advance*t.scale+f:0}function _f(e,t,i,u){var f=Math.pow(e-t,2);return u?e<t?f/2:2*f:f+Math.abs(i)*i}function ky(e,t,i){var u=0;return e===10&&(u-=1e4),i&&(u+=150),e!==40&&e!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function vf(e,t,i,u,f,m){for(var x=null,E=_f(t,i,f,m),A=0,P=u;A<P.length;A+=1){var D=P[A],F=_f(t-D.x,i,f,m)+D.badness;F<=E&&(x=D,E=F)}return{index:e,x:t,priorBreak:x,badness:E}}function th(e,t,i,u,f,m,x){if(m!=="point")return[];if(!e)return[];for(var E,A=[],P=function(he,oe,ye,be,Se,ze){for(var Me=0,Ze=0;Ze<he.length();Ze++){var tt=he.getSection(Ze);Me+=yf(he.getCharCode(Ze),tt,be,Se,oe,ze)}return Me/Math.max(1,Math.ceil(Me/ye))}(e,t,i,u,f,x),D=e.text.indexOf("​")>=0,F=0,V=0;V<e.length();V++){var j=e.getSection(V),$=e.getCharCode(V);if(Rc[$]||(F+=yf($,j,u,f,t,x)),V<e.length()-1){var te=!((E=$)<11904||!(at["Bopomofo Extended"](E)||at.Bopomofo(E)||at["CJK Compatibility Forms"](E)||at["CJK Compatibility Ideographs"](E)||at["CJK Compatibility"](E)||at["CJK Radicals Supplement"](E)||at["CJK Strokes"](E)||at["CJK Symbols and Punctuation"](E)||at["CJK Unified Ideographs Extension A"](E)||at["CJK Unified Ideographs"](E)||at["Enclosed CJK Letters and Months"](E)||at["Halfwidth and Fullwidth Forms"](E)||at.Hiragana(E)||at["Ideographic Description Characters"](E)||at["Kangxi Radicals"](E)||at["Katakana Phonetic Extensions"](E)||at.Katakana(E)||at["Vertical Forms"](E)||at["Yi Radicals"](E)||at["Yi Syllables"](E)));(ia[$]||te||j.imageName)&&A.push(vf(V+1,F,P,A,ky($,e.getCharCode(V+1),te&&D),!1))}}return function he(oe){return oe?he(oe.priorBreak).concat(oe.index):[]}(vf(e.length(),F,P,A,0,!0))}function ih(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function zy(e,t,i,u,f){if(u||f)for(var m=e[i],x=(e[i].x+m.metrics.advance*m.scale)*u,E=t;E<=i;E++)e[E].x-=x,e[E].y+=f}function bf(e,t,i,u,f,m){var x,E=e.image;if(E.content){var A=E.content,P=E.pixelRatio||1;x=[A[0]/P,A[1]/P,E.displaySize[0]-A[2]/P,E.displaySize[1]-A[3]/P]}var D,F,V,j,$=t.left*m,te=t.right*m;i==="width"||i==="both"?(j=f[0]+$-u[3],F=f[0]+te+u[1]):F=(j=f[0]+($+te-E.displaySize[0])/2)+E.displaySize[0];var he=t.top*m,oe=t.bottom*m;return i==="height"||i==="both"?(D=f[1]+he-u[0],V=f[1]+oe+u[2]):V=(D=f[1]+(he+oe-E.displaySize[1])/2)+E.displaySize[1],{image:E,top:D,right:F,bottom:V,left:j,collisionPadding:x}}ia[10]=!0,ia[32]=!0,ia[38]=!0,ia[40]=!0,ia[41]=!0,ia[43]=!0,ia[45]=!0,ia[47]=!0,ia[173]=!0,ia[183]=!0,ia[8203]=!0,ia[8208]=!0,ia[8211]=!0,ia[8231]=!0;var hl=function(e){function t(i,u,f,m){e.call(this,i,u),this.angle=f,m!==void 0&&(this.segment=m)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(M);function rh(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new ii(e+1))};if(i.kind==="source")return{kind:"source"};for(var u=i.zoomStops,f=i.interpolationType,m=0;m<u.length&&u[m]<=e;)m++;for(var x=m=Math.max(0,m-1);x<u.length&&u[x]<e+1;)x++;x=Math.min(u.length-1,x);var E=u[m],A=u[x];return i.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:A,interpolationType:f}:{kind:"camera",minZoom:E,maxZoom:A,minSize:i.evaluate(new ii(E)),maxSize:i.evaluate(new ii(A)),interpolationType:f}}function xf(e,t,i){var u=t.uSize,f=i.lowerSize;return e.kind==="source"?f/128:e.kind==="composite"?_r(f/128,i.upperSize/128,t.uSizeT):u}function wf(e,t){var i=0,u=0;if(e.kind==="constant")u=e.layoutSize;else if(e.kind!=="source"){var f=e.interpolationType,m=f?se(rn.interpolationFactor(f,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?u=_r(e.minSize,e.maxSize,m):i=m}return{uSizeT:i,uSize:u}}mt("Anchor",hl);var Ty=Object.freeze({__proto__:null,getSizeData:rh,evaluateSizeForFeature:xf,evaluateSizeForZoom:wf,SIZE_PACK_FACTOR:128});function Sf(e,t,i,u,f){if(t.segment===void 0)return!0;for(var m=t,x=t.segment+1,E=0;E>-i/2;){if(--x<0)return!1;E-=e[x].dist(m),m=e[x]}E+=e[x].dist(e[x+1]),x++;for(var A=[],P=0;E<i/2;){var D=e[x],F=e[x+1];if(!F)return!1;var V=e[x-1].angleTo(D)-D.angleTo(F);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:E,angleDelta:V}),P+=V;E-A[0].distance>u;)P-=A.shift().angleDelta;if(P>f)return!1;x++,E+=D.dist(F)}return!0}function Ef(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function kf(e,t,i){return e?.6*t*i:0}function zf(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Iy(e,t,i,u,f,m){for(var x=kf(i,f,m),E=zf(i,u)*m,A=0,P=Ef(e)/2,D=0;D<e.length-1;D++){var F=e[D],V=e[D+1],j=F.dist(V);if(A+j>P){var $=(P-A)/j,te=_r(F.x,V.x,$),he=_r(F.y,V.y,$),oe=new hl(te,he,V.angleTo(F),D);return oe._round(),!x||Sf(e,oe,E,x,t)?oe:void 0}A+=j}}function Ay(e,t,i,u,f,m,x,E,A){var P=kf(u,m,x),D=zf(u,f),F=D*x,V=e[0].x===0||e[0].x===A||e[0].y===0||e[0].y===A;return t-F<t/4&&(t=F+t/4),function j($,te,he,oe,ye,be,Se,ze,Me){for(var Ze=be/2,tt=Ef($),St=0,ut=te-he,It=[],pt=0;pt<$.length-1;pt++){for(var $t=$[pt],Bt=$[pt+1],_t=$t.dist(Bt),ti=Bt.angleTo($t);ut+he<St+_t;){var Zt=((ut+=he)-St)/_t,di=_r($t.x,Bt.x,Zt),At=_r($t.y,Bt.y,Zt);if(di>=0&&di<Me&&At>=0&&At<Me&&ut-Ze>=0&&ut+Ze<=tt){var bi=new hl(di,At,ti,pt);bi._round(),oe&&!Sf($,bi,be,oe,ye)||It.push(bi)}}St+=_t}return ze||It.length||Se||(It=j($,St/2,he,oe,ye,be,Se,!0,Me)),It}(e,V?t/2*E%t:(D/2+2*m)*x*E%t,t,P,i,F,V,!1,A)}function Tf(e,t,i,u,f){for(var m=[],x=0;x<e.length;x++)for(var E=e[x],A=void 0,P=0;P<E.length-1;P++){var D=E[P],F=E[P+1];D.x<t&&F.x<t||(D.x<t?D=new M(t,D.y+(t-D.x)/(F.x-D.x)*(F.y-D.y))._round():F.x<t&&(F=new M(t,D.y+(t-D.x)/(F.x-D.x)*(F.y-D.y))._round()),D.y<i&&F.y<i||(D.y<i?D=new M(D.x+(i-D.y)/(F.y-D.y)*(F.x-D.x),i)._round():F.y<i&&(F=new M(D.x+(i-D.y)/(F.y-D.y)*(F.x-D.x),i)._round()),D.x>=u&&F.x>=u||(D.x>=u?D=new M(u,D.y+(u-D.x)/(F.x-D.x)*(F.y-D.y))._round():F.x>=u&&(F=new M(u,D.y+(u-D.x)/(F.x-D.x)*(F.y-D.y))._round()),D.y>=f&&F.y>=f||(D.y>=f?D=new M(D.x+(f-D.y)/(F.y-D.y)*(F.x-D.x),f)._round():F.y>=f&&(F=new M(D.x+(f-D.y)/(F.y-D.y)*(F.x-D.x),f)._round()),A&&D.equals(A[A.length-1])||m.push(A=[D]),A.push(F)))))}return m}function If(e,t,i,u){var f=[],m=e.image,x=m.pixelRatio,E=m.paddedRect.w-2,A=m.paddedRect.h-2,P=e.right-e.left,D=e.bottom-e.top,F=m.stretchX||[[0,E]],V=m.stretchY||[[0,A]],j=function(di,At){return di+At[1]-At[0]},$=F.reduce(j,0),te=V.reduce(j,0),he=E-$,oe=A-te,ye=0,be=$,Se=0,ze=te,Me=0,Ze=he,tt=0,St=oe;if(m.content&&u){var ut=m.content;ye=Bc(F,0,ut[0]),Se=Bc(V,0,ut[1]),be=Bc(F,ut[0],ut[2]),ze=Bc(V,ut[1],ut[3]),Me=ut[0]-ye,tt=ut[1]-Se,Ze=ut[2]-ut[0]-be,St=ut[3]-ut[1]-ze}var It=function(di,At,bi,Hi){var ir=Fc(di.stretch-ye,be,P,e.left),Ji=Oc(di.fixed-Me,Ze,di.stretch,$),Wi=Fc(At.stretch-Se,ze,D,e.top),rr=Oc(At.fixed-tt,St,At.stretch,te),Nr=Fc(bi.stretch-ye,be,P,e.left),Ur=Oc(bi.fixed-Me,Ze,bi.stretch,$),En=Fc(Hi.stretch-Se,ze,D,e.top),Yr=Oc(Hi.fixed-tt,St,Hi.stretch,te),kn=new M(ir,Wi),cr=new M(Nr,Wi),Jr=new M(Nr,En),ai=new M(ir,En),Di=new M(Ji/x,rr/x),Ai=new M(Ur/x,Yr/x),gi=t*Math.PI/180;if(gi){var Cn=Math.sin(gi),mn=Math.cos(gi),ji=[mn,-Cn,Cn,mn];kn._matMult(ji),cr._matMult(ji),ai._matMult(ji),Jr._matMult(ji)}var br=di.stretch+di.fixed,gn=At.stretch+At.fixed;return{tl:kn,tr:cr,bl:ai,br:Jr,tex:{x:m.paddedRect.x+1+br,y:m.paddedRect.y+1+gn,w:bi.stretch+bi.fixed-br,h:Hi.stretch+Hi.fixed-gn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Di,pixelOffsetBR:Ai,minFontScaleX:Ze/x/P,minFontScaleY:St/x/D,isSDF:i}};if(u&&(m.stretchX||m.stretchY))for(var pt=Af(F,he,$),$t=Af(V,oe,te),Bt=0;Bt<pt.length-1;Bt++)for(var _t=pt[Bt],ti=pt[Bt+1],Zt=0;Zt<$t.length-1;Zt++)f.push(It(_t,$t[Zt],ti,$t[Zt+1]));else f.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:A+1}));return f}function Bc(e,t,i){for(var u=0,f=0,m=e;f<m.length;f+=1){var x=m[f];u+=Math.max(t,Math.min(i,x[1]))-Math.max(t,Math.min(i,x[0]))}return u}function Af(e,t,i){for(var u=[{fixed:-1,stretch:0}],f=0,m=e;f<m.length;f+=1){var x=m[f],E=x[0],A=x[1],P=u[u.length-1];u.push({fixed:E-P.stretch,stretch:P.stretch}),u.push({fixed:E-P.stretch,stretch:P.stretch+(A-E)})}return u.push({fixed:t+1,stretch:i}),u}function Fc(e,t,i,u){return e/t*i+u}function Oc(e,t,i,u){return e-t*i/u}var Nc=function(e,t,i,u,f,m,x,E,A,P){if(this.boxStartIndex=e.length,A){var D=m.top,F=m.bottom,V=m.collisionPadding;V&&(D-=V[1],F+=V[3]);var j=F-D;j>0&&(j=Math.max(10,j),this.circleDiameter=j)}else{var $=m.top*x-E,te=m.bottom*x+E,he=m.left*x-E,oe=m.right*x+E,ye=m.collisionPadding;if(ye&&(he-=ye[0]*x,$-=ye[1]*x,oe+=ye[2]*x,te+=ye[3]*x),P){var be=new M(he,$),Se=new M(oe,$),ze=new M(he,te),Me=new M(oe,te),Ze=P*Math.PI/180;be._rotate(Ze),Se._rotate(Ze),ze._rotate(Ze),Me._rotate(Ze),he=Math.min(be.x,Se.x,ze.x,Me.x),oe=Math.max(be.x,Se.x,ze.x,Me.x),$=Math.min(be.y,Se.y,ze.y,Me.y),te=Math.max(be.y,Se.y,ze.y,Me.y)}e.emplaceBack(t.x,t.y,he,$,oe,te,i,u,f)}this.boxEndIndex=e.length},fl=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Py),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Py(e,t){return e<t?-1:e>t?1:0}function Cy(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var u=1/0,f=1/0,m=-1/0,x=-1/0,E=e[0],A=0;A<E.length;A++){var P=E[A];(!A||P.x<u)&&(u=P.x),(!A||P.y<f)&&(f=P.y),(!A||P.x>m)&&(m=P.x),(!A||P.y>x)&&(x=P.y)}var D=Math.min(m-u,x-f),F=D/2,V=new fl([],My);if(D===0)return new M(u,f);for(var j=u;j<m;j+=D)for(var $=f;$<x;$+=D)V.push(new dl(j+F,$+F,F,e));for(var te=function(ye){for(var be=0,Se=0,ze=0,Me=ye[0],Ze=0,tt=Me.length,St=tt-1;Ze<tt;St=Ze++){var ut=Me[Ze],It=Me[St],pt=ut.x*It.y-It.x*ut.y;Se+=(ut.x+It.x)*pt,ze+=(ut.y+It.y)*pt,be+=3*pt}return new dl(Se/be,ze/be,0,ye)}(e),he=V.length;V.length;){var oe=V.pop();(oe.d>te.d||!te.d)&&(te=oe,i&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,he)),oe.max-te.d<=t||(V.push(new dl(oe.p.x-(F=oe.h/2),oe.p.y-F,F,e)),V.push(new dl(oe.p.x+F,oe.p.y-F,F,e)),V.push(new dl(oe.p.x-F,oe.p.y+F,F,e)),V.push(new dl(oe.p.x+F,oe.p.y+F,F,e)),he+=4)}return i&&(console.log("num probes: "+he),console.log("best distance: "+te.d)),te.p}function My(e,t){return t.max-e.max}function dl(e,t,i,u){this.p=new M(e,t),this.h=i,this.d=function(f,m){for(var x=!1,E=1/0,A=0;A<m.length;A++)for(var P=m[A],D=0,F=P.length,V=F-1;D<F;V=D++){var j=P[D],$=P[V];j.y>f.y!=$.y>f.y&&f.x<($.x-j.x)*(f.y-j.y)/($.y-j.y)+j.x&&(x=!x),E=Math.min(E,Wo(f,j,$))}return(x?1:-1)*Math.sqrt(E)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}fl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},fl.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},fl.prototype.peek=function(){return this.data[0]},fl.prototype._up=function(e){for(var t=this.data,i=this.compare,u=t[e];e>0;){var f=e-1>>1,m=t[f];if(i(u,m)>=0)break;t[e]=m,e=f}t[e]=u},fl.prototype._down=function(e){for(var t=this.data,i=this.compare,u=this.length>>1,f=t[e];e<u;){var m=1+(e<<1),x=t[m],E=m+1;if(E<this.length&&i(t[E],x)<0&&(m=E,x=t[E]),i(x,f)>=0)break;t[e]=x,e=m}t[e]=f};var nh=Number.POSITIVE_INFINITY;function Pf(e,t){return t[1]!==nh?function(i,u,f){var m=0,x=0;switch(u=Math.abs(u),f=Math.abs(f),i){case"top-right":case"top-left":case"top":x=f-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-f}switch(i){case"top-right":case"bottom-right":case"right":m=-u;break;case"top-left":case"bottom-left":case"left":m=u}return[m,x]}(e,t[0],t[1]):function(i,u){var f=0,m=0;u<0&&(u=0);var x=u/Math.sqrt(2);switch(i){case"top-right":case"top-left":m=x-7;break;case"bottom-right":case"bottom-left":m=7-x;break;case"bottom":m=7-u;break;case"top":m=u-7}switch(i){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=u;break;case"right":f=-u}return[f,m]}(e,t[0])}function ah(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Cf(e,t,i,u,f,m,x,E,A,P,D,F,V,j,$){var te=function(Se,ze,Me,Ze,tt,St,ut,It){for(var pt=Ze.layout.get("text-rotate").evaluate(St,{})*Math.PI/180,$t=[],Bt=0,_t=ze.positionedLines;Bt<_t.length;Bt+=1)for(var ti=_t[Bt],Zt=0,di=ti.positionedGlyphs;Zt<di.length;Zt+=1){var At=di[Zt];if(At.rect){var bi=At.rect||{},Hi=4,ir=!0,Ji=1,Wi=0,rr=(tt||It)&&At.vertical,Nr=At.metrics.advance*At.scale/2;if(It&&ze.verticalizable&&(Wi=ti.lineOffset/2-(At.imageName?-(24-At.metrics.width*At.scale)/2:24*(At.scale-1))),At.imageName){var Ur=ut[At.imageName];ir=Ur.sdf,Hi=1/(Ji=Ur.pixelRatio)}var En=tt?[At.x+Nr,At.y]:[0,0],Yr=tt?[0,0]:[At.x+Nr+Me[0],At.y+Me[1]-Wi],kn=[0,0];rr&&(kn=Yr,Yr=[0,0]);var cr=(At.metrics.left-Hi)*At.scale-Nr+Yr[0],Jr=(-At.metrics.top-Hi)*At.scale+Yr[1],ai=cr+bi.w*At.scale/Ji,Di=Jr+bi.h*At.scale/Ji,Ai=new M(cr,Jr),gi=new M(ai,Jr),Cn=new M(cr,Di),mn=new M(ai,Di);if(rr){var ji=new M(-Nr,Nr- -17),br=-Math.PI/2,gn=12-Nr,xi=new M(22-gn,-(At.imageName?gn:0)),to=new(Function.prototype.bind.apply(M,[null].concat(kn)));Ai._rotateAround(br,ji)._add(xi)._add(to),gi._rotateAround(br,ji)._add(xi)._add(to),Cn._rotateAround(br,ji)._add(xi)._add(to),mn._rotateAround(br,ji)._add(xi)._add(to)}if(pt){var ua=Math.sin(pt),io=Math.cos(pt),pr=[io,-ua,ua,io];Ai._matMult(pr),gi._matMult(pr),Cn._matMult(pr),mn._matMult(pr)}var ro=new M(0,0),Pa=new M(0,0);$t.push({tl:Ai,tr:gi,bl:Cn,br:mn,tex:bi,writingMode:ze.writingMode,glyphOffset:En,sectionIndex:At.sectionIndex,isSDF:ir,pixelOffsetTL:ro,pixelOffsetBR:Pa,minFontScaleX:0,minFontScaleY:0})}}return $t}(0,i,E,f,m,x,u,e.allowVerticalPlacement),he=e.textSizeData,oe=null;he.kind==="source"?(oe=[128*f.layout.get("text-size").evaluate(x,{})])[0]>32640&&je(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):he.kind==="composite"&&((oe=[128*j.compositeTextSizes[0].evaluate(x,{},$),128*j.compositeTextSizes[1].evaluate(x,{},$)])[0]>32640||oe[1]>32640)&&je(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,te,oe,E,m,x,P,t,A.lineStartIndex,A.lineLength,V,$);for(var ye=0,be=D;ye<be.length;ye+=1)F[be[ye]]=e.text.placedSymbolArray.length-1;return 4*te.length}function Mf(e){for(var t in e)return e[t];return null}function Dy(e,t,i,u){var f=e.compareText;if(t in f){for(var m=f[t],x=m.length-1;x>=0;x--)if(u.dist(m[x])<i)return!0}else f[t]=[];return f[t].push(u),!1}var Ly=ll.VectorTileFeature.types,Ry=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Uc(e,t,i,u,f,m,x,E,A,P,D,F,V){var j=E?Math.min(32640,Math.round(E[0])):0,$=E?Math.min(32640,Math.round(E[1])):0;e.emplaceBack(t,i,Math.round(32*u),Math.round(32*f),m,x,(j<<1)+(A?1:0),$,16*P,16*D,256*F,256*V)}function oh(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function By(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Js(i[t].text))return!0;return!1}var ml=function(e){this.layoutVertexArray=new tl,this.indexArray=new Xa,this.programConfigurations=e,this.segments=new Z,this.dynamicLayoutVertexArray=new Zo,this.opacityVertexArray=new bs,this.placedSymbolArray=new c};ml.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},ml.prototype.upload=function(e,t,i,u){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ly.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,uy.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Ry,!0),this.opacityVertexBuffer.itemSize=1),(i||u)&&this.programConfigurations.upload(e))},ml.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},mt("SymbolBuffers",ml);var yu=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new Z,this.collisionVertexArray=new au};yu.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,cy.members,!0)},yu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},mt("CollisionBuffers",yu);var Ci=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(m){return m.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ta([]),this.placementViewportMatrix=ta([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=rh(this.zoom,t["text-size"]),this.iconSizeData=rh(this.zoom,t["icon-size"]);var i=this.layers[0].layout,u=i.get("symbol-sort-key"),f=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(m){return la[m]})),this.stateDependentLayerIds=this.layers.filter(function(m){return m.isStateDependent()}).map(function(m){return m.id}),this.sourceID=e.sourceID};Ci.prototype.createArrays=function(){this.text=new ml(new Rt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new ml(new Rt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new S,this.lineVertexArray=new I,this.symbolInstances=new w},Ci.prototype.calculateGlyphDependencies=function(e,t,i,u,f){for(var m=0;m<e.length;m++)if(t[e.charCodeAt(m)]=!0,(i||u)&&f){var x=du[e.charAt(m)];x&&(t[x.charCodeAt(0)]=!0)}},Ci.prototype.populate=function(e,t,i){var u=this.layers[0],f=u.layout,m=f.get("text-font"),x=f.get("text-field"),E=f.get("icon-image"),A=(x.value.kind!=="constant"||x.value.value instanceof $i&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),P=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,D=f.get("symbol-sort-key");if(this.features=[],A||P){for(var F=t.iconDependencies,V=t.glyphDependencies,j=t.availableImages,$=new ii(this.zoom),te=0,he=e;te<he.length;te+=1){var oe=he[te],ye=oe.feature,be=oe.id,Se=oe.index,ze=oe.sourceLayerIndex,Me=u._featureFilter.needGeometry,Ze=ur(ye,Me);if(u._featureFilter.filter($,Ze,i)){Me||(Ze.geometry=Yi(ye));var tt=void 0;if(A){var St=u.getValueAndResolveTokens("text-field",Ze,i,j),ut=$i.factory(St);By(ut)&&(this.hasRTLText=!0),(!this.hasRTLText||tu()==="unavailable"||this.hasRTLText&&ea.isParsed())&&(tt=hy(ut,u,Ze))}var It=void 0;if(P){var pt=u.getValueAndResolveTokens("icon-image",Ze,i,j);It=pt instanceof Br?pt:Br.fromString(pt)}if(tt||It){var $t=this.sortFeaturesByKey?D.evaluate(Ze,{},i):void 0;if(this.features.push({id:be,text:tt,icon:It,index:Se,sourceLayerIndex:ze,geometry:Ze.geometry,properties:ye.properties,type:Ly[ye.type],sortKey:$t}),It&&(F[It.name]=!0),tt){var Bt=m.evaluate(Ze,{},i).join(","),_t=f.get("text-rotation-alignment")==="map"&&f.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(la.vertical)>=0;for(var ti=0,Zt=tt.sections;ti<Zt.length;ti+=1){var di=Zt[ti];if(di.image)F[di.image.name]=!0;else{var At=Ql(tt.toString()),bi=di.fontStack||Bt,Hi=V[bi]=V[bi]||{};this.calculateGlyphDependencies(di.text,Hi,_t,this.allowVerticalPlacement,At)}}}}}}f.get("symbol-placement")==="line"&&(this.features=function(ir){var Ji={},Wi={},rr=[],Nr=0;function Ur(ji){rr.push(ir[ji]),Nr++}function En(ji,br,gn){var xi=Wi[ji];return delete Wi[ji],Wi[br]=xi,rr[xi].geometry[0].pop(),rr[xi].geometry[0]=rr[xi].geometry[0].concat(gn[0]),xi}function Yr(ji,br,gn){var xi=Ji[br];return delete Ji[br],Ji[ji]=xi,rr[xi].geometry[0].shift(),rr[xi].geometry[0]=gn[0].concat(rr[xi].geometry[0]),xi}function kn(ji,br,gn){var xi=gn?br[0][br[0].length-1]:br[0][0];return ji+":"+xi.x+":"+xi.y}for(var cr=0;cr<ir.length;cr++){var Jr=ir[cr],ai=Jr.geometry,Di=Jr.text?Jr.text.toString():null;if(Di){var Ai=kn(Di,ai),gi=kn(Di,ai,!0);if(Ai in Wi&&gi in Ji&&Wi[Ai]!==Ji[gi]){var Cn=Yr(Ai,gi,ai),mn=En(Ai,gi,rr[Cn].geometry);delete Ji[Ai],delete Wi[gi],Wi[kn(Di,rr[mn].geometry,!0)]=mn,rr[Cn].geometry=null}else Ai in Wi?En(Ai,gi,ai):gi in Ji?Yr(Ai,gi,ai):(Ur(cr),Ji[Ai]=Nr-1,Wi[gi]=Nr-1)}else Ur(cr)}return rr.filter(function(ji){return ji.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ir,Ji){return ir.sortKey-Ji.sortKey})}},Ci.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Ci.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ci.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ci.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ci.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ci.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ci.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var u=e.dist(t[e.segment+1]),f=e.dist(t[e.segment]),m={},x=e.segment+1;x<t.length;x++)m[x]={x:t[x].x,y:t[x].y,tileUnitDistanceFromAnchor:u},x<t.length-1&&(u+=t[x+1].dist(t[x]));for(var E=e.segment||0;E>=0;E--)m[E]={x:t[E].x,y:t[E].y,tileUnitDistanceFromAnchor:f},E>0&&(f+=t[E-1].dist(t[E]));for(var A=0;A<t.length;A++){var P=m[A];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Ci.prototype.addSymbols=function(e,t,i,u,f,m,x,E,A,P,D,F){for(var V=e.indexArray,j=e.layoutVertexArray,$=e.segments.prepareSegment(4*t.length,j,V,this.canOverlap?m.sortKey:void 0),te=this.glyphOffsetArray.length,he=$.vertexLength,oe=this.allowVerticalPlacement&&x===la.vertical?Math.PI/2:0,ye=m.text&&m.text.sections,be=0;be<t.length;be++){var Se=t[be],ze=Se.tl,Me=Se.tr,Ze=Se.bl,tt=Se.br,St=Se.tex,ut=Se.pixelOffsetTL,It=Se.pixelOffsetBR,pt=Se.minFontScaleX,$t=Se.minFontScaleY,Bt=Se.glyphOffset,_t=Se.isSDF,ti=Se.sectionIndex,Zt=$.vertexLength,di=Bt[1];Uc(j,E.x,E.y,ze.x,di+ze.y,St.x,St.y,i,_t,ut.x,ut.y,pt,$t),Uc(j,E.x,E.y,Me.x,di+Me.y,St.x+St.w,St.y,i,_t,It.x,ut.y,pt,$t),Uc(j,E.x,E.y,Ze.x,di+Ze.y,St.x,St.y+St.h,i,_t,ut.x,It.y,pt,$t),Uc(j,E.x,E.y,tt.x,di+tt.y,St.x+St.w,St.y+St.h,i,_t,It.x,It.y,pt,$t),oh(e.dynamicLayoutVertexArray,E,oe),V.emplaceBack(Zt,Zt+1,Zt+2),V.emplaceBack(Zt+1,Zt+2,Zt+3),$.vertexLength+=4,$.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Bt[0]),be!==t.length-1&&ti===t[be+1].sectionIndex||e.programConfigurations.populatePaintArrays(j.length,m,m.index,{},F,ye&&ye[ti])}e.placedSymbolArray.emplaceBack(E.x,E.y,te,this.glyphOffsetArray.length-te,he,A,P,E.segment,i?i[0]:0,i?i[1]:0,u[0],u[1],x,0,!1,0,D)},Ci.prototype._addCollisionDebugVertex=function(e,t,i,u,f,m){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,u,f,Math.round(m.x),Math.round(m.y))},Ci.prototype.addCollisionDebugVertices=function(e,t,i,u,f,m,x){var E=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),A=E.vertexLength,P=f.layoutVertexArray,D=f.collisionVertexArray,F=x.anchorX,V=x.anchorY;this._addCollisionDebugVertex(P,D,m,F,V,new M(e,t)),this._addCollisionDebugVertex(P,D,m,F,V,new M(i,t)),this._addCollisionDebugVertex(P,D,m,F,V,new M(i,u)),this._addCollisionDebugVertex(P,D,m,F,V,new M(e,u)),E.vertexLength+=4;var j=f.indexArray;j.emplaceBack(A,A+1),j.emplaceBack(A+1,A+2),j.emplaceBack(A+2,A+3),j.emplaceBack(A+3,A),E.primitiveLength+=4},Ci.prototype.addDebugCollisionBoxes=function(e,t,i,u){for(var f=e;f<t;f++){var m=this.collisionBoxArray.get(f);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,u?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,i)}},Ci.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new yu(Ko,cf.members,xs),this.iconCollisionBox=new yu(Ko,cf.members,xs);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Ci.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,u,f,m,x,E,A){for(var P={},D=t;D<i;D++){var F=e.get(D);P.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},P.textFeatureIndex=F.featureIndex;break}for(var V=u;V<f;V++){var j=e.get(V);P.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},P.verticalTextFeatureIndex=j.featureIndex;break}for(var $=m;$<x;$++){var te=e.get($);P.iconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},P.iconFeatureIndex=te.featureIndex;break}for(var he=E;he<A;he++){var oe=e.get(he);P.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},P.verticalIconFeatureIndex=oe.featureIndex;break}return P},Ci.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Ci.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ci.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ci.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ci.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ci.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ci.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),u=i.vertexStartIndex+4*i.numGlyphs,f=i.vertexStartIndex;f<u;f+=4)e.indexArray.emplaceBack(f,f+1,f+2),e.indexArray.emplaceBack(f+1,f+2,f+3)},Ci.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),u=[],f=[],m=[],x=0;x<this.symbolInstances.length;++x){m.push(x);var E=this.symbolInstances.get(x);u.push(0|Math.round(t*E.anchorX+i*E.anchorY)),f.push(E.featureIndex)}return m.sort(function(A,P){return u[A]-u[P]||f[P]-f[A]}),m},Ci.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Ci.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,u=this.symbolInstanceIndexes;i<u.length;i+=1){var f=this.symbolInstances.get(u[i]);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(function(m,x,E){m>=0&&E.indexOf(m)===x&&t.addIndicesForPlacedSymbol(t.text,m)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},mt("SymbolBucket",Ci,{omit:["layers","collisionBoxArray","features","compareText"]}),Ci.MAX_GLYPHS=65535,Ci.addDynamicAttributes=oh;var Fy=new an({"symbol-placement":new zt(q.layout_symbol["symbol-placement"]),"symbol-spacing":new zt(q.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new zt(q.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(q.layout_symbol["symbol-sort-key"]),"symbol-z-order":new zt(q.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new zt(q.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new zt(q.layout_symbol["icon-ignore-placement"]),"icon-optional":new zt(q.layout_symbol["icon-optional"]),"icon-rotation-alignment":new zt(q.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(q.layout_symbol["icon-size"]),"icon-text-fit":new zt(q.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new zt(q.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(q.layout_symbol["icon-image"]),"icon-rotate":new yt(q.layout_symbol["icon-rotate"]),"icon-padding":new zt(q.layout_symbol["icon-padding"]),"icon-keep-upright":new zt(q.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(q.layout_symbol["icon-offset"]),"icon-anchor":new yt(q.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new zt(q.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new zt(q.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new zt(q.layout_symbol["text-rotation-alignment"]),"text-field":new yt(q.layout_symbol["text-field"]),"text-font":new yt(q.layout_symbol["text-font"]),"text-size":new yt(q.layout_symbol["text-size"]),"text-max-width":new yt(q.layout_symbol["text-max-width"]),"text-line-height":new zt(q.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(q.layout_symbol["text-letter-spacing"]),"text-justify":new yt(q.layout_symbol["text-justify"]),"text-radial-offset":new yt(q.layout_symbol["text-radial-offset"]),"text-variable-anchor":new zt(q.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(q.layout_symbol["text-anchor"]),"text-max-angle":new zt(q.layout_symbol["text-max-angle"]),"text-writing-mode":new zt(q.layout_symbol["text-writing-mode"]),"text-rotate":new yt(q.layout_symbol["text-rotate"]),"text-padding":new zt(q.layout_symbol["text-padding"]),"text-keep-upright":new zt(q.layout_symbol["text-keep-upright"]),"text-transform":new yt(q.layout_symbol["text-transform"]),"text-offset":new yt(q.layout_symbol["text-offset"]),"text-allow-overlap":new zt(q.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new zt(q.layout_symbol["text-ignore-placement"]),"text-optional":new zt(q.layout_symbol["text-optional"])}),sh={paint:new an({"icon-opacity":new yt(q.paint_symbol["icon-opacity"]),"icon-color":new yt(q.paint_symbol["icon-color"]),"icon-halo-color":new yt(q.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(q.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(q.paint_symbol["icon-halo-blur"]),"icon-translate":new zt(q.paint_symbol["icon-translate"]),"icon-translate-anchor":new zt(q.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(q.paint_symbol["text-opacity"]),"text-color":new yt(q.paint_symbol["text-color"],{runtimeType:et,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new yt(q.paint_symbol["text-halo-color"]),"text-halo-width":new yt(q.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(q.paint_symbol["text-halo-blur"]),"text-translate":new zt(q.paint_symbol["text-translate"]),"text-translate-anchor":new zt(q.paint_symbol["text-translate-anchor"])}),layout:Fy},gl=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:it,this.defaultValue=e};gl.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},gl.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},gl.prototype.outputDefined=function(){return!1},gl.prototype.serialize=function(){return null},mt("FormatSectionOverride",gl,{omit:["defaultValue"]});var Oy=function(e){function t(i){e.call(this,i,sh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,u){if(e.prototype.recalculate.call(this,i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var f=this.layout.get("text-writing-mode");if(f){for(var m=[],x=0,E=f;x<E.length;x+=1){var A=E[x];m.indexOf(A)<0&&m.push(A)}this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,u,f,m){var x=this.layout.get(i).evaluate(u,{},f,m),E=this._unevaluatedLayout._values[i];return E.isDataDriven()||us(E.value)||!x?x:function(A,P){return P.replace(/{([^{}]+)}/g,function(D,F){return F in A?String(A[F]):""})}(u.properties,x)},t.prototype.createBucket=function(i){return new Ci(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,u=sh.paint.overridableProperties;i<u.length;i+=1){var f=u[i];if(t.hasPaintOverride(this.layout,f)){var m,x=this.paint.get(f),E=new gl(x),A=new No(E,x.property.specification);m=x.value.kind==="constant"||x.value.kind==="source"?new cs("source",A):new Uo("composite",A,x.value.zoomStops,x.value._interpolationType),this.paint._values[f]=new bn(x.property,m,x.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,u){var f=i.get("text-field"),m=sh.paint.properties[u],x=!1,E=function(D){for(var F=0,V=D;F<V.length;F+=1)if(m.overrides&&m.overrides.hasOverride(V[F]))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof $i)E(f.value.value.sections);else if(f.value.kind==="source"){var A=function(D){x||(D instanceof Sr&&Vi(D.value)===jt?E(D.value.sections):D instanceof Bn?E(D.sections):D.eachChild(A))},P=f.value;P._styleExpression&&A(P._styleExpression.expression)}return x},t}(za),Ny={paint:new an({"background-color":new zt(q.paint_background["background-color"]),"background-pattern":new xn(q.paint_background["background-pattern"]),"background-opacity":new zt(q.paint_background["background-opacity"])})},Uy=function(e){function t(i){e.call(this,i,Ny)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(za),Vy={paint:new an({"raster-opacity":new zt(q.paint_raster["raster-opacity"]),"raster-hue-rotate":new zt(q.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new zt(q.paint_raster["raster-brightness-min"]),"raster-brightness-max":new zt(q.paint_raster["raster-brightness-max"]),"raster-saturation":new zt(q.paint_raster["raster-saturation"]),"raster-contrast":new zt(q.paint_raster["raster-contrast"]),"raster-resampling":new zt(q.paint_raster["raster-resampling"]),"raster-fade-duration":new zt(q.paint_raster["raster-fade-duration"])})},qy=function(e){function t(i){e.call(this,i,Vy)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(za),jy=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(za),Gy={circle:Zp,heatmap:Tg,hillshade:Ag,fill:Kg,"fill-extrusion":ty,line:sy,symbol:Oy,background:Uy,raster:qy},Df=R.HTMLImageElement,Lf=R.HTMLCanvasElement,Rf=R.HTMLVideoElement,Bf=R.ImageData,Vc=R.ImageBitmap,Ts=function(e,t,i,u){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,u)};Ts.prototype.update=function(e,t,i){var u=e.width,f=e.height,m=!(this.size&&this.size[0]===u&&this.size[1]===f||i),x=this.context,E=x.gl;if(this.useMipmap=!!(t&&t.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!t||t.premultiply!==!1)),m)this.size=[u,f],e instanceof Df||e instanceof Lf||e instanceof Rf||e instanceof Bf||Vc&&e instanceof Vc?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,e):E.texImage2D(E.TEXTURE_2D,0,this.format,u,f,0,this.format,E.UNSIGNED_BYTE,e.data);else{var A=i||{x:0,y:0},P=A.x,D=A.y;e instanceof Df||e instanceof Lf||e instanceof Rf||e instanceof Bf||Vc&&e instanceof Vc?E.texSubImage2D(E.TEXTURE_2D,0,P,D,E.RGBA,E.UNSIGNED_BYTE,e):E.texSubImage2D(E.TEXTURE_2D,0,P,D,u,f,E.RGBA,E.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)},Ts.prototype.bind=function(e,t,i){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),i!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,t),this.wrap=t)},Ts.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ts.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var lh=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};lh.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},lh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var yl=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},xt(["receive","process"],this),this.invoker=new lh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=wt()?e:R};function Ff(e,t,i){var u=2*Math.PI*6378137/256/Math.pow(2,i);return[e*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}yl.prototype.send=function(e,t,i,u,f){var m=this;f===void 0&&(f=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[x]=i);var E=Lt(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:e,hasCallback:!!i,targetMapId:u,mustQueue:f,sourceMapId:this.mapId,data:da(t,E)},E),{cancel:function(){i&&delete m.callbacks[x],m.target.postMessage({id:x,type:"<cancel>",targetMapId:u,sourceMapId:m.mapId})}}},yl.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var u=this.cancelCallbacks[i];delete this.cancelCallbacks[i],u&&u()}else wt()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},yl.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},yl.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var u=this.callbacks[e];delete this.callbacks[e],u&&(t.error?u(Un(t.error)):u(null,Un(t.data)))}else{var f=!1,m=Lt(this.globalScope)?void 0:[],x=t.hasCallback?function(D,F){f=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:D?da(D):null,data:da(F,m)},m)}:function(D){f=!0},E=null,A=Un(t.data);if(this.parent[t.type])E=this.parent[t.type](t.sourceMapId,A,x);else if(this.parent.getWorkerSource){var P=t.type.split(".");E=this.parent.getWorkerSource(t.sourceMapId,P[0],A.source)[P[1]](A,x)}else x(new Error("Could not find function "+t.type));!f&&E&&E.cancel&&(this.cancelCallbacks[e]=E.cancel)}},yl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ir=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Ir.prototype.setNorthEast=function(e){return this._ne=e instanceof Ki?new Ki(e.lng,e.lat):Ki.convert(e),this},Ir.prototype.setSouthWest=function(e){return this._sw=e instanceof Ki?new Ki(e.lng,e.lat):Ki.convert(e),this},Ir.prototype.extend=function(e){var t,i,u=this._sw,f=this._ne;if(e instanceof Ki)t=e,i=e;else{if(!(e instanceof Ir))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ir.convert(e)):this.extend(Ki.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return u||f?(u.lng=Math.min(t.lng,u.lng),u.lat=Math.min(t.lat,u.lat),f.lng=Math.max(i.lng,f.lng),f.lat=Math.max(i.lat,f.lat)):(this._sw=new Ki(t.lng,t.lat),this._ne=new Ki(i.lng,i.lat)),this},Ir.prototype.getCenter=function(){return new Ki((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ir.prototype.getSouthWest=function(){return this._sw},Ir.prototype.getNorthEast=function(){return this._ne},Ir.prototype.getNorthWest=function(){return new Ki(this.getWest(),this.getNorth())},Ir.prototype.getSouthEast=function(){return new Ki(this.getEast(),this.getSouth())},Ir.prototype.getWest=function(){return this._sw.lng},Ir.prototype.getSouth=function(){return this._sw.lat},Ir.prototype.getEast=function(){return this._ne.lng},Ir.prototype.getNorth=function(){return this._ne.lat},Ir.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ir.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ir.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ir.prototype.contains=function(e){var t=Ki.convert(e),i=t.lng,u=t.lat,f=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&f},Ir.convert=function(e){return!e||e instanceof Ir?e:new Ir(e)};var Ki=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ki.prototype.wrap=function(){return new Ki(pe(this.lng,-180,180),this.lat)},Ki.prototype.toArray=function(){return[this.lng,this.lat]},Ki.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ki.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,u=e.lat*t,f=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(f,1))},Ki.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Ir(new Ki(this.lng-i,this.lat-t),new Ki(this.lng+i,this.lat+t))},Ki.convert=function(e){if(e instanceof Ki)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Ki(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Ki(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Of=2*Math.PI*63710088e-1;function Nf(e){return Of*Math.cos(e*Math.PI/180)}function Uf(e){return(180+e)/360}function Vf(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function qf(e,t){return e/Nf(t)}function uh(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Is=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};Is.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Ki.convert(e);return new Is(Uf(i.lng),Vf(i.lat),qf(t,i.lat))},Is.prototype.toLngLat=function(){return new Ki(360*this.x-180,uh(this.y))},Is.prototype.toAltitude=function(){return this.z*Nf(uh(this.y))},Is.prototype.meterInMercatorCoordinateUnits=function(){return 1/Of*(e=uh(this.y),1/Math.cos(e*Math.PI/180));var e};var As=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=_u(0,e,e,t,i)};As.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},As.prototype.url=function(e,t){var i,u,f,m,x,E=(u=this.y,f=this.z,m=Ff(256*(i=this.x),256*(u=Math.pow(2,f)-u-1),f),x=Ff(256*(i+1),256*(u+1),f),m[0]+","+m[1]+","+x[0]+","+x[1]),A=function(P,D,F){for(var V,j="",$=P;$>0;$--)j+=(D&(V=1<<$-1)?1:0)+(F&V?2:0);return j}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",A).replace("{bbox-epsg-3857}",E)},As.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new M(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},As.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var jf=function(e,t){this.wrap=e,this.canonical=t,this.key=_u(e,t.z,t.z,t.x,t.y)},Ar=function(e,t,i,u,f){this.overscaledZ=e,this.wrap=t,this.canonical=new As(i,+u,+f),this.key=_u(t,e,i,u,f)};function _u(e,t,i,u,f){(e*=2)<0&&(e=-1*e-1);var m=1<<i;return(m*m*e+m*f+u).toString(36)+i.toString(36)+t.toString(36)}Ar.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Ar.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Ar(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ar(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Ar.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?_u(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):_u(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Ar.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Ar.prototype.children=function(e){if(this.overscaledZ>=e)return[new Ar(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,u=2*this.canonical.y;return[new Ar(t,this.wrap,t,i,u),new Ar(t,this.wrap,t,i+1,u),new Ar(t,this.wrap,t,i,u+1),new Ar(t,this.wrap,t,i+1,u+1)]},Ar.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Ar.prototype.wrapped=function(){return new Ar(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ar.prototype.unwrapTo=function(e){return new Ar(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Ar.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ar.prototype.toUnwrapped=function(){return new jf(this.wrap,this.canonical)},Ar.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ar.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Is(e.x-this.wrap,e.y))},mt("CanonicalTileID",As),mt("OverscaledTileID",Ar,{omit:["posMatrix"]});var Po=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return je('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var u=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var f=0;f<u;f++)this.data[this._idx(-1,f)]=this.data[this._idx(0,f)],this.data[this._idx(u,f)]=this.data[this._idx(u-1,f)],this.data[this._idx(f,-1)]=this.data[this._idx(f,0)],this.data[this._idx(f,u)]=this.data[this._idx(f,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};Po.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),u=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[u],i[u+1],i[u+2])},Po.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Po.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Po.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Po.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Po.prototype.getPixels=function(){return new Zn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Po.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=t*this.dim,f=t*this.dim+this.dim,m=i*this.dim,x=i*this.dim+this.dim;switch(t){case-1:u=f-1;break;case 1:f=u+1}switch(i){case-1:m=x-1;break;case 1:x=m+1}for(var E=-t*this.dim,A=-i*this.dim,P=m;P<x;P++)for(var D=u;D<f;D++)this.data[this._idx(D,P)]=e.data[this._idx(D+E,P+A)]},mt("DEMData",Po);var qc=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};qc.prototype.encode=function(e){return this._stringToNumber[e]},qc.prototype.decode=function(e){return this._numberToString[e]};var jc=function(e,t,i,u,f){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=u,this.properties=e.properties,this.id=f},ch={geometry:{configurable:!0}};ch.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ch.geometry.set=function(e){this._geometry=e},jc.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(jc.prototype,ch);var _l=function(){this.state={},this.stateChanges={},this.deletedStates={}};_l.prototype.updateState=function(e,t,i){var u=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},ge(this.stateChanges[e][u],i),this.deletedStates[e]===null)for(var f in this.deletedStates[e]={},this.state[e])f!==u&&(this.deletedStates[e][f]=null);else if(this.deletedStates[e]&&this.deletedStates[e][u]===null)for(var m in this.deletedStates[e][u]={},this.state[e][u])i[m]||(this.deletedStates[e][u][m]=null);else for(var x in i)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][x]===null&&delete this.deletedStates[e][u][x]},_l.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var u=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(i in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][i]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},_l.prototype.getState=function(e,t){var i=String(t),u=ge({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var f=this.deletedStates[e][t];if(f===null)return{};for(var m in f)delete u[m]}return u},_l.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},_l.prototype.coalesceChanges=function(e,t){var i={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var f={};for(var m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),ge(this.state[u][m],this.stateChanges[u][m]),f[m]=this.state[u][m];i[u]=f}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var E={};if(this.deletedStates[x]===null)for(var A in this.state[x])E[A]={},this.state[x][A]={};else for(var P in this.deletedStates[x]){if(this.deletedStates[x][P]===null)this.state[x][P]={};else for(var D=0,F=Object.keys(this.deletedStates[x][P]);D<F.length;D+=1)delete this.state[x][P][F[D]];E[P]=this.state[x][P]}i[x]=i[x]||{},ge(i[x],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var V in e)e[V].setFeatureState(i,t)};var Co=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ca(8192,16,0),this.grid3D=new Ca(8192,16,0),this.featureIndexArray=new O,this.promoteId=t};function Gf(e,t,i,u,f){return Ge(e,function(m,x){var E=t instanceof vs?t.get(x):null;return E&&E.evaluate?E.evaluate(i,u,f):E})}function Zf(e){for(var t=1/0,i=1/0,u=-1/0,f=-1/0,m=0,x=e;m<x.length;m+=1){var E=x[m];t=Math.min(t,E.x),i=Math.min(i,E.y),u=Math.max(u,E.x),f=Math.max(f,E.y)}return{minX:t,minY:i,maxX:u,maxY:f}}function Zy(e,t){return t-e}Co.prototype.insert=function(e,t,i,u,f,m){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,u,f);for(var E=m?this.grid3D:this.grid,A=0;A<t.length;A++){for(var P=t[A],D=[1/0,1/0,-1/0,-1/0],F=0;F<P.length;F++){var V=P[F];D[0]=Math.min(D[0],V.x),D[1]=Math.min(D[1],V.y),D[2]=Math.max(D[2],V.x),D[3]=Math.max(D[3],V.y)}D[0]<8192&&D[1]<8192&&D[2]>=0&&D[3]>=0&&E.insert(x,D[0],D[1],D[2],D[3])}},Co.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ll.VectorTile(new Cc(this.rawTileData)).layers,this.sourceLayerCoder=new qc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Co.prototype.query=function(e,t,i,u){var f=this;this.loadVTLayers();for(var m=e.params||{},x=8192/e.tileSize/e.scale,E=Zs(m.filter),A=e.queryGeometry,P=e.queryPadding*x,D=Zf(A),F=this.grid.query(D.minX-P,D.minY-P,D.maxX+P,D.maxY+P),V=Zf(e.cameraQueryGeometry),j=this.grid3D.query(V.minX-P,V.minY-P,V.maxX+P,V.maxY+P,function(Se,ze,Me,Ze){return function(tt,St,ut,It,pt){for(var $t=0,Bt=tt;$t<Bt.length;$t+=1){var _t=Bt[$t];if(St<=_t.x&&ut<=_t.y&&It>=_t.x&&pt>=_t.y)return!0}var ti=[new M(St,ut),new M(St,pt),new M(It,pt),new M(It,ut)];if(tt.length>2){for(var Zt=0,di=ti;Zt<di.length;Zt+=1)if(Ia(tt,di[Zt]))return!0}for(var At=0;At<tt.length-1;At++)if(Es(tt[At],tt[At+1],ti))return!0;return!1}(e.cameraQueryGeometry,Se-P,ze-P,Me+P,Ze+P)}),$=0,te=j;$<te.length;$+=1)F.push(te[$]);F.sort(Zy);for(var he,oe={},ye=function(Se){var ze=F[Se];if(ze!==he){he=ze;var Me=f.featureIndexArray.get(ze),Ze=null;f.loadMatchingFeature(oe,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,E,m.layers,m.availableImages,t,i,u,function(tt,St,ut){return Ze||(Ze=Yi(tt)),St.queryIntersectsFeature(A,tt,ut,Ze,f.z,e.transform,x,e.pixelPosMatrix)})}},be=0;be<F.length;be++)ye(be);return oe},Co.prototype.loadMatchingFeature=function(e,t,i,u,f,m,x,E,A,P,D){var F=this.bucketLayerIDs[t];if(!m||function(tt,St){for(var ut=0;ut<tt.length;ut++)if(St.indexOf(tt[ut])>=0)return!0;return!1}(m,F)){var V=this.sourceLayerCoder.decode(i),j=this.vtLayers[V].feature(u);if(f.needGeometry){var $=ur(j,!0);if(!f.filter(new ii(this.tileID.overscaledZ),$,this.tileID.canonical))return}else if(!f.filter(new ii(this.tileID.overscaledZ),j))return;for(var te=this.getId(j,V),he=0;he<F.length;he++){var oe=F[he];if(!(m&&m.indexOf(oe)<0)){var ye=E[oe];if(ye){var be={};te!==void 0&&P&&(be=P.getState(ye.sourceLayer||"_geojsonTileLayer",te));var Se=ge({},A[oe]);Se.paint=Gf(Se.paint,ye.paint,j,be,x),Se.layout=Gf(Se.layout,ye.layout,j,be,x);var ze=!D||D(j,ye,be);if(ze){var Me=new jc(j,this.z,this.x,this.y,te);Me.layer=Se;var Ze=e[oe];Ze===void 0&&(Ze=e[oe]=[]),Ze.push({featureIndex:u,feature:Me,intersectionZ:ze})}}}}}},Co.prototype.lookupSymbolFeatures=function(e,t,i,u,f,m,x,E){var A={};this.loadVTLayers();for(var P=Zs(f),D=0,F=e;D<F.length;D+=1)this.loadMatchingFeature(A,i,u,F[D],P,m,x,E,t);return A},Co.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var u=0,f=i[t];u<f.length;u+=1)if(e===f[u])return!0;return!1},Co.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},mt("FeatureIndex",Co,{omit:["rawTileData","sourceLayerCoder"]});var Xr=function(e,t){this.tileID=e,this.uid=Ue(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Xr.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<yn.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Xr.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Xr.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(P,D){var F={};if(!D)return F;for(var V=function(){var te=$[j],he=te.layerIds.map(function(be){return D.getLayer(be)}).filter(Boolean);if(he.length!==0){te.layers=he,te.stateDependentLayerIds&&(te.stateDependentLayers=te.stateDependentLayerIds.map(function(be){return he.filter(function(Se){return Se.id===be})[0]}));for(var oe=0,ye=he;oe<ye.length;oe+=1)F[ye[oe].id]=te}},j=0,$=P;j<$.length;j+=1)V();return F}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var f=this.buckets[u];if(f instanceof Ci){if(this.hasSymbolBuckets=!0,!i)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var m in this.buckets){var x=this.buckets[m];if(x instanceof Ci&&x.hasRTLText){this.hasRTLText=!0,ea.isLoading()||ea.isLoaded()||tu()!=="deferred"||ma();break}}for(var E in this.queryPadding=0,this.buckets){var A=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(E).queryRadius(A))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Xr.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Xr.prototype.getBucket=function(e){return this.buckets[e.id]},Xr.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ts(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ts(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},Xr.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Xr.prototype.queryRenderedFeatures=function(e,t,i,u,f,m,x,E,A,P){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:f,scale:m,tileSize:this.tileSize,pixelPosMatrix:P,transform:E,params:x,queryPadding:this.queryPadding*A},e,t,i):{}},Xr.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var u=i.loadVTLayers(),f=t?t.sourceLayer:"",m=u._geojsonTileLayer||u[f];if(m)for(var x=Zs(t&&t.filter),E=this.tileID.canonical,A=E.z,P=E.x,D=E.y,F={z:A,x:P,y:D},V=0;V<m.length;V++){var j=m.feature(V);if(x.needGeometry){var $=ur(j,!0);if(!x.filter(new ii(this.tileID.overscaledZ),$,this.tileID.canonical))continue}else if(!x.filter(new ii(this.tileID.overscaledZ),j))continue;var te=i.getId(j,f),he=new jc(j,A,P,D,te);he.tile=F,e.push(he)}}},Xr.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Xr.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Xr.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=ot(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),f=!1;if(this.expirationTime>u)f=!1;else if(t)if(this.expirationTime<t)f=!0;else{var m=this.expirationTime-t;m?this.expirationTime=u+Math.max(m,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Xr.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Xr.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(t.style.hasLayer(u)){var f=this.buckets[u],m=f.layers[0].sourceLayer||"_geojsonTileLayer",x=i[m],E=e[m];if(x&&E&&Object.keys(E).length!==0){f.update(E,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var A=t&&t.style&&t.style.getLayer(u);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(f)))}}}},Xr.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Xr.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<yn.now()},Xr.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Xr.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=yn.now()+e},Xr.prototype.setDependencies=function(e,t){for(var i={},u=0,f=t;u<f.length;u+=1)i[f[u]]=!0;this.dependencies[e]=i},Xr.prototype.hasDependency=function(e,t){for(var i=0,u=e;i<u.length;i+=1){var f=this.dependencies[u[i]];if(f){for(var m=0,x=t;m<x.length;m+=1)if(f[x[m]])return!0}}return!1};var Jo=R.performance,Kf=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Jo.mark(this._marks.start)};Kf.prototype.finish=function(){Jo.mark(this._marks.end);var e=Jo.getEntriesByName(this._marks.measure);return e.length===0&&(Jo.measure(this._marks.measure,this._marks.start,this._marks.end),e=Jo.getEntriesByName(this._marks.measure),Jo.clearMarks(this._marks.start),Jo.clearMarks(this._marks.end),Jo.clearMeasures(this._marks.measure)),e},a.Actor=yl,a.AlphaImage=zs,a.CanonicalTileID=As,a.CollisionBoxArray=s,a.Color=si,a.DEMData=Po,a.DataConstantProperty=zt,a.DictionaryCoder=qc,a.EXTENT=8192,a.ErrorEvent=le,a.EvaluationParameters=ii,a.Event=Q,a.Evented=fe,a.FeatureIndex=Co,a.FillBucket=Ra,a.FillExtrusionBucket=Ba,a.ImageAtlas=gu,a.ImagePosition=Dc,a.LineBucket=Pn,a.LngLat=Ki,a.LngLatBounds=Ir,a.MercatorCoordinate=Is,a.ONE_EM=24,a.OverscaledTileID=Ar,a.Point=M,a.Point$1=M,a.Properties=an,a.Protobuf=Cc,a.RGBAImage=Zn,a.RequestManager=ar,a.RequestPerformance=Kf,a.ResourceType=ra,a.SegmentVector=Z,a.SourceFeatureState=_l,a.StructArrayLayout1ui2=su,a.StructArrayLayout2f1f2i16=zo,a.StructArrayLayout2i4=ko,a.StructArrayLayout3ui6=Xa,a.StructArrayLayout4i8=ru,a.SymbolBucket=Ci,a.Texture=Ts,a.Tile=Xr,a.Transitionable=nn,a.Uniform1f=Je,a.Uniform1i=Ve,a.Uniform2f=Xe,a.Uniform3f=ft,a.Uniform4f=Tt,a.UniformColor=Mt,a.UniformMatrix4f=mi,a.UnwrappedTileID=jf,a.ValidationError=ee,a.WritingMode=la,a.ZoomHistory=Jl,a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},a.addDynamicAttributes=oh,a.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var u=e.length,f=new Array(e.length),m=null;e.forEach(function(x,E){t(x,function(A,P){A&&(m=A),f[E]=P,--u==0&&i(m,f)})})},a.bezier=X,a.bindAll=xt,a.browser=yn,a.cacheEntryPossiblyAdded=function(e){++jr>Jn&&(e.getActor().send("enforceCacheSizeLimit",Lr),jr=0)},a.clamp=se,a.clearTileCache=function(e){var t=R.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},a.clipLine=Tf,a.clone=function(e){var t=new wi(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.clone$1=ht,a.clone$2=function(e){var t=new wi(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.collisionCircleLayout=py,a.config=Gt,a.create=function(){var e=new wi(16);return wi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},a.create$1=function(){var e=new wi(9);return wi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},a.create$2=function(){var e=new wi(4);return wi!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},a.createCommonjsModule=z,a.createExpression=js,a.createLayout=Hr,a.createStyleLayer=function(e){return e.type==="custom"?new jy(e):new Gy[e.type](e)},a.cross=function(e,t,i){var u=t[0],f=t[1],m=t[2],x=i[0],E=i[1],A=i[2];return e[0]=f*A-m*E,e[1]=m*x-u*A,e[2]=u*E-f*x,e},a.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],i[u]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var f in t)if(!e(t[f],i[f]))return!1;return!0}return t===i},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.ease=ae,a.emitValidationErrors=gs,a.endsWith=Pt,a.enforceCacheSizeLimit=function(e){Rr(),sr&&sr.then(function(t){t.keys().then(function(i){for(var u=0;u<i.length-e;u++)t.delete(i[u])})})},a.evaluateSizeForFeature=xf,a.evaluateSizeForZoom=wf,a.evaluateVariableOffset=Pf,a.evented=eu,a.extend=ge,a.featureFilter=Zs,a.filterObject=He,a.fromRotation=function(e,t){var i=Math.sin(t),u=Math.cos(t);return e[0]=u,e[1]=i,e[2]=0,e[3]=-i,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.getAnchorAlignment=ih,a.getAnchorJustification=ah,a.getArrayBuffer=Tn,a.getImage=k,a.getJSON=function(e,t){return Ui(ge(e,{type:"json"}),t)},a.getRTLTextPluginStatus=tu,a.getReferrer=Qi,a.getVideo=function(e,t){var i,u,f=R.document.createElement("video");f.muted=!0,f.onloadstart=function(){t(null,f)};for(var m=0;m<e.length;m++){var x=R.document.createElement("source");i=e[m],u=void 0,(u=R.document.createElement("a")).href=i,(u.protocol!==R.document.location.protocol||u.host!==R.document.location.host)&&(f.crossOrigin="Anonymous"),x.src=e[m],f.appendChild(x)}return{cancel:function(){}}},a.identity=ta,a.invert=function(e,t){var i=t[0],u=t[1],f=t[2],m=t[3],x=t[4],E=t[5],A=t[6],P=t[7],D=t[8],F=t[9],V=t[10],j=t[11],$=t[12],te=t[13],he=t[14],oe=t[15],ye=i*E-u*x,be=i*A-f*x,Se=i*P-m*x,ze=u*A-f*E,Me=u*P-m*E,Ze=f*P-m*A,tt=D*te-F*$,St=D*he-V*$,ut=D*oe-j*$,It=F*he-V*te,pt=F*oe-j*te,$t=V*oe-j*he,Bt=ye*$t-be*pt+Se*It+ze*ut-Me*St+Ze*tt;return Bt?(e[0]=(E*$t-A*pt+P*It)*(Bt=1/Bt),e[1]=(f*pt-u*$t-m*It)*Bt,e[2]=(te*Ze-he*Me+oe*ze)*Bt,e[3]=(V*Me-F*Ze-j*ze)*Bt,e[4]=(A*ut-x*$t-P*St)*Bt,e[5]=(i*$t-f*ut+m*St)*Bt,e[6]=(he*Se-$*Ze-oe*be)*Bt,e[7]=(D*Ze-V*Se+j*be)*Bt,e[8]=(x*pt-E*ut+P*tt)*Bt,e[9]=(u*ut-i*pt-m*tt)*Bt,e[10]=($*Me-te*Se+oe*ye)*Bt,e[11]=(F*Se-D*Me-j*ye)*Bt,e[12]=(E*St-x*It-A*tt)*Bt,e[13]=(i*It-u*St+f*tt)*Bt,e[14]=(te*be-$*ze-he*ye)*Bt,e[15]=(D*ze-F*be+V*ye)*Bt,e):null},a.isChar=at,a.isMapboxURL=or,a.keysDifference=function(e,t){var i=[];for(var u in e)u in t||i.push(u);return i},a.makeRequest=Ui,a.mapObject=Ge,a.mercatorXfromLng=Uf,a.mercatorYfromLat=Vf,a.mercatorZfromAltitude=qf,a.mul=Gp,a.multiply=An,a.mvt=ll,a.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},a.normalize=function(e,t){var i=t[0],u=t[1],f=t[2],m=i*i+u*u+f*f;return m>0&&(m=1/Math.sqrt(m)),e[0]=t[0]*m,e[1]=t[1]*m,e[2]=t[2]*m,e},a.number=_r,a.offscreenCanvasSupported=Gi,a.ortho=function(e,t,i,u,f,m,x){var E=1/(t-i),A=1/(u-f),P=1/(m-x);return e[0]=-2*E,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*P,e[11]=0,e[12]=(t+i)*E,e[13]=(f+u)*A,e[14]=(x+m)*P,e[15]=1,e},a.parseGlyphPBF=function(e){return new Cc(e).readFields(wy,[])},a.pbf=Cc,a.performSymbolLayout=function(e,t,i,u,f,m,x){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var E=e.layers[0].layout,A=e.layers[0]._unevaluatedLayout._values,P={};if(e.textSizeData.kind==="composite"){var D=e.textSizeData,F=D.maxZoom;P.compositeTextSizes=[A["text-size"].possiblyEvaluate(new ii(D.minZoom),x),A["text-size"].possiblyEvaluate(new ii(F),x)]}if(e.iconSizeData.kind==="composite"){var V=e.iconSizeData,j=V.maxZoom;P.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new ii(V.minZoom),x),A["icon-size"].possiblyEvaluate(new ii(j),x)]}P.layoutTextSize=A["text-size"].possiblyEvaluate(new ii(e.zoom+1),x),P.layoutIconSize=A["icon-size"].possiblyEvaluate(new ii(e.zoom+1),x),P.textMaxSize=A["text-size"].possiblyEvaluate(new ii(18));for(var $=24*E.get("text-line-height"),te=E.get("text-rotation-alignment")==="map"&&E.get("symbol-placement")!=="point",he=E.get("text-keep-upright"),oe=E.get("text-size"),ye=function(){var ze=Se[be],Me=E.get("text-font").evaluate(ze,{},x).join(","),Ze=oe.evaluate(ze,{},x),tt=P.layoutTextSize.evaluate(ze,{},x),St=P.layoutIconSize.evaluate(ze,{},x),ut={horizontal:{},vertical:void 0},It=ze.text,pt=[0,0];if(It){var $t=It.toString(),Bt=24*E.get("text-letter-spacing").evaluate(ze,{},x),_t=function(ai){for(var Di=0,Ai=ai;Di<Ai.length;Di+=1)if(gi=Ai[Di].charCodeAt(0),at.Arabic(gi)||at["Arabic Supplement"](gi)||at["Arabic Extended-A"](gi)||at["Arabic Presentation Forms-A"](gi)||at["Arabic Presentation Forms-B"](gi))return!1;var gi;return!0}($t)?Bt:0,ti=E.get("text-anchor").evaluate(ze,{},x),Zt=E.get("text-variable-anchor");if(!Zt){var di=E.get("text-radial-offset").evaluate(ze,{},x);pt=di?Pf(ti,[24*di,nh]):E.get("text-offset").evaluate(ze,{},x).map(function(ai){return 24*ai})}var At=te?"center":E.get("text-justify").evaluate(ze,{},x),bi=E.get("symbol-placement"),Hi=bi==="point"?24*E.get("text-max-width").evaluate(ze,{},x):0,ir=function(){e.allowVerticalPlacement&&Ql($t)&&(ut.vertical=Lc(It,t,i,f,Me,Hi,$,ti,"left",_t,pt,la.vertical,!0,bi,tt,Ze))};if(!te&&Zt){for(var Ji=At==="auto"?Zt.map(function(ai){return ah(ai)}):[At],Wi=!1,rr=0;rr<Ji.length;rr++){var Nr=Ji[rr];if(!ut.horizontal[Nr])if(Wi)ut.horizontal[Nr]=ut.horizontal[0];else{var Ur=Lc(It,t,i,f,Me,Hi,$,"center",Nr,_t,pt,la.horizontal,!1,bi,tt,Ze);Ur&&(ut.horizontal[Nr]=Ur,Wi=Ur.positionedLines.length===1)}}ir()}else{At==="auto"&&(At=ah(ti));var En=Lc(It,t,i,f,Me,Hi,$,ti,At,_t,pt,la.horizontal,!1,bi,tt,Ze);En&&(ut.horizontal[At]=En),ir(),Ql($t)&&te&&he&&(ut.vertical=Lc(It,t,i,f,Me,Hi,$,ti,At,_t,pt,la.vertical,!1,bi,tt,Ze))}}var Yr=void 0,kn=!1;if(ze.icon&&ze.icon.name){var cr=u[ze.icon.name];cr&&(Yr=function(ai,Di,Ai){var gi=ih(Ai),Cn=Di[0]-ai.displaySize[0]*gi.horizontalAlign,mn=Di[1]-ai.displaySize[1]*gi.verticalAlign;return{image:ai,top:mn,bottom:mn+ai.displaySize[1],left:Cn,right:Cn+ai.displaySize[0]}}(f[ze.icon.name],E.get("icon-offset").evaluate(ze,{},x),E.get("icon-anchor").evaluate(ze,{},x)),kn=cr.sdf,e.sdfIcons===void 0?e.sdfIcons=cr.sdf:e.sdfIcons!==cr.sdf&&je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(cr.pixelRatio!==e.pixelRatio||E.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Jr=Mf(ut.horizontal)||ut.vertical;e.iconsInText=!!Jr&&Jr.iconsInText,(Jr||Yr)&&function(ai,Di,Ai,gi,Cn,mn,ji,br,gn,xi,to){var ua=mn.textMaxSize.evaluate(Di,{});ua===void 0&&(ua=ji);var io,pr=ai.layers[0].layout,ro=pr.get("icon-offset").evaluate(Di,{},to),Pa=Mf(Ai.horizontal),vl=ji/24,Ps=ai.tilePixelRatio*vl,bl=ai.tilePixelRatio*ua/24,Mo=ai.tilePixelRatio*br,xl=ai.tilePixelRatio*pr.get("symbol-spacing"),Gc=pr.get("text-padding")*ai.tilePixelRatio,wl=pr.get("icon-padding")*ai.tilePixelRatio,vu=pr.get("text-max-angle")/180*Math.PI,Zc=pr.get("text-rotation-alignment")==="map"&&pr.get("symbol-placement")!=="point",Kc=pr.get("icon-rotation-alignment")==="map"&&pr.get("symbol-placement")!=="point",Do=pr.get("symbol-placement"),bu=xl/2,Sl=pr.get("icon-text-fit");gi&&Sl!=="none"&&(ai.allowVerticalPlacement&&Ai.vertical&&(io=bf(gi,Ai.vertical,Sl,pr.get("icon-text-fit-padding"),ro,vl)),Pa&&(gi=bf(gi,Pa,Sl,pr.get("icon-text-fit-padding"),ro,vl)));var Qo=function(Ky,Iu){Iu.x<0||Iu.x>=8192||Iu.y<0||Iu.y>=8192||function(hr,Fa,Hy,$o,dh,Xf,Qc,no,$c,Au,ep,tp,mh,Yf,Pu,Jf,Qf,$f,ed,td,ca,ip,id,ao,Wy){var rd,Ms,Il,Al,Pl,Cl=hr.addToLineVertexArray(Fa,Hy),nd=0,ad=0,od=0,sd=0,gh=-1,yh=-1,Lo={},ld=J(""),_h=0,vh=0;if(no._unevaluatedLayout.getValue("text-radial-offset")===void 0?(_h=(rd=no.layout.get("text-offset").evaluate(ca,{},ao).map(function(Mu){return 24*Mu}))[0],vh=rd[1]):(_h=24*no.layout.get("text-radial-offset").evaluate(ca,{},ao),vh=nh),hr.allowVerticalPlacement&&$o.vertical){var ud=no.layout.get("text-rotate").evaluate(ca,{},ao)+90;Al=new Nc($c,Fa,Au,ep,tp,$o.vertical,mh,Yf,Pu,ud),Qc&&(Pl=new Nc($c,Fa,Au,ep,tp,Qc,Qf,$f,Pu,ud))}if(dh){var bh=no.layout.get("icon-rotate").evaluate(ca,{}),cd=no.layout.get("icon-text-fit")!=="none",pd=If(dh,bh,id,cd),xh=Qc?If(Qc,bh,id,cd):void 0;Il=new Nc($c,Fa,Au,ep,tp,dh,Qf,$f,!1,bh),nd=4*pd.length;var hd=hr.iconSizeData,Cu=null;hd.kind==="source"?(Cu=[128*no.layout.get("icon-size").evaluate(ca,{})])[0]>32640&&je(hr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):hd.kind==="composite"&&((Cu=[128*ip.compositeIconSizes[0].evaluate(ca,{},ao),128*ip.compositeIconSizes[1].evaluate(ca,{},ao)])[0]>32640||Cu[1]>32640)&&je(hr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),hr.addSymbols(hr.icon,pd,Cu,td,ed,ca,!1,Fa,Cl.lineStartIndex,Cl.lineLength,-1,ao),gh=hr.icon.placedSymbolArray.length-1,xh&&(ad=4*xh.length,hr.addSymbols(hr.icon,xh,Cu,td,ed,ca,la.vertical,Fa,Cl.lineStartIndex,Cl.lineLength,-1,ao),yh=hr.icon.placedSymbolArray.length-1)}for(var fd in $o.horizontal){var rp=$o.horizontal[fd];if(!Ms){ld=J(rp.text);var Xy=no.layout.get("text-rotate").evaluate(ca,{},ao);Ms=new Nc($c,Fa,Au,ep,tp,rp,mh,Yf,Pu,Xy)}var dd=rp.positionedLines.length===1;if(od+=Cf(hr,Fa,rp,Xf,no,Pu,ca,Jf,Cl,$o.vertical?la.horizontal:la.horizontalOnly,dd?Object.keys($o.horizontal):[fd],Lo,gh,ip,ao),dd)break}$o.vertical&&(sd+=Cf(hr,Fa,$o.vertical,Xf,no,Pu,ca,Jf,Cl,la.vertical,["vertical"],Lo,yh,ip,ao));var Yy=Ms?Ms.boxStartIndex:hr.collisionBoxArray.length,Jy=Ms?Ms.boxEndIndex:hr.collisionBoxArray.length,Qy=Al?Al.boxStartIndex:hr.collisionBoxArray.length,$y=Al?Al.boxEndIndex:hr.collisionBoxArray.length,e_=Il?Il.boxStartIndex:hr.collisionBoxArray.length,t_=Il?Il.boxEndIndex:hr.collisionBoxArray.length,i_=Pl?Pl.boxStartIndex:hr.collisionBoxArray.length,r_=Pl?Pl.boxEndIndex:hr.collisionBoxArray.length,oo=-1,np=function(Mu,gd){return Mu&&Mu.circleDiameter?Math.max(Mu.circleDiameter,gd):gd};oo=np(Ms,oo),oo=np(Al,oo),oo=np(Il,oo);var md=(oo=np(Pl,oo))>-1?1:0;md&&(oo*=Wy/24),hr.glyphOffsetArray.length>=Ci.MAX_GLYPHS&&je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ca.sortKey!==void 0&&hr.addToSortKeyRanges(hr.symbolInstances.length,ca.sortKey),hr.symbolInstances.emplaceBack(Fa.x,Fa.y,Lo.right>=0?Lo.right:-1,Lo.center>=0?Lo.center:-1,Lo.left>=0?Lo.left:-1,Lo.vertical||-1,gh,yh,ld,Yy,Jy,Qy,$y,e_,t_,i_,r_,Au,od,sd,nd,ad,md,0,mh,_h,vh,oo)}(ai,Iu,Ky,Ai,gi,Cn,io,ai.layers[0],ai.collisionBoxArray,Di.index,Di.sourceLayerIndex,ai.index,Ps,Gc,Zc,gn,Mo,wl,Kc,ro,Di,mn,xi,to,ji)};if(Do==="line")for(var El=0,Hc=Tf(Di.geometry,0,0,8192,8192);El<Hc.length;El+=1)for(var Wc=Hc[El],xu=0,wu=Ay(Wc,xl,vu,Ai.vertical||Pa,gi,24,bl,ai.overscaling,8192);xu<wu.length;xu+=1){var Xc=wu[xu];Pa&&Dy(ai,Pa.text,bu,Xc)||Qo(Wc,Xc)}else if(Do==="line-center")for(var Su=0,Eu=Di.geometry;Su<Eu.length;Su+=1){var ku=Eu[Su];if(ku.length>1){var Yc=Iy(ku,vu,Ai.vertical||Pa,gi,24,bl);Yc&&Qo(ku,Yc)}}else if(Di.type==="Polygon")for(var kl=0,Jc=Jp(Di.geometry,0);kl<Jc.length;kl+=1){var zl=Jc[kl],zu=Cy(zl,16);Qo(zl[0],new hl(zu.x,zu.y,0))}else if(Di.type==="LineString")for(var Cs=0,Tu=Di.geometry;Cs<Tu.length;Cs+=1){var Tl=Tu[Cs];Qo(Tl,new hl(Tl[0].x,Tl[0].y,0))}else if(Di.type==="Point")for(var ph=0,Hf=Di.geometry;ph<Hf.length;ph+=1)for(var hh=0,Wf=Hf[ph];hh<Wf.length;hh+=1){var fh=Wf[hh];Qo([fh],new hl(fh.x,fh.y,0))}}(e,ze,ut,Yr,u,P,tt,St,pt,kn,x)},be=0,Se=e.features;be<Se.length;be+=1)ye();m&&e.generateCollisionDebugBuffers()},a.perspective=function(e,t,i,u,f){var m,x=1/Math.tan(t/2);return e[0]=x/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,f!=null&&f!==1/0?(e[10]=(f+u)*(m=1/(u-f)),e[14]=2*f*u*m):(e[10]=-1,e[14]=-2*u),e},a.pick=function(e,t){for(var i={},u=0;u<t.length;u++){var f=t[u];f in e&&(i[f]=e[f])}return i},a.plugin=ea,a.polygonIntersectsPolygon=Qa,a.postMapLoadEvent=Dn,a.postTurnstileEvent=Yn,a.potpack=gf,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=mt,a.registerForPluginStateChange=function(e){return e({pluginStatus:qn,pluginURL:Ma}),eu.on("pluginStateChange",e),e},a.renderColorRamp=Yh,a.rotate=function(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3],E=Math.sin(i),A=Math.cos(i);return e[0]=u*A+m*E,e[1]=f*A+x*E,e[2]=u*-E+m*A,e[3]=f*-E+x*A,e},a.rotateX=function(e,t,i){var u=Math.sin(i),f=Math.cos(i),m=t[4],x=t[5],E=t[6],A=t[7],P=t[8],D=t[9],F=t[10],V=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=m*f+P*u,e[5]=x*f+D*u,e[6]=E*f+F*u,e[7]=A*f+V*u,e[8]=P*f-m*u,e[9]=D*f-x*u,e[10]=F*f-E*u,e[11]=V*f-A*u,e},a.rotateZ=function(e,t,i){var u=Math.sin(i),f=Math.cos(i),m=t[0],x=t[1],E=t[2],A=t[3],P=t[4],D=t[5],F=t[6],V=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=m*f+P*u,e[1]=x*f+D*u,e[2]=E*f+F*u,e[3]=A*f+V*u,e[4]=P*f-m*u,e[5]=D*f-x*u,e[6]=F*f-E*u,e[7]=V*f-A*u,e},a.scale=function(e,t,i){var u=i[0],f=i[1],m=i[2];return e[0]=t[0]*u,e[1]=t[1]*u,e[2]=t[2]*u,e[3]=t[3]*u,e[4]=t[4]*f,e[5]=t[5]*f,e[6]=t[6]*f,e[7]=t[7]*f,e[8]=t[8]*m,e[9]=t[9]*m,e[10]=t[10]*m,e[11]=t[11]*m,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},a.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},a.setCacheLimits=function(e,t){Lr=e,Jn=t},a.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),qn==="deferred"||qn==="loading"||qn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ma=yn.resolveURL(e),qn="deferred",Qs=t,_s(),i||ma()},a.sphericalToCartesian=function(e){var t=e[0],i=e[1],u=e[2];return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(u),y:t*Math.sin(i)*Math.sin(u),z:t*Math.cos(u)}},a.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},a.styleSpec=q,a.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},a.symbolSize=Ty,a.transformMat3=function(e,t,i){var u=t[0],f=t[1],m=t[2];return e[0]=u*i[0]+f*i[3]+m*i[6],e[1]=u*i[1]+f*i[4]+m*i[7],e[2]=u*i[2]+f*i[5]+m*i[8],e},a.transformMat4=nl,a.translate=function(e,t,i){var u,f,m,x,E,A,P,D,F,V,j,$,te=i[0],he=i[1],oe=i[2];return t===e?(e[12]=t[0]*te+t[4]*he+t[8]*oe+t[12],e[13]=t[1]*te+t[5]*he+t[9]*oe+t[13],e[14]=t[2]*te+t[6]*he+t[10]*oe+t[14],e[15]=t[3]*te+t[7]*he+t[11]*oe+t[15]):(f=t[1],m=t[2],x=t[3],E=t[4],A=t[5],P=t[6],D=t[7],F=t[8],V=t[9],j=t[10],$=t[11],e[0]=u=t[0],e[1]=f,e[2]=m,e[3]=x,e[4]=E,e[5]=A,e[6]=P,e[7]=D,e[8]=F,e[9]=V,e[10]=j,e[11]=$,e[12]=u*te+E*he+F*oe+t[12],e[13]=f*te+A*he+V*oe+t[13],e[14]=m*te+P*he+j*oe+t[14],e[15]=x*te+D*he+$*oe+t[15]),e},a.triggerPluginCompletionEvent=Ec,a.uniqueId=Ue,a.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},a.validateLight=qp,a.validateStyle=ds,a.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},a.vectorTile=ll,a.version="1.13.2",a.warnOnce=je,a.webpSupported=fr,a.window=R,a.wrap=pe}),v(["./shared"],function(a){function z(L){var k=typeof L;if(k==="number"||k==="boolean"||k==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var N="[",K=0,Q=L;K<Q.length;K+=1)N+=z(Q[K])+",";return N+"]"}for(var le=Object.keys(L).sort(),fe="{",q=0;q<le.length;q++)fe+=JSON.stringify(le[q])+":"+z(L[le[q]])+",";return fe+"}"}function T(L){for(var k="",N=0,K=a.refProperties;N<K.length;N+=1)k+="/"+z(L[K[N]]);return k}var B=function(L){this.keyCache={},L&&this.replace(L)};B.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},B.prototype.update=function(L,k){for(var N=this,K=0,Q=L;K<Q.length;K+=1){var le=Q[K];this._layerConfigs[le.id]=le;var fe=this._layers[le.id]=a.createStyleLayer(le);fe._featureFilter=a.featureFilter(fe.filter),this.keyCache[le.id]&&delete this.keyCache[le.id]}for(var q=0,ee=k;q<ee.length;q+=1){var me=ee[q];delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me]}this.familiesBySource={};for(var Ce=0,Fe=function(Ye,et){for(var qt={},nt=0;nt<Ye.length;nt++){var Yt=et&&et[Ye[nt].id]||T(Ye[nt]);et&&(et[Ye[nt].id]=Yt);var jt=qt[Yt];jt||(jt=qt[Yt]=[]),jt.push(Ye[nt])}var Ht=[];for(var oi in qt)Ht.push(qt[oi]);return Ht}(a.values(this._layerConfigs),this.keyCache);Ce<Fe.length;Ce+=1){var we=Fe[Ce].map(function(Ye){return N._layers[Ye.id]}),Le=we[0];if(Le.visibility!=="none"){var st=Le.source||"",it=this.familiesBySource[st];it||(it=this.familiesBySource[st]={});var ke=Le.sourceLayer||"_geojsonTileLayer",$e=it[ke];$e||($e=it[ke]=[]),$e.push(we)}}};var M=function(L){var k={},N=[];for(var K in L){var Q=L[K],le=k[K]={};for(var fe in Q){var q=Q[+fe];if(q&&q.bitmap.width!==0&&q.bitmap.height!==0){var ee={x:0,y:0,w:q.bitmap.width+2,h:q.bitmap.height+2};N.push(ee),le[fe]={rect:ee,metrics:q.metrics}}}}var me=a.potpack(N),Ce=new a.AlphaImage({width:me.w||1,height:me.h||1});for(var Fe in L){var we=L[Fe];for(var Le in we){var st=we[+Le];if(st&&st.bitmap.width!==0&&st.bitmap.height!==0){var it=k[Fe][Le].rect;a.AlphaImage.copy(st.bitmap,Ce,{x:0,y:0},{x:it.x+1,y:it.y+1},st.bitmap)}}}this.image=Ce,this.positions=k};a.register("GlyphAtlas",M);var U=function(L){this.tileID=new a.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function R(L,k,N){for(var K=new a.EvaluationParameters(k),Q=0,le=L;Q<le.length;Q+=1)le[Q].recalculate(K,N)}function W(L,k){var N=a.getArrayBuffer(L.request,function(K,Q,le,fe){K?k(K):Q&&k(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Q)),rawData:Q,cacheControl:le,expires:fe})});return function(){N.cancel(),k()}}U.prototype.parse=function(L,k,N,K,Q){var le=this;this.status="parsing",this.data=L,this.collisionBoxArray=new a.CollisionBoxArray;var fe=new a.DictionaryCoder(Object.keys(L.layers).sort()),q=new a.FeatureIndex(this.tileID,this.promoteId);q.bucketLayerIDs=[];var ee,me,Ce,Fe,we={},Le={featureIndex:q,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:N},st=k.familiesBySource[this.source];for(var it in st){var ke=L.layers[it];if(ke){ke.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+it+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var $e=fe.encode(it),Ye=[],et=0;et<ke.length;et++){var qt=ke.feature(et),nt=q.getId(qt,it);Ye.push({feature:qt,id:nt,index:et,sourceLayerIndex:$e})}for(var Yt=0,jt=st[it];Yt<jt.length;Yt+=1){var Ht=jt[Yt],oi=Ht[0];oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(R(Ht,this.zoom,N),(we[oi.id]=oi.createBucket({index:q.bucketLayerIDs.length,layers:Ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$e,sourceID:this.source})).populate(Ye,Le,this.tileID.canonical),q.bucketLayerIDs.push(Ht.map(function(_i){return _i.id})))}}}var ei=a.mapObject(Le.glyphDependencies,function(_i){return Object.keys(_i).map(Number)});Object.keys(ei).length?K.send("getGlyphs",{uid:this.uid,stacks:ei},function(_i,Qt){ee||(ee=_i,me=Qt,Li.call(le))}):me={};var yr=Object.keys(Le.iconDependencies);yr.length?K.send("getImages",{icons:yr,source:this.source,tileID:this.tileID,type:"icons"},function(_i,Qt){ee||(ee=_i,Ce=Qt,Li.call(le))}):Ce={};var fi=Object.keys(Le.patternDependencies);function Li(){if(ee)return Q(ee);if(me&&Ce&&Fe){var _i=new M(me),Qt=new a.ImageAtlas(Ce,Fe);for(var si in we){var wr=we[si];wr instanceof a.SymbolBucket?(R(wr.layers,this.zoom,N),a.performSymbolLayout(wr,me,_i.positions,Ce,Qt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):wr.hasPattern&&(wr instanceof a.LineBucket||wr instanceof a.FillBucket||wr instanceof a.FillExtrusionBucket)&&(R(wr.layers,this.zoom,N),wr.addFeatures(Le,this.tileID.canonical,Qt.patternPositions))}this.status="done",Q(null,{buckets:a.values(we).filter(function(ha){return!ha.isEmpty()}),featureIndex:q,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:_i.image,imageAtlas:Qt,glyphMap:this.returnDependencies?me:null,iconMap:this.returnDependencies?Ce:null,glyphPositions:this.returnDependencies?_i.positions:null})}}fi.length?K.send("getImages",{icons:fi,source:this.source,tileID:this.tileID,type:"patterns"},function(_i,Qt){ee||(ee=_i,Fe=Qt,Li.call(le))}):Fe={},Li.call(this)};var X=function(L,k,N,K){this.actor=L,this.layerIndex=k,this.availableImages=N,this.loadVectorData=K||W,this.loading={},this.loaded={}};X.prototype.loadTile=function(L,k){var N=this,K=L.uid;this.loading||(this.loading={});var Q=!!(L&&L.request&&L.request.collectResourceTiming)&&new a.RequestPerformance(L.request),le=this.loading[K]=new U(L);le.abort=this.loadVectorData(L,function(fe,q){if(delete N.loading[K],fe||!q)return le.status="done",N.loaded[K]=le,k(fe);var ee=q.rawData,me={};q.expires&&(me.expires=q.expires),q.cacheControl&&(me.cacheControl=q.cacheControl);var Ce={};if(Q){var Fe=Q.finish();Fe&&(Ce.resourceTiming=JSON.parse(JSON.stringify(Fe)))}le.vectorTile=q.vectorTile,le.parse(q.vectorTile,N.layerIndex,N.availableImages,N.actor,function(we,Le){if(we||!Le)return k(we);k(null,a.extend({rawTileData:ee.slice(0)},Le,me,Ce))}),N.loaded=N.loaded||{},N.loaded[K]=le})},X.prototype.reloadTile=function(L,k){var N=this,K=this.loaded,Q=L.uid,le=this;if(K&&K[Q]){var fe=K[Q];fe.showCollisionBoxes=L.showCollisionBoxes;var q=function(ee,me){var Ce=fe.reloadCallback;Ce&&(delete fe.reloadCallback,fe.parse(fe.vectorTile,le.layerIndex,N.availableImages,le.actor,Ce)),k(ee,me)};fe.status==="parsing"?fe.reloadCallback=q:fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,q):q())}},X.prototype.abortTile=function(L,k){var N=this.loading,K=L.uid;N&&N[K]&&N[K].abort&&(N[K].abort(),delete N[K]),k()},X.prototype.removeTile=function(L,k){var N=this.loaded,K=L.uid;N&&N[K]&&delete N[K],k()};var ae=a.window.ImageBitmap,se=function(){this.loaded={}};function pe(L,k){if(L.length!==0){ge(L[0],k);for(var N=1;N<L.length;N++)ge(L[N],!k)}}function ge(L,k){for(var N=0,K=0,Q=L.length,le=Q-1;K<Q;le=K++)N+=(L[K][0]-L[le][0])*(L[le][1]+L[K][1]);N>=0!=!!k&&L.reverse()}se.prototype.loadTile=function(L,k){var N=L.uid,K=L.encoding,Q=L.rawImageData,le=ae&&Q instanceof ae?this.getImageData(Q):Q,fe=new a.DEMData(N,le,K);this.loaded=this.loaded||{},this.loaded[N]=fe,k(null,fe)},se.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var k=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:k.width,height:k.height},k.data)},se.prototype.removeTile=function(L){var k=this.loaded,N=L.uid;k&&k[N]&&delete k[N]};var rt=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ue=function(L){this._feature=L,this.extent=a.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};Ue.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],k=0,N=this._feature.geometry;k<N.length;k+=1){var K=N[k];L.push([new a.Point$1(K[0],K[1])])}return L}for(var Q=[],le=0,fe=this._feature.geometry;le<fe.length;le+=1){for(var q=[],ee=0,me=fe[le];ee<me.length;ee+=1){var Ce=me[ee];q.push(new a.Point$1(Ce[0],Ce[1]))}Q.push(q)}return Q},Ue.prototype.toGeoJSON=function(L,k,N){return rt.call(this,L,k,N)};var Ae=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=L.length,this._features=L};Ae.prototype.feature=function(L){return new Ue(this._features[L])};var Ke=a.vectorTile.VectorTileFeature,xt=Pt;function Pt(L,k){this.options=k||{},this.features=L,this.length=L.length}function Ge(L,k){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=k||4096}Pt.prototype.feature=function(L){return new Ge(this.features[L],this.options.extent)},Ge.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var k=0;k<L.length;k++){for(var N=L[k],K=[],Q=0;Q<N.length;Q++)K.push(new a.Point$1(N[Q][0],N[Q][1]));this.geometry.push(K)}return this.geometry},Ge.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,k=1/0,N=-1/0,K=1/0,Q=-1/0,le=0;le<L.length;le++)for(var fe=L[le],q=0;q<fe.length;q++){var ee=fe[q];k=Math.min(k,ee.x),N=Math.max(N,ee.x),K=Math.min(K,ee.y),Q=Math.max(Q,ee.y)}return[k,K,N,Q]},Ge.prototype.toGeoJSON=Ke.prototype.toGeoJSON;var He=Pe,ht=xt;function Pe(L){var k=new a.pbf;return function(N,K){for(var Q in N.layers)K.writeMessage(3,je,N.layers[Q])}(L,k),k.finish()}function je(L,k){var N;k.writeVarintField(15,L.version||1),k.writeStringField(1,L.name||""),k.writeVarintField(5,L.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<L.length;N++)K.feature=L.feature(N),k.writeMessage(2,lt,K);var Q=K.keys;for(N=0;N<Q.length;N++)k.writeStringField(3,Q[N]);var le=K.values;for(N=0;N<le.length;N++)k.writeMessage(4,Lt,le[N])}function lt(L,k){var N=L.feature;N.id!==void 0&&k.writeVarintField(1,N.id),k.writeMessage(2,De,L),k.writeVarintField(3,N.type),k.writeMessage(4,Dt,N)}function De(L,k){var N=L.feature,K=L.keys,Q=L.values,le=L.keycache,fe=L.valuecache;for(var q in N.properties){var ee=le[q];ee===void 0&&(K.push(q),le[q]=ee=K.length-1),k.writeVarint(ee);var me=N.properties[q],Ce=typeof me;Ce!=="string"&&Ce!=="boolean"&&Ce!=="number"&&(me=JSON.stringify(me));var Fe=Ce+":"+me,we=fe[Fe];we===void 0&&(Q.push(me),fe[Fe]=we=Q.length-1),k.writeVarint(we)}}function wt(L,k){return(k<<3)+(7&L)}function ot(L){return L<<1^L>>31}function Dt(L,k){for(var N=L.loadGeometry(),K=L.type,Q=0,le=0,fe=N.length,q=0;q<fe;q++){var ee=N[q],me=1;K===1&&(me=ee.length),k.writeVarint(wt(1,me));for(var Ce=K===3?ee.length-1:ee.length,Fe=0;Fe<Ce;Fe++){Fe===1&&K!==1&&k.writeVarint(wt(2,Ce-1));var we=ee[Fe].x-Q,Le=ee[Fe].y-le;k.writeVarint(ot(we)),k.writeVarint(ot(Le)),Q+=we,le+=Le}K===3&&k.writeVarint(wt(7,1))}}function Lt(L,k){var N=typeof L;N==="string"?k.writeStringField(1,L):N==="boolean"?k.writeBooleanField(7,L):N==="number"&&(L%1!=0?k.writeDoubleField(3,L):L<0?k.writeSVarintField(6,L):k.writeVarintField(5,L))}function yi(L,k,N,K){qe(L,N,K),qe(k,2*N,2*K),qe(k,2*N+1,2*K+1)}function qe(L,k,N){var K=L[k];L[k]=L[N],L[N]=K}function Xt(L,k,N,K){var Q=L-N,le=k-K;return Q*Q+le*le}He.fromVectorTileJs=Pe,He.fromGeojsonVt=function(L,k){k=k||{};var N={};for(var K in L)N[K]=new xt(L[K].features,k),N[K].name=K,N[K].version=k.version,N[K].extent=k.extent;return Pe({layers:N})},He.GeoJSONWrapper=ht;var zi=function(L){return L[0]},$r=function(L){return L[1]},nr=function(L,k,N,K,Q){k===void 0&&(k=zi),N===void 0&&(N=$r),K===void 0&&(K=64),Q===void 0&&(Q=Float64Array),this.nodeSize=K,this.points=L;for(var le=L.length<65536?Uint16Array:Uint32Array,fe=this.ids=new le(L.length),q=this.coords=new Q(2*L.length),ee=0;ee<L.length;ee++)fe[ee]=ee,q[2*ee]=k(L[ee]),q[2*ee+1]=N(L[ee]);(function me(Ce,Fe,we,Le,st,it){if(!(st-Le<=we)){var ke=Le+st>>1;(function $e(Ye,et,qt,nt,Yt,jt){for(;Yt>nt;){if(Yt-nt>600){var Ht=Yt-nt+1,oi=qt-nt+1,ei=Math.log(Ht),yr=.5*Math.exp(2*ei/3),fi=.5*Math.sqrt(ei*yr*(Ht-yr)/Ht)*(oi-Ht/2<0?-1:1);$e(Ye,et,qt,Math.max(nt,Math.floor(qt-oi*yr/Ht+fi)),Math.min(Yt,Math.floor(qt+(Ht-oi)*yr/Ht+fi)),jt)}var Li=et[2*qt+jt],_i=nt,Qt=Yt;for(yi(Ye,et,nt,qt),et[2*Yt+jt]>Li&&yi(Ye,et,nt,Yt);_i<Qt;){for(yi(Ye,et,_i,Qt),_i++,Qt--;et[2*_i+jt]<Li;)_i++;for(;et[2*Qt+jt]>Li;)Qt--}et[2*nt+jt]===Li?yi(Ye,et,nt,Qt):yi(Ye,et,++Qt,Yt),Qt<=qt&&(nt=Qt+1),qt<=Qt&&(Yt=Qt-1)}})(Ce,Fe,ke,Le,st,it%2),me(Ce,Fe,we,Le,ke-1,it+1),me(Ce,Fe,we,ke+1,st,it+1)}})(fe,q,K,0,fe.length-1,0)};nr.prototype.range=function(L,k,N,K){return function(Q,le,fe,q,ee,me,Ce){for(var Fe,we,Le=[0,Q.length-1,0],st=[];Le.length;){var it=Le.pop(),ke=Le.pop(),$e=Le.pop();if(ke-$e<=Ce)for(var Ye=$e;Ye<=ke;Ye++)we=le[2*Ye+1],(Fe=le[2*Ye])>=fe&&Fe<=ee&&we>=q&&we<=me&&st.push(Q[Ye]);else{var et=Math.floor(($e+ke)/2);we=le[2*et+1],(Fe=le[2*et])>=fe&&Fe<=ee&&we>=q&&we<=me&&st.push(Q[et]);var qt=(it+1)%2;(it===0?fe<=Fe:q<=we)&&(Le.push($e),Le.push(et-1),Le.push(qt)),(it===0?ee>=Fe:me>=we)&&(Le.push(et+1),Le.push(ke),Le.push(qt))}}return st}(this.ids,this.coords,L,k,N,K,this.nodeSize)},nr.prototype.within=function(L,k,N){return function(K,Q,le,fe,q,ee){for(var me=[0,K.length-1,0],Ce=[],Fe=q*q;me.length;){var we=me.pop(),Le=me.pop(),st=me.pop();if(Le-st<=ee)for(var it=st;it<=Le;it++)Xt(Q[2*it],Q[2*it+1],le,fe)<=Fe&&Ce.push(K[it]);else{var ke=Math.floor((st+Le)/2),$e=Q[2*ke],Ye=Q[2*ke+1];Xt($e,Ye,le,fe)<=Fe&&Ce.push(K[ke]);var et=(we+1)%2;(we===0?le-q<=$e:fe-q<=Ye)&&(me.push(st),me.push(ke-1),me.push(et)),(we===0?le+q>=$e:fe+q>=Ye)&&(me.push(ke+1),me.push(Le),me.push(et))}}return Ce}(this.ids,this.coords,L,k,N,this.nodeSize)};var Mn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},Oi=function(L){this.options=dr(Object.create(Mn),L),this.trees=new Array(this.options.maxZoom+1)};function yn(L,k,N,K,Q){return{x:L,y:k,zoom:1/0,id:N,parentId:-1,numPoints:K,properties:Q}}function Gt(L,k){var N=L.geometry.coordinates,K=N[1];return{x:en(N[0]),y:Nt(K),zoom:1/0,index:k,parentId:-1}}function fr(L){return{type:"Feature",id:L.id,properties:cn(L),geometry:{type:"Point",coordinates:[(K=L.x,360*(K-.5)),(k=L.y,N=(180-360*k)*Math.PI/180,360*Math.atan(Math.exp(N))/Math.PI-90)]}};var k,N,K}function cn(L){var k=L.numPoints,N=k>=1e4?Math.round(k/1e3)+"k":k>=1e3?Math.round(k/100)/10+"k":k;return dr(dr({},L.properties),{cluster:!0,cluster_id:L.id,point_count:k,point_count_abbreviated:N})}function en(L){return L/360+.5}function Nt(L){var k=Math.sin(L*Math.PI/180),N=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return N<0?0:N>1?1:N}function dr(L,k){for(var N in k)L[N]=k[N];return L}function ar(L){return L.x}function or(L){return L.y}function tn(L,k,N,K,Q,le){var fe=Q-N,q=le-K;if(fe!==0||q!==0){var ee=((L-N)*fe+(k-K)*q)/(fe*fe+q*q);ee>1?(N=Q,K=le):ee>0&&(N+=fe*ee,K+=q*ee)}return(fe=L-N)*fe+(q=k-K)*q}function Cr(L,k,N,K){var Q={id:L===void 0?null:L,type:k,geometry:N,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(le){var fe=le.geometry,q=le.type;if(q==="Point"||q==="MultiPoint"||q==="LineString")Mr(le,fe);else if(q==="Polygon"||q==="MultiLineString")for(var ee=0;ee<fe.length;ee++)Mr(le,fe[ee]);else if(q==="MultiPolygon")for(ee=0;ee<fe.length;ee++)for(var me=0;me<fe[ee].length;me++)Mr(le,fe[ee][me])}(Q),Q}function Mr(L,k){for(var N=0;N<k.length;N+=3)L.minX=Math.min(L.minX,k[N]),L.minY=Math.min(L.minY,k[N+1]),L.maxX=Math.max(L.maxX,k[N]),L.maxY=Math.max(L.maxY,k[N+1])}function mr(L,k,N,K){if(k.geometry){var Q=k.geometry.coordinates,le=k.geometry.type,fe=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2),q=[],ee=k.id;if(N.promoteId?ee=k.properties[N.promoteId]:N.generateId&&(ee=K||0),le==="Point")Vr(Q,q);else if(le==="MultiPoint")for(var me=0;me<Q.length;me++)Vr(Q[me],q);else if(le==="LineString")Ti(Q,q,fe,!1);else if(le==="MultiLineString"){if(N.lineMetrics){for(me=0;me<Q.length;me++)Ti(Q[me],q=[],fe,!1),L.push(Cr(ee,"LineString",q,k.properties));return}Ni(Q,q,fe,!1)}else if(le==="Polygon")Ni(Q,q,fe,!0);else{if(le!=="MultiPolygon"){if(le==="GeometryCollection"){for(me=0;me<k.geometry.geometries.length;me++)mr(L,{id:ee,geometry:k.geometry.geometries[me],properties:k.properties},N,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(me=0;me<Q.length;me++){var Ce=[];Ni(Q[me],Ce,fe,!0),q.push(Ce)}}L.push(Cr(ee,le,q,k.properties))}}function Vr(L,k){k.push(sr(L[0])),k.push(lr(L[1])),k.push(0)}function Ti(L,k,N,K){for(var Q,le,fe=0,q=0;q<L.length;q++){var ee=sr(L[q][0]),me=lr(L[q][1]);k.push(ee),k.push(me),k.push(0),q>0&&(fe+=K?(Q*me-ee*le)/2:Math.sqrt(Math.pow(ee-Q,2)+Math.pow(me-le,2))),Q=ee,le=me}var Ce=k.length-3;k[2]=1,function Fe(we,Le,st,it){for(var ke,$e=it,Ye=st-Le>>1,et=st-Le,qt=we[Le],nt=we[Le+1],Yt=we[st],jt=we[st+1],Ht=Le+3;Ht<st;Ht+=3){var oi=tn(we[Ht],we[Ht+1],qt,nt,Yt,jt);if(oi>$e)ke=Ht,$e=oi;else if(oi===$e){var ei=Math.abs(Ht-Ye);ei<et&&(ke=Ht,et=ei)}}$e>it&&(ke-Le>3&&Fe(we,Le,ke,it),we[ke+2]=$e,st-ke>3&&Fe(we,ke,st,it))}(k,0,Ce,N),k[Ce+2]=1,k.size=Math.abs(fe),k.start=0,k.end=k.size}function Ni(L,k,N,K){for(var Q=0;Q<L.length;Q++){var le=[];Ti(L[Q],le,N,K),k.push(le)}}function sr(L){return L/360+.5}function lr(L){var k=Math.sin(L*Math.PI/180),N=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return N<0?0:N>1?1:N}function gr(L,k,N,K,Q,le,fe,q){if(K/=k,le>=(N/=k)&&fe<K)return L;if(fe<N||le>=K)return null;for(var ee=[],me=0;me<L.length;me++){var Ce=L[me],Fe=Ce.geometry,we=Ce.type,Le=Q===0?Ce.minX:Ce.minY,st=Q===0?Ce.maxX:Ce.maxY;if(Le>=N&&st<K)ee.push(Ce);else if(!(st<N||Le>=K)){var it=[];if(we==="Point"||we==="MultiPoint")Dr(Fe,it,N,K,Q);else if(we==="LineString")Yn(Fe,it,N,K,Q,!1,q.lineMetrics);else if(we==="MultiLineString")Dn(Fe,it,N,K,Q,!1);else if(we==="Polygon")Dn(Fe,it,N,K,Q,!0);else if(we==="MultiPolygon")for(var ke=0;ke<Fe.length;ke++){var $e=[];Dn(Fe[ke],$e,N,K,Q,!0),$e.length&&it.push($e)}if(it.length){if(q.lineMetrics&&we==="LineString"){for(ke=0;ke<it.length;ke++)ee.push(Cr(Ce.id,we,it[ke],Ce.tags));continue}we!=="LineString"&&we!=="MultiLineString"||(it.length===1?(we="LineString",it=it[0]):we="MultiLineString"),we!=="Point"&&we!=="MultiPoint"||(we=it.length===3?"Point":"MultiPoint"),ee.push(Cr(Ce.id,we,it,Ce.tags))}}}return ee.length?ee:null}function Dr(L,k,N,K,Q){for(var le=0;le<L.length;le+=3){var fe=L[le+Q];fe>=N&&fe<=K&&(k.push(L[le]),k.push(L[le+1]),k.push(L[le+2]))}}function Yn(L,k,N,K,Q,le,fe){for(var q,ee,me=qr(L),Ce=Q===0?Jn:Rr,Fe=L.start,we=0;we<L.length-3;we+=3){var Le=L[we],st=L[we+1],it=L[we+2],ke=L[we+3],$e=L[we+4],Ye=Q===0?Le:st,et=Q===0?ke:$e,qt=!1;fe&&(q=Math.sqrt(Math.pow(Le-ke,2)+Math.pow(st-$e,2))),Ye<N?et>N&&(ee=Ce(me,Le,st,ke,$e,N),fe&&(me.start=Fe+q*ee)):Ye>K?et<K&&(ee=Ce(me,Le,st,ke,$e,K),fe&&(me.start=Fe+q*ee)):Lr(me,Le,st,it),et<N&&Ye>=N&&(ee=Ce(me,Le,st,ke,$e,N),qt=!0),et>K&&Ye<=K&&(ee=Ce(me,Le,st,ke,$e,K),qt=!0),!le&&qt&&(fe&&(me.end=Fe+q*ee),k.push(me),me=qr(L)),fe&&(Fe+=q)}var nt=L.length-3;Le=L[nt],st=L[nt+1],it=L[nt+2],(Ye=Q===0?Le:st)>=N&&Ye<=K&&Lr(me,Le,st,it),nt=me.length-3,le&&nt>=3&&(me[nt]!==me[0]||me[nt+1]!==me[1])&&Lr(me,me[0],me[1],me[2]),me.length&&k.push(me)}function qr(L){var k=[];return k.size=L.size,k.start=L.start,k.end=L.end,k}function Dn(L,k,N,K,Q,le){for(var fe=0;fe<L.length;fe++)Yn(L[fe],k,N,K,Q,le,!1)}function Lr(L,k,N,K){L.push(k),L.push(N),L.push(K)}function Jn(L,k,N,K,Q,le){var fe=(le-k)/(K-k);return L.push(le),L.push(N+(Q-N)*fe),L.push(1),fe}function Rr(L,k,N,K,Q,le){var fe=(le-N)/(Q-N);return L.push(k+(K-k)*fe),L.push(le),L.push(1),fe}function Ln(L,k){for(var N=[],K=0;K<L.length;K++){var Q,le=L[K],fe=le.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")Q=xr(le.geometry,k);else if(fe==="MultiLineString"||fe==="Polygon"){Q=[];for(var q=0;q<le.geometry.length;q++)Q.push(xr(le.geometry[q],k))}else if(fe==="MultiPolygon")for(Q=[],q=0;q<le.geometry.length;q++){for(var ee=[],me=0;me<le.geometry[q].length;me++)ee.push(xr(le.geometry[q][me],k));Q.push(ee)}N.push(Cr(le.id,fe,Q,le.tags))}return N}function xr(L,k){var N=[];N.size=L.size,L.start!==void 0&&(N.start=L.start,N.end=L.end);for(var K=0;K<L.length;K+=3)N.push(L[K]+k,L[K+1],L[K+2]);return N}function jr(L,k){if(L.transformed)return L;var N,K,Q,le=1<<L.z,fe=L.x,q=L.y;for(N=0;N<L.features.length;N++){var ee=L.features[N],me=ee.geometry,Ce=ee.type;if(ee.geometry=[],Ce===1)for(K=0;K<me.length;K+=2)ee.geometry.push(Gi(me[K],me[K+1],k,le,fe,q));else for(K=0;K<me.length;K++){var Fe=[];for(Q=0;Q<me[K].length;Q+=2)Fe.push(Gi(me[K][Q],me[K][Q+1],k,le,fe,q));ee.geometry.push(Fe)}}return L.transformed=!0,L}function Gi(L,k,N,K,Q,le){return[Math.round(N*(L*K-Q)),Math.round(N*(k*K-le))]}function ra(L,k,N,K,Q){for(var le=k===Q.maxZoom?0:Q.tolerance/((1<<k)*Q.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:N,y:K,z:k,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},q=0;q<L.length;q++){fe.numFeatures++,Rn(fe,L[q],le,Q);var ee=L[q].minX,me=L[q].minY,Ce=L[q].maxX,Fe=L[q].maxY;ee<fe.minX&&(fe.minX=ee),me<fe.minY&&(fe.minY=me),Ce>fe.maxX&&(fe.maxX=Ce),Fe>fe.maxY&&(fe.maxY=Fe)}return fe}function Rn(L,k,N,K){var Q=k.geometry,le=k.type,fe=[];if(le==="Point"||le==="MultiPoint")for(var q=0;q<Q.length;q+=3)fe.push(Q[q]),fe.push(Q[q+1]),L.numPoints++,L.numSimplified++;else if(le==="LineString")Qi(fe,Q,L,N,!1,!1);else if(le==="MultiLineString"||le==="Polygon")for(q=0;q<Q.length;q++)Qi(fe,Q[q],L,N,le==="Polygon",q===0);else if(le==="MultiPolygon")for(var ee=0;ee<Q.length;ee++){var me=Q[ee];for(q=0;q<me.length;q++)Qi(fe,me[q],L,N,!0,q===0)}if(fe.length){var Ce=k.tags||null;if(le==="LineString"&&K.lineMetrics){for(var Fe in Ce={},k.tags)Ce[Fe]=k.tags[Fe];Ce.mapbox_clip_start=Q.start/Q.size,Ce.mapbox_clip_end=Q.end/Q.size}var we={geometry:fe,type:le==="Polygon"||le==="MultiPolygon"?3:le==="LineString"||le==="MultiLineString"?2:1,tags:Ce};k.id!==null&&(we.id=k.id),L.features.push(we)}}function Qi(L,k,N,K,Q,le){var fe=K*K;if(K>0&&k.size<(Q?fe:K))N.numPoints+=k.length/3;else{for(var q=[],ee=0;ee<k.length;ee+=3)(K===0||k[ee+2]>fe)&&(N.numSimplified++,q.push(k[ee]),q.push(k[ee+1])),N.numPoints++;Q&&function(me,Ce){for(var Fe=0,we=0,Le=me.length,st=Le-2;we<Le;st=we,we+=2)Fe+=(me[we]-me[st])*(me[we+1]+me[st+1]);if(Fe>0===Ce)for(we=0,Le=me.length;we<Le/2;we+=2){var it=me[we],ke=me[we+1];me[we]=me[Le-2-we],me[we+1]=me[Le-1-we],me[Le-2-we]=it,me[Le-1-we]=ke}}(q,le),L.push(q)}}function _n(L,k){var N=(k=this.options=function(Q,le){for(var fe in le)Q[fe]=le[fe];return Q}(Object.create(this.options),k)).debug;if(N&&console.time("preprocess data"),k.maxZoom<0||k.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(k.promoteId&&k.generateId)throw new Error("promoteId and generateId cannot be used together.");var K=function(Q,le){var fe=[];if(Q.type==="FeatureCollection")for(var q=0;q<Q.features.length;q++)mr(fe,Q.features[q],le,q);else mr(fe,Q.type==="Feature"?Q:{geometry:Q},le);return fe}(L,k);this.tiles={},this.tileCoords=[],N&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",k.indexMaxZoom,k.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(K=function(Q,le){var fe=le.buffer/le.extent,q=Q,ee=gr(Q,1,-1-fe,fe,0,-1,2,le),me=gr(Q,1,1-fe,2+fe,0,-1,2,le);return(ee||me)&&(q=gr(Q,1,-fe,1+fe,0,-1,2,le)||[],ee&&(q=Ln(ee,1).concat(q)),me&&(q=q.concat(Ln(me,-1)))),q}(K,k)).length&&this.splitTile(K,0,0,0),N&&(K.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pn(L,k,N){return 32*((1<<L)*N+k)+L}function Ui(L,k){var N=L.tileID.canonical;if(!this._geoJSONIndex)return k(null,null);var K=this._geoJSONIndex.getTile(N.z,N.x,N.y);if(!K)return k(null,null);var Q=new Ae(K.features),le=He(Q);le.byteOffset===0&&le.byteLength===le.buffer.byteLength||(le=new Uint8Array(le)),k(null,{vectorTile:Q,rawData:le.buffer})}Oi.prototype.load=function(L){var k=this.options,N=k.log,K=k.minZoom,Q=k.maxZoom,le=k.nodeSize;N&&console.time("total time");var fe="prepare "+L.length+" points";N&&console.time(fe),this.points=L;for(var q=[],ee=0;ee<L.length;ee++)L[ee].geometry&&q.push(Gt(L[ee],ee));this.trees[Q+1]=new nr(q,ar,or,le,Float32Array),N&&console.timeEnd(fe);for(var me=Q;me>=K;me--){var Ce=+Date.now();q=this._cluster(q,me),this.trees[me]=new nr(q,ar,or,le,Float32Array),N&&console.log("z%d: %d clusters in %dms",me,q.length,+Date.now()-Ce)}return N&&console.timeEnd("total time"),this},Oi.prototype.getClusters=function(L,k){var N=((L[0]+180)%360+360)%360-180,K=Math.max(-90,Math.min(90,L[1])),Q=L[2]===180?180:((L[2]+180)%360+360)%360-180,le=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)N=-180,Q=180;else if(N>Q){var fe=this.getClusters([N,K,180,le],k),q=this.getClusters([-180,K,Q,le],k);return fe.concat(q)}for(var ee=this.trees[this._limitZoom(k)],me=[],Ce=0,Fe=ee.range(en(N),Nt(le),en(Q),Nt(K));Ce<Fe.length;Ce+=1){var we=ee.points[Fe[Ce]];me.push(we.numPoints?fr(we):this.points[we.index])}return me},Oi.prototype.getChildren=function(L){var k=this._getOriginId(L),N=this._getOriginZoom(L),K="No cluster with the specified id.",Q=this.trees[N];if(!Q)throw new Error(K);var le=Q.points[k];if(!le)throw new Error(K);for(var fe=this.options.radius/(this.options.extent*Math.pow(2,N-1)),q=[],ee=0,me=Q.within(le.x,le.y,fe);ee<me.length;ee+=1){var Ce=Q.points[me[ee]];Ce.parentId===L&&q.push(Ce.numPoints?fr(Ce):this.points[Ce.index])}if(q.length===0)throw new Error(K);return q},Oi.prototype.getLeaves=function(L,k,N){var K=[];return this._appendLeaves(K,L,k=k||10,N=N||0,0),K},Oi.prototype.getTile=function(L,k,N){var K=this.trees[this._limitZoom(L)],Q=Math.pow(2,L),le=this.options,fe=le.radius/le.extent,q=(N-fe)/Q,ee=(N+1+fe)/Q,me={features:[]};return this._addTileFeatures(K.range((k-fe)/Q,q,(k+1+fe)/Q,ee),K.points,k,N,Q,me),k===0&&this._addTileFeatures(K.range(1-fe/Q,q,1,ee),K.points,Q,N,Q,me),k===Q-1&&this._addTileFeatures(K.range(0,q,fe/Q,ee),K.points,-1,N,Q,me),me.features.length?me:null},Oi.prototype.getClusterExpansionZoom=function(L){for(var k=this._getOriginZoom(L)-1;k<=this.options.maxZoom;){var N=this.getChildren(L);if(k++,N.length!==1)break;L=N[0].properties.cluster_id}return k},Oi.prototype._appendLeaves=function(L,k,N,K,Q){for(var le=0,fe=this.getChildren(k);le<fe.length;le+=1){var q=fe[le],ee=q.properties;if(ee&&ee.cluster?Q+ee.point_count<=K?Q+=ee.point_count:Q=this._appendLeaves(L,ee.cluster_id,N,K,Q):Q<K?Q++:L.push(q),L.length===N)break}return Q},Oi.prototype._addTileFeatures=function(L,k,N,K,Q,le){for(var fe=0,q=L;fe<q.length;fe+=1){var ee=k[q[fe]],me=ee.numPoints,Ce={type:1,geometry:[[Math.round(this.options.extent*(ee.x*Q-N)),Math.round(this.options.extent*(ee.y*Q-K))]],tags:me?cn(ee):this.points[ee.index].properties},Fe=void 0;me?Fe=ee.id:this.options.generateId?Fe=ee.index:this.points[ee.index].id&&(Fe=this.points[ee.index].id),Fe!==void 0&&(Ce.id=Fe),le.features.push(Ce)}},Oi.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},Oi.prototype._cluster=function(L,k){for(var N=[],K=this.options,Q=K.reduce,le=K.minPoints,fe=K.radius/(K.extent*Math.pow(2,k)),q=0;q<L.length;q++){var ee=L[q];if(!(ee.zoom<=k)){ee.zoom=k;for(var me=this.trees[k+1],Ce=me.within(ee.x,ee.y,fe),Fe=ee.numPoints||1,we=Fe,Le=0,st=Ce;Le<st.length;Le+=1){var it=me.points[st[Le]];it.zoom>k&&(we+=it.numPoints||1)}if(we>=le){for(var ke=ee.x*Fe,$e=ee.y*Fe,Ye=Q&&Fe>1?this._map(ee,!0):null,et=(q<<5)+(k+1)+this.points.length,qt=0,nt=Ce;qt<nt.length;qt+=1){var Yt=me.points[nt[qt]];if(!(Yt.zoom<=k)){Yt.zoom=k;var jt=Yt.numPoints||1;ke+=Yt.x*jt,$e+=Yt.y*jt,Yt.parentId=et,Q&&(Ye||(Ye=this._map(ee,!0)),Q(Ye,this._map(Yt)))}}ee.parentId=et,N.push(yn(ke/we,$e/we,et,we,Ye))}else if(N.push(ee),we>1)for(var Ht=0,oi=Ce;Ht<oi.length;Ht+=1){var ei=me.points[oi[Ht]];ei.zoom<=k||(ei.zoom=k,N.push(ei))}}}return N},Oi.prototype._getOriginId=function(L){return L-this.points.length>>5},Oi.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},Oi.prototype._map=function(L,k){if(L.numPoints)return k?dr({},L.properties):L.properties;var N=this.points[L.index].properties,K=this.options.map(N);return k&&K===N?dr({},K):K},_n.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_n.prototype.splitTile=function(L,k,N,K,Q,le,fe){for(var q=[L,k,N,K],ee=this.options,me=ee.debug;q.length;){K=q.pop(),N=q.pop(),k=q.pop(),L=q.pop();var Ce=1<<k,Fe=pn(k,N,K),we=this.tiles[Fe];if(!we&&(me>1&&console.time("creation"),we=this.tiles[Fe]=ra(L,k,N,K,ee),this.tileCoords.push({z:k,x:N,y:K}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",k,N,K,we.numFeatures,we.numPoints,we.numSimplified),console.timeEnd("creation"));var Le="z"+k;this.stats[Le]=(this.stats[Le]||0)+1,this.total++}if(we.source=L,Q){if(k===ee.maxZoom||k===Q)continue;var st=1<<Q-k;if(N!==Math.floor(le/st)||K!==Math.floor(fe/st))continue}else if(k===ee.indexMaxZoom||we.numPoints<=ee.indexMaxPoints)continue;if(we.source=null,L.length!==0){me>1&&console.time("clipping");var it,ke,$e,Ye,et,qt,nt=.5*ee.buffer/ee.extent,Yt=.5-nt,jt=.5+nt,Ht=1+nt;it=ke=$e=Ye=null,et=gr(L,Ce,N-nt,N+jt,0,we.minX,we.maxX,ee),qt=gr(L,Ce,N+Yt,N+Ht,0,we.minX,we.maxX,ee),L=null,et&&(it=gr(et,Ce,K-nt,K+jt,1,we.minY,we.maxY,ee),ke=gr(et,Ce,K+Yt,K+Ht,1,we.minY,we.maxY,ee),et=null),qt&&($e=gr(qt,Ce,K-nt,K+jt,1,we.minY,we.maxY,ee),Ye=gr(qt,Ce,K+Yt,K+Ht,1,we.minY,we.maxY,ee),qt=null),me>1&&console.timeEnd("clipping"),q.push(it||[],k+1,2*N,2*K),q.push(ke||[],k+1,2*N,2*K+1),q.push($e||[],k+1,2*N+1,2*K),q.push(Ye||[],k+1,2*N+1,2*K+1)}}},_n.prototype.getTile=function(L,k,N){var K=this.options,Q=K.extent,le=K.debug;if(L<0||L>24)return null;var fe=1<<L,q=pn(L,k=(k%fe+fe)%fe,N);if(this.tiles[q])return jr(this.tiles[q],Q);le>1&&console.log("drilling down to z%d-%d-%d",L,k,N);for(var ee,me=L,Ce=k,Fe=N;!ee&&me>0;)me--,Ce=Math.floor(Ce/2),Fe=Math.floor(Fe/2),ee=this.tiles[pn(me,Ce,Fe)];return ee&&ee.source?(le>1&&console.log("found parent tile z%d-%d-%d",me,Ce,Fe),le>1&&console.time("drilling down"),this.splitTile(ee.source,me,Ce,Fe,L,k,N),le>1&&console.timeEnd("drilling down"),this.tiles[q]?jr(this.tiles[q],Q):null):null};var Tn=function(L){function k(N,K,Q,le){L.call(this,N,K,Q,Ui),le&&(this.loadGeoJSON=le)}return L&&(k.__proto__=L),(k.prototype=Object.create(L&&L.prototype)).constructor=k,k.prototype.loadData=function(N,K){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=K,this._pendingLoadDataParams=N,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},k.prototype._loadData=function(){var N=this;if(this._pendingCallback&&this._pendingLoadDataParams){var K=this._pendingCallback,Q=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var le=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new a.RequestPerformance(Q.request);this.loadGeoJSON(Q,function(fe,q){if(fe||!q)return K(fe);if(typeof q!="object")return K(new Error("Input data given to '"+Q.source+"' is not a valid GeoJSON object."));(function we(Le,st){var it,ke=Le&&Le.type;if(ke==="FeatureCollection")for(it=0;it<Le.features.length;it++)we(Le.features[it],st);else if(ke==="GeometryCollection")for(it=0;it<Le.geometries.length;it++)we(Le.geometries[it],st);else if(ke==="Feature")we(Le.geometry,st);else if(ke==="Polygon")pe(Le.coordinates,st);else if(ke==="MultiPolygon")for(it=0;it<Le.coordinates.length;it++)pe(Le.coordinates[it],st);return Le})(q,!0);try{if(Q.filter){var ee=a.createExpression(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ee.result==="error")throw new Error(ee.value.map(function(we){return we.key+": "+we.message}).join(", "));var me=q.features.filter(function(we){return ee.value.evaluate({zoom:0},we)});q={type:"FeatureCollection",features:me}}N._geoJSONIndex=Q.cluster?new Oi(function(we){var Le=we.superclusterOptions,st=we.clusterProperties;if(!st||!Le)return Le;for(var it={},ke={},$e={accumulated:null,zoom:0},Ye={properties:null},et=Object.keys(st),qt=0,nt=et;qt<nt.length;qt+=1){var Yt=nt[qt],jt=st[Yt],Ht=jt[0],oi=a.createExpression(jt[1]),ei=a.createExpression(typeof Ht=="string"?[Ht,["accumulated"],["get",Yt]]:Ht);it[Yt]=oi.value,ke[Yt]=ei.value}return Le.map=function(yr){Ye.properties=yr;for(var fi={},Li=0,_i=et;Li<_i.length;Li+=1){var Qt=_i[Li];fi[Qt]=it[Qt].evaluate($e,Ye)}return fi},Le.reduce=function(yr,fi){Ye.properties=fi;for(var Li=0,_i=et;Li<_i.length;Li+=1){var Qt=_i[Li];$e.accumulated=yr[Qt],yr[Qt]=ke[Qt].evaluate($e,Ye)}},Le}(Q)).load(q.features):function(we,Le){return new _n(we,Le)}(q,Q.geojsonVtOptions)}catch(we){return K(we)}N.loaded={};var Ce={};if(le){var Fe=le.finish();Fe&&(Ce.resourceTiming={},Ce.resourceTiming[Q.source]=JSON.parse(JSON.stringify(Fe)))}K(null,Ce)})}},k.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},k.prototype.reloadTile=function(N,K){var Q=this.loaded;return Q&&Q[N.uid]?L.prototype.reloadTile.call(this,N,K):this.loadTile(N,K)},k.prototype.loadGeoJSON=function(N,K){if(N.request)a.getJSON(N.request,K);else{if(typeof N.data!="string")return K(new Error("Input data given to '"+N.source+"' is not a valid GeoJSON object."));try{return K(null,JSON.parse(N.data))}catch{return K(new Error("Input data given to '"+N.source+"' is not a valid GeoJSON object."))}}},k.prototype.removeSource=function(N,K){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),K()},k.prototype.getClusterExpansionZoom=function(N,K){try{K(null,this._geoJSONIndex.getClusterExpansionZoom(N.clusterId))}catch(Q){K(Q)}},k.prototype.getClusterChildren=function(N,K){try{K(null,this._geoJSONIndex.getChildren(N.clusterId))}catch(Q){K(Q)}},k.prototype.getClusterLeaves=function(N,K){try{K(null,this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset))}catch(Q){K(Q)}},k}(X),Si=function(L){var k=this;this.self=L,this.actor=new a.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:X,geojson:Tn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(N,K){if(k.workerSourceTypes[N])throw new Error('Worker source with name "'+N+'" already registered.');k.workerSourceTypes[N]=K},this.self.registerRTLTextPlugin=function(N){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=N.applyArabicShaping,a.plugin.processBidirectionalText=N.processBidirectionalText,a.plugin.processStyledBidirectionalText=N.processStyledBidirectionalText}};return Si.prototype.setReferrer=function(L,k){this.referrer=k},Si.prototype.setImages=function(L,k,N){for(var K in this.availableImages[L]=k,this.workerSources[L]){var Q=this.workerSources[L][K];for(var le in Q)Q[le].availableImages=k}N()},Si.prototype.setLayers=function(L,k,N){this.getLayerIndex(L).replace(k),N()},Si.prototype.updateLayers=function(L,k,N){this.getLayerIndex(L).update(k.layers,k.removedIds),N()},Si.prototype.loadTile=function(L,k,N){this.getWorkerSource(L,k.type,k.source).loadTile(k,N)},Si.prototype.loadDEMTile=function(L,k,N){this.getDEMWorkerSource(L,k.source).loadTile(k,N)},Si.prototype.reloadTile=function(L,k,N){this.getWorkerSource(L,k.type,k.source).reloadTile(k,N)},Si.prototype.abortTile=function(L,k,N){this.getWorkerSource(L,k.type,k.source).abortTile(k,N)},Si.prototype.removeTile=function(L,k,N){this.getWorkerSource(L,k.type,k.source).removeTile(k,N)},Si.prototype.removeDEMTile=function(L,k){this.getDEMWorkerSource(L,k.source).removeTile(k)},Si.prototype.removeSource=function(L,k,N){if(this.workerSources[L]&&this.workerSources[L][k.type]&&this.workerSources[L][k.type][k.source]){var K=this.workerSources[L][k.type][k.source];delete this.workerSources[L][k.type][k.source],K.removeSource!==void 0?K.removeSource(k,N):N()}},Si.prototype.loadWorkerSource=function(L,k,N){try{this.self.importScripts(k.url),N()}catch(K){N(K.toString())}},Si.prototype.syncRTLPluginState=function(L,k,N){try{a.plugin.setState(k);var K=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&K!=null){this.self.importScripts(K);var Q=a.plugin.isParsed();N(Q?void 0:new Error("RTL Text Plugin failed to import scripts from "+K),Q)}}catch(le){N(le.toString())}},Si.prototype.getAvailableImages=function(L){var k=this.availableImages[L];return k||(k=[]),k},Si.prototype.getLayerIndex=function(L){var k=this.layerIndexes[L];return k||(k=this.layerIndexes[L]=new B),k},Si.prototype.getWorkerSource=function(L,k,N){var K=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][k]||(this.workerSources[L][k]={}),this.workerSources[L][k][N]||(this.workerSources[L][k][N]=new this.workerSourceTypes[k]({send:function(Q,le,fe){K.actor.send(Q,le,fe,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][k][N]},Si.prototype.getDEMWorkerSource=function(L,k){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][k]||(this.demWorkerSources[L][k]=new se),this.demWorkerSources[L][k]},Si.prototype.enforceCacheSizeLimit=function(L,k){a.enforceCacheSizeLimit(k)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Si(self)),Si}),v(["./shared"],function(a){var z=a.createCommonjsModule(function(n){function s(y){return!o(y)}function o(y){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,I,C=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(C);try{I=new Worker(O),S=!0}catch{S=!1}return I&&I.terminate(),URL.revokeObjectURL(O),S}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var S=document.createElement("canvas");S.width=S.height=1;var I=S.getContext("2d");if(!I)return!1;var C=I.getImageData(0,0,1,1);return C&&C.width===S.width}()?(c[w=y&&y.failIfMajorPerformanceCaveat]===void 0&&(c[w]=function(S){var I=function(O){var G=document.createElement("canvas"),Z=Object.create(s.webGLContextAttributes);return Z.failIfMajorPerformanceCaveat=O,G.probablySupportsContext?G.probablySupportsContext("webgl",Z)||G.probablySupportsContext("experimental-webgl",Z):G.supportsContext?G.supportsContext("webgl",Z)||G.supportsContext("experimental-webgl",Z):G.getContext("webgl",Z)||G.getContext("experimental-webgl",Z)}(S);if(!I)return!1;var C=I.createShader(I.VERTEX_SHADER);return!(!C||I.isContextLost())&&(I.shaderSource(C,"void main() {}"),I.compileShader(C),I.getShaderParameter(C,I.COMPILE_STATUS)===!0)}(w)),c[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),T={create:function(n,s,o){var c=a.window.document.createElement(n);return s!==void 0&&(c.className=s),o&&o.appendChild(c),c},createNS:function(n,s){return a.window.document.createElementNS(n,s)}},B=a.window.document&&a.window.document.documentElement.style;function M(n){if(!B)return n[0];for(var s=0;s<n.length;s++)if(n[s]in B)return n[s];return n[0]}var U,R=M(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);T.disableDrag=function(){B&&R&&(U=B[R],B[R]="none")},T.enableDrag=function(){B&&R&&(B[R]=U)};var W=M(["transform","WebkitTransform"]);T.setTransform=function(n,s){n.style[W]=s};var X=!1;try{var ae=Object.defineProperty({},"passive",{get:function(){X=!0}});a.window.addEventListener("test",ae,ae),a.window.removeEventListener("test",ae,ae)}catch{X=!1}T.addEventListener=function(n,s,o,c){c===void 0&&(c={}),n.addEventListener(s,o,"passive"in c&&X?c:c.capture)},T.removeEventListener=function(n,s,o,c){c===void 0&&(c={}),n.removeEventListener(s,o,"passive"in c&&X?c:c.capture)};var se=function(n){n.preventDefault(),n.stopPropagation(),a.window.removeEventListener("click",se,!0)};function pe(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}T.suppressClick=function(){a.window.addEventListener("click",se,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",se,!0)},0)},T.mousePos=function(n,s){var o=n.getBoundingClientRect();return new a.Point(s.clientX-o.left-n.clientLeft,s.clientY-o.top-n.clientTop)},T.touchPos=function(n,s){for(var o=n.getBoundingClientRect(),c=[],y=0;y<s.length;y++)c.push(new a.Point(s[y].clientX-o.left-n.clientLeft,s[y].clientY-o.top-n.clientTop));return c},T.mouseButton=function(n){return a.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},T.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var ge=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var c=0,y=this.requestors;c<y.length;c+=1){var w=y[c];this._notify(w.ids,w.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,c){this._validate(o,c)&&(this.images[o]=c)},s.prototype._validate=function(o,c){var y=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),y=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),y=!1),this._validateContent(c.content,c)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),y=!1),y},s.prototype._validateStretch=function(o,c){if(!o)return!0;for(var y=0,w=0,S=o;w<S.length;w+=1){var I=S[w];if(I[0]<y||I[1]<I[0]||c<I[1])return!1;y=I[1]}return!0},s.prototype._validateContent=function(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,c){c.version=this.images[o].version+1,this.images[o]=c,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,c){var y=!0;if(!this.isLoaded())for(var w=0,S=o;w<S.length;w+=1)this.images[S[w]]||(y=!1);this.isLoaded()||y?this._notify(o,c):this.requestors.push({ids:o,callback:c})},s.prototype._notify=function(o,c){for(var y={},w=0,S=o;w<S.length;w+=1){var I=S[w];this.images[I]||this.fire(new a.Event("styleimagemissing",{id:I}));var C=this.images[I];C?y[I]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:a.warnOnce('Image "'+I+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,y)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var c=this.patterns[o],y=this.getImage(o);if(!y)return null;if(c&&c.position.version===y.version)return c.position;if(c)c.position.version=y.version;else{var w={w:y.data.width+2,h:y.data.height+2,x:0,y:0},S=new a.ImagePosition(w,y);this.patterns[o]={bin:w,position:S}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var c in this.patterns)o.push(this.patterns[c].bin);var y=a.potpack(o),w=y.w,S=y.h,I=this.atlasImage;for(var C in I.resize({width:w||1,height:S||1}),this.patterns){var O=this.patterns[C].bin,G=O.x+1,Z=O.y+1,H=this.images[C].data,re=H.width,ie=H.height;a.RGBAImage.copy(H,I,{x:0,y:0},{x:G,y:Z},{width:re,height:ie}),a.RGBAImage.copy(H,I,{x:0,y:ie-1},{x:G,y:Z-1},{width:re,height:1}),a.RGBAImage.copy(H,I,{x:0,y:0},{x:G,y:Z+ie},{width:re,height:1}),a.RGBAImage.copy(H,I,{x:re-1,y:0},{x:G-1,y:Z},{width:1,height:ie}),a.RGBAImage.copy(H,I,{x:0,y:0},{x:G+re,y:Z},{width:1,height:ie})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var c=0,y=o;c<y.length;c+=1){var w=y[c];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var S=this.images[w];pe(S)&&this.updateImage(w,S)}}},s}(a.Evented),rt=Ke,Ue=Ke,Ae=1e20;function Ke(n,s,o,c,y,w){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=y||"sans-serif",this.fontWeight=w||"normal",this.radius=o||8;var S=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=S,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.d=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Int16Array(S),this.middle=Math.round(S/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function xt(n,s,o,c,y,w,S){for(var I=0;I<s;I++){for(var C=0;C<o;C++)c[C]=n[C*s+I];for(Pt(c,y,w,S,o),C=0;C<o;C++)n[C*s+I]=y[C]}for(C=0;C<o;C++){for(I=0;I<s;I++)c[I]=n[C*s+I];for(Pt(c,y,w,S,s),I=0;I<s;I++)n[C*s+I]=Math.sqrt(y[I])}}function Pt(n,s,o,c,y){o[0]=0,c[0]=-Ae,c[1]=+Ae;for(var w=1,S=0;w<y;w++){for(var I=(n[w]+w*w-(n[o[S]]+o[S]*o[S]))/(2*w-2*o[S]);I<=c[S];)S--,I=(n[w]+w*w-(n[o[S]]+o[S]*o[S]))/(2*w-2*o[S]);o[++S]=w,c[S]=I,c[S+1]=+Ae}for(w=0,S=0;w<y;w++){for(;c[S+1]<w;)S++;s[w]=(w-o[S])*(w-o[S])+n[o[S]]}}Ke.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var y=s.data[4*c+3]/255;this.gridOuter[c]=y===1?0:y===0?Ae:Math.pow(Math.max(0,.5-y),2),this.gridInner[c]=y===1?Ae:y===0?0:Math.pow(Math.max(0,y-.5),2)}for(xt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),xt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)o[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return o},rt.default=Ue;var Ge=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};Ge.prototype.setURL=function(n){this.url=n},Ge.prototype.getGlyphs=function(n,s){var o=this,c=[];for(var y in n)for(var w=0,S=n[y];w<S.length;w+=1)c.push({stack:y,id:S[w]});a.asyncAll(c,function(I,C){var O=I.stack,G=I.id,Z=o.entries[O];Z||(Z=o.entries[O]={glyphs:{},requests:{},ranges:{}});var H=Z.glyphs[G];if(H===void 0){if(H=o._tinySDF(Z,O,G))return Z.glyphs[G]=H,void C(null,{stack:O,id:G,glyph:H});var re=Math.floor(G/256);if(256*re>65535)C(new Error("glyphs > 65535 not supported"));else if(Z.ranges[re])C(null,{stack:O,id:G,glyph:H});else{var ie=Z.requests[re];ie||(ie=Z.requests[re]=[],Ge.loadGlyphRange(O,re,o.url,o.requestManager,function(ce,J){if(J){for(var ue in J)o._doesCharSupportLocalGlyph(+ue)||(Z.glyphs[+ue]=J[+ue]);Z.ranges[re]=!0}for(var de=0,ve=ie;de<ve.length;de+=1)(0,ve[de])(ce,J);delete Z.requests[re]})),ie.push(function(ce,J){ce?C(ce):J&&C(null,{stack:O,id:G,glyph:J[G]||null})})}}else C(null,{stack:O,id:G,glyph:H})},function(I,C){if(I)s(I);else if(C){for(var O={},G=0,Z=C;G<Z.length;G+=1){var H=Z[G],re=H.stack,ie=H.id,ce=H.glyph;(O[re]||(O[re]={}))[ie]=ce&&{id:ce.id,bitmap:ce.bitmap.clone(),metrics:ce.metrics}}s(null,O)}})},Ge.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](n)||a.isChar["Hangul Syllables"](n)||a.isChar.Hiragana(n)||a.isChar.Katakana(n))},Ge.prototype._tinySDF=function(n,s,o){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(o)){var y=n.tinySDF;if(!y){var w="400";/bold/i.test(s)?w="900":/medium/i.test(s)?w="500":/light/i.test(s)&&(w="200"),y=n.tinySDF=new Ge.TinySDF(24,3,8,.25,c,w)}return{id:o,bitmap:new a.AlphaImage({width:30,height:30},y.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ge.loadGlyphRange=function(n,s,o,c,y){var w=256*s,S=w+255,I=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",w+"-"+S),a.ResourceType.Glyphs);a.getArrayBuffer(I,function(C,O){if(C)y(C);else if(O){for(var G={},Z=0,H=a.parseGlyphPBF(O);Z<H.length;Z+=1){var re=H[Z];G[re.id]=re}y(null,G)}})},Ge.TinySDF=rt;var He=function(){this.specification=a.styleSpec.light.position};He.prototype.possiblyEvaluate=function(n,s){return a.sphericalToCartesian(n.expression.evaluate(s))},He.prototype.interpolate=function(n,s,o){return{x:a.number(n.x,s.x,o),y:a.number(n.y,s.y,o),z:a.number(n.z,s.z,o)}};var ht=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new He,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Pe=function(n){function s(o){n.call(this),this._transitionable=new a.Transitionable(ht),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,c){if(c===void 0&&(c={}),!this._validate(a.validateLight,o,c))for(var y in o){var w=o[y];a.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),w):this._transitionable.setValue(y,w)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,c,y){return(!y||y.validate!==!1)&&a.emitValidationErrors(this,o.call(a.validateStyle,a.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},s}(a.Evented),je=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};je.prototype.getDash=function(n,s){var o=n.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(n,s)),this.dashEntry[o]},je.prototype.getDashRanges=function(n,s,o){var c=[],y=n.length%2==1?-n[n.length-1]*o:0,w=n[0]*o,S=!0;c.push({left:y,right:w,isDash:S,zeroLength:n[0]===0});for(var I=n[0],C=1;C<n.length;C++){var O=n[C];c.push({left:y=I*o,right:w=(I+=O)*o,isDash:S=!S,zeroLength:O===0})}return c},je.prototype.addRoundDash=function(n,s,o){for(var c=s/2,y=-o;y<=o;y++)for(var w=this.width*(this.nextRow+o+y),S=0,I=n[S],C=0;C<this.width;C++){C/I.right>1&&(I=n[++S]);var O=Math.abs(C-I.left),G=Math.abs(C-I.right),Z=Math.min(O,G),H=void 0,re=y/o*(c+1);if(I.isDash){var ie=c-Math.abs(re);H=Math.sqrt(Z*Z+ie*ie)}else H=c-Math.sqrt(Z*Z+re*re);this.data[w+C]=Math.max(0,Math.min(255,H+128))}},je.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var o=n[s],c=n[s+1];o.zeroLength?n.splice(s,1):c&&c.isDash===o.isDash&&(c.left=o.left,n.splice(s,1))}var y=n[0],w=n[n.length-1];y.isDash===w.isDash&&(y.left=w.left-this.width,w.right=y.right+this.width);for(var S=this.width*this.nextRow,I=0,C=n[I],O=0;O<this.width;O++){O/C.right>1&&(C=n[++I]);var G=Math.abs(O-C.left),Z=Math.abs(O-C.right),H=Math.min(G,Z);this.data[S+O]=Math.max(0,Math.min(255,(C.isDash?H:-H)+128))}},je.prototype.addDash=function(n,s){var o=s?7:0,c=2*o+1;if(this.nextRow+c>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var y=0,w=0;w<n.length;w++)y+=n[w];if(y!==0){var S=this.width/y,I=this.getDashRanges(n,this.width,S);s?this.addRoundDash(I,S,o):this.addRegularDash(I)}var C={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:y};return this.nextRow+=c,this.dirty=!0,C},je.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var lt=function n(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var c=this.workerPool.acquire(this.id),y=0;y<c.length;y++){var w=new n.Actor(c[y],o,this.id);w.name="Worker "+y,this.actors.push(w)}};function De(n,s,o){var c=function(y,w){if(y)return o(y);if(w){var S=a.pick(a.extend(w,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(S.vectorLayers=w.vector_layers,S.vectorLayerIds=S.vectorLayers.map(function(I){return I.id})),S.tiles=s.canonicalizeTileset(S,n.url),o(null,S)}};return n.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),a.ResourceType.Source),c):a.browser.frame(function(){return c(null,n)})}lt.prototype.broadcast=function(n,s,o){a.asyncAll(this.actors,function(c,y){c.send(n,s,y)},o=o||function(){})},lt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},lt.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},lt.Actor=a.Actor;var wt=function(n,s,o){this.bounds=a.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=o||24};wt.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},wt.prototype.contains=function(n){var s=Math.pow(2,n.z),o=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*s),y=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*s),w=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=o&&n.x<y&&n.y>=c&&n.y<w};var ot=function(n){function s(o,c,y,w){if(n.call(this),this.id=o,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(c,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=De(this._options,this.map._requestManager,function(c,y){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):y&&(a.extend(o,y),y.bounds&&(o.tileBounds=new wt(y.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(y.tiles,o.map._requestManager._customAccessToken),a.postMapLoadEvent(y.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var c=this;return this.setSourceProperty(function(){c._options.tiles=o}),this},s.prototype.setUrl=function(o){var c=this;return this.setSourceProperty(function(){c.url=o,c._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.loadTile=function(o,c){var y=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(y,a.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(I,C){return delete o.request,o.aborted?c(null):I&&I.status!==404?c(I):(C&&C.resourceTiming&&(o.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&o.setExpiryData(C),o.loadVectorData(C,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",w,S.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",w,S.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Dt=function(n){function s(o,c,y,w){n.call(this),this.id=o,this.dispatcher=y,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},c),a.extend(this,a.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=De(this._options,this.map._requestManager,function(c,y){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):y&&(a.extend(o,y),y.bounds&&(o.tileBounds=new wt(y.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(y.tiles),a.postMapLoadEvent(y.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,c){var y=this,w=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=a.getImage(this.map._requestManager.transformRequest(w,a.ResourceType.Tile),function(S,I){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(S)o.state="errored",c(S);else if(I){y.map._refreshExpiredTiles&&o.setExpiryData(I),delete I.cacheControl,delete I.expires;var C=y.map.painter.context,O=C.gl;o.texture=y.map.painter.getTileTexture(I.width),o.texture?o.texture.update(I,{useMipmap:!0}):(o.texture=new a.Texture(C,I,O.RGBA,{useMipmap:!0}),o.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),o.state="loaded",a.cacheEntryPossiblyAdded(y.dispatcher),c(null)}})},s.prototype.abortTile=function(o,c){o.request&&(o.request.cancel(),delete o.request),c()},s.prototype.unloadTile=function(o,c){o.texture&&this.map.painter.saveTileTexture(o.texture),c()},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Lt=function(n){function s(o,c,y,w){n.call(this,o,c,y,w),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,c){var y=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(S,I){S&&(o.state="errored",c(S)),I&&(o.dem=I,o.needsHillshadePrepare=!0,o.state="loaded",c(null))}o.request=a.getImage(this.map._requestManager.transformRequest(y,a.ResourceType.Tile),(function(S,I){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(S)o.state="errored",c(S);else if(I){this.map._refreshExpiredTiles&&o.setExpiryData(I),delete I.cacheControl,delete I.expires;var C=a.window.ImageBitmap&&I instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?I:a.browser.getImageData(I,1),O={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:C,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",O,w.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var c=o.canonical,y=Math.pow(2,c.z),w=(c.x-1+y)%y,S=c.x===0?o.wrap-1:o.wrap,I=(c.x+1+y)%y,C=c.x+1===y?o.wrap+1:o.wrap,O={};return O[new a.OverscaledTileID(o.overscaledZ,S,c.z,w,c.y).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,C,c.z,I,c.y).key]={backfilled:!1},c.y>0&&(O[new a.OverscaledTileID(o.overscaledZ,S,c.z,w,c.y-1).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,C,c.z,I,c.y-1).key]={backfilled:!1}),c.y+1<y&&(O[new a.OverscaledTileID(o.overscaledZ,S,c.z,w,c.y+1).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,C,c.z,I,c.y+1).key]={backfilled:!1}),O},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(Dt),yi=function(n){function s(o,c,y,w){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=y.getActor(),this.setEventedParent(w),this._data=c.data,this._options=a.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var S=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*S,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*S,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.EXTENT,radius:(c.clusterRadius||50)*S,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)o.fire(new a.ErrorEvent(c));else{var y={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(y.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new a.Event("data",y))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var c=this;return this._data=o,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(y){if(y)c.fire(new a.ErrorEvent(y));else{var w={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(w.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new a.Event("data",w))}}),this},s.prototype.getClusterExpansionZoom=function(o,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},c),this},s.prototype.getClusterChildren=function(o,c){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},c),this},s.prototype.getClusterLeaves=function(o,c,y,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:c,offset:y},w),this},s.prototype._updateWorkerData=function(o){var c=this;this._loaded=!1;var y=a.extend({},this.workerOptions),w=this._data;typeof w=="string"?(y.request=this.map._requestManager.transformRequest(a.browser.resolveURL(w),a.ResourceType.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(w),this.actor.send(this.type+".loadData",y,function(S,I){c._removed||I&&I.abandoned||(c._loaded=!0,I&&I.resourceTiming&&I.resourceTiming[c.id]&&(c._resourceTiming=I.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:y.source},null),o(S))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,c){var y=this,w=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(w,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(S,I){return delete o.request,o.unloadVectorData(),o.aborted?c(null):S?c(S):(o.loadVectorData(I,y.map.painter,w==="reloadTile"),c(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(a.Evented),qe=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Xt=function(n){function s(o,c,y,w){n.call(this),this.id=o,this.dispatcher=y,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(o,c){var y=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(w,S){y._loaded=!0,w?y.fire(new a.ErrorEvent(w)):S&&(y.image=S,o&&(y.coordinates=o),c&&c(),y._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var c=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var c=this;this.coordinates=o;var y=o.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(S){for(var I=1/0,C=1/0,O=-1/0,G=-1/0,Z=0,H=S;Z<H.length;Z+=1){var re=H[Z];I=Math.min(I,re.x),C=Math.min(C,re.y),O=Math.max(O,re.x),G=Math.max(G,re.y)}var ie=Math.max(O-I,G-C),ce=Math.max(0,Math.floor(-Math.log(ie)/Math.LN2)),J=Math.pow(2,ce);return new a.CanonicalTileID(ce,Math.floor((I+O)/2*J),Math.floor((C+G)/2*J))}(y),this.minzoom=this.maxzoom=this.tileID.z;var w=y.map(function(S){return c.tileID.getTilePoint(S)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,c=o.gl;for(var y in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.loadTile=function(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(a.Evented),zi=function(n){function s(o,c,y,w){n.call(this,o,c,y,w),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var c=this.options;this.urls=[];for(var y=0,w=c.urls;y<w.length;y+=1)this.urls.push(this.map._requestManager.transformRequest(w[y],a.ResourceType.Source).url);a.getVideo(this.urls,function(S,I){o._loaded=!0,S?o.fire(new a.ErrorEvent(S)):I&&(o.video=I,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,c=o.gl;for(var y in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(Xt),$r=function(n){function s(o,c,y,w){n.call(this,o,c,y,w),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(S){return!Array.isArray(S)||S.length!==2||S.some(function(I){return typeof I!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,y=c.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(c,this.canvas,y.RGBA,{premultiply:!0}),this.tiles){var S=this.tiles[w];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,c=[this.canvas.width,this.canvas.height];o<c.length;o+=1){var y=c[o];if(isNaN(y)||y<=0)return!0}return!1},s}(Xt),nr={vector:ot,raster:Dt,"raster-dem":Lt,geojson:yi,video:zi,image:Xt,canvas:$r};function Mn(n,s){var o=a.identity([]);return a.translate(o,o,[1,1,0]),a.scale(o,o,[.5*n.width,.5*n.height,1]),a.multiply(o,o,n.calculatePosMatrix(s.toUnwrapped()))}function Oi(n,s,o,c,y,w){var S=function(ce,J,ue){if(ce)for(var de=0,ve=ce;de<ve.length;de+=1){var Te=J[ve[de]];if(Te&&Te.source===ue&&Te.type==="fill-extrusion")return!0}else for(var Ee in J){var Ie=J[Ee];if(Ie.source===ue&&Ie.type==="fill-extrusion")return!0}return!1}(y&&y.layers,s,n.id),I=w.maxPitchScaleFactor(),C=n.tilesIn(c,I,S);C.sort(yn);for(var O=[],G=0,Z=C;G<Z.length;G+=1){var H=Z[G];O.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(s,o,n._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,y,w,I,Mn(n.transform,H.tileID))})}var re=function(ce){for(var J={},ue={},de=0,ve=ce;de<ve.length;de+=1){var Te=ve[de],Ee=Te.queryResults,Ie=Te.wrappedTileID,Ve=ue[Ie]=ue[Ie]||{};for(var Je in Ee)for(var Xe=Ee[Je],ft=Ve[Je]=Ve[Je]||{},Tt=J[Je]=J[Je]||[],Mt=0,Ct=Xe;Mt<Ct.length;Mt+=1){var mi=Ct[Mt];ft[mi.featureIndex]||(ft[mi.featureIndex]=!0,Tt.push(mi))}}return J}(O);for(var ie in re)re[ie].forEach(function(ce){var J=ce.feature,ue=n.getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=ue});return re}function yn(n,s){var o=n.tileID,c=s.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}var Gt=function(n,s){this.max=n,this.onRemove=s,this.reset()};Gt.prototype.reset=function(){for(var n in this.data)for(var s=0,o=this.data[n];s<o.length;s+=1){var c=o[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},Gt.prototype.add=function(n,s,o){var c=this,y=n.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);var w={value:s,timeout:void 0};if(o!==void 0&&(w.timeout=setTimeout(function(){c.remove(n,w)},o)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){var S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this},Gt.prototype.has=function(n){return n.wrapped().key in this.data},Gt.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},Gt.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},Gt.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},Gt.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},Gt.prototype.remove=function(n,s){if(!this.has(n))return this;var o=n.wrapped().key,c=s===void 0?0:this.data[o].indexOf(s),y=this.data[o][c];return this.data[o].splice(c,1),y.timeout&&clearTimeout(y.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(y.value),this.order.splice(this.order.indexOf(o),1),this},Gt.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},Gt.prototype.filter=function(n){var s=[];for(var o in this.data)for(var c=0,y=this.data[o];c<y.length;c+=1){var w=y[c];n(w.value)||s.push(w)}for(var S=0,I=s;S<I.length;S+=1){var C=I[S];this.remove(C.value.tileID,C)}};var fr=function(n,s,o){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=!!o,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};fr.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},fr.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},fr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var cn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},en=function(n,s,o,c){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var y=n.gl;this.buffer=y.createBuffer(),n.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};en.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},en.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},en.prototype.enableAttributes=function(n,s){for(var o=0;o<this.attributes.length;o++){var c=s.attributes[this.attributes[o].name];c!==void 0&&n.enableVertexAttribArray(c)}},en.prototype.setVertexAttribPointers=function(n,s,o){for(var c=0;c<this.attributes.length;c++){var y=this.attributes[c],w=s.attributes[y.name];w!==void 0&&n.vertexAttribPointer(w,y.components,n[cn[y.type]],!1,this.itemSize,y.offset+this.itemSize*(o||0))}},en.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Nt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Nt.prototype.get=function(){return this.current},Nt.prototype.set=function(n){},Nt.prototype.getDefault=function(){return this.default},Nt.prototype.setDefault=function(){this.set(this.default)};var dr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Nt),ar=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(Nt),or=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(Nt),tn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Nt),Cr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(Nt),Mr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(Nt),mr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(Nt),Vr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(Nt),Ti=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(Nt),Ni=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Nt),sr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(Nt),lr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(Nt),gr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}},s}(Nt),Dr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Nt),Yn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Nt),qr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(Nt),Dn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}},s}(Nt),Lr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(Nt),Jn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(Nt),Rr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(Nt),Ln=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(Nt),xr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Nt),jr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(Nt),Gi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Nt),ra=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(Nt),Rn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(Nt),Qi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(Nt),_n=function(n){function s(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(Nt),pn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(Nt),Ui=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(Nt),Tn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(Nt),Si=function(n){function s(o,c){n.call(this,o),this.context=o,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Nt),L=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(Si),k=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Si),N=function(n,s,o,c){this.context=n,this.width=s,this.height=o;var y=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new L(n,y),c&&(this.depthAttachment=new k(n,y))};N.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}n.deleteFramebuffer(this.framebuffer)};var K=function(n,s,o){this.func=n,this.mask=s,this.range=o};K.ReadOnly=!1,K.ReadWrite=!0,K.disabled=new K(519,K.ReadOnly,[0,1]);var Q=function(n,s,o,c,y,w){this.test=n,this.ref=s,this.mask=o,this.fail=c,this.depthFail=y,this.pass=w};Q.disabled=new Q({func:519,mask:0},0,0,7680,7680,7680);var le=function(n,s,o){this.blendFunction=n,this.blendColor=s,this.mask=o};le.disabled=new le(le.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),le.unblended=new le(le.Replace,a.Color.transparent,[!0,!0,!0,!0]),le.alphaBlended=new le([1,771],a.Color.transparent,[!0,!0,!0,!0]);var fe=function(n,s,o){this.enable=n,this.mode=s,this.frontFace=o};fe.disabled=new fe(!1,1029,2305),fe.backCCW=new fe(!0,1029,2305);var q=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new dr(this),this.clearDepth=new ar(this),this.clearStencil=new or(this),this.colorMask=new tn(this),this.depthMask=new Cr(this),this.stencilMask=new Mr(this),this.stencilFunc=new mr(this),this.stencilOp=new Vr(this),this.stencilTest=new Ti(this),this.depthRange=new Ni(this),this.depthTest=new sr(this),this.depthFunc=new lr(this),this.blend=new gr(this),this.blendFunc=new Dr(this),this.blendColor=new Yn(this),this.blendEquation=new qr(this),this.cullFace=new Dn(this),this.cullFaceSide=new Lr(this),this.frontFace=new Jn(this),this.program=new Rr(this),this.activeTexture=new Ln(this),this.viewport=new xr(this),this.bindFramebuffer=new jr(this),this.bindRenderbuffer=new Gi(this),this.bindTexture=new ra(this),this.bindVertexBuffer=new Rn(this),this.bindElementBuffer=new Qi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new _n(this),this.pixelStoreUnpack=new pn(this),this.pixelStoreUnpackPremultiplyAlpha=new Ui(this),this.pixelStoreUnpackFlipY=new Tn(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};q.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},q.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},q.prototype.createIndexBuffer=function(n,s){return new fr(this,n,s)},q.prototype.createVertexBuffer=function(n,s,o){return new en(this,n,s,o)},q.prototype.createRenderbuffer=function(n,s,o){var c=this.gl,y=c.createRenderbuffer();return this.bindRenderbuffer.set(y),c.renderbufferStorage(c.RENDERBUFFER,n,s,o),this.bindRenderbuffer.set(null),y},q.prototype.createFramebuffer=function(n,s,o){return new N(this,n,s,o)},q.prototype.clear=function(n){var s=n.color,o=n.depth,c=this.gl,y=0;s&&(y|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(y|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c.clear(y)},q.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},q.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},q.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},q.prototype.setColorMode=function(n){a.deepEqual(n.blendFunction,le.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},q.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ee=function(n){function s(o,c,y){var w=this;n.call(this),this.id=o,this.dispatcher=y,this.on("data",function(S){S.dataType==="source"&&S.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(S,I,C,O){var G=new nr[I.type](S,I,C,O);if(G.id!==S)throw new Error("Expected Source id to be "+S+" instead of "+G.id);return a.bindAll(["load","abort","unload","serialize","prepare"],G),G}(o,c,y,this),this._tiles={},this._cache=new Gt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,c){return this._source.loadTile(o,c)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var y=this._tiles[c];y.upload(o),y.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return a.values(this._tiles).map(function(o){return o.tileID}).sort(me).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var c=this,y=[];for(var w in this._tiles)this._isIdRenderable(w,o)&&y.push(this._tiles[w]);return o?y.sort(function(S,I){var C=S.tileID,O=I.tileID,G=new a.Point(C.canonical.x,C.canonical.y)._rotate(c.transform.angle),Z=new a.Point(O.canonical.x,O.canonical.y)._rotate(c.transform.angle);return C.overscaledZ-O.overscaledZ||Z.y-G.y||Z.x-G.x}).map(function(S){return S.tileID.key}):y.map(function(S){return S.tileID}).sort(me).map(function(S){return S.key})},s.prototype.hasRenderableParent=function(o){var c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,c){var y=this._tiles[o];y&&(y.state!=="loading"&&(y.state=c),this._loadTile(y,this._tileLoaded.bind(this,y,o,c)))},s.prototype._tileLoaded=function(o,c,y,w){if(w)return o.state="errored",void(w.status!==404?this._source.fire(new a.ErrorEvent(w,{tile:o})):this.update(this.transform));o.timeAdded=a.browser.now(),y==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var c=this.getRenderableIds(),y=0;y<c.length;y++){var w=c[y];if(o.neighboringTiles&&o.neighboringTiles[w]){var S=this.getTileByID(w);I(o,S),I(S,o)}}function I(C,O){C.needsHillshadePrepare=!0;var G=O.tileID.canonical.x-C.tileID.canonical.x,Z=O.tileID.canonical.y-C.tileID.canonical.y,H=Math.pow(2,C.tileID.canonical.z),re=O.tileID.key;G===0&&Z===0||Math.abs(Z)>1||(Math.abs(G)>1&&(Math.abs(G+H)===1?G+=H:Math.abs(G-H)===1&&(G-=H)),O.dem&&C.dem&&(C.dem.backfillBorder(O.dem,G,Z),C.neighboringTiles&&C.neighboringTiles[re]&&(C.neighboringTiles[re].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,c,y,w){for(var S in this._tiles){var I=this._tiles[S];if(!(w[S]||!I.hasData()||I.tileID.overscaledZ<=c||I.tileID.overscaledZ>y)){for(var C=I.tileID;I&&I.tileID.overscaledZ>c+1;){var O=I.tileID.scaledTo(I.tileID.overscaledZ-1);(I=this._tiles[O.key])&&I.hasData()&&(C=O)}for(var G=C;G.overscaledZ>c;)if(o[(G=G.scaledTo(G.overscaledZ-1)).key]){w[C.key]=C;break}}}},s.prototype.findLoadedParent=function(o,c){if(o.key in this._loadedParentTiles){var y=this._loadedParentTiles[o.key];return y&&y.tileID.overscaledZ>=c?y:null}for(var w=o.overscaledZ-1;w>=c;w--){var S=o.scaledTo(w),I=this._getLoadedTile(S);if(I)return I}},s.prototype._getLoadedTile=function(o){var c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var c=Math.ceil(o.width/this._source.tileSize)+1,y=Math.ceil(o.height/this._source.tileSize)+1,w=Math.floor(c*y*5),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(S)},s.prototype.handleWrapJump=function(o){var c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){var y={};for(var w in this._tiles){var S=this._tiles[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+c),y[S.tileID.key]=S}for(var I in this._tiles=y,this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(var C in this._tiles)this._setTileReloadTimer(C,this._tiles[C])}},s.prototype.update=function(o){var c=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var y;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?y=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ve){return new a.OverscaledTileID(Ve.canonical.z,Ve.wrap,Ve.canonical.z,Ve.canonical.x,Ve.canonical.y)}):(y=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(y=y.filter(function(Ve){return c._source.hasTile(Ve)}))):y=[];var w=o.coveringZoomLevel(this._source),S=Math.max(w-s.maxOverzooming,this._source.minzoom),I=Math.max(w+s.maxUnderzooming,this._source.minzoom),C=this._updateRetainedTiles(y,w);if(Ce(this._source.type)){for(var O={},G={},Z=0,H=Object.keys(C);Z<H.length;Z+=1){var re=H[Z],ie=C[re],ce=this._tiles[re];if(ce&&!(ce.fadeEndTime&&ce.fadeEndTime<=a.browser.now())){var J=this.findLoadedParent(ie,S);J&&(this._addTile(J.tileID),O[J.tileID.key]=J.tileID),G[re]=ie}}for(var ue in this._retainLoadedChildren(G,w,I,C),O)C[ue]||(this._coveredTiles[ue]=!0,C[ue]=O[ue])}for(var de in C)this._tiles[de].clearFadeHold();for(var ve=0,Te=a.keysDifference(this._tiles,C);ve<Te.length;ve+=1){var Ee=Te[ve],Ie=this._tiles[Ee];Ie.hasSymbolBuckets&&!Ie.holdingForFade()?Ie.setHoldDuration(this.map._fadeDuration):Ie.hasSymbolBuckets&&!Ie.symbolFadeFinished()||this._removeTile(Ee)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,c){for(var y={},w={},S=Math.max(c-s.maxOverzooming,this._source.minzoom),I=Math.max(c+s.maxUnderzooming,this._source.minzoom),C={},O=0,G=o;O<G.length;O+=1){var Z=G[O],H=this._addTile(Z);y[Z.key]=Z,H.hasData()||c<this._source.maxzoom&&(C[Z.key]=Z)}this._retainLoadedChildren(C,c,I,y);for(var re=0,ie=o;re<ie.length;re+=1){var ce=ie[re],J=this._tiles[ce.key];if(!J.hasData()){if(c+1>this._source.maxzoom){var ue=ce.children(this._source.maxzoom)[0],de=this.getTile(ue);if(de&&de.hasData()){y[ue.key]=ue;continue}}else{var ve=ce.children(this._source.maxzoom);if(y[ve[0].key]&&y[ve[1].key]&&y[ve[2].key]&&y[ve[3].key])continue}for(var Te=J.wasRequested(),Ee=ce.overscaledZ-1;Ee>=S;--Ee){var Ie=ce.scaledTo(Ee);if(w[Ie.key]||(w[Ie.key]=!0,!(J=this.getTile(Ie))&&Te&&(J=this._addTile(Ie)),J&&(y[Ie.key]=Ie,Te=J.wasRequested(),J.hasData())))break}}}return y},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var c=[],y=void 0,w=this._tiles[o].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){y=this._loadedParentTiles[w.key];break}c.push(w.key);var S=w.scaledTo(w.overscaledZ-1);if(y=this._getLoadedTile(S))break;w=S}for(var I=0,C=c;I<C.length;I+=1)this._loadedParentTiles[C[I]]=y}},s.prototype._addTile=function(o){var c=this._tiles[o.key];if(c)return c;(c=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));var y=!!c;return y||(c=new a.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))),c?(c.uses++,this._tiles[o.key]=c,y||this._source.fire(new a.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(o,c){var y=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var w=c.getExpiryTimeout();w&&(this._timers[o]=setTimeout(function(){y._reloadTile(o,"expired"),delete y._timers[o]},w))},s.prototype._removeTile=function(o){var c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,c,y){var w=this,S=[],I=this.transform;if(!I)return S;for(var C=y?I.getCameraQueryGeometry(o):o,O=o.map(function(Ee){return I.pointCoordinate(Ee)}),G=C.map(function(Ee){return I.pointCoordinate(Ee)}),Z=this.getIds(),H=1/0,re=1/0,ie=-1/0,ce=-1/0,J=0,ue=G;J<ue.length;J+=1){var de=ue[J];H=Math.min(H,de.x),re=Math.min(re,de.y),ie=Math.max(ie,de.x),ce=Math.max(ce,de.y)}for(var ve=function(Ee){var Ie=w._tiles[Z[Ee]];if(!Ie.holdingForFade()){var Ve=Ie.tileID,Je=Math.pow(2,I.zoom-Ie.tileID.overscaledZ),Xe=c*Ie.queryPadding*a.EXTENT/Ie.tileSize/Je,ft=[Ve.getTilePoint(new a.MercatorCoordinate(H,re)),Ve.getTilePoint(new a.MercatorCoordinate(ie,ce))];if(ft[0].x-Xe<a.EXTENT&&ft[0].y-Xe<a.EXTENT&&ft[1].x+Xe>=0&&ft[1].y+Xe>=0){var Tt=O.map(function(Ct){return Ve.getTilePoint(Ct)}),Mt=G.map(function(Ct){return Ve.getTilePoint(Ct)});S.push({tile:Ie,tileID:Ve,queryGeometry:Tt,cameraQueryGeometry:Mt,scale:Je})}}},Te=0;Te<Z.length;Te++)ve(Te);return S},s.prototype.getVisibleCoordinates=function(o){for(var c=this,y=this.getRenderableIds(o).map(function(C){return c._tiles[C].tileID}),w=0,S=y;w<S.length;w+=1){var I=S[w];I.posMatrix=this.transform.calculatePosMatrix(I.toUnwrapped())}return y},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ce(this._source.type))for(var o in this._tiles){var c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=a.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,c,y){this._state.updateState(o=o||"_geojsonTileLayer",c,y)},s.prototype.removeFeatureState=function(o,c,y){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,y)},s.prototype.getFeatureState=function(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(o,c,y){var w=this._tiles[o];w&&w.setDependencies(c,y)},s.prototype.reloadTilesForDependencies=function(o,c){for(var y in this._tiles)this._tiles[y].hasDependency(o,c)&&this._reloadTile(y,"reloading");this._cache.filter(function(w){return!w.hasDependency(o,c)})},s}(a.Evented);function me(n,s){var o=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-o||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ce(n){return n==="raster"||n==="image"||n==="video"}function Fe(){return new a.window.Worker(rl.workerUrl)}ee.maxOverzooming=10,ee.maxUnderzooming=3;var we="mapboxgl_preloaded_worker_pool",Le=function(){this.active={}};Le.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<Le.workerCount;)this.workers.push(new Fe);return this.active[n]=!0,this.workers.slice()},Le.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Le.prototype.isPreloaded=function(){return!!this.active[we]},Le.prototype.numActive=function(){return Object.keys(this.active).length};var st,it=Math.floor(a.browser.hardwareConcurrency/2);function ke(){return st||(st=new Le),st}function $e(n,s){var o={};for(var c in n)c!=="ref"&&(o[c]=n[c]);return a.refProperties.forEach(function(y){y in s&&(o[y]=s[y])}),o}function Ye(n){n=n.slice();for(var s=Object.create(null),o=0;o<n.length;o++)s[n[o].id]=n[o];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=$e(n[c],s[n[c].ref]));return n}Le.workerCount=Math.max(Math.min(it,6),1);var et={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function qt(n,s,o){o.push({command:et.addSource,args:[n,s[n]]})}function nt(n,s,o){s.push({command:et.removeSource,args:[n]}),o[n]=!0}function Yt(n,s,o,c){nt(n,o,c),qt(n,s,o)}function jt(n,s,o){var c;for(c in n[o])if(n[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;for(c in s[o])if(s[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;return!0}function Ht(n,s,o,c,y,w){var S;for(S in s=s||{},n=n||{})n.hasOwnProperty(S)&&(a.deepEqual(n[S],s[S])||o.push({command:w,args:[c,S,s[S],y]}));for(S in s)s.hasOwnProperty(S)&&!n.hasOwnProperty(S)&&(a.deepEqual(n[S],s[S])||o.push({command:w,args:[c,S,s[S],y]}))}function oi(n){return n.id}function ei(n,s){return n[s.id]=s,n}var yr=function(n,s){this.reset(n,s)};yr.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},yr.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=a.clamp(n,0,1);for(var s=1,o=this._distances[s],c=n*this.paddedLength+this.padding;o<c&&s<this._distances.length;)o=this._distances[++s];var y=s-1,w=this._distances[y],S=o-w,I=S>0?(c-w)/S:0;return this.points[y].mult(1-I).add(this.points[s].mult(I))};var fi=function(n,s,o){var c=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(s/o);for(var w=0;w<this.xCellCount*this.yCellCount;w++)c.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Li(n,s,o,c,y){var w=a.create();return s?(a.scale(w,w,[1/y,1/y,1]),o||a.rotateZ(w,w,c.angle)):a.multiply(w,c.labelPlaneMatrix,n),w}function _i(n,s,o,c,y){if(s){var w=a.clone(n);return a.scale(w,w,[y,y,1]),o||a.rotateZ(w,w,-c.angle),w}return c.glCoordMatrix}function Qt(n,s){var o=[n.x,n.y,0,1];er(o,o,s);var c=o[3];return{point:new a.Point(o[0]/c,o[1]/c),signedDistanceFromCamera:c}}function si(n,s){return .5+n/s*.5}function wr(n,s){var o=n[0]/n[3],c=n[1]/n[3];return o>=-s[0]&&o<=s[0]&&c>=-s[1]&&c<=s[1]}function ha(n,s,o,c,y,w,S,I){var C=c?n.textSizeData:n.iconSizeData,O=a.evaluateSizeForZoom(C,o.transform.zoom),G=[256/o.width*2+1,256/o.height*2+1],Z=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;Z.clear();for(var H=n.lineVertexArray,re=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,ie=o.transform.width/o.transform.height,ce=!1,J=0;J<re.length;J++){var ue=re.get(J);if(ue.hidden||ue.writingMode===a.WritingMode.vertical&&!ce)Sr(ue.numGlyphs,Z);else{ce=!1;var de=[ue.anchorX,ue.anchorY,0,1];if(a.transformMat4(de,de,s),wr(de,G)){var ve=si(o.transform.cameraToCenterDistance,de[3]),Te=a.evaluateSizeForFeature(C,O,ue),Ee=S?Te/ve:Te*ve,Ie=new a.Point(ue.anchorX,ue.anchorY),Ve=Qt(Ie,y).point,Je={},Xe=Na(ue,Ee,!1,I,s,y,w,n.glyphOffsetArray,H,Z,Ve,Ie,Je,ie);ce=Xe.useVertical,(Xe.notEnoughRoom||ce||Xe.needsFlipping&&Na(ue,Ee,!0,I,s,y,w,n.glyphOffsetArray,H,Z,Ve,Ie,Je,ie).notEnoughRoom)&&Sr(ue.numGlyphs,Z)}else Sr(ue.numGlyphs,Z)}}c?n.text.dynamicLayoutVertexBuffer.updateData(Z):n.icon.dynamicLayoutVertexBuffer.updateData(Z)}function $i(n,s,o,c,y,w,S,I,C,O,G){var Z=I.glyphStartIndex+I.numGlyphs,H=I.lineStartIndex,re=I.lineStartIndex+I.lineLength,ie=s.getoffsetX(I.glyphStartIndex),ce=s.getoffsetX(Z-1),J=Vi(n*ie,o,c,y,w,S,I.segment,H,re,C,O,G);if(!J)return null;var ue=Vi(n*ce,o,c,y,w,S,I.segment,H,re,C,O,G);return ue?{first:J,last:ue}:null}function Br(n,s,o,c){return n===a.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*c?{useVertical:!0}:(n===a.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function Na(n,s,o,c,y,w,S,I,C,O,G,Z,H,re){var ie,ce=s/24,J=n.lineOffsetX*ce,ue=n.lineOffsetY*ce;if(n.numGlyphs>1){var de=n.glyphStartIndex+n.numGlyphs,ve=n.lineStartIndex,Te=n.lineStartIndex+n.lineLength,Ee=$i(ce,I,J,ue,o,G,Z,n,C,w,H);if(!Ee)return{notEnoughRoom:!0};var Ie=Qt(Ee.first.point,S).point,Ve=Qt(Ee.last.point,S).point;if(c&&!o){var Je=Br(n.writingMode,Ie,Ve,re);if(Je)return Je}ie=[Ee.first];for(var Xe=n.glyphStartIndex+1;Xe<de-1;Xe++)ie.push(Vi(ce*I.getoffsetX(Xe),J,ue,o,G,Z,n.segment,ve,Te,C,w,H));ie.push(Ee.last)}else{if(c&&!o){var ft=Qt(Z,y).point,Tt=n.lineStartIndex+n.segment+1,Mt=new a.Point(C.getx(Tt),C.gety(Tt)),Ct=Qt(Mt,y),mi=Ct.signedDistanceFromCamera>0?Ct.point:va(Z,Mt,ft,1,y),dt=Br(n.writingMode,ft,mi,re);if(dt)return dt}var Vt=Vi(ce*I.getoffsetX(n.glyphStartIndex),J,ue,o,G,Z,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,C,w,H);if(!Vt)return{notEnoughRoom:!0};ie=[Vt]}for(var Jt=0,Ut=ie;Jt<Ut.length;Jt+=1){var Ot=Ut[Jt];a.addDynamicAttributes(O,Ot.point,Ot.angle)}return{}}function va(n,s,o,c,y){var w=Qt(n.add(n.sub(s)._unit()),y).point,S=o.sub(w);return o.add(S._mult(c/S.mag()))}function Vi(n,s,o,c,y,w,S,I,C,O,G,Z){var H=c?n-s:n+s,re=H>0?1:-1,ie=0;c&&(re*=-1,ie=Math.PI),re<0&&(ie+=Math.PI);for(var ce=re>0?I+S:I+S+1,J=y,ue=y,de=0,ve=0,Te=Math.abs(H),Ee=[];de+ve<=Te;){if((ce+=re)<I||ce>=C)return null;if(ue=J,Ee.push(J),(J=Z[ce])===void 0){var Ie=new a.Point(O.getx(ce),O.gety(ce)),Ve=Qt(Ie,G);if(Ve.signedDistanceFromCamera>0)J=Z[ce]=Ve.point;else{var Je=ce-re;J=va(de===0?w:new a.Point(O.getx(Je),O.gety(Je)),Ie,ue,Te-de+1,G)}}de+=ve,ve=ue.dist(J)}var Xe=(Te-de)/ve,ft=J.sub(ue),Tt=ft.mult(Xe)._add(ue);Tt._add(ft._unit()._perp()._mult(o*re));var Mt=ie+Math.atan2(J.y-ue.y,J.x-ue.x);return Ee.push(Tt),{point:Tt,angle:Mt,path:Ee}}fi.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},fi.prototype.insert=function(n,s,o,c,y){this._forEachCell(s,o,c,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(y)},fi.prototype.insertCircle=function(n,s,o,c){this._forEachCell(s-c,o-c,s+c,o+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(o),this.circles.push(c)},fi.prototype._insertBoxCell=function(n,s,o,c,y,w){this.boxCells[y].push(w)},fi.prototype._insertCircleCell=function(n,s,o,c,y,w){this.circleCells[y].push(w)},fi.prototype._query=function(n,s,o,c,y,w){if(o<0||n>this.width||c<0||s>this.height)return!y&&[];var S=[];if(n<=0&&s<=0&&this.width<=o&&this.height<=c){if(y)return!0;for(var I=0;I<this.boxKeys.length;I++)S.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(var C=0;C<this.circleKeys.length;C++){var O=this.circles[3*C],G=this.circles[3*C+1],Z=this.circles[3*C+2];S.push({key:this.circleKeys[C],x1:O-Z,y1:G-Z,x2:O+Z,y2:G+Z})}return w?S.filter(w):S}return this._forEachCell(n,s,o,c,this._queryCell,S,{hitTest:y,seenUids:{box:{},circle:{}}},w),y?S.length>0:S},fi.prototype._queryCircle=function(n,s,o,c,y){var w=n-o,S=n+o,I=s-o,C=s+o;if(S<0||w>this.width||C<0||I>this.height)return!c&&[];var O=[];return this._forEachCell(w,I,S,C,this._queryCellCircle,O,{hitTest:c,circle:{x:n,y:s,radius:o},seenUids:{box:{},circle:{}}},y),c?O.length>0:O},fi.prototype.query=function(n,s,o,c,y){return this._query(n,s,o,c,!1,y)},fi.prototype.hitTest=function(n,s,o,c,y){return this._query(n,s,o,c,!0,y)},fi.prototype.hitTestCircle=function(n,s,o,c){return this._queryCircle(n,s,o,!0,c)},fi.prototype._queryCell=function(n,s,o,c,y,w,S,I){var C=S.seenUids,O=this.boxCells[y];if(O!==null)for(var G=this.bboxes,Z=0,H=O;Z<H.length;Z+=1){var re=H[Z];if(!C.box[re]){C.box[re]=!0;var ie=4*re;if(n<=G[ie+2]&&s<=G[ie+3]&&o>=G[ie+0]&&c>=G[ie+1]&&(!I||I(this.boxKeys[re]))){if(S.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[re],x1:G[ie],y1:G[ie+1],x2:G[ie+2],y2:G[ie+3]})}}}var ce=this.circleCells[y];if(ce!==null)for(var J=this.circles,ue=0,de=ce;ue<de.length;ue+=1){var ve=de[ue];if(!C.circle[ve]){C.circle[ve]=!0;var Te=3*ve;if(this._circleAndRectCollide(J[Te],J[Te+1],J[Te+2],n,s,o,c)&&(!I||I(this.circleKeys[ve]))){if(S.hitTest)return w.push(!0),!0;var Ee=J[Te],Ie=J[Te+1],Ve=J[Te+2];w.push({key:this.circleKeys[ve],x1:Ee-Ve,y1:Ie-Ve,x2:Ee+Ve,y2:Ie+Ve})}}}},fi.prototype._queryCellCircle=function(n,s,o,c,y,w,S,I){var C=S.circle,O=S.seenUids,G=this.boxCells[y];if(G!==null)for(var Z=this.bboxes,H=0,re=G;H<re.length;H+=1){var ie=re[H];if(!O.box[ie]){O.box[ie]=!0;var ce=4*ie;if(this._circleAndRectCollide(C.x,C.y,C.radius,Z[ce+0],Z[ce+1],Z[ce+2],Z[ce+3])&&(!I||I(this.boxKeys[ie])))return w.push(!0),!0}}var J=this.circleCells[y];if(J!==null)for(var ue=this.circles,de=0,ve=J;de<ve.length;de+=1){var Te=ve[de];if(!O.circle[Te]){O.circle[Te]=!0;var Ee=3*Te;if(this._circlesCollide(ue[Ee],ue[Ee+1],ue[Ee+2],C.x,C.y,C.radius)&&(!I||I(this.circleKeys[Te])))return w.push(!0),!0}}},fi.prototype._forEachCell=function(n,s,o,c,y,w,S,I){for(var C=this._convertToXCellCoord(n),O=this._convertToYCellCoord(s),G=this._convertToXCellCoord(o),Z=this._convertToYCellCoord(c),H=C;H<=G;H++)for(var re=O;re<=Z;re++)if(y.call(this,n,s,o,c,this.xCellCount*re+H,w,S,I))return},fi.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},fi.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},fi.prototype._circlesCollide=function(n,s,o,c,y,w){var S=c-n,I=y-s,C=o+w;return C*C>S*S+I*I},fi.prototype._circleAndRectCollide=function(n,s,o,c,y,w,S){var I=(w-c)/2,C=Math.abs(n-(c+I));if(C>I+o)return!1;var O=(S-y)/2,G=Math.abs(s-(y+O));if(G>O+o)return!1;if(C<=I||G<=O)return!0;var Z=C-I,H=G-O;return Z*Z+H*H<=o*o};var ba=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Sr(n,s){for(var o=0;o<n;o++){var c=s.length;s.resize(c+4),s.float32.set(ba,3*c)}}function er(n,s,o){var c=s[0],y=s[1];return n[0]=o[0]*c+o[4]*y+o[12],n[1]=o[1]*c+o[5]*y+o[13],n[3]=o[3]*c+o[7]*y+o[15],n}var hn=function(n,s,o){s===void 0&&(s=new fi(n.width+200,n.height+200,25)),o===void 0&&(o=new fi(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function Pi(n,s,o){return s*(a.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}hn.prototype.placeCollisionBox=function(n,s,o,c,y){var w=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),S=o*w.perspectiveRatio,I=n.x1*S+w.point.x,C=n.y1*S+w.point.y,O=n.x2*S+w.point.x,G=n.y2*S+w.point.y;return!this.isInsideGrid(I,C,O,G)||!s&&this.grid.hitTest(I,C,O,G,y)?{box:[],offscreen:!1}:{box:[I,C,O,G],offscreen:this.isOffscreen(I,C,O,G)}},hn.prototype.placeCollisionCircles=function(n,s,o,c,y,w,S,I,C,O,G,Z,H){var re=[],ie=new a.Point(s.anchorX,s.anchorY),ce=Qt(ie,w),J=si(this.transform.cameraToCenterDistance,ce.signedDistanceFromCamera),ue=(O?y/J:y*J)/a.ONE_EM,de=Qt(ie,S).point,ve=$i(ue,c,s.lineOffsetX*ue,s.lineOffsetY*ue,!1,de,ie,s,o,S,{}),Te=!1,Ee=!1,Ie=!0;if(ve){for(var Ve=.5*Z*J+H,Je=new a.Point(-100,-100),Xe=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),ft=new yr,Tt=ve.first,Mt=ve.last,Ct=[],mi=Tt.path.length-1;mi>=1;mi--)Ct.push(Tt.path[mi]);for(var dt=1;dt<Mt.path.length;dt++)Ct.push(Mt.path[dt]);var Vt=2.5*Ve;if(I){var Jt=Ct.map(function(sa){return Qt(sa,I)});Ct=Jt.some(function(sa){return sa.signedDistanceFromCamera<=0})?[]:Jt.map(function(sa){return sa.point})}var Ut=[];if(Ct.length>0){for(var Ot=Ct[0].clone(),Wt=Ct[0].clone(),Ft=1;Ft<Ct.length;Ft++)Ot.x=Math.min(Ot.x,Ct[Ft].x),Ot.y=Math.min(Ot.y,Ct[Ft].y),Wt.x=Math.max(Wt.x,Ct[Ft].x),Wt.y=Math.max(Wt.y,Ct[Ft].y);Ut=Ot.x>=Je.x&&Wt.x<=Xe.x&&Ot.y>=Je.y&&Wt.y<=Xe.y?[Ct]:Wt.x<Je.x||Ot.x>Xe.x||Wt.y<Je.y||Ot.y>Xe.y?[]:a.clipLine([Ct],Je.x,Je.y,Xe.x,Xe.y)}for(var Rt=0,Fr=Ut;Rt<Fr.length;Rt+=1){var tr;ft.reset(Fr[Rt],.25*Ve),tr=ft.length<=.5*Ve?1:Math.ceil(ft.paddedLength/Vt)+1;for(var dn=0;dn<tr;dn++){var Wr=dn/Math.max(tr-1,1),Yi=ft.lerp(Wr),ur=Yi.x+100,Gn=Yi.y+100;re.push(ur,Gn,Ve,0);var wn=ur-Ve,Qa=Gn-Ve,In=ur+Ve,_a=Gn+Ve;if(Ie=Ie&&this.isOffscreen(wn,Qa,In,_a),Ee=Ee||this.isInsideGrid(wn,Qa,In,_a),!n&&this.grid.hitTestCircle(ur,Gn,Ve,G)&&(Te=!0,!C))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!C&&Te||!Ee?[]:re,offscreen:Ie,collisionDetected:Te}},hn.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,c=1/0,y=-1/0,w=-1/0,S=0,I=n;S<I.length;S+=1){var C=I[S],O=new a.Point(C.x+100,C.y+100);o=Math.min(o,O.x),c=Math.min(c,O.y),y=Math.max(y,O.x),w=Math.max(w,O.y),s.push(O)}for(var G={},Z={},H=0,re=this.grid.query(o,c,y,w).concat(this.ignoredGrid.query(o,c,y,w));H<re.length;H+=1){var ie=re[H],ce=ie.key;if(G[ce.bucketInstanceId]===void 0&&(G[ce.bucketInstanceId]={}),!G[ce.bucketInstanceId][ce.featureIndex]){var J=[new a.Point(ie.x1,ie.y1),new a.Point(ie.x2,ie.y1),new a.Point(ie.x2,ie.y2),new a.Point(ie.x1,ie.y2)];a.polygonIntersectsPolygon(s,J)&&(G[ce.bucketInstanceId][ce.featureIndex]=!0,Z[ce.bucketInstanceId]===void 0&&(Z[ce.bucketInstanceId]=[]),Z[ce.bucketInstanceId].push(ce.featureIndex))}}return Z},hn.prototype.insertCollisionBox=function(n,s,o,c,y){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:c,collisionGroupID:y},n[0],n[1],n[2],n[3])},hn.prototype.insertCollisionCircles=function(n,s,o,c,y){for(var w=s?this.ignoredGrid:this.grid,S={bucketInstanceId:o,featureIndex:c,collisionGroupID:y},I=0;I<n.length;I+=4)w.insertCircle(S,n[I],n[I+1],n[I+2])},hn.prototype.projectAndGetPerspectiveRatio=function(n,s,o){var c=[s,o,0,1];return er(c,c,n),{point:new a.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},hn.prototype.isOffscreen=function(n,s,o,c){return o<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},hn.prototype.isInsideGrid=function(n,s,o,c){return o>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},hn.prototype.getViewportMatrix=function(){var n=a.identity([]);return a.translate(n,n,[-100,-100,0]),n};var Bn=function(n,s,o,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&o?1:0,this.placed=o};Bn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var vn=function(n,s,o,c,y){this.text=new Bn(n?n.text:null,s,o,y),this.icon=new Bn(n?n.icon:null,s,c,y)};vn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var rs=function(n,s,o){this.text=n,this.icon=s,this.skipFade=o},Er=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},xa=function(n,s,o,c,y){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=c,this.tileID=y},Gr=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function kr(n,s,o,c,y){var w=a.getAnchorAlignment(n),S=-(w.horizontalAlign-.5)*s,I=-(w.verticalAlign-.5)*o,C=a.evaluateVariableOffset(n,c);return new a.Point(S+C[0]*y,I+C[1]*y)}function Qn(n,s,o,c,y,w){var S=n.x1,I=n.x2,C=n.y1,O=n.y2,G=n.anchorPointX,Z=n.anchorPointY,H=new a.Point(s,o);return c&&H._rotate(y?w:-w),{x1:S+H.x,y1:C+H.y,x2:I+H.x,y2:O+H.y,anchorPointX:G,anchorPointY:Z}}Gr.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[n]};var Zr=function(n,s,o,c){this.transform=n.clone(),this.collisionIndex=new hn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Gr(o),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function wa(n,s,o,c,y){n.emplaceBack(s?1:0,o?1:0,c||0,y||0),n.emplaceBack(s?1:0,o?1:0,c||0,y||0),n.emplaceBack(s?1:0,o?1:0,c||0,y||0),n.emplaceBack(s?1:0,o?1:0,c||0,y||0)}Zr.prototype.getBucketParts=function(n,s,o,c){var y=o.getBucket(s),w=o.latestFeatureIndex;if(y&&w&&s.id===y.layerIds[0]){var S=o.collisionBoxArray,I=y.layers[0].layout,C=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),O=o.tileSize/a.EXTENT,G=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),Z=I.get("text-pitch-alignment")==="map",H=I.get("text-rotation-alignment")==="map",re=Pi(o,1,this.transform.zoom),ie=Li(G,Z,H,this.transform,re),ce=null;if(Z){var J=_i(G,Z,H,this.transform,re);ce=a.multiply([],this.transform.labelPlaneMatrix,J)}this.retainedQueryData[y.bucketInstanceId]=new xa(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,o.tileID);var ue={bucket:y,layout:I,posMatrix:G,textLabelPlaneMatrix:ie,labelToScreenMatrix:ce,scale:C,textPixelRatio:O,holdingForFade:o.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(c)for(var de=0,ve=y.sortKeyRanges;de<ve.length;de+=1){var Te=ve[de];n.push({sortKey:Te.sortKey,symbolInstanceStart:Te.symbolInstanceStart,symbolInstanceEnd:Te.symbolInstanceEnd,parameters:ue})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ue})}},Zr.prototype.attemptAnchorPlacement=function(n,s,o,c,y,w,S,I,C,O,G,Z,H,re,ie){var ce,J=[Z.textOffset0,Z.textOffset1],ue=kr(n,o,c,J,y),de=this.collisionIndex.placeCollisionBox(Qn(s,ue.x,ue.y,w,S,this.transform.angle),G,I,C,O.predicate);if(!ie||this.collisionIndex.placeCollisionBox(Qn(ie,ue.x,ue.y,w,S,this.transform.angle),G,I,C,O.predicate).box.length!==0)return de.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(ce=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),this.variableOffsets[Z.crossTileID]={textOffset:J,width:o,height:c,anchor:n,textBoxScale:y,prevAnchor:ce},this.markUsedJustification(H,n,Z,re),H.allowVerticalPlacement&&(this.markUsedOrientation(H,re,Z),this.placedOrientations[Z.crossTileID]=re),{shift:ue,placedGlyphBoxes:de}):void 0},Zr.prototype.placeLayerBucketPart=function(n,s,o){var c=this,y=n.parameters,w=y.bucket,S=y.layout,I=y.posMatrix,C=y.textLabelPlaneMatrix,O=y.labelToScreenMatrix,G=y.textPixelRatio,Z=y.holdingForFade,H=y.collisionBoxArray,re=y.partiallyEvaluatedTextSize,ie=y.collisionGroup,ce=S.get("text-optional"),J=S.get("icon-optional"),ue=S.get("text-allow-overlap"),de=S.get("icon-allow-overlap"),ve=S.get("text-rotation-alignment")==="map",Te=S.get("text-pitch-alignment")==="map",Ee=S.get("icon-text-fit")!=="none",Ie=S.get("symbol-z-order")==="viewport-y",Ve=ue&&(de||!w.hasIconData()||J),Je=de&&(ue||!w.hasTextData()||ce);!w.collisionArrays&&H&&w.deserializeCollisionBoxes(H);var Xe=function(dt,Vt){if(!s[dt.crossTileID])if(Z)c.placements[dt.crossTileID]=new rs(!1,!1,!1);else{var Jt,Ut=!1,Ot=!1,Wt=!0,Ft=null,Rt={box:null,offscreen:null},Fr={box:null,offscreen:null},tr=null,dn=null,Wr=0,Yi=0,ur=0;Vt.textFeatureIndex?Wr=Vt.textFeatureIndex:dt.useRuntimeCollisionCircles&&(Wr=dt.featureIndex),Vt.verticalTextFeatureIndex&&(Yi=Vt.verticalTextFeatureIndex);var Gn=Vt.textBox;if(Gn){var wn=function(wi){var ta=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!wi&&c.prevPlacement){var An=c.prevPlacement.placedOrientations[dt.crossTileID];An&&(c.placedOrientations[dt.crossTileID]=An,c.markUsedOrientation(w,ta=An,dt))}return ta},Qa=function(wi,ta){if(w.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Vt.verticalTextBox)for(var An=0,Io=w.writingModes;An<Io.length&&(Io[An]===a.WritingMode.vertical?(Rt=ta(),Fr=Rt):Rt=wi(),!(Rt&&Rt.box&&Rt.box.length));An+=1);else Rt=wi()};if(S.get("text-variable-anchor")){var In=S.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[dt.crossTileID]){var _a=c.prevPlacement.variableOffsets[dt.crossTileID];In.indexOf(_a.anchor)>0&&(In=In.filter(function(wi){return wi!==_a.anchor})).unshift(_a.anchor)}var sa=function(wi,ta,An){for(var Io=wi.x2-wi.x1,Gp=wi.y2-wi.y1,nl=dt.textBoxScale,Zp=Ee&&!de?ta:null,ks={box:[],offscreen:!1},zc=ue?2*In.length:In.length,Xo=0;Xo<zc;++Xo){var al=c.attemptAnchorPlacement(In[Xo%In.length],wi,Io,Gp,nl,ve,Te,G,I,ie,Xo>=In.length,dt,w,An,Zp);if(al&&(ks=al.placedGlyphBoxes)&&ks.box&&ks.box.length){Ut=!0,Ft=al.shift;break}}return ks};Qa(function(){return sa(Gn,Vt.iconBox,a.WritingMode.horizontal)},function(){var wi=Vt.verticalTextBox;return w.allowVerticalPlacement&&!(Rt&&Rt.box&&Rt.box.length)&&dt.numVerticalGlyphVertices>0&&wi?sa(wi,Vt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Rt&&(Ut=Rt.box,Wt=Rt.offscreen);var ws=wn(Rt&&Rt.box);if(!Ut&&c.prevPlacement){var Ho=c.prevPlacement.variableOffsets[dt.crossTileID];Ho&&(c.variableOffsets[dt.crossTileID]=Ho,c.markUsedJustification(w,Ho.anchor,dt,ws))}}else{var $a=function(wi,ta){var An=c.collisionIndex.placeCollisionBox(wi,ue,G,I,ie.predicate);return An&&An.box&&An.box.length&&(c.markUsedOrientation(w,ta,dt),c.placedOrientations[dt.crossTileID]=ta),An};Qa(function(){return $a(Gn,a.WritingMode.horizontal)},function(){var wi=Vt.verticalTextBox;return w.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&wi?$a(wi,a.WritingMode.vertical):{box:null,offscreen:null}}),wn(Rt&&Rt.box&&Rt.box.length)}}if(Ut=(Jt=Rt)&&Jt.box&&Jt.box.length>0,Wt=Jt&&Jt.offscreen,dt.useRuntimeCollisionCircles){var Wo=w.text.placedSymbolArray.get(dt.centerJustifiedTextSymbolIndex),Ss=a.evaluateSizeForFeature(w.textSizeData,re,Wo),Ia=S.get("text-padding");tr=c.collisionIndex.placeCollisionCircles(ue,Wo,w.lineVertexArray,w.glyphOffsetArray,Ss,I,C,O,o,Te,ie.predicate,dt.collisionCircleDiameter,Ia),Ut=ue||tr.circles.length>0&&!tr.collisionDetected,Wt=Wt&&tr.offscreen}if(Vt.iconFeatureIndex&&(ur=Vt.iconFeatureIndex),Vt.iconBox){var Es=function(wi){var ta=Ee&&Ft?Qn(wi,Ft.x,Ft.y,ve,Te,c.transform.angle):wi;return c.collisionIndex.placeCollisionBox(ta,de,G,I,ie.predicate)};Ot=Fr&&Fr.box&&Fr.box.length&&Vt.verticalIconBox?(dn=Es(Vt.verticalIconBox)).box.length>0:(dn=Es(Vt.iconBox)).box.length>0,Wt=Wt&&dn.offscreen}var Aa=ce||dt.numHorizontalGlyphVertices===0&&dt.numVerticalGlyphVertices===0,Or=J||dt.numIconVertices===0;if(Aa||Or?Or?Aa||(Ot=Ot&&Ut):Ut=Ot&&Ut:Ot=Ut=Ot&&Ut,Ut&&Jt&&Jt.box&&c.collisionIndex.insertCollisionBox(Jt.box,S.get("text-ignore-placement"),w.bucketInstanceId,Fr&&Fr.box&&Yi?Yi:Wr,ie.ID),Ot&&dn&&c.collisionIndex.insertCollisionBox(dn.box,S.get("icon-ignore-placement"),w.bucketInstanceId,ur,ie.ID),tr&&(Ut&&c.collisionIndex.insertCollisionCircles(tr.circles,S.get("text-ignore-placement"),w.bucketInstanceId,Wr,ie.ID),o)){var La=w.bucketInstanceId,eo=c.collisionCircleArrays[La];eo===void 0&&(eo=c.collisionCircleArrays[La]=new Er);for(var To=0;To<tr.circles.length;To+=4)eo.circles.push(tr.circles[To+0]),eo.circles.push(tr.circles[To+1]),eo.circles.push(tr.circles[To+2]),eo.circles.push(tr.collisionDetected?1:0)}c.placements[dt.crossTileID]=new rs(Ut||Ve,Ot||Je,Wt||w.justReloaded),s[dt.crossTileID]=!0}};if(Ie)for(var ft=w.getSortedSymbolIndexes(this.transform.angle),Tt=ft.length-1;Tt>=0;--Tt){var Mt=ft[Tt];Xe(w.symbolInstances.get(Mt),w.collisionArrays[Mt])}else for(var Ct=n.symbolInstanceStart;Ct<n.symbolInstanceEnd;Ct++)Xe(w.symbolInstances.get(Ct),w.collisionArrays[Ct]);if(o&&w.bucketInstanceId in this.collisionCircleArrays){var mi=this.collisionCircleArrays[w.bucketInstanceId];a.invert(mi.invProjMatrix,I),mi.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Zr.prototype.markUsedJustification=function(n,s,o,c){var y;y=c===a.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(s)];for(var w=0,S=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];w<S.length;w+=1){var I=S[w];I>=0&&(n.text.placedSymbolArray.get(I).crossTileID=y>=0&&I!==y?0:o.crossTileID)}},Zr.prototype.markUsedOrientation=function(n,s,o){for(var c=s===a.WritingMode.horizontal||s===a.WritingMode.horizontalOnly?s:0,y=s===a.WritingMode.vertical?s:0,w=0,S=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];w<S.length;w+=1)n.text.placedSymbolArray.get(S[w]).placedOrientation=c;o.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=y)},Zr.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,y=s?s.opacities:{},w=s?s.variableOffsets:{},S=s?s.placedOrientations:{};for(var I in this.placements){var C=this.placements[I],O=y[I];O?(this.opacities[I]=new vn(O,c,C.text,C.icon),o=o||C.text!==O.text.placed||C.icon!==O.icon.placed):(this.opacities[I]=new vn(null,c,C.text,C.icon,C.skipFade),o=o||C.text||C.icon)}for(var G in y){var Z=y[G];if(!this.opacities[G]){var H=new vn(Z,c,!1,!1);H.isHidden()||(this.opacities[G]=H,o=o||Z.text.placed||Z.icon.placed)}}for(var re in w)this.variableOffsets[re]||!this.opacities[re]||this.opacities[re].isHidden()||(this.variableOffsets[re]=w[re]);for(var ie in S)this.placedOrientations[ie]||!this.opacities[ie]||this.opacities[ie].isHidden()||(this.placedOrientations[ie]=S[ie]);o?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},Zr.prototype.updateLayerOpacities=function(n,s){for(var o={},c=0,y=s;c<y.length;c+=1){var w=y[c],S=w.getBucket(n);S&&w.latestFeatureIndex&&n.id===S.layerIds[0]&&this.updateBucketOpacities(S,o,w.collisionBoxArray)}},Zr.prototype.updateBucketOpacities=function(n,s,o){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var y=n.layers[0].layout,w=new vn(null,0,!1,!1,!0),S=y.get("text-allow-overlap"),I=y.get("icon-allow-overlap"),C=y.get("text-variable-anchor"),O=y.get("text-rotation-alignment")==="map",G=y.get("text-pitch-alignment")==="map",Z=y.get("icon-text-fit")!=="none",H=new vn(null,0,S&&(I||!n.hasIconData()||y.get("icon-optional")),I&&(S||!n.hasTextData()||y.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);for(var re=function(ue,de,ve){for(var Te=0;Te<de/4;Te++)ue.opacityVertexArray.emplaceBack(ve)},ie=function(ue){var de=n.symbolInstances.get(ue),ve=de.numHorizontalGlyphVertices,Te=de.numVerticalGlyphVertices,Ee=de.crossTileID,Ie=c.opacities[Ee];s[Ee]?Ie=w:Ie||(c.opacities[Ee]=Ie=H),s[Ee]=!0;var Ve=de.numIconVertices>0,Je=c.placedOrientations[de.crossTileID],Xe=Je===a.WritingMode.vertical,ft=Je===a.WritingMode.horizontal||Je===a.WritingMode.horizontalOnly;if(ve>0||Te>0){var Tt=Os(Ie.text);re(n.text,ve,Xe?Ua:Tt),re(n.text,Te,ft?Ua:Tt);var Mt=Ie.text.isHidden();[de.rightJustifiedTextSymbolIndex,de.centerJustifiedTextSymbolIndex,de.leftJustifiedTextSymbolIndex].forEach(function(Rt){Rt>=0&&(n.text.placedSymbolArray.get(Rt).hidden=Mt||Xe?1:0)}),de.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(de.verticalPlacedTextSymbolIndex).hidden=Mt||ft?1:0);var Ct=c.variableOffsets[de.crossTileID];Ct&&c.markUsedJustification(n,Ct.anchor,de,Je);var mi=c.placedOrientations[de.crossTileID];mi&&(c.markUsedJustification(n,"left",de,mi),c.markUsedOrientation(n,mi,de))}if(Ve){var dt=Os(Ie.icon),Vt=!(Z&&de.verticalPlacedIconSymbolIndex&&Xe);de.placedIconSymbolIndex>=0&&(re(n.icon,de.numIconVertices,Vt?dt:Ua),n.icon.placedSymbolArray.get(de.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),de.verticalPlacedIconSymbolIndex>=0&&(re(n.icon,de.numVerticalIconVertices,Vt?Ua:dt),n.icon.placedSymbolArray.get(de.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Jt=n.collisionArrays[ue];if(Jt){var Ut=new a.Point(0,0);if(Jt.textBox||Jt.verticalTextBox){var Ot=!0;if(C){var Wt=c.variableOffsets[Ee];Wt?(Ut=kr(Wt.anchor,Wt.width,Wt.height,Wt.textOffset,Wt.textBoxScale),O&&Ut._rotate(G?c.transform.angle:-c.transform.angle)):Ot=!1}Jt.textBox&&wa(n.textCollisionBox.collisionVertexArray,Ie.text.placed,!Ot||Xe,Ut.x,Ut.y),Jt.verticalTextBox&&wa(n.textCollisionBox.collisionVertexArray,Ie.text.placed,!Ot||ft,Ut.x,Ut.y)}var Ft=!!(!ft&&Jt.verticalIconBox);Jt.iconBox&&wa(n.iconCollisionBox.collisionVertexArray,Ie.icon.placed,Ft,Z?Ut.x:0,Z?Ut.y:0),Jt.verticalIconBox&&wa(n.iconCollisionBox.collisionVertexArray,Ie.icon.placed,!Ft,Z?Ut.x:0,Z?Ut.y:0)}}},ce=0;ce<n.symbolInstances.length;ce++)ie(ce);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var J=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=J.invProjMatrix,n.placementViewportMatrix=J.viewportMatrix,n.collisionCircleArray=J.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},Zr.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Zr.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},Zr.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},Zr.prototype.stillRecent=function(n,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>n},Zr.prototype.setStale=function(){this.stale=!0};var ns=Math.pow(2,25),Fl=Math.pow(2,24),uo=Math.pow(2,17),Ol=Math.pow(2,16),Ro=Math.pow(2,9),Nl=Math.pow(2,8),Bo=Math.pow(2,1);function Os(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,o=Math.floor(127*n.opacity);return o*ns+s*Fl+o*uo+s*Ol+o*Ro+s*Nl+o*Bo+s}var Ua=0,as=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};as.prototype.continuePlacement=function(n,s,o,c,y){for(var w=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(w,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(S,I){return S.sortKey-I.sortKey}));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,y())return!0;return!1};var co=function(n,s,o,c,y,w,S){this.placement=new Zr(n,y,w,S),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=c,this._done=!1};co.prototype.isDone=function(){return this._done},co.prototype.continuePlacement=function(n,s,o){for(var c=this,y=a.browser.now(),w=function(){var C=a.browser.now()-y;return!c._forceFullPlacement&&C>2};this._currentPlacementIndex>=0;){var S=s[n[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=I)&&(!S.maxzoom||S.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new as(S)),this._inProgressLayer.continuePlacement(o[S.source],this.placement,this._showCollisionBoxes,S,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},co.prototype.commit=function(n){return this.placement.commit(n),this.placement};var Ns=512/a.EXTENT/2,Va=function(n,s,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var c=0;c<s.length;c++){var y=s.get(c),w=y.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:y.crossTileID,coord:this.getScaledCoordinates(y,n)})}};Va.prototype.getScaledCoordinates=function(n,s){var o=Ns/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*a.EXTENT+n.anchorX)*o),y:Math.floor((s.canonical.y*a.EXTENT+n.anchorY)*o)}},Va.prototype.findMatches=function(n,s,o){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),y=0;y<n.length;y++){var w=n.get(y);if(!w.crossTileID){var S=this.indexedSymbolInstances[w.key];if(S)for(var I=this.getScaledCoordinates(w,s),C=0,O=S;C<O.length;C+=1){var G=O[C];if(Math.abs(G.coord.x-I.x)<=c&&Math.abs(G.coord.y-I.y)<=c&&!o[G.crossTileID]){o[G.crossTileID]=!0,w.crossTileID=G.crossTileID;break}}}}};var Fn=function(){this.maxCrossTileID=0};Fn.prototype.generate=function(){return++this.maxCrossTileID};var Sa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Sa.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var o in this.indexes){var c=this.indexes[o],y={};for(var w in c){var S=c[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+s),y[S.tileID.key]=S}this.indexes[o]=y}this.lng=n},Sa.prototype.addBucket=function(n,s,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var y=this.usedCrossTileIDs[n.overscaledZ];for(var w in this.indexes){var S=this.indexes[w];if(Number(w)>n.overscaledZ)for(var I in S){var C=S[I];C.tileID.isChildOf(n)&&C.findMatches(s.symbolInstances,n,y)}else{var O=S[n.scaledTo(Number(w)).key];O&&O.findMatches(s.symbolInstances,n,y)}}for(var G=0;G<s.symbolInstances.length;G++){var Z=s.symbolInstances.get(G);Z.crossTileID||(Z.crossTileID=o.generate(),y[Z.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Va(n,s.symbolInstances,s.bucketInstanceId),!0},Sa.prototype.removeBucketCrossTileIDs=function(n,s){for(var o in s.indexedSymbolInstances)for(var c=0,y=s.indexedSymbolInstances[o];c<y.length;c+=1)delete this.usedCrossTileIDs[n][y[c].crossTileID]},Sa.prototype.removeStaleBuckets=function(n){var s=!1;for(var o in this.indexes){var c=this.indexes[o];for(var y in c)n[c[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,c[y]),delete c[y],s=!0)}return s};var _e=function(){this.layerIndexes={},this.crossTileIDs=new Fn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};_e.prototype.addLayer=function(n,s,o){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new Sa);var y=!1,w={};c.handleWrapJump(o);for(var S=0,I=s;S<I.length;S+=1){var C=I[S],O=C.getBucket(n);O&&n.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(C.tileID,O,this.crossTileIDs)&&(y=!0),w[O.bucketInstanceId]=!0)}return c.removeStaleBuckets(w)&&(y=!0),y},_e.prototype.pruneUnusedLayers=function(n){var s={};for(var o in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var fn=function(n,s){return a.emitValidationErrors(n,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},Kr=a.pick(et,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qi=a.pick(et,["setCenter","setZoom","setBearing","setPitch"]),Ea=function(){var n={},s=a.styleSpec.$version;for(var o in a.styleSpec.$root){var c,y=a.styleSpec.$root[o];y.required&&(c=o==="version"?s:y.type==="array"?[]:{})!=null&&(n[o]=c)}return n}(),On=function(n){function s(o,c){var y=this;c===void 0&&(c={}),n.call(this),this.map=o,this.dispatcher=new lt(ke(),this),this.imageManager=new ge,this.imageManager.setEventedParent(this),this.glyphManager=new Ge(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new je(256,512),this.crossTileSymbolIndex=new _e,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var w=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(S){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},function(I,C){if(a.triggerPluginCompletionEvent(I),C&&C.every(function(G){return G}))for(var O in w.sourceCaches)w.sourceCaches[O].reload()})}),this.on("data",function(S){if(S.dataType==="source"&&S.sourceDataType==="metadata"){var I=y.sourceCaches[S.sourceId];if(I){var C=I.getSource();if(C&&C.vectorLayerIds)for(var O in y._layers){var G=y._layers[O];G.source===C.id&&y._validateLayer(G)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(o,c){var y=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var w=typeof c.validate=="boolean"?c.validate:!a.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,c.accessToken);var S=this.map._requestManager.transformRequest(o,a.ResourceType.Style);this._request=a.getJSON(S,function(I,C){y._request=null,I?y.fire(new a.ErrorEvent(I)):C&&y._load(C,w)})},s.prototype.loadJSON=function(o,c){var y=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){y._request=null,y._load(o,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Ea,!1)},s.prototype._load=function(o,c){if(!c||!fn(this,a.validateStyle(o))){for(var y in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(y,o.sources[y],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var w=Ye(this.stylesheet.layers);this._order=w.map(function(O){return O.id}),this._layers={},this._serializedLayers={};for(var S=0,I=w;S<I.length;S+=1){var C=I[S];(C=a.createStyleLayer(C)).setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Pe(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},s.prototype._loadSprite=function(o){var c=this;this._spriteRequest=function(y,w,S){var I,C,O,G=a.browser.devicePixelRatio>1?"@2x":"",Z=a.getJSON(w.transformRequest(w.normalizeSpriteURL(y,G,".json"),a.ResourceType.SpriteJSON),function(ie,ce){Z=null,O||(O=ie,I=ce,re())}),H=a.getImage(w.transformRequest(w.normalizeSpriteURL(y,G,".png"),a.ResourceType.SpriteImage),function(ie,ce){H=null,O||(O=ie,C=ce,re())});function re(){if(O)S(O);else if(I&&C){var ie=a.browser.getImageData(C),ce={};for(var J in I){var ue=I[J],de=ue.width,ve=ue.height,Te=ue.x,Ee=ue.y,Ie=ue.sdf,Ve=ue.pixelRatio,Je=ue.stretchX,Xe=ue.stretchY,ft=ue.content,Tt=new a.RGBAImage({width:de,height:ve});a.RGBAImage.copy(ie,Tt,{x:Te,y:Ee},{x:0,y:0},{width:de,height:ve}),ce[J]={data:Tt,pixelRatio:Ve,sdf:Ie,stretchX:Je,stretchY:Xe,content:ft}}S(null,ce)}}return{cancel:function(){Z&&(Z.cancel(),Z=null),H&&(H.cancel(),H=null)}}}(o,this.map._requestManager,function(y,w){if(c._spriteRequest=null,y)c.fire(new a.ErrorEvent(y));else if(w)for(var S in w)c.imageManager.addImage(S,w[S]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new a.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var c=this.sourceCaches[o.source];if(c){var y=o.sourceLayer;if(y){var w=c.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(y)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+y+'" does not exist on source "'+w.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var c=[],y=0,w=o;y<w.length;y+=1){var S=this._layers[w[y]];S.type!=="custom"&&c.push(S.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var c=this._changed;if(this._changed){var y=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var S in(y.length||w.length)&&this._updateWorkerLayers(y,w),this._updatedSources){var I=this._updatedSources[S];I==="reload"?this._reloadSource(S):I==="clear"&&this._clearSource(S)}for(var C in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[C].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var O={};for(var G in this.sourceCaches){var Z=this.sourceCaches[G];O[G]=Z.used,Z.used=!1}for(var H=0,re=this._order;H<re.length;H+=1){var ie=this._layers[re[H]];ie.recalculate(o,this._availableImages),!ie.isHidden(o.zoom)&&ie.source&&(this.sourceCaches[ie.source].used=!0)}for(var ce in O){var J=this.sourceCaches[ce];O[ce]!==J.used&&J.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ce}))}this.light.recalculate(o),this.z=o.zoom,c&&this.fire(new a.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var c=this;if(this._checkLoaded(),fn(this,a.validateStyle(o)))return!1;(o=a.clone$1(o)).layers=Ye(o.layers);var y=function(S,I){if(!S)return[{command:et.setStyle,args:[I]}];var C=[];try{if(!a.deepEqual(S.version,I.version))return[{command:et.setStyle,args:[I]}];a.deepEqual(S.center,I.center)||C.push({command:et.setCenter,args:[I.center]}),a.deepEqual(S.zoom,I.zoom)||C.push({command:et.setZoom,args:[I.zoom]}),a.deepEqual(S.bearing,I.bearing)||C.push({command:et.setBearing,args:[I.bearing]}),a.deepEqual(S.pitch,I.pitch)||C.push({command:et.setPitch,args:[I.pitch]}),a.deepEqual(S.sprite,I.sprite)||C.push({command:et.setSprite,args:[I.sprite]}),a.deepEqual(S.glyphs,I.glyphs)||C.push({command:et.setGlyphs,args:[I.glyphs]}),a.deepEqual(S.transition,I.transition)||C.push({command:et.setTransition,args:[I.transition]}),a.deepEqual(S.light,I.light)||C.push({command:et.setLight,args:[I.light]});var O={},G=[];(function(H,re,ie,ce){var J;for(J in re=re||{},H=H||{})H.hasOwnProperty(J)&&(re.hasOwnProperty(J)||nt(J,ie,ce));for(J in re)re.hasOwnProperty(J)&&(H.hasOwnProperty(J)?a.deepEqual(H[J],re[J])||(H[J].type==="geojson"&&re[J].type==="geojson"&&jt(H,re,J)?ie.push({command:et.setGeoJSONSourceData,args:[J,re[J].data]}):Yt(J,re,ie,ce)):qt(J,re,ie))})(S.sources,I.sources,G,O);var Z=[];S.layers&&S.layers.forEach(function(H){O[H.source]?C.push({command:et.removeLayer,args:[H.id]}):Z.push(H)}),C=C.concat(G),function(H,re,ie){re=re||[];var ce,J,ue,de,ve,Te,Ee,Ie=(H=H||[]).map(oi),Ve=re.map(oi),Je=H.reduce(ei,{}),Xe=re.reduce(ei,{}),ft=Ie.slice(),Tt=Object.create(null);for(ce=0,J=0;ce<Ie.length;ce++)Xe.hasOwnProperty(ue=Ie[ce])?J++:(ie.push({command:et.removeLayer,args:[ue]}),ft.splice(ft.indexOf(ue,J),1));for(ce=0,J=0;ce<Ve.length;ce++)ft[ft.length-1-ce]!==(ue=Ve[Ve.length-1-ce])&&(Je.hasOwnProperty(ue)?(ie.push({command:et.removeLayer,args:[ue]}),ft.splice(ft.lastIndexOf(ue,ft.length-J),1)):J++,ie.push({command:et.addLayer,args:[Xe[ue],Te=ft[ft.length-ce]]}),ft.splice(ft.length-ce,0,ue),Tt[ue]=!0);for(ce=0;ce<Ve.length;ce++)if(de=Je[ue=Ve[ce]],ve=Xe[ue],!Tt[ue]&&!a.deepEqual(de,ve))if(a.deepEqual(de.source,ve.source)&&a.deepEqual(de["source-layer"],ve["source-layer"])&&a.deepEqual(de.type,ve.type)){for(Ee in Ht(de.layout,ve.layout,ie,ue,null,et.setLayoutProperty),Ht(de.paint,ve.paint,ie,ue,null,et.setPaintProperty),a.deepEqual(de.filter,ve.filter)||ie.push({command:et.setFilter,args:[ue,ve.filter]}),a.deepEqual(de.minzoom,ve.minzoom)&&a.deepEqual(de.maxzoom,ve.maxzoom)||ie.push({command:et.setLayerZoomRange,args:[ue,ve.minzoom,ve.maxzoom]}),de)de.hasOwnProperty(Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Ht(de[Ee],ve[Ee],ie,ue,Ee.slice(6),et.setPaintProperty):a.deepEqual(de[Ee],ve[Ee])||ie.push({command:et.setLayerProperty,args:[ue,Ee,ve[Ee]]}));for(Ee in ve)ve.hasOwnProperty(Ee)&&!de.hasOwnProperty(Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Ht(de[Ee],ve[Ee],ie,ue,Ee.slice(6),et.setPaintProperty):a.deepEqual(de[Ee],ve[Ee])||ie.push({command:et.setLayerProperty,args:[ue,Ee,ve[Ee]]}))}else ie.push({command:et.removeLayer,args:[ue]}),Te=ft[ft.lastIndexOf(ue)+1],ie.push({command:et.addLayer,args:[ve,Te]})}(Z,I.layers,C)}catch(H){console.warn("Unable to compute style diff:",H),C=[{command:et.setStyle,args:[I]}]}return C}(this.serialize(),o).filter(function(S){return!(S.command in qi)});if(y.length===0)return!1;var w=y.filter(function(S){return!(S.command in Kr)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(S){return S.command}).join(", ")+".");return y.forEach(function(S){S.command!=="setTransition"&&c[S.command].apply(c,S.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,c){if(this.getImage(o))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,c),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,c){this.imageManager.updateImage(o,c)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,c,y){var w=this;if(y===void 0&&(y={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.validateStyle.source,"sources."+o,c,null,y))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var S=this.sourceCaches[o]=new ee(o,c,this.dispatcher);S.style=this,S.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:S.serialize(),sourceId:o}}),S.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===o)return this.fire(new a.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+c+'" is using it.')));var y=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],y.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),y.setEventedParent(null),y.clearTiles(),y.onRemove&&y.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,c){this._checkLoaded(),this.sourceCaches[o].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,c,y){y===void 0&&(y={}),this._checkLoaded();var w=o.id;if(this.getLayer(w))this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var S;if(o.type==="custom"){if(fn(this,a.validateCustomStyleLayer(o)))return;S=a.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(w,o.source),o=a.clone$1(o),o=a.extend(o,{source:w})),this._validate(a.validateStyle.layer,"layers."+w,o,{arrayIndex:-1},y))return;S=a.createStyleLayer(o),this._validateLayer(S),S.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[S.id]=S.serialize()}var I=c?this._order.indexOf(c):this._order.length;if(c&&I===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(I,0,w),this._layerOrderChanged=!0,this._layers[w]=S,this._removedLayers[w]&&S.source&&S.type!=="custom"){var C=this._removedLayers[w];delete this._removedLayers[w],C.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}},s.prototype.moveLayer=function(o,c){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==c){var y=this._order.indexOf(o);this._order.splice(y,1);var w=c?this._order.indexOf(c):this._order.length;c&&w===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(w,0,o),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var c=this._layers[o];if(c){c.setEventedParent(null);var y=this._order.indexOf(o);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,c,y){this._checkLoaded();var w=this.getLayer(o);w?w.minzoom===c&&w.maxzoom===y||(c!=null&&(w.minzoom=c),y!=null&&(w.maxzoom=y),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,c,y){y===void 0&&(y={}),this._checkLoaded();var w=this.getLayer(o);if(w){if(!a.deepEqual(w.filter,c))return c==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(a.validateStyle.filter,"layers."+w.id+".filter",c,null,y)||(w.filter=a.clone$1(c),this._updateLayer(w)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return a.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,c,y,w){w===void 0&&(w={}),this._checkLoaded();var S=this.getLayer(o);S?a.deepEqual(S.getLayoutProperty(c),y)||(S.setLayoutProperty(c,y,w),this._updateLayer(S)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,c){var y=this.getLayer(o);if(y)return y.getLayoutProperty(c);this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,c,y,w){w===void 0&&(w={}),this._checkLoaded();var S=this.getLayer(o);S?a.deepEqual(S.getPaintProperty(c),y)||(S.setPaintProperty(c,y,w)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,c){return this.getLayer(o).getPaintProperty(c)},s.prototype.setFeatureState=function(o,c){this._checkLoaded();var y=o.source,w=o.sourceLayer,S=this.sourceCaches[y];if(S!==void 0){var I=S.getSource().type;I==="geojson"&&w?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||w?(o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),S.setFeatureState(w,o.id,c)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+y+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,c){this._checkLoaded();var y=o.source,w=this.sourceCaches[y];if(w!==void 0){var S=w.getSource().type,I=S==="vector"?o.sourceLayer:void 0;S!=="vector"||I?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(I,o.id,c):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+y+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var c=o.source,y=o.sourceLayer,w=this.sourceCaches[c];if(w!==void 0){if(w.getSource().type!=="vector"||y)return o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(y,o.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var c=this,y=function(Je){return c._layers[Je].type==="fill-extrusion"},w={},S=[],I=this._order.length-1;I>=0;I--){var C=this._order[I];if(y(C)){w[C]=I;for(var O=0,G=o;O<G.length;O+=1){var Z=G[O][C];if(Z)for(var H=0,re=Z;H<re.length;H+=1)S.push(re[H])}}}S.sort(function(Je,Xe){return Xe.intersectionZ-Je.intersectionZ});for(var ie=[],ce=this._order.length-1;ce>=0;ce--){var J=this._order[ce];if(y(J))for(var ue=S.length-1;ue>=0;ue--){var de=S[ue].feature;if(w[de.layer.id]<ce)break;ie.push(de),S.pop()}else for(var ve=0,Te=o;ve<Te.length;ve+=1){var Ee=Te[ve][J];if(Ee)for(var Ie=0,Ve=Ee;Ie<Ve.length;Ie+=1)ie.push(Ve[Ie].feature)}}return ie},s.prototype.queryRenderedFeatures=function(o,c,y){c&&c.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var w={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var S=0,I=c.layers;S<I.length;S+=1){var C=I[S],O=this._layers[C];if(!O)return this.fire(new a.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be queried for features."))),[];w[O.source]=!0}}var G=[];for(var Z in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!w[Z]||G.push(Oi(this.sourceCaches[Z],this._layers,this._serializedLayers,o,c,y));return this.placement&&G.push(function(H,re,ie,ce,J,ue,de){for(var ve={},Te=ue.queryRenderedSymbols(ce),Ee=[],Ie=0,Ve=Object.keys(Te).map(Number);Ie<Ve.length;Ie+=1)Ee.push(de[Ve[Ie]]);Ee.sort(yn);for(var Je=function(){var Ct=ft[Xe],mi=Ct.featureIndex.lookupSymbolFeatures(Te[Ct.bucketInstanceId],re,Ct.bucketIndex,Ct.sourceLayerIndex,J.filter,J.layers,J.availableImages,H);for(var dt in mi){var Vt=ve[dt]=ve[dt]||[],Jt=mi[dt];Jt.sort(function(Wt,Ft){var Rt=Ct.featureSortOrder;if(Rt){var Fr=Rt.indexOf(Wt.featureIndex);return Rt.indexOf(Ft.featureIndex)-Fr}return Ft.featureIndex-Wt.featureIndex});for(var Ut=0,Ot=Jt;Ut<Ot.length;Ut+=1)Vt.push(Ot[Ut])}},Xe=0,ft=Ee;Xe<ft.length;Xe+=1)Je();var Tt=function(Ct){ve[Ct].forEach(function(mi){var dt=mi.feature,Vt=ie[H[Ct].source].getFeatureState(dt.layer["source-layer"],dt.id);dt.source=dt.layer.source,dt.layer["source-layer"]&&(dt.sourceLayer=dt.layer["source-layer"]),dt.state=Vt})};for(var Mt in ve)Tt(Mt);return ve}(this._layers,this._serializedLayers,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(G)},s.prototype.querySourceFeatures=function(o,c){c&&c.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var y=this.sourceCaches[o];return y?function(w,S){for(var I=w.getRenderableIds().map(function(re){return w.getTileByID(re)}),C=[],O={},G=0;G<I.length;G++){var Z=I[G],H=Z.tileID.canonical.key;O[H]||(O[H]=!0,Z.querySourceFeatures(C,S))}return C}(y,c):[]},s.prototype.addSourceType=function(o,c,y){return s.getSourceType(o)?y(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},y):y(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,c){c===void 0&&(c={}),this._checkLoaded();var y=this.light.getLight(),w=!1;for(var S in o)if(!a.deepEqual(o[S],y[S])){w=!0;break}if(w){var I={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(I)}},s.prototype._validate=function(o,c,y,w,S){return S===void 0&&(S={}),(!S||S.validate!==!1)&&fn(this,o.call(a.validateStyle,a.extend({key:c,style:this.serialize(),value:y,styleSpec:a.styleSpec},w)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var c in this.sourceCaches)this.sourceCaches[c].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,c,y,w,S){S===void 0&&(S=!1);for(var I=!1,C=!1,O={},G=0,Z=this._order;G<Z.length;G+=1){var H=this._layers[Z[G]];if(H.type==="symbol"){if(!O[H.source]){var re=this.sourceCaches[H.source];O[H.source]=re.getRenderableIds(!0).map(function(de){return re.getTileByID(de)}).sort(function(de,ve){return ve.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(ve.tileID)?-1:1)})}var ie=this.crossTileSymbolIndex.addLayer(H,O[H.source],o.center.lng);I=I||ie}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),o.zoom))&&(this.pauseablePlacement=new co(o,this._order,S,c,y,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),C=!0),I&&this.pauseablePlacement.placement.setStale()),C||I)for(var ce=0,J=this._order;ce<J.length;ce+=1){var ue=this._layers[J[ce]];ue.type==="symbol"&&this.placement.updateLayerOpacities(ue,O[ue.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,c,y){this.imageManager.getImages(c.icons,y),this._updateTilesForChangedImages();var w=this.sourceCaches[c.source];w&&w.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(o,c,y){this.glyphManager.getGlyphs(c.stacks,y)},s.prototype.getResource=function(o,c,y){return a.makeRequest(c,y)},s}(a.Evented);On.getSourceType=function(n){return nr[n]},On.setSourceType=function(n,s){nr[n]=s},On.registerForPluginStateChange=a.registerForPluginStateChange;var _r=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Fo=Mi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ec=Mi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rp=Mi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Bp=Mi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Ul=Mi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Vl=Mi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ql=Mi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),jl=Mi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),tc=Mi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ic=Mi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Fp=Mi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),os=Mi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ss=Mi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),rc=Mi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),rn=Mi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Gl=Mi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),qa=Mi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ja=Mi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),po=Mi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ho=Mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ga=Mi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),fo=Mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),mo=Mi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Za=Mi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),nc=Mi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ac=Mi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Mi(n,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),y=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=w?w.concat(y):y,I={};return{fragmentSource:n=n.replace(o,function(C,O,G,Z,H){return I[H]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
varying `+G+" "+Z+" "+H+`;
#else
uniform `+G+" "+Z+" u_"+H+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+H+`
    `+G+" "+Z+" "+H+" = u_"+H+`;
#endif
`}),vertexSource:s=s.replace(o,function(C,O,G,Z,H){var re=Z==="float"?"vec2":"vec4",ie=H.match(/color/)?"color":re;return I[H]?O==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
uniform lowp float u_`+H+`_t;
attribute `+G+" "+re+" a_"+H+`;
varying `+G+" "+Z+" "+H+`;
#else
uniform `+G+" "+Z+" u_"+H+`;
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_`+H+`
    `+H+" = a_"+H+`;
#else
    `+G+" "+Z+" "+H+" = u_"+H+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+H+`
    `+H+" = unpack_mix_"+ie+"(a_"+H+", u_"+H+`_t);
#else
    `+G+" "+Z+" "+H+" = u_"+H+`;
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_`+H+`
uniform lowp float u_`+H+`_t;
attribute `+G+" "+re+" a_"+H+`;
#else
uniform `+G+" "+Z+" u_"+H+`;
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_`+H+`
    `+G+" "+Z+" "+H+" = a_"+H+`;
#else
    `+G+" "+Z+" "+H+" = u_"+H+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+H+`
    `+G+" "+Z+" "+H+" = unpack_mix_"+ie+"(a_"+H+", u_"+H+`_t);
#else
    `+G+" "+Z+" "+H+" = u_"+H+`;
#endif
`}),staticAttributes:c,staticUniforms:S}}var Op=Object.freeze({__proto__:null,prelude:Fo,background:ec,backgroundPattern:Rp,circle:Bp,clippingMask:Ul,heatmap:Vl,heatmapTexture:ql,collisionBox:jl,collisionCircle:tc,debug:ic,fill:Fp,fillOutline:os,fillOutlinePattern:ss,fillPattern:rc,fillExtrusion:rn,fillExtrusionPattern:Gl,hillshadePrepare:qa,hillshade:ja,line:po,lineGradient:ho,linePattern:Ga,lineSDF:fo,raster:mo,symbolIcon:Za,symbolSDF:nc,symbolTextAndIcon:ac}),Us=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function oc(n){for(var s=[],o=0;o<n.length;o++)if(n[o]!==null){var c=n[o].split(" ");s.push(c.pop())}return s}Us.prototype.bind=function(n,s,o,c,y,w,S,I){this.context=n;for(var C=this.boundPaintVertexBuffers.length!==c.length,O=0;!C&&O<c.length;O++)this.boundPaintVertexBuffers[O]!==c[O]&&(C=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!C&&this.boundIndexBuffer===y&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===I?(n.bindVertexArrayOES.set(this.vao),S&&S.bind(),y&&y.dynamicDraw&&y.bind(),I&&I.bind()):this.freshBind(s,o,c,y,w,S,I)},Us.prototype.freshBind=function(n,s,o,c,y,w,S){var I,C=n.numAttributes,O=this.context,G=O.gl;if(O.extVertexArrayObject)this.vao&&this.destroy(),this.vao=O.extVertexArrayObject.createVertexArrayOES(),O.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=c,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=S;else{I=O.currentNumAttributes||0;for(var Z=C;Z<I;Z++)G.disableVertexAttribArray(Z)}s.enableAttributes(G,n);for(var H=0,re=o;H<re.length;H+=1)re[H].enableAttributes(G,n);w&&w.enableAttributes(G,n),S&&S.enableAttributes(G,n),s.bind(),s.setVertexAttribPointers(G,n,y);for(var ie=0,ce=o;ie<ce.length;ie+=1){var J=ce[ie];J.bind(),J.setVertexAttribPointers(G,n,y)}w&&(w.bind(),w.setVertexAttribPointers(G,n,y)),c&&c.bind(),S&&(S.bind(),S.setVertexAttribPointers(G,n,y)),O.currentNumAttributes=C},Us.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var sc=function(n,s,o,c,y,w){var S=n.gl;this.program=S.createProgram();for(var I=oc(o.staticAttributes),C=c?c.getBinderAttributes():[],O=I.concat(C),G=o.staticUniforms?oc(o.staticUniforms):[],Z=c?c.getBinderUniforms():[],H=[],re=0,ie=G.concat(Z);re<ie.length;re+=1){var ce=ie[re];H.indexOf(ce)<0&&H.push(ce)}var J=c?c.defines():[];w&&J.push("#define OVERDRAW_INSPECTOR;");var ue=J.concat(Fo.fragmentSource,o.fragmentSource).join(`
`),de=J.concat(Fo.vertexSource,o.vertexSource).join(`
`),ve=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(ve,ue),S.compileShader(ve),S.attachShader(this.program,ve);var Te=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(Te,de),S.compileShader(Te),S.attachShader(this.program,Te),this.attributes={};var Ee={};this.numAttributes=O.length;for(var Ie=0;Ie<this.numAttributes;Ie++)O[Ie]&&(S.bindAttribLocation(this.program,Ie,O[Ie]),this.attributes[O[Ie]]=Ie);S.linkProgram(this.program),S.deleteShader(Te),S.deleteShader(ve);for(var Ve=0;Ve<H.length;Ve++){var Je=H[Ve];if(Je&&!Ee[Je]){var Xe=S.getUniformLocation(this.program,Je);Xe&&(Ee[Je]=Xe)}}this.fixedUniforms=y(n,Ee),this.binderUniforms=c?c.getUniforms(n,Ee):[]}}};function lc(n,s,o){var c=1/Pi(o,1,s.transform.tileZoom),y=Math.pow(2,o.tileID.overscaledZ),w=o.tileSize*Math.pow(2,s.transform.tileZoom)/y,S=w*(o.tileID.canonical.x+o.tileID.wrap*y),I=w*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[S>>16,I>>16],u_pixel_coord_lower:[65535&S,65535&I]}}sc.prototype.draw=function(n,s,o,c,y,w,S,I,C,O,G,Z,H,re,ie,ce){var J,ue=n.gl;if(!this.failedToCreate){for(var de in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(c),n.setColorMode(y),n.setCullFace(w),this.fixedUniforms)this.fixedUniforms[de].set(S[de]);re&&re.setUniforms(n,this.binderUniforms,Z,{zoom:H});for(var ve=(J={},J[ue.LINES]=2,J[ue.TRIANGLES]=3,J[ue.LINE_STRIP]=1,J)[s],Te=0,Ee=G.get();Te<Ee.length;Te+=1){var Ie=Ee[Te],Ve=Ie.vaos||(Ie.vaos={});(Ve[I]||(Ve[I]=new Us)).bind(n,this,C,re?re.getPaintVertexBuffers():[],O,Ie.vertexOffset,ie,ce),ue.drawElements(s,Ie.primitiveLength*ve,ue.UNSIGNED_SHORT,Ie.primitiveOffset*ve*2)}}};var uc=function(n,s,o,c){var y=s.style.light,w=y.properties.get("position"),S=[w.x,w.y,w.z],I=a.create$1();y.properties.get("anchor")==="viewport"&&a.fromRotation(I,-s.transform.angle),a.transformMat3(S,S,I);var C=y.properties.get("color");return{u_matrix:n,u_lightpos:S,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+o,u_opacity:c}},go=function(n,s,o,c,y,w,S){return a.extend(uc(n,s,o,c),lc(w,s,S),{u_height_factor:-Math.pow(2,y.overscaledZ)/S.tileSize/8})},Ka=function(n){return{u_matrix:n}},yo=function(n,s,o,c){return a.extend(Ka(n),lc(o,s,c))},cc=function(n,s){return{u_matrix:n,u_world:s}},pc=function(n,s,o,c,y){return a.extend(yo(n,s,o,c),{u_world:y})},Zl=function(n,s,o,c){var y,w,S=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var I=Pi(o,1,S.zoom);y=!0,w=[I,I]}else y=!1,w=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:w}},_o=function(n,s,o){var c=Pi(o,1,s.zoom),y=Math.pow(2,s.zoom-o.tileID.overscaledZ),w=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*y),s.pixelsToGLUnits[1]/(c*y)],u_overscale_factor:w}},hc=function(n,s,o){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},vo=function(n,s,o){return o===void 0&&(o=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:o}},bo=function(n){return{u_matrix:n}},fc=function(n,s,o,c){return{u_matrix:n,u_extrude_scale:Pi(s,1,o),u_intensity:c}},ls=function(n,s,o){var c=n.transform;return{u_matrix:dc(n,s,o),u_ratio:1/Pi(s,1,c.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Ri=function(n,s,o,c){return a.extend(ls(n,s,o),{u_image:0,u_image_height:c})},Vs=function(n,s,o,c){var y=n.transform,w=Oo(s,y);return{u_matrix:dc(n,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Pi(s,1,y.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Np=function(n,s,o,c,y){var w=n.lineAtlas,S=Oo(s,n.transform),I=o.layout.get("line-cap")==="round",C=w.getDash(c.from,I),O=w.getDash(c.to,I),G=C.width*y.fromScale,Z=O.width*y.toScale;return a.extend(ls(n,s,o),{u_patternscale_a:[S/G,-C.height/2],u_patternscale_b:[S/Z,-O.height/2],u_sdfgamma:w.width/(256*Math.min(G,Z)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:C.y,u_tex_y_b:O.y,u_mix:y.t})};function Oo(n,s){return 1/Pi(n,1,s.tileZoom)}function dc(n,s,o){return n.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Up=function(n,s,o,c,y){return{u_matrix:n,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(S=y.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(w=y.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:mc(y.paint.get("raster-hue-rotate"))};var w,S};function mc(n){n*=Math.PI/180;var s=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var qs,No=function(n,s,o,c,y,w,S,I,C,O){var G=y.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:G.width/G.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:S,u_coord_matrix:I,u_is_text:+C,u_pitch_with_map:+c,u_texsize:O,u_texture:0}},us=function(n,s,o,c,y,w,S,I,C,O,G){var Z=y.transform;return a.extend(No(n,s,o,c,y,w,S,I,C,O),{u_gamma_scale:c?Math.cos(Z._pitch)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+G})},js=function(n,s,o,c,y,w,S,I,C,O){return a.extend(us(n,s,o,c,y,w,S,I,!0,C,!0),{u_texsize_icon:O,u_texture_icon:1})},cs=function(n,s,o){return{u_matrix:n,u_opacity:s,u_color:o}},Uo=function(n,s,o,c,y,w){return a.extend(function(S,I,C,O){var G=C.imageManager.getPattern(S.from.toString()),Z=C.imageManager.getPattern(S.to.toString()),H=C.imageManager.getPixelSize(),re=H.width,ie=H.height,ce=Math.pow(2,O.tileID.overscaledZ),J=O.tileSize*Math.pow(2,C.transform.tileZoom)/ce,ue=J*(O.tileID.canonical.x+O.tileID.wrap*ce),de=J*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:Z.tl,u_pattern_br_b:Z.br,u_texsize:[re,ie],u_mix:I.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:Z.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Pi(O,1,C.transform.tileZoom),u_pixel_coord_upper:[ue>>16,de>>16],u_pixel_coord_lower:[65535&ue,65535&de]}}(c,w,o,y),{u_matrix:n,u_opacity:s})},gc={fillExtrusion:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new a.Uniform1f(n,s.u_height_factor),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new a.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new a.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new a.UniformColor(n,s.u_color),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_overlay:new a.Uniform1i(n,s.u_overlay),u_overlay_scale:new a.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new a.Uniform1f(n,s.u_extrude_scale),u_intensity:new a.Uniform1f(n,s.u_intensity),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_color_ramp:new a.Uniform1i(n,s.u_color_ramp),u_opacity:new a.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_latrange:new a.Uniform2f(n,s.u_latrange),u_light:new a.Uniform2f(n,s.u_light),u_shadow:new a.UniformColor(n,s.u_shadow),u_highlight:new a.UniformColor(n,s.u_highlight),u_accent:new a.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_dimension:new a.Uniform2f(n,s.u_dimension),u_zoom:new a.Uniform1f(n,s.u_zoom),u_unpack:new a.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_image:new a.Uniform1i(n,s.u_image),u_image_height:new a.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_texsize:new a.Uniform2f(n,s.u_texsize),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_image:new a.Uniform1i(n,s.u_image),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new a.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new a.Uniform1f(n,s.u_sdfgamma),u_image:new a.Uniform1i(n,s.u_image),u_tex_y_a:new a.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new a.Uniform1f(n,s.u_tex_y_b),u_mix:new a.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new a.Uniform2f(n,s.u_tl_parent),u_scale_parent:new a.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new a.Uniform1f(n,s.u_buffer_scale),u_fade_t:new a.Uniform1f(n,s.u_fade_t),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image0:new a.Uniform1i(n,s.u_image0),u_image1:new a.Uniform1i(n,s.u_image1),u_brightness_low:new a.Uniform1f(n,s.u_brightness_low),u_brightness_high:new a.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new a.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new a.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new a.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texsize_icon:new a.Uniform2f(n,s.u_texsize_icon),u_texture:new a.Uniform1i(n,s.u_texture),u_texture_icon:new a.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_color:new a.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image:new a.Uniform1i(n,s.u_image),u_pattern_tl_a:new a.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(n,s.u_pattern_br_b),u_texsize:new a.Uniform2f(n,s.u_texsize),u_mix:new a.Uniform1f(n,s.u_mix),u_pattern_size_a:new a.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new a.Uniform1f(n,s.u_scale_a),u_scale_b:new a.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(n,s.u_tile_units_to_pixels)}}};function Vo(n,s,o,c,y,w,S){for(var I=n.context,C=I.gl,O=n.useProgram("collisionBox"),G=[],Z=0,H=0,re=0;re<c.length;re++){var ie=c[re],ce=s.getTile(ie),J=ce.getBucket(o);if(J){var ue=ie.posMatrix;y[0]===0&&y[1]===0||(ue=n.translatePosMatrix(ie.posMatrix,ce,y,w));var de=S?J.textCollisionBox:J.iconCollisionBox,ve=J.collisionCircleArray;if(ve.length>0){var Te=a.create(),Ee=ue;a.mul(Te,J.placementInvProjMatrix,n.transform.glCoordMatrix),a.mul(Te,Te,J.placementViewportMatrix),G.push({circleArray:ve,circleOffset:H,transform:Ee,invTransform:Te}),H=Z+=ve.length/4}de&&O.draw(I,C.LINES,K.disabled,Q.disabled,n.colorModeForRenderPass(),fe.disabled,_o(ue,n.transform,ce),o.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,null,n.transform.zoom,null,null,de.collisionVertexBuffer)}}if(S&&G.length){var Ie=n.useProgram("collisionCircle"),Ve=new a.StructArrayLayout2f1f2i16;Ve.resize(4*Z),Ve._trim();for(var Je=0,Xe=0,ft=G;Xe<ft.length;Xe+=1)for(var Tt=ft[Xe],Mt=0;Mt<Tt.circleArray.length/4;Mt++){var Ct=4*Mt,mi=Tt.circleArray[Ct+0],dt=Tt.circleArray[Ct+1],Vt=Tt.circleArray[Ct+2],Jt=Tt.circleArray[Ct+3];Ve.emplace(Je++,mi,dt,Vt,Jt,0),Ve.emplace(Je++,mi,dt,Vt,Jt,1),Ve.emplace(Je++,mi,dt,Vt,Jt,2),Ve.emplace(Je++,mi,dt,Vt,Jt,3)}(!qs||qs.length<2*Z)&&(qs=function(tr){var dn=2*tr,Wr=new a.StructArrayLayout3ui6;Wr.resize(dn),Wr._trim();for(var Yi=0;Yi<dn;Yi++){var ur=6*Yi;Wr.uint16[ur+0]=4*Yi+0,Wr.uint16[ur+1]=4*Yi+1,Wr.uint16[ur+2]=4*Yi+2,Wr.uint16[ur+3]=4*Yi+2,Wr.uint16[ur+4]=4*Yi+3,Wr.uint16[ur+5]=4*Yi+0}return Wr}(Z));for(var Ut=I.createIndexBuffer(qs,!0),Ot=I.createVertexBuffer(Ve,a.collisionCircleLayout.members,!0),Wt=0,Ft=G;Wt<Ft.length;Wt+=1){var Rt=Ft[Wt],Fr=hc(Rt.transform,Rt.invTransform,n.transform);Ie.draw(I,C.TRIANGLES,K.disabled,Q.disabled,n.colorModeForRenderPass(),fe.disabled,Fr,o.id,Ot,Ut,a.SegmentVector.simpleSegment(0,2*Rt.circleOffset,Rt.circleArray.length,Rt.circleArray.length/2),null,n.transform.zoom,null,null,null)}Ot.destroy(),Ut.destroy()}}var fa=a.identity(new Float32Array(16));function yc(n,s,o,c,y,w){var S=a.getAnchorAlignment(n),I=-(S.horizontalAlign-.5)*s,C=-(S.verticalAlign-.5)*o,O=a.evaluateVariableOffset(n,c);return new a.Point((I/y+O[0])*w,(C/y+O[1])*w)}function _c(n,s,o,c,y,w,S,I,C,O,G){var Z=n.text.placedSymbolArray,H=n.text.dynamicLayoutVertexArray,re=n.icon.dynamicLayoutVertexArray,ie={};H.clear();for(var ce=0;ce<Z.length;ce++){var J=Z.get(ce),ue=J.hidden||!J.crossTileID||n.allowVerticalPlacement&&!J.placedOrientation?null:c[J.crossTileID];if(ue){var de=new a.Point(J.anchorX,J.anchorY),ve=Qt(de,o?I:S),Te=si(w.cameraToCenterDistance,ve.signedDistanceFromCamera),Ee=y.evaluateSizeForFeature(n.textSizeData,O,J)*Te/a.ONE_EM;o&&(Ee*=n.tilePixelRatio/C);for(var Ie=yc(ue.anchor,ue.width,ue.height,ue.textOffset,ue.textBoxScale,Ee),Ve=o?Qt(de.add(Ie),S).point:ve.point.add(s?Ie.rotate(-w.angle):Ie),Je=n.allowVerticalPlacement&&J.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,Xe=0;Xe<J.numGlyphs;Xe++)a.addDynamicAttributes(H,Ve,Je);G&&J.associatedIconIndex>=0&&(ie[J.associatedIconIndex]={shiftedAnchor:Ve,angle:Je})}else Sr(J.numGlyphs,H)}if(G){re.clear();for(var ft=n.icon.placedSymbolArray,Tt=0;Tt<ft.length;Tt++){var Mt=ft.get(Tt);if(Mt.hidden)Sr(Mt.numGlyphs,re);else{var Ct=ie[Tt];if(Ct)for(var mi=0;mi<Mt.numGlyphs;mi++)a.addDynamicAttributes(re,Ct.shiftedAnchor,Ct.angle);else Sr(Mt.numGlyphs,re)}}n.icon.dynamicLayoutVertexBuffer.updateData(re)}n.text.dynamicLayoutVertexBuffer.updateData(H)}function vc(n,s,o){return o.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function xo(n,s,o,c,y,w,S,I,C,O,G,Z){for(var H=n.context,re=H.gl,ie=n.transform,ce=I==="map",J=C==="map",ue=ce&&o.layout.get("symbol-placement")!=="point",de=ce&&!J&&!ue,ve=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Te=!1,Ee=n.depthModeForSublayer(0,K.ReadOnly),Ie=o.layout.get("text-variable-anchor"),Ve=[],Je=0,Xe=c;Je<Xe.length;Je+=1){var ft=Xe[Je],Tt=s.getTile(ft),Mt=Tt.getBucket(o);if(Mt){var Ct=y?Mt.text:Mt.icon;if(Ct&&Ct.segments.get().length){var mi=Ct.programConfigurations.get(o.id),dt=y||Mt.sdfIcons,Vt=y?Mt.textSizeData:Mt.iconSizeData,Jt=J||ie.pitch!==0,Ut=n.useProgram(vc(dt,y,Mt),mi),Ot=a.evaluateSizeForZoom(Vt,ie.zoom),Wt=void 0,Ft=[0,0],Rt=void 0,Fr=void 0,tr=null,dn=void 0;if(y)Rt=Tt.glyphAtlasTexture,Fr=re.LINEAR,Wt=Tt.glyphAtlasTexture.size,Mt.iconsInText&&(Ft=Tt.imageAtlasTexture.size,tr=Tt.imageAtlasTexture,dn=Jt||n.options.rotating||n.options.zooming||Vt.kind==="composite"||Vt.kind==="camera"?re.LINEAR:re.NEAREST);else{var Wr=o.layout.get("icon-size").constantOr(0)!==1||Mt.iconsNeedLinear;Rt=Tt.imageAtlasTexture,Fr=dt||n.options.rotating||n.options.zooming||Wr||Jt?re.LINEAR:re.NEAREST,Wt=Tt.imageAtlasTexture.size}var Yi=Pi(Tt,1,n.transform.zoom),ur=Li(ft.posMatrix,J,ce,n.transform,Yi),Gn=_i(ft.posMatrix,J,ce,n.transform,Yi),wn=Ie&&Mt.hasTextData(),Qa=o.layout.get("icon-text-fit")!=="none"&&wn&&Mt.hasIconData();ue&&ha(Mt,ft.posMatrix,n,y,ur,Gn,J,O);var In=n.translatePosMatrix(ft.posMatrix,Tt,w,S),_a=ue||y&&Ie||Qa?fa:ur,sa=n.translatePosMatrix(Gn,Tt,w,S,!0),ws=dt&&o.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ho={program:Ut,buffers:Ct,uniformValues:dt?Mt.iconsInText?js(Vt.kind,Ot,de,J,n,In,_a,sa,Wt,Ft):us(Vt.kind,Ot,de,J,n,In,_a,sa,y,Wt,!0):No(Vt.kind,Ot,de,J,n,In,_a,sa,y,Wt),atlasTexture:Rt,atlasTextureIcon:tr,atlasInterpolation:Fr,atlasInterpolationIcon:dn,isSDF:dt,hasHalo:ws};if(ve&&Mt.canOverlap){Te=!0;for(var $a=0,Wo=Ct.segments.get();$a<Wo.length;$a+=1){var Ss=Wo[$a];Ve.push({segments:new a.SegmentVector([Ss]),sortKey:Ss.sortKey,state:Ho})}}else Ve.push({segments:Ct.segments,sortKey:0,state:Ho})}}}Te&&Ve.sort(function(eo,To){return eo.sortKey-To.sortKey});for(var Ia=0,Es=Ve;Ia<Es.length;Ia+=1){var Aa=Es[Ia],Or=Aa.state;if(H.activeTexture.set(re.TEXTURE0),Or.atlasTexture.bind(Or.atlasInterpolation,re.CLAMP_TO_EDGE),Or.atlasTextureIcon&&(H.activeTexture.set(re.TEXTURE1),Or.atlasTextureIcon&&Or.atlasTextureIcon.bind(Or.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),Or.isSDF){var La=Or.uniformValues;Or.hasHalo&&(La.u_is_halo=1,ps(Or.buffers,Aa.segments,o,n,Or.program,Ee,G,Z,La)),La.u_is_halo=0}ps(Or.buffers,Aa.segments,o,n,Or.program,Ee,G,Z,Or.uniformValues)}}function ps(n,s,o,c,y,w,S,I,C){var O=c.context;y.draw(O,O.gl.TRIANGLES,w,S,I,fe.disabled,C,o.id,n.layoutVertexBuffer,n.indexBuffer,s,o.paint,c.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Gs(n,s,o,c,y,w,S){var I,C,O,G,Z,H=n.context.gl,re=o.paint.get("fill-pattern"),ie=re&&re.constantOr(1),ce=o.getCrossfadeParameters();S?(C=ie&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",I=H.LINES):(C=ie?"fillPattern":"fill",I=H.TRIANGLES);for(var J=0,ue=c;J<ue.length;J+=1){var de=ue[J],ve=s.getTile(de);if(!ie||ve.patternsLoaded()){var Te=ve.getBucket(o);if(Te){var Ee=Te.programConfigurations.get(o.id),Ie=n.useProgram(C,Ee);ie&&(n.context.activeTexture.set(H.TEXTURE0),ve.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Ee.updatePaintBuffers(ce));var Ve=re.constantOr(null);if(Ve&&ve.imageAtlas){var Je=ve.imageAtlas,Xe=Je.patternPositions[Ve.to.toString()],ft=Je.patternPositions[Ve.from.toString()];Xe&&ft&&Ee.setConstantPatternPositions(Xe,ft)}var Tt=n.translatePosMatrix(de.posMatrix,ve,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(S){G=Te.indexBuffer2,Z=Te.segments2;var Mt=[H.drawingBufferWidth,H.drawingBufferHeight];O=C==="fillOutlinePattern"&&ie?pc(Tt,n,ce,ve,Mt):cc(Tt,Mt)}else G=Te.indexBuffer,Z=Te.segments,O=ie?yo(Tt,n,ce,ve):Ka(Tt);Ie.draw(n.context,I,y,n.stencilModeForClipping(de),w,fe.disabled,O,o.id,Te.layoutVertexBuffer,G,Z,o.paint,n.transform.zoom,Ee)}}}}function Kl(n,s,o,c,y,w,S){for(var I=n.context,C=I.gl,O=o.paint.get("fill-extrusion-pattern"),G=O.constantOr(1),Z=o.getCrossfadeParameters(),H=o.paint.get("fill-extrusion-opacity"),re=0,ie=c;re<ie.length;re+=1){var ce=ie[re],J=s.getTile(ce),ue=J.getBucket(o);if(ue){var de=ue.programConfigurations.get(o.id),ve=n.useProgram(G?"fillExtrusionPattern":"fillExtrusion",de);G&&(n.context.activeTexture.set(C.TEXTURE0),J.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),de.updatePaintBuffers(Z));var Te=O.constantOr(null);if(Te&&J.imageAtlas){var Ee=J.imageAtlas,Ie=Ee.patternPositions[Te.to.toString()],Ve=Ee.patternPositions[Te.from.toString()];Ie&&Ve&&de.setConstantPatternPositions(Ie,Ve)}var Je=n.translatePosMatrix(ce.posMatrix,J,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Xe=o.paint.get("fill-extrusion-vertical-gradient"),ft=G?go(Je,n,Xe,H,ce,Z,J):uc(Je,n,Xe,H);ve.draw(I,I.gl.TRIANGLES,y,w,S,fe.backCCW,ft,o.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,o.paint,n.transform.zoom,de)}}}function Zs(n,s,o,c,y,w){var S=n.context,I=S.gl,C=s.fbo;if(C){var O=n.useProgram("hillshade");S.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,C.colorAttachment.get());var G=function(Z,H,re){var ie=re.paint.get("hillshade-shadow-color"),ce=re.paint.get("hillshade-highlight-color"),J=re.paint.get("hillshade-accent-color"),ue=re.paint.get("hillshade-illumination-direction")*(Math.PI/180);re.paint.get("hillshade-illumination-anchor")==="viewport"&&(ue-=Z.transform.angle);var de,ve,Te,Ee=!Z.options.moving;return{u_matrix:Z.transform.calculatePosMatrix(H.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:(de=H.tileID,ve=Math.pow(2,de.canonical.z),Te=de.canonical.y,[new a.MercatorCoordinate(0,Te/ve).toLngLat().lat,new a.MercatorCoordinate(0,(Te+1)/ve).toLngLat().lat]),u_light:[re.paint.get("hillshade-exaggeration"),ue],u_shadow:ie,u_highlight:ce,u_accent:J}}(n,s,o);O.draw(S,I.TRIANGLES,c,y,w,fe.disabled,G,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function Vp(n,s,o,c,y,w){var S=n.context,I=S.gl,C=s.dem;if(C&&C.data){var O=C.dim,G=C.stride,Z=C.getPixels();if(S.activeTexture.set(I.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(G),s.demTexture){var H=s.demTexture;H.update(Z,{premultiply:!1}),H.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else s.demTexture=new a.Texture(S,Z,I.RGBA,{premultiply:!1}),s.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);S.activeTexture.set(I.TEXTURE0);var re=s.fbo;if(!re){var ie=new a.Texture(S,{width:O,height:O,data:null},I.RGBA);ie.bind(I.LINEAR,I.CLAMP_TO_EDGE),(re=s.fbo=S.createFramebuffer(O,O,!0)).colorAttachment.set(ie.texture)}S.bindFramebuffer.set(re.framebuffer),S.viewport.set([0,0,O,O]),n.useProgram("hillshadePrepare").draw(S,I.TRIANGLES,c,y,w,fe.disabled,function(ce,J){var ue=J.stride,de=a.create();return a.ortho(de,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(de,de,[0,-a.EXTENT,0]),{u_matrix:de,u_image:1,u_dimension:[ue,ue],u_zoom:ce.overscaledZ,u_unpack:J.getUnpackVector()}}(s.tileID,C),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Ks(n,s,o,c,y){var w=c.paint.get("raster-fade-duration");if(w>0){var S=a.browser.now(),I=(S-n.timeAdded)/w,C=s?(S-s.timeAdded)/w:-1,O=o.getSource(),G=y.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),Z=!s||Math.abs(s.tileID.overscaledZ-G)>Math.abs(n.tileID.overscaledZ-G),H=Z&&n.refreshedUponExpiration?1:a.clamp(Z?I:1-C,0,1);return n.refreshedUponExpiration&&I>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}var Hl=new a.Color(1,0,0,1),bc=new a.Color(0,1,0,1),xc=new a.Color(0,0,1,1),Hs=new a.Color(1,0,1,1),Wl=new a.Color(0,1,1,1);function Xl(n,s,o,c){hs(n,0,s+o/2,n.transform.width,o,c)}function Yl(n,s,o,c){hs(n,s-o/2,0,o,n.transform.height,c)}function hs(n,s,o,c,y,w){var S=n.context,I=S.gl;I.enable(I.SCISSOR_TEST),I.scissor(s*a.browser.devicePixelRatio,o*a.browser.devicePixelRatio,c*a.browser.devicePixelRatio,y*a.browser.devicePixelRatio),S.clear({color:w}),I.disable(I.SCISSOR_TEST)}function wc(n,s,o){var c=n.context,y=c.gl,w=o.posMatrix,S=n.useProgram("debug"),I=K.disabled,C=Q.disabled,O=n.colorModeForRenderPass();c.activeTexture.set(y.TEXTURE0),n.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),S.draw(c,y.LINE_STRIP,I,C,O,fe.disabled,vo(w,a.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var G=s.getTileByID(o.key).latestRawTileData,Z=Math.floor((G&&G.byteLength||0)/1024),H=s.getTile(o).tileSize,re=512/Math.min(H,512)*(o.overscaledZ/n.transform.zoom)*.5,ie=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ie+=" => "+o.overscaledZ),function(ce,J){ce.initDebugOverlayCanvas();var ue=ce.debugOverlayCanvas,de=ce.context.gl,ve=ce.debugOverlayCanvas.getContext("2d");ve.clearRect(0,0,ue.width,ue.height),ve.shadowColor="white",ve.shadowBlur=2,ve.lineWidth=1.5,ve.strokeStyle="white",ve.textBaseline="top",ve.font="bold 36px Open Sans, sans-serif",ve.fillText(J,5,5),ve.strokeText(J,5,5),ce.debugOverlayTexture.update(ue),ce.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)}(n,ie+" "+Z+"kb"),S.draw(c,y.TRIANGLES,I,C,le.alphaBlended,fe.disabled,vo(w,a.Color.transparent,re),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var wo={symbol:function(n,s,o,c,y){if(n.renderPass==="translucent"){var w=Q.disabled,S=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(I,C,O,G,Z,H,re){for(var ie=C.transform,ce=Z==="map",J=H==="map",ue=0,de=I;ue<de.length;ue+=1){var ve=de[ue],Te=G.getTile(ve),Ee=Te.getBucket(O);if(Ee&&Ee.text&&Ee.text.segments.get().length){var Ie=a.evaluateSizeForZoom(Ee.textSizeData,ie.zoom),Ve=Pi(Te,1,C.transform.zoom),Je=Li(ve.posMatrix,J,ce,C.transform,Ve),Xe=O.layout.get("icon-text-fit")!=="none"&&Ee.hasIconData();if(Ie){var ft=Math.pow(2,ie.zoom-Te.tileID.overscaledZ);_c(Ee,ce,J,re,a.symbolSize,ie,Je,ve.posMatrix,ft,Ie,Xe)}}}}(c,n,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),y),o.paint.get("icon-opacity").constantOr(1)!==0&&xo(n,s,o,c,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),w,S),o.paint.get("text-opacity").constantOr(1)!==0&&xo(n,s,o,c,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),w,S),s.map.showCollisionBoxes&&(Vo(n,s,o,c,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Vo(n,s,o,c,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,o,c){if(n.renderPass==="translucent"){var y=o.paint.get("circle-opacity"),w=o.paint.get("circle-stroke-width"),S=o.paint.get("circle-stroke-opacity"),I=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(y.constantOr(1)!==0||w.constantOr(1)!==0&&S.constantOr(1)!==0){for(var C=n.context,O=C.gl,G=n.depthModeForSublayer(0,K.ReadOnly),Z=Q.disabled,H=n.colorModeForRenderPass(),re=[],ie=0;ie<c.length;ie++){var ce=c[ie],J=s.getTile(ce),ue=J.getBucket(o);if(ue){var de=ue.programConfigurations.get(o.id),ve={programConfiguration:de,program:n.useProgram("circle",de),layoutVertexBuffer:ue.layoutVertexBuffer,indexBuffer:ue.indexBuffer,uniformValues:Zl(n,ce,J,o)};if(I)for(var Te=0,Ee=ue.segments.get();Te<Ee.length;Te+=1){var Ie=Ee[Te];re.push({segments:new a.SegmentVector([Ie]),sortKey:Ie.sortKey,state:ve})}else re.push({segments:ue.segments,sortKey:0,state:ve})}}I&&re.sort(function(Tt,Mt){return Tt.sortKey-Mt.sortKey});for(var Ve=0,Je=re;Ve<Je.length;Ve+=1){var Xe=Je[Ve],ft=Xe.state;ft.program.draw(C,O.TRIANGLES,G,Z,H,fe.disabled,ft.uniformValues,o.id,ft.layoutVertexBuffer,ft.indexBuffer,Xe.segments,o.paint,n.transform.zoom,ft.programConfiguration)}}}},heatmap:function(n,s,o,c){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var y=n.context,w=y.gl,S=Q.disabled,I=new le([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(re,ie,ce){var J=re.gl;re.activeTexture.set(J.TEXTURE1),re.viewport.set([0,0,ie.width/4,ie.height/4]);var ue=ce.heatmapFbo;if(ue)J.bindTexture(J.TEXTURE_2D,ue.colorAttachment.get()),re.bindFramebuffer.set(ue.framebuffer);else{var de=J.createTexture();J.bindTexture(J.TEXTURE_2D,de),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),ue=ce.heatmapFbo=re.createFramebuffer(ie.width/4,ie.height/4,!1),function(ve,Te,Ee,Ie){var Ve=ve.gl;Ve.texImage2D(Ve.TEXTURE_2D,0,Ve.RGBA,Te.width/4,Te.height/4,0,Ve.RGBA,ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:Ve.UNSIGNED_BYTE,null),Ie.colorAttachment.set(Ee)}(re,ie,de,ue)}})(y,n,o),y.clear({color:a.Color.transparent});for(var C=0;C<c.length;C++){var O=c[C];if(!s.hasRenderableParent(O)){var G=s.getTile(O),Z=G.getBucket(o);if(Z){var H=Z.programConfigurations.get(o.id);n.useProgram("heatmap",H).draw(y,w.TRIANGLES,K.disabled,S,I,fe.disabled,fc(O.posMatrix,G,n.transform.zoom,o.paint.get("heatmap-intensity")),o.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,o.paint,n.transform.zoom,H)}}}y.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(re,ie){var ce=re.context,J=ce.gl,ue=ie.heatmapFbo;if(ue){ce.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,ue.colorAttachment.get()),ce.activeTexture.set(J.TEXTURE1);var de=ie.colorRampTexture;de||(de=ie.colorRampTexture=new a.Texture(ce,ie.colorRamp,J.RGBA)),de.bind(J.LINEAR,J.CLAMP_TO_EDGE),re.useProgram("heatmapTexture").draw(ce,J.TRIANGLES,K.disabled,Q.disabled,re.colorModeForRenderPass(),fe.disabled,function(ve,Te,Ee,Ie){var Ve=a.create();a.ortho(Ve,0,ve.width,ve.height,0,0,1);var Je=ve.context.gl;return{u_matrix:Ve,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Te.paint.get("heatmap-opacity")}}(re,ie),ie.id,re.viewportBuffer,re.quadTriangleIndexBuffer,re.viewportSegments,ie.paint,re.transform.zoom)}}(n,o))},line:function(n,s,o,c){if(n.renderPass==="translucent"){var y=o.paint.get("line-opacity"),w=o.paint.get("line-width");if(y.constantOr(1)!==0&&w.constantOr(1)!==0)for(var S=n.depthModeForSublayer(0,K.ReadOnly),I=n.colorModeForRenderPass(),C=o.paint.get("line-dasharray"),O=o.paint.get("line-pattern"),G=O.constantOr(1),Z=o.paint.get("line-gradient"),H=o.getCrossfadeParameters(),re=G?"linePattern":C?"lineSDF":Z?"lineGradient":"line",ie=n.context,ce=ie.gl,J=!0,ue=0,de=c;ue<de.length;ue+=1){var ve=de[ue],Te=s.getTile(ve);if(!G||Te.patternsLoaded()){var Ee=Te.getBucket(o);if(Ee){var Ie=Ee.programConfigurations.get(o.id),Ve=n.context.program.get(),Je=n.useProgram(re,Ie),Xe=J||Je.program!==Ve,ft=O.constantOr(null);if(ft&&Te.imageAtlas){var Tt=Te.imageAtlas,Mt=Tt.patternPositions[ft.to.toString()],Ct=Tt.patternPositions[ft.from.toString()];Mt&&Ct&&Ie.setConstantPatternPositions(Mt,Ct)}var mi=G?Vs(n,Te,o,H):C?Np(n,Te,o,C,H):Z?Ri(n,Te,o,Ee.lineClipsArray.length):ls(n,Te,o);if(G)ie.activeTexture.set(ce.TEXTURE0),Te.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Ie.updatePaintBuffers(H);else if(C&&(Xe||n.lineAtlas.dirty))ie.activeTexture.set(ce.TEXTURE0),n.lineAtlas.bind(ie);else if(Z){var dt=Ee.gradients[o.id],Vt=dt.texture;if(o.gradientVersion!==dt.version){var Jt=256;if(o.stepInterpolant){var Ut=s.getSource().maxzoom,Ot=ve.canonical.z===Ut?Math.ceil(1<<n.transform.maxZoom-ve.canonical.z):1;Jt=a.clamp(a.nextPowerOfTwo(Ee.maxLineLength/a.EXTENT*1024*Ot),256,ie.maxTextureSize)}dt.gradient=a.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Jt,image:dt.gradient||void 0,clips:Ee.lineClipsArray}),dt.texture?dt.texture.update(dt.gradient):dt.texture=new a.Texture(ie,dt.gradient,ce.RGBA),dt.version=o.gradientVersion,Vt=dt.texture}ie.activeTexture.set(ce.TEXTURE0),Vt.bind(o.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}Je.draw(ie,ce.TRIANGLES,S,n.stencilModeForClipping(ve),I,fe.disabled,mi,o.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,o.paint,n.transform.zoom,Ie,Ee.layoutVertexBuffer2),J=!1}}}}},fill:function(n,s,o,c){var y=o.paint.get("fill-color"),w=o.paint.get("fill-opacity");if(w.constantOr(1)!==0){var S=n.colorModeForRenderPass(),I=o.paint.get("fill-pattern"),C=n.opaquePassEnabledForLayer()&&!I.constantOr(1)&&y.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===C){var O=n.depthModeForSublayer(1,n.renderPass==="opaque"?K.ReadWrite:K.ReadOnly);Gs(n,s,o,c,O,S,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var G=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,K.ReadOnly);Gs(n,s,o,c,G,S,!0)}}},"fill-extrusion":function(n,s,o,c){var y=o.paint.get("fill-extrusion-opacity");if(y!==0&&n.renderPass==="translucent"){var w=new K(n.context.gl.LEQUAL,K.ReadWrite,n.depthRangeFor3D);if(y!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))Kl(n,s,o,c,w,Q.disabled,le.disabled),Kl(n,s,o,c,w,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var S=n.colorModeForRenderPass();Kl(n,s,o,c,w,Q.disabled,S)}}},hillshade:function(n,s,o,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var y=n.context,w=n.depthModeForSublayer(0,K.ReadOnly),S=n.colorModeForRenderPass(),I=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],C=I[0],O=0,G=I[1];O<G.length;O+=1){var Z=G[O],H=s.getTile(Z);H.needsHillshadePrepare&&n.renderPass==="offscreen"?Vp(n,H,o,w,Q.disabled,S):n.renderPass==="translucent"&&Zs(n,H,o,w,C[Z.overscaledZ],S)}y.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,o,c){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&c.length)for(var y=n.context,w=y.gl,S=s.getSource(),I=n.useProgram("raster"),C=n.colorModeForRenderPass(),O=S instanceof Xt?[{},c]:n.stencilConfigForOverlap(c),G=O[0],Z=O[1],H=Z[Z.length-1].overscaledZ,re=!n.options.moving,ie=0,ce=Z;ie<ce.length;ie+=1){var J=ce[ie],ue=n.depthModeForSublayer(J.overscaledZ-H,o.paint.get("raster-opacity")===1?K.ReadWrite:K.ReadOnly,w.LESS),de=s.getTile(J),ve=n.transform.calculatePosMatrix(J.toUnwrapped(),re);de.registerFadeDuration(o.paint.get("raster-fade-duration"));var Te=s.findLoadedParent(J,0),Ee=Ks(de,Te,s,o,n.transform),Ie=void 0,Ve=void 0,Je=o.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;y.activeTexture.set(w.TEXTURE0),de.texture.bind(Je,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(w.TEXTURE1),Te?(Te.texture.bind(Je,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,Te.tileID.overscaledZ-de.tileID.overscaledZ),Ve=[de.tileID.canonical.x*Ie%1,de.tileID.canonical.y*Ie%1]):de.texture.bind(Je,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var Xe=Up(ve,Ve||[0,0],Ie||1,Ee,o);S instanceof Xt?I.draw(y,w.TRIANGLES,ue,Q.disabled,C,fe.disabled,Xe,o.id,S.boundsBuffer,n.quadTriangleIndexBuffer,S.boundsSegments):I.draw(y,w.TRIANGLES,ue,G[J.overscaledZ],C,fe.disabled,Xe,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,o){var c=o.paint.get("background-color"),y=o.paint.get("background-opacity");if(y!==0){var w=n.context,S=w.gl,I=n.transform,C=I.tileSize,O=o.paint.get("background-pattern");if(!n.isPatternMissing(O)){var G=!O&&c.a===1&&y===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===G){var Z=Q.disabled,H=n.depthModeForSublayer(0,G==="opaque"?K.ReadWrite:K.ReadOnly),re=n.colorModeForRenderPass(),ie=n.useProgram(O?"backgroundPattern":"background"),ce=I.coveringTiles({tileSize:C});O&&(w.activeTexture.set(S.TEXTURE0),n.imageManager.bind(n.context));for(var J=o.getCrossfadeParameters(),ue=0,de=ce;ue<de.length;ue+=1){var ve=de[ue],Te=n.transform.calculatePosMatrix(ve.toUnwrapped()),Ee=O?Uo(Te,y,n,O,{tileID:ve,tileSize:C},J):cs(Te,y,c);ie.draw(w,S.TRIANGLES,H,Z,re,fe.disabled,Ee,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,o){for(var c=0;c<o.length;c++)wc(n,s,o[c])},custom:function(n,s,o){var c=n.context,y=o.implementation;if(n.renderPass==="offscreen"){var w=y.prerender;w&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),w.call(y,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(Q.disabled);var S=y.renderingMode==="3d"?new K(n.context.gl.LEQUAL,K.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,K.ReadOnly);c.setDepthMode(S),y.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},Zi=function(n,s){this.context=new q(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=ee.maxUnderzooming+ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _e,this.gpuTimers={}};Zi.prototype.resize=function(n,s){if(this.width=n*a.browser.devicePixelRatio,this.height=s*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,c=this.style._order;o<c.length;o+=1)this.style._layers[c[o]].resize()},Zi.prototype.setup=function(){var n=this.context,s=new a.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(a.EXTENT,0),s.emplaceBack(0,a.EXTENT),s.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,_r.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var o=new a.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(a.EXTENT,0),o.emplaceBack(0,a.EXTENT),o.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=n.createVertexBuffer(o,_r.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var c=new a.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(a.EXTENT,0,a.EXTENT,0),c.emplaceBack(0,a.EXTENT,0,a.EXTENT),c.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,qe.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var y=new a.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(y,_r.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var w=new a.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);var S=new a.StructArrayLayout3ui6;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(S),this.emptyTexture=new a.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var I=this.context.gl;this.stencilClearMode=new Q({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)},Zi.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=a.create();a.ortho(o,0,this.width,this.height,0,0,1),a.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,K.disabled,this.stencilClearMode,le.disabled,fe.disabled,bo(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Zi.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var o=this.context,c=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(le.disabled),o.setDepthMode(K.disabled);var y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,S=s;w<S.length;w+=1){var I=S[w],C=this._tileClippingMaskIDs[I.key]=this.nextStencilID++;y.draw(o,c.TRIANGLES,K.disabled,new Q({func:c.ALWAYS,mask:0},C,255,c.KEEP,c.KEEP,c.REPLACE),le.disabled,fe.disabled,bo(I.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Zi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new Q({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Zi.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new Q({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Zi.prototype.stencilConfigForOverlap=function(n){var s,o=this.context.gl,c=n.sort(function(C,O){return O.overscaledZ-C.overscaledZ}),y=c[c.length-1].overscaledZ,w=c[0].overscaledZ-y+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var S={},I=0;I<w;I++)S[I+y]=new Q({func:o.GEQUAL,mask:255},I+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=w,[S,c]}return[(s={},s[y]=Q.disabled,s),c]},Zi.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new le([n.CONSTANT_COLOR,n.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?le.unblended:le.alphaBlended},Zi.prototype.depthModeForSublayer=function(n,s,o){if(!this.opaquePassEnabledForLayer())return K.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new K(o||this.context.gl.LEQUAL,s,[c,c])},Zi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Zi.prototype.render=function(n,s){var o=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var c=this.style._order,y=this.style.sourceCaches;for(var w in y){var S=y[w];S.used&&S.prepare(this.context)}var I,C,O={},G={},Z={};for(var H in y){var re=y[H];O[H]=re.getVisibleCoordinates(),G[H]=O[H].slice().reverse(),Z[H]=re.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ie=0;ie<c.length;ie++)if(this.style._layers[c[ie]].is3D()){this.opaquePassCutoff=ie;break}this.renderPass="offscreen";for(var ce=0,J=c;ce<J.length;ce+=1){var ue=this.style._layers[J[ce]];if(ue.hasOffscreenPass()&&!ue.isHidden(this.transform.zoom)){var de=G[ue.source];(ue.type==="custom"||de.length)&&this.renderLayer(this,y[ue.source],ue,de)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var ve=this.style._layers[c[this.currentLayer]],Te=y[ve.source],Ee=O[ve.source];this._renderTileClippingMasks(ve,Ee),this.renderLayer(this,Te,ve,Ee)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Ie=this.style._layers[c[this.currentLayer]],Ve=y[Ie.source],Je=(Ie.type==="symbol"?Z:G)[Ie.source];this._renderTileClippingMasks(Ie,O[Ie.source]),this.renderLayer(this,Ve,Ie,Je)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(Xe){Xe.source&&!Xe.isHidden(o.transform.zoom)&&(Xe.source!==(C&&C.id)&&(C=o.style.sourceCaches[Xe.source]),(!I||I.getSource().maxzoom<C.getSource().maxzoom)&&(I=C))}),I&&wo.debug(this,I,I.getVisibleCoordinates())),this.options.showPadding&&function(Xe){var ft=Xe.transform.padding;Xl(Xe,Xe.transform.height-(ft.top||0),3,Hl),Xl(Xe,ft.bottom||0,3,bc),Yl(Xe,ft.left||0,3,xc),Yl(Xe,Xe.transform.width-(ft.right||0),3,Hs);var Tt=Xe.transform.centerPoint;(function(Mt,Ct,mi,dt){hs(Mt,Ct-1,mi-10,2,20,dt),hs(Mt,Ct-10,mi-1,20,2,dt)})(Xe,Tt.x,Xe.transform.height-Tt.y,Wl)}(this),this.context.setDefault()},Zi.prototype.renderLayer=function(n,s,o,c){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||c.length)&&(this.id=o.id,this.gpuTimingStart(o),wo[o.type](n,s,o,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Zi.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[n.id];o||(o=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Zi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Zi.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Zi.prototype.queryGpuTimers=function(n){var s={};for(var o in n){var c=n[o],y=this.context.extTimerQuery,w=y.getQueryObjectEXT(c.query,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(c.query),s[o]=w}return s},Zi.prototype.translatePosMatrix=function(n,s,o,c,y){if(!o[0]&&!o[1])return n;var w=y?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(w){var S=Math.sin(w),I=Math.cos(w);o=[o[0]*I-o[1]*S,o[0]*S+o[1]*I]}var C=[y?o[0]:Pi(s,o[0],this.transform.zoom),y?o[1]:Pi(s,o[1],this.transform.zoom),0],O=new Float32Array(16);return a.translate(O,n,C),O},Zi.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Zi.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Zi.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),o=this.imageManager.getPattern(n.to.toString());return!s||!o},Zi.prototype.useProgram=function(n,s){this.cache=this.cache||{};var o=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new sc(this.context,n,Op[n],s,gc[n],this._showOverdrawInspector)),this.cache[o]},Zi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Zi.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Zi.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Zi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ws=function(n,s){this.points=n,this.planes=s};Ws.fromInvProjectionMatrix=function(n,s,o){var c=Math.pow(2,o),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(S){return a.transformMat4([],S,n)}).map(function(S){return a.scale$1([],S,1/S[3]/s*c)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(S){var I=a.sub([],y[S[0]],y[S[1]]),C=a.sub([],y[S[2]],y[S[1]]),O=a.normalize([],a.cross([],I,C)),G=-a.dot(O,y[S[1]]);return O.concat(G)});return new Ws(y,w)};var So=function(n,s){this.min=n,this.max=s,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};So.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],o=a.clone$2(this.min),c=a.clone$2(this.max),y=0;y<s.length;y++)o[y]=s[y]?this.min[y]:this.center[y],c[y]=s[y]?this.center[y]:this.max[y];return c[2]=this.max[2],new So(o,c)},So.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},So.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},So.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,c=0;c<n.planes.length;c++){for(var y=n.planes[c],w=0,S=0;S<s.length;S++)w+=a.dot$1(y,s[S])>=0;if(w===0)return 0;w!==s.length&&(o=!1)}if(o)return 2;for(var I=0;I<3;I++){for(var C=Number.MAX_VALUE,O=-Number.MAX_VALUE,G=0;G<n.points.length;G++){var Z=n.points[G][I]-this.min[I];C=Math.min(C,Z),O=Math.max(O,Z)}if(O<0||C>this.max[I]-this.min[I])return 0}return 1};var Ha=function(n,s,o,c){if(n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=o,this.right=c};Ha.prototype.interpolate=function(n,s,o){return s.top!=null&&n.top!=null&&(this.top=a.number(n.top,s.top,o)),s.bottom!=null&&n.bottom!=null&&(this.bottom=a.number(n.bottom,s.bottom,o)),s.left!=null&&n.left!=null&&(this.left=a.number(n.left,s.left,o)),s.right!=null&&n.right!=null&&(this.right=a.number(n.right,s.right,o)),this},Ha.prototype.getCenter=function(n,s){var o=a.clamp((this.left+n-this.right)/2,0,n),c=a.clamp((this.top+s-this.bottom)/2,0,s);return new a.Point(o,c)},Ha.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},Ha.prototype.clone=function(){return new Ha(this.top,this.bottom,this.left,this.right)},Ha.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var li=function(n,s,o,c,y){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=y===void 0||y,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=o??0,this._maxPitch=c??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ha,this._posMatrixCache={},this._alignedPosMatrixCache={}},Bi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};li.prototype.clone=function(){var n=new li(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},Bi.minZoom.get=function(){return this._minZoom},Bi.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},Bi.maxZoom.get=function(){return this._maxZoom},Bi.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},Bi.minPitch.get=function(){return this._minPitch},Bi.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},Bi.maxPitch.get=function(){return this._maxPitch},Bi.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},Bi.renderWorldCopies.get=function(){return this._renderWorldCopies},Bi.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},Bi.worldSize.get=function(){return this.tileSize*this.scale},Bi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Bi.size.get=function(){return new a.Point(this.width,this.height)},Bi.bearing.get=function(){return-this.angle/Math.PI*180},Bi.bearing.set=function(n){var s=-a.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Bi.pitch.get=function(){return this._pitch/Math.PI*180},Bi.pitch.set=function(n){var s=a.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Bi.fov.get=function(){return this._fov/Math.PI*180},Bi.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},Bi.zoom.get=function(){return this._zoom},Bi.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Bi.center.get=function(){return this._center},Bi.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},Bi.padding.get=function(){return this._edgeInsets.toJSON()},Bi.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},Bi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},li.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},li.prototype.interpolatePadding=function(n,s,o){this._unmodified=!1,this._edgeInsets.interpolate(n,s,o),this._constrain(),this._calcMatrices()},li.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},li.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new a.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new a.Point(0,0)),c=this.pointCoordinate(new a.Point(this.width,0)),y=this.pointCoordinate(new a.Point(this.width,this.height)),w=this.pointCoordinate(new a.Point(0,this.height)),S=Math.floor(Math.min(o.x,c.x,y.x,w.x)),I=Math.floor(Math.max(o.x,c.x,y.x,w.x)),C=S-1;C<=I+1;C++)C!==0&&s.push(new a.UnwrappedTileID(C,n));return s},li.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),o=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=a.MercatorCoordinate.fromLngLat(this.center),y=Math.pow(2,s),w=[y*c.x,y*c.y,0],S=Ws.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),I=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(I=s);var C=function(Xe){return{aabb:new So([Xe*y,0,0],[(Xe+1)*y,y,0]),zoom:0,x:0,y:0,wrap:Xe,fullyVisible:!1}},O=[],G=[],Z=s,H=n.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var re=1;re<=3;re++)O.push(C(-re)),O.push(C(re));for(O.push(C(0));O.length>0;){var ie=O.pop(),ce=ie.x,J=ie.y,ue=ie.fullyVisible;if(!ue){var de=ie.aabb.intersects(S);if(de===0)continue;ue=de===2}var ve=ie.aabb.distanceX(w),Te=ie.aabb.distanceY(w),Ee=Math.max(Math.abs(ve),Math.abs(Te));if(ie.zoom===Z||Ee>3+(1<<Z-ie.zoom)-2&&ie.zoom>=I)G.push({tileID:new a.OverscaledTileID(ie.zoom===Z?H:ie.zoom,ie.wrap,ie.zoom,ce,J),distanceSq:a.sqrLen([w[0]-.5-ce,w[1]-.5-J])});else for(var Ie=0;Ie<4;Ie++){var Ve=(ce<<1)+Ie%2,Je=(J<<1)+(Ie>>1);O.push({aabb:ie.aabb.quadrant(Ie),zoom:ie.zoom+1,x:Ve,y:Je,wrap:ie.wrap,fullyVisible:ue})}}return G.sort(function(Xe,ft){return Xe.distanceSq-ft.distanceSq}).map(function(Xe){return Xe.tileID})},li.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},Bi.unmodified.get=function(){return this._unmodified},li.prototype.zoomScale=function(n){return Math.pow(2,n)},li.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},li.prototype.project=function(n){var s=a.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(n.lng)*this.worldSize,a.mercatorYfromLat(s)*this.worldSize)},li.prototype.unproject=function(n){return new a.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},Bi.point.get=function(){return this.project(this.center)},li.prototype.setLocationAtPoint=function(n,s){var o=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(n),w=new a.MercatorCoordinate(y.x-(o.x-c.x),y.y-(o.y-c.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},li.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},li.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},li.prototype.locationCoordinate=function(n){return a.MercatorCoordinate.fromLngLat(n)},li.prototype.coordinateLocation=function(n){return n.toLngLat()},li.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],o=[n.x,n.y,1,1];a.transformMat4(s,s,this.pixelMatrixInverse),a.transformMat4(o,o,this.pixelMatrixInverse);var c=s[3],y=o[3],w=s[1]/c,S=o[1]/y,I=s[2]/c,C=o[2]/y,O=I===C?0:(0-I)/(C-I);return new a.MercatorCoordinate(a.number(s[0]/c,o[0]/y,O)/this.worldSize,a.number(w,S,O)/this.worldSize)},li.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix),new a.Point(s[0]/s[3],s[1]/s[3])},li.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},li.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},li.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},li.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var o=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[o])return c[o];var y=n.canonical,w=this.worldSize/this.zoomScale(y.z),S=y.x+Math.pow(2,y.z)*n.wrap,I=a.identity(new Float64Array(16));return a.translate(I,I,[S*w,y.y*w,0]),a.scale(I,I,[w/a.EXTENT,w/a.EXTENT,1]),a.multiply(I,s?this.alignedProjMatrix:this.projMatrix,I),c[o]=new Float32Array(I),c[o]},li.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},li.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,o,c,y=-90,w=90,S=-180,I=180,C=this.size,O=this._unmodified;if(this.latRange){var G=this.latRange;y=a.mercatorYfromLat(G[1])*this.worldSize,n=(w=a.mercatorYfromLat(G[0])*this.worldSize)-y<C.y?C.y/(w-y):0}if(this.lngRange){var Z=this.lngRange;S=a.mercatorXfromLng(Z[0])*this.worldSize,s=(I=a.mercatorXfromLng(Z[1])*this.worldSize)-S<C.x?C.x/(I-S):0}var H=this.point,re=Math.max(s||0,n||0);if(re)return this.center=this.unproject(new a.Point(s?(I+S)/2:H.x,n?(w+y)/2:H.y)),this.zoom+=this.scaleZoom(re),this._unmodified=O,void(this._constraining=!1);if(this.latRange){var ie=H.y,ce=C.y/2;ie-ce<y&&(c=y+ce),ie+ce>w&&(c=w-ce)}if(this.lngRange){var J=H.x,ue=C.x/2;J-ue<S&&(o=S+ue),J+ue>I&&(o=I-ue)}o===void 0&&c===void 0||(this.center=this.unproject(new a.Point(o!==void 0?o:H.x,c!==void 0?c:H.y))),this._unmodified=O,this._constraining=!1}},li.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+n.y/this.height),c=Math.sin(o)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-s-o,.01,Math.PI-.01)),y=this.point,w=y.x,S=y.y,I=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),C=this.height/50,O=new Float64Array(16);a.perspective(O,this._fov,this.width/this.height,C,I),O[8]=2*-n.x/this.width,O[9]=2*n.y/this.height,a.scale(O,O,[1,-1,1]),a.translate(O,O,[0,0,-this.cameraToCenterDistance]),a.rotateX(O,O,this._pitch),a.rotateZ(O,O,this.angle),a.translate(O,O,[-w,-S,0]),this.mercatorMatrix=a.scale([],O,[this.worldSize,this.worldSize,this.worldSize]),a.scale(O,O,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=O,this.invProjMatrix=a.invert([],this.projMatrix);var G=this.width%2/2,Z=this.height%2/2,H=Math.cos(this.angle),re=Math.sin(this.angle),ie=w-Math.round(w)+H*G+re*Z,ce=S-Math.round(S)+H*Z+re*G,J=new Float64Array(O);if(a.translate(J,J,[ie>.5?ie-1:ie,ce>.5?ce-1:ce,0]),this.alignedProjMatrix=J,O=a.create(),a.scale(O,O,[this.width/2,-this.height/2,1]),a.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=a.create(),a.scale(O,O,[1,-1,1]),a.translate(O,O,[-1,-1,0]),a.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(O=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=O,this._posMatrixCache={},this._alignedPosMatrixCache={}}},li.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new a.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},li.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,n))},li.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var o=s.x,c=s.y,y=s.x,w=s.y,S=0,I=n;S<I.length;S+=1){var C=I[S];o=Math.min(o,C.x),c=Math.min(c,C.y),y=Math.max(y,C.x),w=Math.max(w,C.y)}return[new a.Point(o,c),new a.Point(y,c),new a.Point(y,w),new a.Point(o,w),new a.Point(o,c)]},Object.defineProperties(li.prototype,Bi);var $n=function(n){var s,o,c,y;this._hashName=n&&encodeURIComponent(n),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,c=null,y=function(){c=null,o&&(s(),c=setTimeout(y,300),o=!1)},function(){return o=!0,c||y(),c})};$n.prototype.addTo=function(n){return this._map=n,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},$n.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},$n.prototype.getHashString=function(n){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,c=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,c),w=Math.round(s.lng*y)/y,S=Math.round(s.lat*y)/y,I=this._map.getBearing(),C=this._map.getPitch(),O="";if(O+=n?"/"+w+"/"+S+"/"+o:o+"/"+S+"/"+w,(I||C)&&(O+="/"+Math.round(10*I)/10),C&&(O+="/"+Math.round(C)),this._hashName){var G=this._hashName,Z=!1,H=a.window.location.hash.slice(1).split("&").map(function(re){var ie=re.split("=")[0];return ie===G?(Z=!0,ie+"="+O):re}).filter(function(re){return re});return Z||H.push(G+"="+O),"#"+H.join("&")}return"#"+O},$n.prototype._getCurrentHash=function(){var n,s=this,o=a.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):o.split("/")},$n.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},$n.prototype._updateHashUnthrottled=function(){var n=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,n)}catch{}};var fs={linearity:.3,easing:a.bezier(0,0,.3,1)},qo=a.extend({deceleration:2500,maxSpeed:1400},fs),ds=a.extend({deceleration:20,maxSpeed:1400},fs),qp=a.extend({deceleration:1e3,maxSpeed:360},fs),jp=a.extend({deceleration:1e3,maxSpeed:90},fs),ms=function(n){this._map=n,this.clear()};function gs(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function Ca(n,s,o){var c=o.maxSpeed,y=o.linearity,w=o.deceleration,S=a.clamp(n*y/(s/1e3),-c,c),I=Math.abs(S)/(w*y);return{easing:o.easing,duration:1e3*I,amount:S*(I/2)}}ms.prototype.clear=function(){this._inertiaBuffer=[]},ms.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:n})},ms.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=a.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},ms.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},o=0,c=this._inertiaBuffer;o<c.length;o+=1){var y=c[o].settings;s.zoom+=y.zoomDelta||0,s.bearing+=y.bearingDelta||0,s.pitch+=y.pitchDelta||0,y.panDelta&&s.pan._add(y.panDelta),y.around&&(s.around=y.around),y.pinchAround&&(s.pinchAround=y.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(s.pan.mag()){var I=Ca(s.pan.mag(),w,a.extend({},qo,n||{}));S.offset=s.pan.mult(I.amount/s.pan.mag()),S.center=this._map.transform.center,gs(S,I)}if(s.zoom){var C=Ca(s.zoom,w,ds);S.zoom=this._map.transform.zoom+C.amount,gs(S,C)}if(s.bearing){var O=Ca(s.bearing,w,qp);S.bearing=this._map.transform.bearing+a.clamp(O.amount,-179,179),gs(S,O)}if(s.pitch){var G=Ca(s.pitch,w,jp);S.pitch=this._map.transform.pitch+G.amount,gs(S,G)}if(S.zoom||S.bearing){var Z=s.pinchAround===void 0?s.around:s.pinchAround;S.around=Z?this._map.unproject(Z):this._map.getCenter()}return this.clear(),a.extend(S,{noMoveStart:!0})}};var zr=function(n){function s(c,y,w,S){S===void 0&&(S={});var I=T.mousePos(y.getCanvasContainer(),w),C=y.unproject(I);n.call(this,c,a.extend({point:I,lngLat:C,originalEvent:w},S)),this._defaultPrevented=!1,this.target=y}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),ys=function(n){function s(c,y,w){var S=c==="touchend"?w.changedTouches:w.touches,I=T.touchPos(y.getCanvasContainer(),S),C=I.map(function(Z){return y.unproject(Z)}),O=I.reduce(function(Z,H,re,ie){return Z.add(H.div(ie.length))},new a.Point(0,0)),G=y.unproject(O);n.call(this,c,{points:I,point:O,lngLats:C,lngLat:G,originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),Sc=function(n){function s(c,y,w){n.call(this,c,{originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),vr=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};vr.prototype.reset=function(){delete this._mousedownPos},vr.prototype.wheel=function(n){return this._firePreventable(new Sc(n.type,this._map,n))},vr.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new zr(n.type,this._map,n))},vr.prototype.mouseup=function(n){this._map.fire(new zr(n.type,this._map,n))},vr.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new zr(n.type,this._map,n))},vr.prototype.dblclick=function(n){return this._firePreventable(new zr(n.type,this._map,n))},vr.prototype.mouseover=function(n){this._map.fire(new zr(n.type,this._map,n))},vr.prototype.mouseout=function(n){this._map.fire(new zr(n.type,this._map,n))},vr.prototype.touchstart=function(n){return this._firePreventable(new ys(n.type,this._map,n))},vr.prototype.touchmove=function(n){this._map.fire(new ys(n.type,this._map,n))},vr.prototype.touchend=function(n){this._map.fire(new ys(n.type,this._map,n))},vr.prototype.touchcancel=function(n){this._map.fire(new ys(n.type,this._map,n))},vr.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},vr.prototype.isEnabled=function(){return!0},vr.prototype.isActive=function(){return!1},vr.prototype.enable=function(){},vr.prototype.disable=function(){};var mt=function(n){this._map=n};mt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},mt.prototype.mousemove=function(n){this._map.fire(new zr(n.type,this._map,n))},mt.prototype.mousedown=function(){this._delayContextMenu=!0},mt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},mt.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new zr(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},mt.prototype.isEnabled=function(){return!0},mt.prototype.isActive=function(){return!1},mt.prototype.enable=function(){},mt.prototype.disable=function(){};var Nn=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Xs(n,s){for(var o={},c=0;c<n.length;c++)o[n[c].identifier]=s[c];return o}Nn.prototype.isEnabled=function(){return!!this._enabled},Nn.prototype.isActive=function(){return!!this._active},Nn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Nn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Nn.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(T.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},Nn.prototype.mousemoveWindow=function(n,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=o,this._box||(this._box=T.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var y=Math.min(c.x,o.x),w=Math.max(c.x,o.x),S=Math.min(c.y,o.y),I=Math.max(c.y,o.y);T.setTransform(this._box,"translate("+y+"px,"+S+"px)"),this._box.style.width=w-y+"px",this._box.style.height=I-S+"px"}}},Nn.prototype.mouseupWindow=function(n,s){var o=this;if(this._active&&n.button===0){var c=this._startPos,y=s;if(this.reset(),T.suppressClick(),c.x!==y.x||c.y!==y.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(w){return w.fitScreenCoordinates(c,y,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},Nn.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},Nn.prototype.blur=function(){this.reset()},Nn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos},Nn.prototype._fireEvent=function(n,s){return this._map.fire(new a.Event(n,{originalEvent:s}))};var jo=function(n){this.reset(),this.numTouches=n.numTouches};jo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},jo.prototype.touchstart=function(n,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(c){for(var y=new a.Point(0,0),w=0,S=c;w<S.length;w+=1)y._add(S[w]);return y.div(c.length)}(s),this.touches=Xs(o,s)))},jo.prototype.touchmove=function(n,s,o){if(!this.aborted&&this.centroid){var c=Xs(o,s);for(var y in this.touches){var w=c[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}},jo.prototype.touchend=function(n,s,o){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var da=function(n){this.singleTap=new jo(n),this.numTaps=n.numTaps,this.reset()};da.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},da.prototype.touchstart=function(n,s,o){this.singleTap.touchstart(n,s,o)},da.prototype.touchmove=function(n,s,o){this.singleTap.touchmove(n,s,o)},da.prototype.touchend=function(n,s,o){var c=this.singleTap.touchend(n,s,o);if(c){var y=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(c)<30;if(y&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var Un=function(){this._zoomIn=new da({numTouches:1,numTaps:2}),this._zoomOut=new da({numTouches:2,numTaps:1}),this.reset()};Un.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Un.prototype.touchstart=function(n,s,o){this._zoomIn.touchstart(n,s,o),this._zoomOut.touchstart(n,s,o)},Un.prototype.touchmove=function(n,s,o){this._zoomIn.touchmove(n,s,o),this._zoomOut.touchmove(n,s,o)},Un.prototype.touchend=function(n,s,o){var c=this,y=this._zoomIn.touchend(n,s,o),w=this._zoomOut.touchend(n,s,o);return y?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(y)},{originalEvent:n})}}):w?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(w)},{originalEvent:n})}}):void 0},Un.prototype.touchcancel=function(){this.reset()},Un.prototype.enable=function(){this._enabled=!0},Un.prototype.disable=function(){this._enabled=!1,this.reset()},Un.prototype.isEnabled=function(){return this._enabled},Un.prototype.isActive=function(){return this._active};var Jl={0:1,2:2},at=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};at.prototype.blur=function(){this.reset()},at.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},at.prototype._correctButton=function(n,s){return!1},at.prototype._move=function(n,s){return{}},at.prototype.mousedown=function(n,s){if(!this._lastPoint){var o=T.mouseButton(n);this._correctButton(n,o)&&(this._lastPoint=s,this._eventButton=o)}},at.prototype.mousemoveWindow=function(n,s){var o=this._lastPoint;if(o){if(n.preventDefault(),function(c,y){var w=Jl[y];return c.buttons===void 0||(c.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},at.prototype.mouseupWindow=function(n){this._lastPoint&&T.mouseButton(n)===this._eventButton&&(this._moved&&T.suppressClick(),this.reset())},at.prototype.enable=function(){this._enabled=!0},at.prototype.disable=function(){this._enabled=!1,this.reset()},at.prototype.isEnabled=function(){return this._enabled},at.prototype.isActive=function(){return this._active};var Ql=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(o,c){n.prototype.mousedown.call(this,o,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,c){return c===0&&!o.ctrlKey},s.prototype._move=function(o,c){return{around:c,panDelta:c.sub(o)}},s}(at),Ys=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var y=.8*(c.x-o.x);if(y)return this._active=!0,{bearingDelta:y}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(at),$l=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var y=-.5*(c.y-o.y);if(y)return this._active=!0,{pitchDelta:y}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(at),na=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};na.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},na.prototype.touchstart=function(n,s,o){return this._calculateTransform(n,s,o)},na.prototype.touchmove=function(n,s,o){if(this._active&&!(o.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,o)},na.prototype.touchend=function(n,s,o){this._calculateTransform(n,s,o),this._active&&o.length<this._minTouches&&this.reset()},na.prototype.touchcancel=function(){this.reset()},na.prototype._calculateTransform=function(n,s,o){o.length>0&&(this._active=!0);var c=Xs(o,s),y=new a.Point(0,0),w=new a.Point(0,0),S=0;for(var I in c){var C=c[I],O=this._touches[I];O&&(y._add(C),w._add(C.sub(O)),S++,c[I]=C)}if(this._touches=c,!(S<this._minTouches)&&w.mag()){var G=w.div(S);if(this._sum._add(G),!(this._sum.mag()<this._clickTolerance))return{around:y.div(S),panDelta:G}}},na.prototype.enable=function(){this._enabled=!0},na.prototype.disable=function(){this._enabled=!1,this.reset()},na.prototype.isEnabled=function(){return this._enabled},na.prototype.isActive=function(){return this._active};var Vn=function(){this.reset()};function Js(n,s,o){for(var c=0;c<n.length;c++)if(n[c].identifier===o)return s[c]}function Qs(n,s){return Math.log(n/s)/Math.LN2}Vn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Vn.prototype._start=function(n){},Vn.prototype._move=function(n,s,o){return{}},Vn.prototype.touchstart=function(n,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},Vn.prototype.touchmove=function(n,s,o){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,y=c[1],w=Js(o,s,c[0]),S=Js(o,s,y);if(w&&S){var I=this._aroundCenter?null:w.add(S).div(2);return this._move([w,S],I,n)}}},Vn.prototype.touchend=function(n,s,o){if(this._firstTwoTouches){var c=this._firstTwoTouches,y=c[1],w=Js(o,s,c[0]),S=Js(o,s,y);w&&S||(this._active&&T.suppressClick(),this.reset())}},Vn.prototype.touchcancel=function(){this.reset()},Vn.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},Vn.prototype.disable=function(){this._enabled=!1,this.reset()},Vn.prototype.isEnabled=function(){return this._enabled},Vn.prototype.isActive=function(){return this._active};var qn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,c){var y=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Qs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qs(this._distance,y),pinchAround:c}},s}(Vn);function Ma(n,s){return 180*n.angleWith(s)/Math.PI}var Ec=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,c){var y=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ma(this._vector,y),pinchAround:c}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var c=25/(Math.PI*this._minDiameter)*360,y=Ma(o,this._startVector);return Math.abs(y)<c},s}(Vn);function _s(n){return Math.abs(n.y)>Math.abs(n.x)}var eu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,_s(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,c,y){var w=o[0].sub(this._lastPoints[0]),S=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,S,y.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(w.y+S.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,c,y){if(this._valid!==void 0)return this._valid;var w=o.mag()>=2,S=c.mag()>=2;if(w||S){if(!w||!S)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;var I=o.y>0==c.y>0;return _s(o)&&_s(c)&&I}},s}(Vn),tu={panStep:100,bearingStep:15,pitchStep:10},ma=function(){var n=tu;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function ea(n){return n*(2-n)}ma.prototype.blur=function(){this.reset()},ma.prototype.reset=function(){this._active=!1},ma.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=0,c=0,y=0,w=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?y=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?y=-1:(n.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(c=0,y=0),{cameraAnimation:function(I){var C=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:ea,zoom:o?Math.round(C)+o*(n.shiftKey?2:1):C,bearing:I.getBearing()+c*s._bearingStep,pitch:I.getPitch()+y*s._pitchStep,offset:[-w*s._panStep,-S*s._panStep],center:I.getCenter()},{originalEvent:n})}}}},ma.prototype.enable=function(){this._enabled=!0},ma.prototype.disable=function(){this._enabled=!1,this.reset()},ma.prototype.isEnabled=function(){return this._enabled},ma.prototype.isActive=function(){return this._active},ma.prototype.disableRotation=function(){this._rotationDisabled=!0},ma.prototype.enableRotation=function(){this._rotationDisabled=!1};var ii=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};ii.prototype.setZoomRate=function(n){this._defaultZoomRate=n},ii.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},ii.prototype.isEnabled=function(){return!!this._enabled},ii.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ii.prototype.isZooming=function(){return!!this._zooming},ii.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},ii.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ii.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=a.browser.now(),c=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},ii.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},ii.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=T.mousePos(this._el,n);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ii.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&c!==0&&(c=1/c);var y=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(y*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,S=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,I=this._startZoom,C=this._easing,O=!1;if(this._type==="wheel"&&I&&C){var G=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Z=C(G);w=a.number(I,S,Z),G<1?this._frameId||(this._frameId=!0):O=!0}else w=S,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ii.prototype._smoothOutEasing=function(n){var s=a.ease;if(this._prevEase){var o=this._prevEase,c=(a.browser.now()-o.start)/o.duration,y=o.easing(c+.01)-o.easing(c),w=.27/Math.sqrt(y*y+1e-4)*.01,S=Math.sqrt(.0729-w*w);s=a.bezier(w,S,.25,1)}return this._prevEase={start:a.browser.now(),duration:n,easing:s},s},ii.prototype.blur=function(){this.reset()},ii.prototype.reset=function(){this._active=!1};var ka=function(n,s){this._clickZoom=n,this._tapZoom=s};ka.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ka.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ka.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ka.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var aa=function(){this.reset()};aa.prototype.reset=function(){this._active=!1},aa.prototype.blur=function(){this.reset()},aa.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:n})}}},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var nn=function(){this._tap=new da({numTouches:1,numTaps:1}),this.reset()};nn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},nn.prototype.touchstart=function(n,s,o){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(n,s,o))},nn.prototype.touchmove=function(n,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var c=s[0],y=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(n,s,o)},nn.prototype.touchend=function(n,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(n,s,o)&&(this._tapTime=n.timeStamp)},nn.prototype.touchcancel=function(){this.reset()},nn.prototype.enable=function(){this._enabled=!0},nn.prototype.disable=function(){this._enabled=!1,this.reset()},nn.prototype.isEnabled=function(){return this._enabled},nn.prototype.isActive=function(){return this._active};var Eo=function(n,s,o){this._el=n,this._mousePan=s,this._touchPan=o};Eo.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Eo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Eo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Eo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Wa=function(n,s,o){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};Wa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Wa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Wa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Wa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ga=function(n,s,o,c){this._el=n,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};ga.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ga.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ga.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ga.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ga.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ga.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var bn=function(n){return n.zoom||n.drag||n.pitch||n.rotate},vs=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(a.Event);function zt(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var yt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ms(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),a.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[a.window,"blur",void 0]];for(var c=0,y=this._listeners;c<y.length;c+=1){var w=y[c],S=w[0];T.addEventListener(S,w[1],S===a.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};yt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var o=s[n],c=o[0];T.removeEventListener(c,o[1],c===a.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},yt.prototype._addDefaultHandlers=function(n){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new vr(s,n));var c=s.boxZoom=new Nn(s,n);this._add("boxZoom",c);var y=new Un,w=new aa;s.doubleClickZoom=new ka(w,y),this._add("tapZoom",y),this._add("clickZoom",w);var S=new nn;this._add("tapDragZoom",S);var I=s.touchPitch=new eu;this._add("touchPitch",I);var C=new Ys(n),O=new $l(n);s.dragRotate=new Wa(n,C,O),this._add("mouseRotate",C,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]);var G=new Ql(n),Z=new na(n);s.dragPan=new Eo(o,G,Z),this._add("mousePan",G),this._add("touchPan",Z,["touchZoom","touchRotate"]);var H=new Ec,re=new qn;s.touchZoomRotate=new ga(o,re,H,S),this._add("touchRotate",H,["touchPan","touchZoom"]),this._add("touchZoom",re,["touchPan","touchRotate"]);var ie=s.scrollZoom=new ii(s,this);this._add("scrollZoom",ie,["mousePan"]);var ce=s.keyboard=new ma;this._add("keyboard",ce),this._add("blockableMapEvent",new mt(s));for(var J=0,ue=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];J<ue.length;J+=1){var de=ue[J];n.interactive&&n[de]&&s[de].enable(n[de])}},yt.prototype._add=function(n,s,o){this._handlers.push({handlerName:n,handler:s,allowed:o}),this._handlersById[n]=s},yt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},yt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yt.prototype.isMoving=function(){return!!bn(this._eventsInProgress)||this.isZooming()},yt.prototype._blockedByActive=function(n,s,o){for(var c in n)if(c!==o&&(!s||s.indexOf(c)<0))return!0;return!1},yt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},yt.prototype._getMapTouches=function(n){for(var s=[],o=0,c=n;o<c.length;o+=1){var y=c[o];this._el.contains(y.target)&&s.push(y)}return s},yt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var o=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},y={},w={},S=n.touches?this._getMapTouches(n.touches):void 0,I=S?T.touchPos(this._el,S):T.mousePos(this._el,n),C=0,O=this._handlers;C<O.length;C+=1){var G=O[C],Z=G.handlerName,H=G.handler,re=G.allowed;if(H.isEnabled()){var ie=void 0;this._blockedByActive(w,re,Z)?H.reset():H[s||n.type]&&(ie=H[s||n.type](n,I,S),this.mergeHandlerResult(c,y,ie,Z,o),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||H.isActive())&&(w[Z]=H)}}var ce={};for(var J in this._previousActiveHandlers)w[J]||(ce[J]=o);this._previousActiveHandlers=w,(Object.keys(ce).length||zt(c))&&(this._changes.push([c,y,ce]),this._triggerRenderFrame()),(Object.keys(w).length||zt(c))&&this._map._stop(!0),this._updatingCamera=!1;var ue=c.cameraAnimation;ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ue(this._map))},yt.prototype.mergeHandlerResult=function(n,s,o,c,y){if(o){a.extend(n,o);var w={handlerName:c,originalEvent:o.originalEvent||y};o.zoomDelta!==void 0&&(s.zoom=w),o.panDelta!==void 0&&(s.drag=w),o.pitchDelta!==void 0&&(s.pitch=w),o.bearingDelta!==void 0&&(s.rotate=w)}},yt.prototype._applyChanges=function(){for(var n={},s={},o={},c=0,y=this._changes;c<y.length;c+=1){var w=y[c],S=w[0],I=w[1],C=w[2];S.panDelta&&(n.panDelta=(n.panDelta||new a.Point(0,0))._add(S.panDelta)),S.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(n.around=S.around),S.pinchAround!==void 0&&(n.pinchAround=S.pinchAround),S.noInertia&&(n.noInertia=S.noInertia),a.extend(s,I),a.extend(o,C)}this._updateMapTransform(n,s,o),this._changes=[]},yt.prototype._updateMapTransform=function(n,s,o){var c=this._map,y=c.transform;if(!zt(n))return this._fireEvents(s,o,!0);var w=n.panDelta,S=n.zoomDelta,I=n.bearingDelta,C=n.pitchDelta,O=n.around,G=n.pinchAround;G!==void 0&&(O=G),c._stop(!0),O=O||c.transform.centerPoint;var Z=y.pointLocation(w?O.sub(w):O);I&&(y.bearing+=I),C&&(y.pitch+=C),S&&(y.zoom+=S),y.setLocationAtPoint(Z,O),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,o,!0)},yt.prototype._fireEvents=function(n,s,o){var c=this,y=bn(this._eventsInProgress),w=bn(n),S={};for(var I in n)this._eventsInProgress[I]||(S[I+"start"]=n[I].originalEvent),this._eventsInProgress[I]=n[I];for(var C in!y&&w&&this._fireEvent("movestart",w.originalEvent),S)this._fireEvent(C,S[C]);for(var O in w&&this._fireEvent("move",w.originalEvent),n)this._fireEvent(O,n[O].originalEvent);var G,Z={};for(var H in this._eventsInProgress){var re=this._eventsInProgress[H],ie=re.handlerName,ce=re.originalEvent;this._handlersById[ie].isActive()||(delete this._eventsInProgress[H],Z[H+"end"]=G=s[ie]||ce)}for(var J in Z)this._fireEvent(J,Z[J]);var ue=bn(this._eventsInProgress);if(o&&(y||w)&&!ue){this._updatingCamera=!0;var de=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ve=function(Te){return Te!==0&&-c._bearingSnap<Te&&Te<c._bearingSnap};de?(ve(de.bearing||this._map.getBearing())&&(de.bearing=0),this._map.easeTo(de,{originalEvent:G})):(this._map.fire(new a.Event("moveend",{originalEvent:G})),ve(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yt.prototype._fireEvent=function(n,s){this._map.fire(new a.Event(n,s?{originalEvent:s}:{}))},yt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new vs("renderFrame",{timeStamp:s})),n._applyChanges()})},yt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var $s=function(n){function s(o,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,c){return this.jumpTo({center:o},c)},s.prototype.panBy=function(o,c,y){return o=a.Point.convert(o).mult(-1),this.panTo(this.transform.center,a.extend({offset:o},c),y)},s.prototype.panTo=function(o,c,y){return this.easeTo(a.extend({center:o},c),y)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,c){return this.jumpTo({zoom:o},c),this},s.prototype.zoomTo=function(o,c,y){return this.easeTo(a.extend({zoom:o},c),y)},s.prototype.zoomIn=function(o,c){return this.zoomTo(this.getZoom()+1,o,c),this},s.prototype.zoomOut=function(o,c){return this.zoomTo(this.getZoom()-1,o,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,c){return this.jumpTo({bearing:o},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,c){return this.jumpTo({padding:o},c),this},s.prototype.rotateTo=function(o,c,y){return this.easeTo(a.extend({bearing:o},c),y)},s.prototype.resetNorth=function(o,c){return this.rotateTo(0,a.extend({duration:1e3},o),c),this},s.prototype.resetNorthPitch=function(o,c){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},o),c),this},s.prototype.snapToNorth=function(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,c){return this.jumpTo({pitch:o},c),this},s.prototype.cameraForBounds=function(o,c){o=a.LngLatBounds.convert(o);var y=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),y,c)},s.prototype._cameraForBoxAndBearing=function(o,c,y,w){var S={top:0,bottom:0,right:0,left:0};if(typeof(w=a.extend({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var I=w.padding;w.padding={top:I,bottom:I,right:I,left:I}}w.padding=a.extend(S,w.padding);var C=this.transform,O=C.padding,G=C.project(a.LngLat.convert(o)),Z=C.project(a.LngLat.convert(c)),H=G.rotate(-y*Math.PI/180),re=Z.rotate(-y*Math.PI/180),ie=new a.Point(Math.max(H.x,re.x),Math.max(H.y,re.y)),ce=new a.Point(Math.min(H.x,re.x),Math.min(H.y,re.y)),J=ie.sub(ce),ue=(C.width-(O.left+O.right+w.padding.left+w.padding.right))/J.x,de=(C.height-(O.top+O.bottom+w.padding.top+w.padding.bottom))/J.y;if(!(de<0||ue<0)){var ve=Math.min(C.scaleZoom(C.scale*Math.min(ue,de)),w.maxZoom),Te=typeof w.offset.x=="number"?new a.Point(w.offset.x,w.offset.y):a.Point.convert(w.offset),Ee=new a.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(y*Math.PI/180),Ie=Te.add(Ee).mult(C.scale/C.zoomScale(ve));return{center:C.unproject(G.add(Z).div(2).sub(Ie)),zoom:ve,bearing:y}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,c,y){return this._fitInternal(this.cameraForBounds(o,c),c,y)},s.prototype.fitScreenCoordinates=function(o,c,y,w,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(o)),this.transform.pointLocation(a.Point.convert(c)),y,w),w,S)},s.prototype._fitInternal=function(o,c,y){return o?(delete(c=a.extend(o,c)).padding,c.linear?this.easeTo(c,y):this.flyTo(c,y)):this},s.prototype.jumpTo=function(o,c){this.stop();var y=this.transform,w=!1,S=!1,I=!1;return"zoom"in o&&y.zoom!==+o.zoom&&(w=!0,y.zoom=+o.zoom),o.center!==void 0&&(y.center=a.LngLat.convert(o.center)),"bearing"in o&&y.bearing!==+o.bearing&&(S=!0,y.bearing=+o.bearing),"pitch"in o&&y.pitch!==+o.pitch&&(I=!0,y.pitch=+o.pitch),o.padding==null||y.isPaddingEqual(o.padding)||(y.padding=o.padding),this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),w&&this.fire(new a.Event("zoomstart",c)).fire(new a.Event("zoom",c)).fire(new a.Event("zoomend",c)),S&&this.fire(new a.Event("rotatestart",c)).fire(new a.Event("rotate",c)).fire(new a.Event("rotateend",c)),I&&this.fire(new a.Event("pitchstart",c)).fire(new a.Event("pitch",c)).fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))},s.prototype.easeTo=function(o,c){var y=this;this._stop(!1,o.easeId),((o=a.extend({offset:[0,0],duration:500,easing:a.ease},o)).animate===!1||!o.essential&&a.browser.prefersReducedMotion)&&(o.duration=0);var w=this.transform,S=this.getZoom(),I=this.getBearing(),C=this.getPitch(),O=this.getPadding(),G="zoom"in o?+o.zoom:S,Z="bearing"in o?this._normalizeBearing(o.bearing,I):I,H="pitch"in o?+o.pitch:C,re="padding"in o?o.padding:w.padding,ie=a.Point.convert(o.offset),ce=w.centerPoint.add(ie),J=w.pointLocation(ce),ue=a.LngLat.convert(o.center||J);this._normalizeCenter(ue);var de,ve,Te=w.project(J),Ee=w.project(ue).sub(Te),Ie=w.zoomScale(G-S);o.around&&(de=a.LngLat.convert(o.around),ve=w.locationPoint(de));var Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||G!==S,this._rotating=this._rotating||I!==Z,this._pitching=this._pitching||H!==C,this._padding=!w.isPaddingEqual(re),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,Ve),this._ease(function(Je){if(y._zooming&&(w.zoom=a.number(S,G,Je)),y._rotating&&(w.bearing=a.number(I,Z,Je)),y._pitching&&(w.pitch=a.number(C,H,Je)),y._padding&&(w.interpolatePadding(O,re,Je),ce=w.centerPoint.add(ie)),de)w.setLocationAtPoint(de,ve);else{var Xe=w.zoomScale(w.zoom-S),ft=G>S?Math.min(2,Ie):Math.max(.5,Ie),Tt=Math.pow(ft,1-Je),Mt=w.unproject(Te.add(Ee.mult(Je*Tt)).mult(Xe));w.setLocationAtPoint(w.renderWorldCopies?Mt.wrap():Mt,ce)}y._fireMoveEvents(c)},function(Je){y._afterEase(c,Je)},o),this},s.prototype._prepareEase=function(o,c,y){y===void 0&&(y={}),this._moving=!0,c||y.moving||this.fire(new a.Event("movestart",o)),this._zooming&&!y.zooming&&this.fire(new a.Event("zoomstart",o)),this._rotating&&!y.rotating&&this.fire(new a.Event("rotatestart",o)),this._pitching&&!y.pitching&&this.fire(new a.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new a.Event("move",o)),this._zooming&&this.fire(new a.Event("zoom",o)),this._rotating&&this.fire(new a.Event("rotate",o)),this._pitching&&this.fire(new a.Event("pitch",o))},s.prototype._afterEase=function(o,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var y=this._zooming,w=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new a.Event("zoomend",o)),w&&this.fire(new a.Event("rotateend",o)),S&&this.fire(new a.Event("pitchend",o)),this.fire(new a.Event("moveend",o))}},s.prototype.flyTo=function(o,c){var y=this;if(!o.essential&&a.browser.prefersReducedMotion){var w=a.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,c)}this.stop(),o=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},o);var S=this.transform,I=this.getZoom(),C=this.getBearing(),O=this.getPitch(),G=this.getPadding(),Z="zoom"in o?a.clamp(+o.zoom,S.minZoom,S.maxZoom):I,H="bearing"in o?this._normalizeBearing(o.bearing,C):C,re="pitch"in o?+o.pitch:O,ie="padding"in o?o.padding:S.padding,ce=S.zoomScale(Z-I),J=a.Point.convert(o.offset),ue=S.centerPoint.add(J),de=S.pointLocation(ue),ve=a.LngLat.convert(o.center||de);this._normalizeCenter(ve);var Te=S.project(de),Ee=S.project(ve).sub(Te),Ie=o.curve,Ve=Math.max(S.width,S.height),Je=Ve/ce,Xe=Ee.mag();if("minZoom"in o){var ft=a.clamp(Math.min(o.minZoom,I,Z),S.minZoom,S.maxZoom),Tt=Ve/S.zoomScale(ft-I);Ie=Math.sqrt(Tt/Xe*2)}var Mt=Ie*Ie;function Ct(Ft){var Rt=(Je*Je-Ve*Ve+(Ft?-1:1)*Mt*Mt*Xe*Xe)/(2*(Ft?Je:Ve)*Mt*Xe);return Math.log(Math.sqrt(Rt*Rt+1)-Rt)}function mi(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function dt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}var Vt=Ct(0),Jt=function(Ft){return dt(Vt)/dt(Vt+Ie*Ft)},Ut=function(Ft){return Ve*((dt(Vt)*(mi(Rt=Vt+Ie*Ft)/dt(Rt))-mi(Vt))/Mt)/Xe;var Rt},Ot=(Ct(1)-Vt)/Ie;if(Math.abs(Xe)<1e-6||!isFinite(Ot)){if(Math.abs(Ve-Je)<1e-6)return this.easeTo(o,c);var Wt=Je<Ve?-1:1;Ot=Math.abs(Math.log(Je/Ve))/Ie,Ut=function(){return 0},Jt=function(Ft){return Math.exp(Wt*Ie*Ft)}}return o.duration="duration"in o?+o.duration:1e3*Ot/("screenSpeed"in o?+o.screenSpeed/Ie:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=C!==H,this._pitching=re!==O,this._padding=!S.isPaddingEqual(ie),this._prepareEase(c,!1),this._ease(function(Ft){var Rt=Ft*Ot,Fr=1/Jt(Rt);S.zoom=Ft===1?Z:I+S.scaleZoom(Fr),y._rotating&&(S.bearing=a.number(C,H,Ft)),y._pitching&&(S.pitch=a.number(O,re,Ft)),y._padding&&(S.interpolatePadding(G,ie,Ft),ue=S.centerPoint.add(J));var tr=Ft===1?ve:S.unproject(Te.add(Ee.mult(Ut(Rt))).mult(Fr));S.setLocationAtPoint(S.renderWorldCopies?tr.wrap():tr,ue),y._fireMoveEvents(c)},function(){return y._afterEase(c)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}if(!o){var w=this.handlers;w&&w.stop(!1)}return this},s.prototype._ease=function(o,c,y){y.animate===!1||y.duration===0?(o(1),c()):(this._easeStart=a.browser.now(),this._easeOptions=y,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,c){o=a.wrap(o,-180,180);var y=Math.abs(o-c);return Math.abs(o-360-c)<y&&(o-=360),Math.abs(o+360-c)<y&&(o+=360),o},s.prototype._normalizeCenter=function(o){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var y=o.lng-c.center.lng;o.lng+=y>180?-360:y<-180?360:0}},s}(a.Evented),xn=function(n){n===void 0&&(n={}),this.options=n,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};xn.prototype.getDefaultPosition=function(){return"bottom-right"},xn.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=T.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},xn.prototype.onRemove=function(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},xn.prototype._setElementTitle=function(n,s){var o=this._map._getUIString("AttributionControl."+s);n.title=o,n.setAttribute("aria-label",o)},xn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},xn.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(n){var o=s.reduce(function(c,y,w){return y.value&&(c+=y.key+"="+y.value+(w<s.length-1?"&":"")),c},"?");n.href=a.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},xn.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},xn.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(I){return typeof I!="string"?"":I})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var c in o){var y=o[c];if(y.used){var w=y.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort(function(I,C){return I.length-C.length});var S=(n=n.filter(function(I,C){for(var O=C+1;O<n.length;O++)if(n[O].indexOf(I)>=0)return!1;return!0})).join(" | ");S!==this._attribHTML&&(this._attribHTML=S,n.length?(this._innerContainer.innerHTML=S,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},xn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ya=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};ya.prototype.onAdd=function(n){this._map=n,this._container=T.create("div","mapboxgl-ctrl");var s=T.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ya.prototype.onRemove=function(){T.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ya.prototype.getDefaultPosition=function(){return"bottom-left"},ya.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ya.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},ya.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var an=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};an.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},an.prototype.remove=function(n){for(var s=this._currentlyRunning,o=0,c=s?this._queue.concat(s):this._queue;o<c.length;o+=1){var y=c[o];if(y.id===n)return void(y.cancelled=!0)}},an.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,c=s;o<c.length;o+=1){var y=c[o];if(!y.cancelled&&(y.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},an.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var za={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},iu=a.window.HTMLImageElement,el=a.window.HTMLElement,Ii=a.window.ImageBitmap,Hr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},kc=function(n){function s(c){var y=this;if((c=a.extend({},Hr,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new li(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,w,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new an,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},za,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new a.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=a.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof el))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return y._update(!1)}),this.on("moveend",function(){return y._update(!1)}),this.on("zoom",function(){return y._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yt(this,c),this._hash=c.hash&&new $n(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,a.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new xn({customAttribution:c.customAttribution})),this.addControl(new ya,c.logoPosition),this.on("style.load",function(){y.transform.unmodified&&y.jumpTo(y.style.stylesheet)}),this.on("data",function(S){y._update(S.dataType==="style"),y.fire(new a.Event(S.dataType+"data",S))}),this.on("dataloading",function(S){y.fire(new a.Event(S.dataType+"dataloading",S))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,y){if(y===void 0&&(y=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=c.onAdd(this);this._controls.push(c);var S=this._controlPositions[y];return y.indexOf("bottom")!==-1?S.insertBefore(w,S.firstChild):S.appendChild(w),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var y=this._controls.indexOf(c);return y>-1&&this._controls.splice(y,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var y=this._containerDimensions(),w=y[0],S=y[1];if(w===this.transform.width&&S===this.transform.height)return this;this._resizeCanvas(w,S),this.transform.resize(w,S),this.painter.resize(w,S);var I=!this._moving;return I&&this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),this.fire(new a.Event("resize",c)),I&&this.fire(new a.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(a.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(a.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(a.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,y,w){var S,I=this;if(c==="mouseenter"||c==="mouseover"){var C=!1;return{layer:y,listener:w,delegates:{mousemove:function(G){var Z=I.getLayer(y)?I.queryRenderedFeatures(G.point,{layers:[y]}):[];Z.length?C||(C=!0,w.call(I,new zr(c,I,G.originalEvent,{features:Z}))):C=!1},mouseout:function(){C=!1}}}}if(c==="mouseleave"||c==="mouseout"){var O=!1;return{layer:y,listener:w,delegates:{mousemove:function(G){(I.getLayer(y)?I.queryRenderedFeatures(G.point,{layers:[y]}):[]).length?O=!0:O&&(O=!1,w.call(I,new zr(c,I,G.originalEvent)))},mouseout:function(G){O&&(O=!1,w.call(I,new zr(c,I,G.originalEvent)))}}}}return{layer:y,listener:w,delegates:(S={},S[c]=function(G){var Z=I.getLayer(y)?I.queryRenderedFeatures(G.point,{layers:[y]}):[];Z.length&&(G.features=Z,w.call(I,G),delete G.features)},S)}},s.prototype.on=function(c,y,w){if(w===void 0)return n.prototype.on.call(this,c,y);var S=this._createDelegatedListener(c,y,w);for(var I in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(S),S.delegates)this.on(I,S.delegates[I]);return this},s.prototype.once=function(c,y,w){if(w===void 0)return n.prototype.once.call(this,c,y);var S=this._createDelegatedListener(c,y,w);for(var I in S.delegates)this.once(I,S.delegates[I]);return this},s.prototype.off=function(c,y,w){var S=this;return w===void 0?n.prototype.off.call(this,c,y):(this._delegatedListeners&&this._delegatedListeners[c]&&function(I){for(var C=I[c],O=0;O<C.length;O++){var G=C[O];if(G.layer===y&&G.listener===w){for(var Z in G.delegates)S.off(Z,G.delegates[Z]);return C.splice(O,1),S}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,y){if(!this.style)return[];var w;if(y!==void 0||c===void 0||c instanceof a.Point||Array.isArray(c)||(y=c,c=void 0),y=y||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof c[0]=="number")w=[a.Point.convert(c)];else{var S=a.Point.convert(c[0]),I=a.Point.convert(c[1]);w=[S,new a.Point(I.x,S.y),I,new a.Point(S.x,I.y),S]}return this.style.queryRenderedFeatures(w,y,this.transform)},s.prototype.querySourceFeatures=function(c,y){return this.style.querySourceFeatures(c,y)},s.prototype.setStyle=function(c,y){return(y=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},y)).diff!==!1&&y.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,y),this):(this._localIdeographFontFamily=y.localIdeographFontFamily,this._updateStyle(c,y))},s.prototype._getUIString=function(c){var y=this._locale[c];if(y==null)throw new Error("Missing UI string '"+c+"'");return y},s.prototype._updateStyle=function(c,y){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new On(this,y||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new On(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,y){var w=this;if(typeof c=="string"){var S=this._requestManager.normalizeStyleURL(c),I=this._requestManager.transformRequest(S,a.ResourceType.Style);a.getJSON(I,function(C,O){C?w.fire(new a.ErrorEvent(C)):O&&w._updateDiff(O,y)})}else typeof c=="object"&&this._updateDiff(c,y)},s.prototype._updateDiff=function(c,y){try{this.style.setState(c)&&this._update(!0)}catch(w){a.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(c,y)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,y){return this._lazyInitEmptyStyle(),this.style.addSource(c,y),this._update(!0)},s.prototype.isSourceLoaded=function(c){var y=this.style&&this.style.sourceCaches[c];if(y!==void 0)return y.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var y in c){var w=c[y]._tiles;for(var S in w){var I=w[S];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,y,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,y,w)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,y,w){w===void 0&&(w={});var S=w.pixelRatio;S===void 0&&(S=1);var I=w.sdf;I===void 0&&(I=!1);var C=w.stretchX,O=w.stretchY,G=w.content;if(this._lazyInitEmptyStyle(),y instanceof iu||Ii&&y instanceof Ii){var Z=a.browser.getImageData(y);this.style.addImage(c,{data:new a.RGBAImage({width:Z.width,height:Z.height},Z.data),pixelRatio:S,stretchX:C,stretchY:O,content:G,sdf:I,version:0})}else{if(y.width===void 0||y.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var H=y;this.style.addImage(c,{data:new a.RGBAImage({width:y.width,height:y.height},new Uint8Array(y.data)),pixelRatio:S,stretchX:C,stretchY:O,content:G,sdf:I,version:0,userImage:H}),H.onAdd&&H.onAdd(this,c)}},s.prototype.updateImage=function(c,y){var w=this.style.getImage(c);if(!w)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var S=y instanceof iu||Ii&&y instanceof Ii?a.browser.getImageData(y):y,I=S.width,C=S.height,O=S.data;return I===void 0||C===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):I!==w.data.width||C!==w.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(O,!(y instanceof iu||Ii&&y instanceof Ii)),void this.style.updateImage(c,w))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,y){a.getImage(this._requestManager.transformRequest(c,a.ResourceType.Image),y)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,y){return this._lazyInitEmptyStyle(),this.style.addLayer(c,y),this._update(!0)},s.prototype.moveLayer=function(c,y){return this.style.moveLayer(c,y),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,y,w){return this.style.setLayerZoomRange(c,y,w),this._update(!0)},s.prototype.setFilter=function(c,y,w){return w===void 0&&(w={}),this.style.setFilter(c,y,w),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,y,w,S){return S===void 0&&(S={}),this.style.setPaintProperty(c,y,w,S),this._update(!0)},s.prototype.getPaintProperty=function(c,y){return this.style.getPaintProperty(c,y)},s.prototype.setLayoutProperty=function(c,y,w,S){return S===void 0&&(S={}),this.style.setLayoutProperty(c,y,w,S),this._update(!0)},s.prototype.getLayoutProperty=function(c,y){return this.style.getLayoutProperty(c,y)},s.prototype.setLight=function(c,y){return y===void 0&&(y={}),this._lazyInitEmptyStyle(),this.style.setLight(c,y),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,y){return this.style.setFeatureState(c,y),this._update()},s.prototype.removeFeatureState=function(c,y){return this.style.removeFeatureState(c,y),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,y=0;return this._container&&(c=this._container.clientWidth||400,y=this._container.clientHeight||300),[c,y]},s.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=T.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var y=this._canvasContainer=T.create("div","mapboxgl-canvas-container",c);this._interactive&&y.classList.add("mapboxgl-interactive"),this._canvas=T.create("canvas","mapboxgl-canvas",y),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var S=this._controlContainer=T.create("div","mapboxgl-control-container",c),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(C){I[C]=T.create("div","mapboxgl-ctrl-"+C,S)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,y){var w=a.browser.devicePixelRatio||1;this._canvas.width=w*c,this._canvas.height=w*y,this._canvas.style.width=c+"px",this._canvas.style.height=y+"px"},s.prototype._setupPainter=function(){var c=a.extend({},z.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),y=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);y?(this.painter=new Zi(y,this.transform),a.webpSupported.testSupport(y)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var y,w=this,S=0,I=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(y=I.createQueryEXT(),I.beginQueryEXT(I.TIME_ELAPSED_EXT,y),S=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var C=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var O=this.transform.zoom,G=a.browser.now();this.style.zoomHistory.update(O,G);var Z=new a.EvaluationParameters(O,{now:G,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),H=Z.crossFadingFactor();H===1&&H===this._crossFadingFactor||(C=!0,this._crossFadingFactor=H),this.style.update(Z)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||C)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var re=a.browser.now()-S;I.endQueryEXT(I.TIME_ELAPSED_EXT,y),setTimeout(function(){var J=I.getQueryObjectEXT(y,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(y),w.fire(new a.Event("gpu-timing-frame",{cpuTime:re,gpuTime:J}))},50)}if(this.listens("gpu-timing-layer")){var ie=this.painter.collectGpuTimers();setTimeout(function(){var J=w.painter.queryGpuTimers(ie);w.fire(new a.Event("gpu-timing-layer",{layerTimes:J}))},50)}var ce=this._sourcesDirty||this._styleDirty||this._placementDirty;return ce||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||ce||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,y=this._controls;c<y.length;c+=1)y[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),ko(this._canvasContainer),ko(this._controlContainer),ko(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(y){c._frame=null,c._render(y)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,y){a.setCacheLimits(c,y)},o.version.get=function(){return a.version},Object.defineProperties(s.prototype,o),s}($s);function ko(n){n.parentNode&&n.parentNode.removeChild(n)}var ru={showCompass:!0,showZoom:!0,visualizePitch:!1},Da=function(n){var s=this;this.options=a.extend({},ru,n),this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),T.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),T.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=T.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Da.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),o=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},Da.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},Da.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jn(this._map,this._compass,this.options.visualizePitch)),this._container},Da.prototype.onRemove=function(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Da.prototype._createButton=function(n,s){var o=T.create("button",n,this._container);return o.type="button",o.addEventListener("click",s),o},Da.prototype._setButtonTitle=function(n,s){var o=this._map._getUIString("NavigationControl."+s);n.title=o,n.setAttribute("aria-label",o)};var jn=function(n,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Ys({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new $l({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),T.addEventListener(s,"mousedown",this.mousedown),T.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(s,"touchmove",this.touchmove),T.addEventListener(s,"touchend",this.touchend),T.addEventListener(s,"touchcancel",this.reset)};function Go(n,s,o){if(n=new a.LngLat(n.lng,n.lat),s){var c=new a.LngLat(n.lng-360,n.lat),y=new a.LngLat(n.lng+360,n.lat),w=o.locationPoint(n).distSqr(s);o.locationPoint(c).distSqr(s)<w?n=c:o.locationPoint(y).distSqr(s)<w&&(n=y)}for(;Math.abs(n.lng-o.center.lng)>180;){var S=o.locationPoint(n);if(S.x>=0&&S.y>=0&&S.x<=o.width&&S.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}jn.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),T.disableDrag()},jn.prototype.move=function(n,s){var o=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&o.setBearing(o.getBearing()+c.bearingDelta),this.mousePitch){var y=this.mousePitch.mousemoveWindow(n,s);y&&y.pitchDelta&&o.setPitch(o.getPitch()+y.pitchDelta)}},jn.prototype.off=function(){var n=this.element;T.removeEventListener(n,"mousedown",this.mousedown),T.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(n,"touchmove",this.touchmove),T.removeEventListener(n,"touchend",this.touchend),T.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},jn.prototype.offTemp=function(){T.enableDrag(),T.removeEventListener(a.window,"mousemove",this.mousemove),T.removeEventListener(a.window,"mouseup",this.mouseup)},jn.prototype.mousedown=function(n){this.down(a.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),T.mousePos(this.element,n)),T.addEventListener(a.window,"mousemove",this.mousemove),T.addEventListener(a.window,"mouseup",this.mouseup)},jn.prototype.mousemove=function(n){this.move(n,T.mousePos(this.element,n))},jn.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},jn.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},jn.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},jn.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},jn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ta={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function tl(n,s,o){var c=n.classList;for(var y in Ta)c.remove("mapboxgl-"+o+"-anchor-"+y);c.add("mapboxgl-"+o+"-anchor-"+s)}var Zo,bs=function(n){function s(o,c){if(n.call(this),(o instanceof a.window.HTMLElement||c)&&(o=a.extend({element:o},c)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=a.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");var y=T.createNS("http://www.w3.org/2000/svg","svg");y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height","41px"),y.setAttributeNS(null,"width","27px"),y.setAttributeNS(null,"viewBox","0 0 27 41");var w=T.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var S=T.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");var I=T.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");for(var C=0,O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];C<O.length;C+=1){var G=O[C],Z=T.createNS("http://www.w3.org/2000/svg","ellipse");Z.setAttributeNS(null,"opacity","0.04"),Z.setAttributeNS(null,"cx","10.5"),Z.setAttributeNS(null,"cy","5.80029008"),Z.setAttributeNS(null,"rx",G.rx),Z.setAttributeNS(null,"ry",G.ry),I.appendChild(Z)}var H=T.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);var re=T.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(re);var ie=T.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"fill","#000000");var ce=T.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ie.appendChild(ce);var J=T.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");var ue=T.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");var de=T.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");var ve=T.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#FFFFFF"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962"),ue.appendChild(de),ue.appendChild(ve),S.appendChild(I),S.appendChild(H),S.appendChild(ie),S.appendChild(J),S.appendChild(ue),y.appendChild(S),y.setAttributeNS(null,"height",41*this._scale+"px"),y.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(y),this._offset=a.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Te){Te.preventDefault()}),this._element.addEventListener("mousedown",function(Te){Te.preventDefault()}),tl(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var c=o.code,y=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&y!==32&&y!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var c=o.originalEvent.target,y=this._element;this._popup&&(c===y||y.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Go(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,Ta[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+y+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=a.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(a.Evented),nu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ko=0,zo=!1,au=function(n){function s(o){n.call(this),this.options=a.extend({},nu,o),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){var c;return this._map=o,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,Zo!==void 0?c(Zo):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(y){c(Zo=y.state!=="denied")}):c(Zo=!!a.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ko=0,zo=!1},s.prototype._isOutOfMapMaxBounds=function(o){var c=this._map.getMaxBounds(),y=o.coords;return c&&(y.longitude<c.getWest()||y.longitude>c.getEast()||y.latitude<c.getSouth()||y.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude),y=o.coords.accuracy,w=this._map.getBearing(),S=a.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(y),S,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,c=this._map.unproject([0,o]),y=this._map.unproject([1,o]),w=c.distanceTo(y),S=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=S+"px",this._circleElement.style.height=S+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&zo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var c=this;if(this._container.addEventListener("contextmenu",function(S){return S.preventDefault()}),this._geolocateButton=T.create("button","mapboxgl-ctrl-geolocate",this._container),T.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new bs(this._dotElement),this._circleElement=T.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(S){S.geolocateSource||c._watchState!=="ACTIVE_LOCK"||S.originalEvent&&S.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new a.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ko--,zo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ko>1?(o={maximumAge:6e5,timeout:0},zo=!0):(o=this.options.positionOptions,zo=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(a.Evented),Xa={maxWidth:100,unit:"metric"},Ya=function(n){this.options=a.extend({},Xa,n),a.bindAll(["_onMove","setUnit"],this)};function il(n,s,o){var c=o&&o.maxWidth||100,y=n._container.clientHeight/2,w=n.unproject([0,y]),S=n.unproject([c,y]),I=w.distanceTo(S);if(o&&o.unit==="imperial"){var C=3.2808*I;C>5280?Ja(s,c,C/5280,n._getUIString("ScaleControl.Miles")):Ja(s,c,C,n._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Ja(s,c,I/1852,n._getUIString("ScaleControl.NauticalMiles")):I>=1e3?Ja(s,c,I/1e3,n._getUIString("ScaleControl.Kilometers")):Ja(s,c,I,n._getUIString("ScaleControl.Meters"))}function Ja(n,s,o,c){var y,w,S,I=(y=o,(w=Math.pow(10,(""+Math.floor(y)).length-1))*(S=(S=y/w)>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(C){var O=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*O)/O}(S)));n.style.width=s*(I/o)+"px",n.innerHTML=I+"&nbsp;"+c}Ya.prototype.getDefaultPosition=function(){return"bottom-left"},Ya.prototype._onMove=function(){il(this._map,this._container,this.options)},Ya.prototype.onAdd=function(n){return this._map=n,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ya.prototype.onRemove=function(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ya.prototype.setUnit=function(n){this.options.unit=n,il(this._map,this._container,this.options)};var oa=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof a.window.HTMLElement?this._container=n.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};oa.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},oa.prototype.onRemove=function(){T.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},oa.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},oa.prototype._setupUI=function(){var n=this._fullscreenButton=T.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);T.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},oa.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},oa.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},oa.prototype._isFullscreen=function(){return this._fullscreen},oa.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},oa.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ou={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),su=function(n){function s(o){n.call(this),this.options=a.extend(Object.create(ou),o),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(a.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var c,y=a.window.document.createDocumentFragment(),w=a.window.document.createElement("body");for(w.innerHTML=o;c=w.firstChild;)y.appendChild(c);return this.setDOMContent(y)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=T.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=T.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=T.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Z){return c._container.classList.add(Z)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Go(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var y=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),w=this.options.anchor,S=function Z(H){if(H){if(typeof H=="number"){var re=Math.round(Math.sqrt(.5*Math.pow(H,2)));return{center:new a.Point(0,0),top:new a.Point(0,H),"top-left":new a.Point(re,re),"top-right":new a.Point(-re,re),bottom:new a.Point(0,-H),"bottom-left":new a.Point(re,-re),"bottom-right":new a.Point(-re,-re),left:new a.Point(H,0),right:new a.Point(-H,0)}}if(H instanceof a.Point||Array.isArray(H)){var ie=a.Point.convert(H);return{center:ie,top:ie,"top-left":ie,"top-right":ie,bottom:ie,"bottom-left":ie,"bottom-right":ie,left:ie,right:ie}}return{center:a.Point.convert(H.center||[0,0]),top:a.Point.convert(H.top||[0,0]),"top-left":a.Point.convert(H["top-left"]||[0,0]),"top-right":a.Point.convert(H["top-right"]||[0,0]),bottom:a.Point.convert(H.bottom||[0,0]),"bottom-left":a.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(H["bottom-right"]||[0,0]),left:a.Point.convert(H.left||[0,0]),right:a.Point.convert(H.right||[0,0])}}return Z(new a.Point(0,0))}(this.options.offset);if(!w){var I,C=this._container.offsetWidth,O=this._container.offsetHeight;I=y.y+S.bottom.y<O?["top"]:y.y>this._map.transform.height-O?["bottom"]:[],y.x<C/2?I.push("left"):y.x>this._map.transform.width-C/2&&I.push("right"),w=I.length===0?"bottom":I.join("-")}var G=y.add(S[w]).round();T.setTransform(this._container,Ta[w]+" translate("+G.x+"px,"+G.y+"px)"),tl(this._container,w,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(xs);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(a.Evented),rl={version:a.version,supported:z,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:kc,NavigationControl:Da,GeolocateControl:au,AttributionControl:xn,ScaleControl:Ya,FullscreenControl:oa,Popup:su,Marker:bs,Style:On,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){ke().acquire(we)},clearPrewarmedResources:function(){var n=st;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(we),st=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(n){a.config.ACCESS_TOKEN=n},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(n){a.config.API_URL=n},get workerCount(){return Le.workerCount},set workerCount(n){Le.workerCount=n},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){a.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){a.clearTileCache(n)},workerUrl:""};return rl}),_})})(cg);var vp=cg.exports;const W_=v_(vp);function Sd(l){let p;const d=l[15].default,h=Bu(d,l,l[14],null);return{c(){h&&h.c()},l(_){h&&h.l(_)},m(_,v){h&&h.m(_,v),p=!0},p(_,v){h&&h.p&&(!p||v&16384)&&Fu(h,d,_,_[14],p?Nu(d,_[14],v,null):Ou(_[14]),null)},i(_){p||(ct(h,_),p=!0)},o(_){gt(h,_),p=!1},d(_){h&&h.d(_)}}}function X_(l){let p,d,h,_=l[0]&&Sd(l);return{c(){p=Oe("div"),_&&_.c(),this.h()},l(v){p=Ne(v,"DIV",{class:!0,id:!0});var a=Be(p);_&&_.l(a),a.forEach(ne),this.h()},h(){Y(p,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),Y(p,"id",l[1]),ju(()=>l[16].call(p))},m(v,a){Re(v,p,a),_&&_.m(p,null),d=Gu(p,l[16].bind(p)),l[17](p),h=!0},p(v,[a]){v[0]?_?(_.p(v,a),a&1&&ct(_,1)):(_=Sd(v),_.c(),ct(_,1),_.m(p,null)):_&&(Wn(),gt(_,1,1,()=>{_=null}),Xn()),(!h||a&2)&&Y(p,"id",v[1])},i(v){h||(ct(_),h=!0)},o(v){gt(_),h=!1},d(v){v&&ne(p),_&&_.d(),d(),l[17](null)}}}function Y_(l,p,d){let{$$slots:h={},$$scope:_}=p,{map:v}=p,{id:a="map"}=p,{location:z={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=p,{style:T="https://raw.githubusercontent.com/NISRA-Tech-Lab/map_tiles/main/basemap_styles/style-omt.json"}=p,{interactive:B=!0}=p,{minzoom:M=0}=p,{maxzoom:U=20}=p,{zoom:R=null}=p,{scrollzoom:W=!0}=p,{geolocate:X=!0}=p,{zoomcontrol:ae=!0}=p,{options:se={}}=p,pe,ge;ag("map",{getMap:()=>v}),z.bounds?se={...se,bounds:z.bounds}:z.lon&&z.lat&&(se={...se,center:[z.lon,z.lat]},z.zoom&&(se.zoom=z.zoom)),Rh(()=>{const Ke=document.createElement("link");return Ke.rel="stylesheet",Ke.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",Ke.onload=()=>{d(0,v=new vp.Map({container:pe,style:T,minZoom:M,maxZoom:U,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:B,...se})),ae&&v.addControl(new vp.NavigationControl({showCompass:!1})),W||v.scrollZoom.disable(),X&&v.addControl(new vp.GeolocateControl),v.on("load",()=>{d(4,R=v.getZoom())}),v.on("zoom",()=>{d(4,R=v.getZoom())})},document.head.appendChild(Ke),()=>{v.remove(),Ke.parentNode.removeChild(Ke)}});function rt(){let Ke=document.getElementsByClassName("mapboxgl-canvas");Ke[0]&&(Ke[0].style.width="100%",v.resize())}function Ue(){ge=this.clientWidth,d(2,ge)}function Ae(Ke){Bs[Ke?"unshift":"push"](()=>{pe=Ke,d(3,pe)})}return l.$$set=Ke=>{"map"in Ke&&d(0,v=Ke.map),"id"in Ke&&d(1,a=Ke.id),"location"in Ke&&d(6,z=Ke.location),"style"in Ke&&d(7,T=Ke.style),"interactive"in Ke&&d(8,B=Ke.interactive),"minzoom"in Ke&&d(9,M=Ke.minzoom),"maxzoom"in Ke&&d(10,U=Ke.maxzoom),"zoom"in Ke&&d(4,R=Ke.zoom),"scrollzoom"in Ke&&d(11,W=Ke.scrollzoom),"geolocate"in Ke&&d(12,X=Ke.geolocate),"zoomcontrol"in Ke&&d(13,ae=Ke.zoomcontrol),"options"in Ke&&d(5,se=Ke.options),"$$scope"in Ke&&d(14,_=Ke.$$scope)},l.$$.update=()=>{l.$$.dirty&4&&ge&&rt()},[v,a,ge,pe,R,se,z,T,B,M,U,W,X,ae,_,h,Ue,Ae]}class J_ extends sn{constructor(p){super(),ln(this,p,Y_,X_,un,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function Ed(l){let p;const d=l[11].default,h=Bu(d,l,l[10],null);return{c(){h&&h.c()},l(_){h&&h.l(_)},m(_,v){h&&h.m(_,v),p=!0},p(_,v){h&&h.p&&(!p||v&1024)&&Fu(h,d,_,_[10],p?Nu(d,_[10],v,null):Ou(_[10]),null)},i(_){p||(ct(h,_),p=!0)},o(_){gt(h,_),p=!1},d(_){h&&h.d(_)}}}function Q_(l){let p,d,h=l[0]&&Ed(l);return{c(){h&&h.c(),p=ni()},l(_){h&&h.l(_),p=ni()},m(_,v){h&&h.m(_,v),Re(_,p,v),d=!0},p(_,[v]){_[0]?h?(h.p(_,v),v&1&&ct(h,1)):(h=Ed(_),h.c(),ct(h,1),h.m(p.parentNode,p)):h&&(Wn(),gt(h,1,1,()=>{h=null}),Xn())},i(_){d||(ct(h),d=!0)},o(_){gt(h),d=!1},d(_){h&&h.d(_),_&&ne(p)}}}function $_(l,p,d){let{$$slots:h={},$$scope:_}=p,{id:v}=p,{type:a}=p,{url:z=null}=p,{props:T={}}=p,{data:B=null}=p,{layer:M=null}=p,{promoteId:U=null}=p,{minzoom:R=null}=p,{maxzoom:W=null}=p,X=!1;const{getMap:ae}=Zu("map"),se=ae();se.getSource(v)&&se.removeSource(v);function pe(){se.isSourceLoaded(v)?(d(0,X=!0),console.log(v+" loaded!")):setTimeout(()=>{console.log("..."),pe()},500)}function ge(){se.isStyleLoaded(v)?(rt(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),ge()},500)}R&&(T.minzoom=R),W&&(T.maxzoom=W),M&&U?(T.promoteId={},T.promoteId[M]=U):U&&(T.promoteId=U);function rt(){console.log(v+" map source loading..."),a=="geojson"?B?(se.addSource(v,{type:a,data:B,...T}),pe()):z&&(se.addSource(v,{type:a,data:z,...T}),pe()):a=="vector"&&(se.addSource(v,{type:a,tiles:[z],...T}),pe())}ge();function Ue(){se.getSource(v).setData(B)}return l.$$set=Ae=>{"id"in Ae&&d(2,v=Ae.id),"type"in Ae&&d(3,a=Ae.type),"url"in Ae&&d(4,z=Ae.url),"props"in Ae&&d(1,T=Ae.props),"data"in Ae&&d(5,B=Ae.data),"layer"in Ae&&d(6,M=Ae.layer),"promoteId"in Ae&&d(7,U=Ae.promoteId),"minzoom"in Ae&&d(8,R=Ae.minzoom),"maxzoom"in Ae&&d(9,W=Ae.maxzoom),"$$scope"in Ae&&d(10,_=Ae.$$scope)},l.$$.update=()=>{l.$$.dirty&33&&X&&B&&Ue()},[X,T,v,a,z,B,M,U,R,W,_,h]}class ev extends sn{constructor(p){super(),ln(this,p,$_,Q_,un,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function tv(l,p,d){const{Popup:h}=W_,_=c_(),v=new h({closeButton:!1,closeOnClick:!1});let{id:a}=p,{source:z}=p,{sourceLayer:T=null}=p,{type:B}=p,{filter:M=null}=p,{layout:U={}}=p,{paint:R={}}=p,{data:W=null}=p,{code:X=null}=p,{name:ae="name"}=p,{colorCode:se=null}=p,{click:pe=!1}=p,{ignoreClick:ge=!1}=p,{clickCenter:rt=!1}=p,{selected:Ue=null}=p,{hover:Ae=!1}=p,{hovered:Ke=null}=p,{highlight:xt=!1}=p,{highlightKey:Pt="highlighted"}=p,{highlighted:Ge=[]}=p,{order:He=null}=p,{maxzoom:ht=null}=p,{minzoom:Pe=null}=p,{isChild:je=!1}=p;const{getMap:lt}=Zu("map"),De=lt();let wt=null,ot=null,Dt=[];De.getLayer(a)&&De.removeLayer(a);let Lt={id:a,type:B,source:z,paint:R,layout:U};M&&(Lt.filter=M),T&&(Lt["source-layer"]=T),ht&&(Lt.maxzoom=ht),Pe&&(Lt.minzoom=Pe),De.addLayer(Lt,He);function yi(){console.log("updating colors..."),W.forEach(qe=>{De.setFeatureState({source:z,sourceLayer:T,id:qe[X]},{color:qe[se]})})}return pe&&De.on("click",a,qe=>{if(qe.features.length>0&&!ge){let Xt=qe.features[0].id;if(je&&Ge.includes(Xt)||!je&&Ue!=Xt){if(d(0,Ue=Xt),_("select",{code:Ue}),wt&&De.setFeatureState({source:z,sourceLayer:T,id:wt},{selected:!1}),De.setFeatureState({source:z,sourceLayer:T,id:Ue},{selected:!0}),rt){let zi=centroid(qe.features[0].toJSON().geometry);De.flyTo({center:zi.geometry.coordinates})}d(24,wt=Ue)}}}),Ae&&(De.on("mousemove",a,qe=>{if(qe.features.length>0){let Xt=qe.features[0].id;Ke&&De.setFeatureState({source:z,sourceLayer:T,id:Ke},{hovered:!1}),je&&Ge.includes(Xt)||!je&&Ue!=Xt?(d(1,Ke=d(25,ot=Xt)),De.setFeatureState({source:z,sourceLayer:T,id:Ke},{hovered:!0}),De.getCanvas().style.cursor="pointer",v.setLngLat(qe.lngLat).setHTML(`<strong>${qe.features[0].properties[ae]?qe.features[0].properties[ae]:qe.features[0].properties[X]}</strong>`).addTo(De)):v.remove()}}),De.on("mouseleave",a,qe=>{Ke&&De.setFeatureState({source:z,sourceLayer:T,id:Ke},{hovered:!1}),d(1,Ke=d(25,ot=null)),De.getCanvas().style.cursor="",v.remove()})),l.$$set=qe=>{"id"in qe&&d(2,a=qe.id),"source"in qe&&d(3,z=qe.source),"sourceLayer"in qe&&d(4,T=qe.sourceLayer),"type"in qe&&d(5,B=qe.type),"filter"in qe&&d(6,M=qe.filter),"layout"in qe&&d(7,U=qe.layout),"paint"in qe&&d(8,R=qe.paint),"data"in qe&&d(9,W=qe.data),"code"in qe&&d(10,X=qe.code),"name"in qe&&d(11,ae=qe.name),"colorCode"in qe&&d(12,se=qe.colorCode),"click"in qe&&d(13,pe=qe.click),"ignoreClick"in qe&&d(14,ge=qe.ignoreClick),"clickCenter"in qe&&d(15,rt=qe.clickCenter),"selected"in qe&&d(0,Ue=qe.selected),"hover"in qe&&d(16,Ae=qe.hover),"hovered"in qe&&d(1,Ke=qe.hovered),"highlight"in qe&&d(17,xt=qe.highlight),"highlightKey"in qe&&d(18,Pt=qe.highlightKey),"highlighted"in qe&&d(19,Ge=qe.highlighted),"order"in qe&&d(20,He=qe.order),"maxzoom"in qe&&d(21,ht=qe.maxzoom),"minzoom"in qe&&d(22,Pe=qe.minzoom),"isChild"in qe&&d(23,je=qe.isChild)},l.$$.update=()=>{l.$$.dirty[0]&4096&&se&&yi(),l.$$.dirty[0]&68026392&&xt&&Ge!=Dt&&(Dt[0]&&Dt.forEach(qe=>{let Xt={};Xt[Pt]=!1,De.setFeatureState({source:z,sourceLayer:T,id:qe},Xt)}),d(26,Dt=Ge),Ge[0]&&Ge.forEach(qe=>{let Xt={};Xt[Pt]=!0,De.setFeatureState({source:z,sourceLayer:T,id:qe},Xt)})),l.$$.dirty[0]&16777241&&Ue!=wt&&(wt&&De.setFeatureState({source:z,sourceLayer:T,id:wt},{selected:!1}),Ue&&De.setFeatureState({source:z,sourceLayer:T,id:Ue},{selected:!0}),d(24,wt=Ue)),l.$$.dirty[0]&33619994&&Ae&&Ke!=ot&&(ot&&De.setFeatureState({source:z,sourceLayer:T,id:ot},{hovered:!1}),Ke&&De.setFeatureState({source:z,sourceLayer:T,id:Ke},{hovered:!0}),d(25,ot=Ke))},[Ue,Ke,a,z,T,B,M,U,R,W,X,ae,se,pe,ge,rt,Ae,xt,Pt,Ge,He,ht,Pe,je,wt,ot,Dt]}class Eh extends sn{constructor(p){super(),ln(this,p,tv,null,un,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function iv(l){return l===0?!0:l}function es(l){return iv(l)?Array.isArray(l)?p=>l.map(d=>typeof d!="function"?p[d]:d(p)):typeof l!="function"?p=>p[l]:l:null}function rv(l){const p={};for(const d of l){if(Object(d)!==d)throw new TypeError("iterable for fromEntries should yield objects");const{"0":h,"1":_}=d;Object.defineProperty(p,h,{configurable:!0,enumerable:!0,writable:!0,value:_})}return p}function kh(l,p={}){return rv(Object.entries(l).filter(([d,h])=>h!==void 0&&p[d]===void 0))}function nv(l,p){if(!Array.isArray(l))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof l}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(p)||p===void 0||p===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const d={},h=Object.keys(p),_=h.length;let v,a,z,T,B,M,U,R;const W=l.length;for(v=0;v<_;v+=1){for(T=h[v],U=p[T],B=null,M=null,a=0;a<W;a+=1)if(R=U(l[a]),Array.isArray(R)){const X=R.length;for(z=0;z<X;z+=1)R[z]!==void 0&&R[z]!==null&&Number.isNaN(R[z])===!1&&((B===null||R[z]<B)&&(B=R[z]),(M===null||R[z]>M)&&(M=R[z]))}else R!=null&&Number.isNaN(R)===!1&&((B===null||R<B)&&(B=R),(M===null||R>M)&&(M=R));d[T]=[B,M]}return d}function pg(l=[],p){return Array.isArray(p)===!0?p.map((d,h)=>d===null?l[h]:d):l}function op(l){return function([d,h]){return d?pg(d[l],h):h}}function bp(l,p){return l==null||p==null?NaN:l<p?-1:l>p?1:l>=p?0:NaN}function av(l,p){return l==null||p==null?NaN:p<l?-1:p>l?1:p>=l?0:NaN}function hg(l){let p,d,h;l.length!==2?(p=bp,d=(z,T)=>bp(l(z),T),h=(z,T)=>l(z)-T):(p=l===bp||l===av?l:ov,d=l,h=l);function _(z,T,B=0,M=z.length){if(B<M){if(p(T,T)!==0)return M;do{const U=B+M>>>1;d(z[U],T)<0?B=U+1:M=U}while(B<M)}return B}function v(z,T,B=0,M=z.length){if(B<M){if(p(T,T)!==0)return M;do{const U=B+M>>>1;d(z[U],T)<=0?B=U+1:M=U}while(B<M)}return B}function a(z,T,B=0,M=z.length){const U=_(z,T,B,M-1);return U>B&&h(z[U-1],T)>-h(z[U],T)?U-1:U}return{left:_,center:a,right:v}}function ov(){return 0}function sv(l){return l===null?NaN:+l}const lv=hg(bp),uv=lv.right;hg(sv).center;const cv=uv;class kd extends Map{constructor(p,d=fv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:d}}),p!=null)for(const[h,_]of p)this.set(h,_)}get(p){return super.get(zd(this,p))}has(p){return super.has(zd(this,p))}set(p,d){return super.set(pv(this,p),d)}delete(p){return super.delete(hv(this,p))}}function zd({_intern:l,_key:p},d){const h=p(d);return l.has(h)?l.get(h):d}function pv({_intern:l,_key:p},d){const h=p(d);return l.has(h)?l.get(h):(l.set(h,d),d)}function hv({_intern:l,_key:p},d){const h=p(d);return l.has(h)&&(d=l.get(h),l.delete(h)),d}function fv(l){return l!==null&&typeof l=="object"?l.valueOf():l}var Ah=Math.sqrt(50),Ph=Math.sqrt(10),Ch=Math.sqrt(2);function dv(l,p,d){var h,_=-1,v,a,z;if(p=+p,l=+l,d=+d,l===p&&d>0)return[l];if((h=p<l)&&(v=l,l=p,p=v),(z=fg(l,p,d))===0||!isFinite(z))return[];if(z>0){let T=Math.round(l/z),B=Math.round(p/z);for(T*z<l&&++T,B*z>p&&--B,a=new Array(v=B-T+1);++_<v;)a[_]=(T+_)*z}else{z=-z;let T=Math.round(l*z),B=Math.round(p*z);for(T/z<l&&++T,B/z>p&&--B,a=new Array(v=B-T+1);++_<v;)a[_]=(T+_)/z}return h&&a.reverse(),a}function fg(l,p,d){var h=(p-l)/Math.max(0,d),_=Math.floor(Math.log(h)/Math.LN10),v=h/Math.pow(10,_);return _>=0?(v>=Ah?10:v>=Ph?5:v>=Ch?2:1)*Math.pow(10,_):-Math.pow(10,-_)/(v>=Ah?10:v>=Ph?5:v>=Ch?2:1)}function mv(l,p,d){var h=Math.abs(p-l)/Math.max(0,d),_=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),v=h/_;return v>=Ah?_*=10:v>=Ph?_*=5:v>=Ch&&(_*=2),p<l?-_:_}function gv(l,p,d){l=+l,p=+p,d=(_=arguments.length)<2?(p=l,l=0,1):_<3?1:+d;for(var h=-1,_=Math.max(0,Math.ceil((p-l)/d))|0,v=new Array(_);++h<_;)v[h]=l+h*d;return v}function Lp(l,p){switch(arguments.length){case 0:break;case 1:this.range(l);break;default:this.range(p).domain(l);break}return this}const Td=Symbol("implicit");function dg(){var l=new kd,p=[],d=[],h=Td;function _(v){let a=l.get(v);if(a===void 0){if(h!==Td)return h;l.set(v,a=p.push(v)-1)}return d[a%d.length]}return _.domain=function(v){if(!arguments.length)return p.slice();p=[],l=new kd;for(const a of v)l.has(a)||l.set(a,p.push(a)-1);return _},_.range=function(v){return arguments.length?(d=Array.from(v),_):d.slice()},_.unknown=function(v){return arguments.length?(h=v,_):h},_.copy=function(){return dg(p,d).unknown(h)},Lp.apply(_,arguments),_}function mg(){var l=dg().unknown(void 0),p=l.domain,d=l.range,h=0,_=1,v,a,z=!1,T=0,B=0,M=.5;delete l.unknown;function U(){var R=p().length,W=_<h,X=W?_:h,ae=W?h:_;v=(ae-X)/Math.max(1,R-T+B*2),z&&(v=Math.floor(v)),X+=(ae-X-v*(R-T))*M,a=v*(1-T),z&&(X=Math.round(X),a=Math.round(a));var se=gv(R).map(function(pe){return X+v*pe});return d(W?se.reverse():se)}return l.domain=function(R){return arguments.length?(p(R),U()):p()},l.range=function(R){return arguments.length?([h,_]=R,h=+h,_=+_,U()):[h,_]},l.rangeRound=function(R){return[h,_]=R,h=+h,_=+_,z=!0,U()},l.bandwidth=function(){return a},l.step=function(){return v},l.round=function(R){return arguments.length?(z=!!R,U()):z},l.padding=function(R){return arguments.length?(T=Math.min(1,B=+R),U()):T},l.paddingInner=function(R){return arguments.length?(T=Math.min(1,R),U()):T},l.paddingOuter=function(R){return arguments.length?(B=+R,U()):B},l.align=function(R){return arguments.length?(M=Math.max(0,Math.min(1,R)),U()):M},l.copy=function(){return mg(p(),[h,_]).round(z).paddingInner(T).paddingOuter(B).align(M)},Lp.apply(U(),arguments)}function Vh(l,p,d){l.prototype=p.prototype=d,d.constructor=l}function gg(l,p){var d=Object.create(l.prototype);for(var h in p)d[h]=p[h];return d}function $u(){}var Uu=.7,kp=1/Uu,Dl="\\s*([+-]?\\d+)\\s*",Vu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yv=/^#([0-9a-f]{3,8})$/,_v=new RegExp(`^rgb\\(${Dl},${Dl},${Dl}\\)$`),vv=new RegExp(`^rgb\\(${lo},${lo},${lo}\\)$`),bv=new RegExp(`^rgba\\(${Dl},${Dl},${Dl},${Vu}\\)$`),xv=new RegExp(`^rgba\\(${lo},${lo},${lo},${Vu}\\)$`),wv=new RegExp(`^hsl\\(${Vu},${lo},${lo}\\)$`),Sv=new RegExp(`^hsla\\(${Vu},${lo},${lo},${Vu}\\)$`),Id={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vh($u,qu,{copy(l){return Object.assign(new this.constructor,this,l)},displayable(){return this.rgb().displayable()},hex:Ad,formatHex:Ad,formatHex8:Ev,formatHsl:kv,formatRgb:Pd,toString:Pd});function Ad(){return this.rgb().formatHex()}function Ev(){return this.rgb().formatHex8()}function kv(){return yg(this).formatHsl()}function Pd(){return this.rgb().formatRgb()}function qu(l){var p,d;return l=(l+"").trim().toLowerCase(),(p=yv.exec(l))?(d=p[1].length,p=parseInt(p[1],16),d===6?Cd(p):d===3?new pa(p>>8&15|p>>4&240,p>>4&15|p&240,(p&15)<<4|p&15,1):d===8?sp(p>>24&255,p>>16&255,p>>8&255,(p&255)/255):d===4?sp(p>>12&15|p>>8&240,p>>8&15|p>>4&240,p>>4&15|p&240,((p&15)<<4|p&15)/255):null):(p=_v.exec(l))?new pa(p[1],p[2],p[3],1):(p=vv.exec(l))?new pa(p[1]*255/100,p[2]*255/100,p[3]*255/100,1):(p=bv.exec(l))?sp(p[1],p[2],p[3],p[4]):(p=xv.exec(l))?sp(p[1]*255/100,p[2]*255/100,p[3]*255/100,p[4]):(p=wv.exec(l))?Ld(p[1],p[2]/100,p[3]/100,1):(p=Sv.exec(l))?Ld(p[1],p[2]/100,p[3]/100,p[4]):Id.hasOwnProperty(l)?Cd(Id[l]):l==="transparent"?new pa(NaN,NaN,NaN,0):null}function Cd(l){return new pa(l>>16&255,l>>8&255,l&255,1)}function sp(l,p,d,h){return h<=0&&(l=p=d=NaN),new pa(l,p,d,h)}function zv(l){return l instanceof $u||(l=qu(l)),l?(l=l.rgb(),new pa(l.r,l.g,l.b,l.opacity)):new pa}function Mh(l,p,d,h){return arguments.length===1?zv(l):new pa(l,p,d,h??1)}function pa(l,p,d,h){this.r=+l,this.g=+p,this.b=+d,this.opacity=+h}Vh(pa,Mh,gg($u,{brighter(l){return l=l==null?kp:Math.pow(kp,l),new pa(this.r*l,this.g*l,this.b*l,this.opacity)},darker(l){return l=l==null?Uu:Math.pow(Uu,l),new pa(this.r*l,this.g*l,this.b*l,this.opacity)},rgb(){return this},clamp(){return new pa(Rs(this.r),Rs(this.g),Rs(this.b),zp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Md,formatHex:Md,formatHex8:Tv,formatRgb:Dd,toString:Dd}));function Md(){return`#${Ls(this.r)}${Ls(this.g)}${Ls(this.b)}`}function Tv(){return`#${Ls(this.r)}${Ls(this.g)}${Ls(this.b)}${Ls((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dd(){const l=zp(this.opacity);return`${l===1?"rgb(":"rgba("}${Rs(this.r)}, ${Rs(this.g)}, ${Rs(this.b)}${l===1?")":`, ${l})`}`}function zp(l){return isNaN(l)?1:Math.max(0,Math.min(1,l))}function Rs(l){return Math.max(0,Math.min(255,Math.round(l)||0))}function Ls(l){return l=Rs(l),(l<16?"0":"")+l.toString(16)}function Ld(l,p,d,h){return h<=0?l=p=d=NaN:d<=0||d>=1?l=p=NaN:p<=0&&(l=NaN),new Oa(l,p,d,h)}function yg(l){if(l instanceof Oa)return new Oa(l.h,l.s,l.l,l.opacity);if(l instanceof $u||(l=qu(l)),!l)return new Oa;if(l instanceof Oa)return l;l=l.rgb();var p=l.r/255,d=l.g/255,h=l.b/255,_=Math.min(p,d,h),v=Math.max(p,d,h),a=NaN,z=v-_,T=(v+_)/2;return z?(p===v?a=(d-h)/z+(d<h)*6:d===v?a=(h-p)/z+2:a=(p-d)/z+4,z/=T<.5?v+_:2-v-_,a*=60):z=T>0&&T<1?0:a,new Oa(a,z,T,l.opacity)}function Iv(l,p,d,h){return arguments.length===1?yg(l):new Oa(l,p,d,h??1)}function Oa(l,p,d,h){this.h=+l,this.s=+p,this.l=+d,this.opacity=+h}Vh(Oa,Iv,gg($u,{brighter(l){return l=l==null?kp:Math.pow(kp,l),new Oa(this.h,this.s,this.l*l,this.opacity)},darker(l){return l=l==null?Uu:Math.pow(Uu,l),new Oa(this.h,this.s,this.l*l,this.opacity)},rgb(){var l=this.h%360+(this.h<0)*360,p=isNaN(l)||isNaN(this.s)?0:this.s,d=this.l,h=d+(d<.5?d:1-d)*p,_=2*d-h;return new pa(zh(l>=240?l-240:l+120,_,h),zh(l,_,h),zh(l<120?l+240:l-120,_,h),this.opacity)},clamp(){return new Oa(Rd(this.h),lp(this.s),lp(this.l),zp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const l=zp(this.opacity);return`${l===1?"hsl(":"hsla("}${Rd(this.h)}, ${lp(this.s)*100}%, ${lp(this.l)*100}%${l===1?")":`, ${l})`}`}}));function Rd(l){return l=(l||0)%360,l<0?l+360:l}function lp(l){return Math.max(0,Math.min(1,l||0))}function zh(l,p,d){return(l<60?p+(d-p)*l/60:l<180?d:l<240?p+(d-p)*(240-l)/60:p)*255}const qh=l=>()=>l;function Av(l,p){return function(d){return l+d*p}}function Pv(l,p,d){return l=Math.pow(l,d),p=Math.pow(p,d)-l,d=1/d,function(h){return Math.pow(l+h*p,d)}}function Cv(l){return(l=+l)==1?_g:function(p,d){return d-p?Pv(p,d,l):qh(isNaN(p)?d:p)}}function _g(l,p){var d=p-l;return d?Av(l,d):qh(isNaN(l)?p:l)}const Bd=function l(p){var d=Cv(p);function h(_,v){var a=d((_=Mh(_)).r,(v=Mh(v)).r),z=d(_.g,v.g),T=d(_.b,v.b),B=_g(_.opacity,v.opacity);return function(M){return _.r=a(M),_.g=z(M),_.b=T(M),_.opacity=B(M),_+""}}return h.gamma=l,h}(1);function Mv(l,p){p||(p=[]);var d=l?Math.min(p.length,l.length):0,h=p.slice(),_;return function(v){for(_=0;_<d;++_)h[_]=l[_]*(1-v)+p[_]*v;return h}}function Dv(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}function Lv(l,p){var d=p?p.length:0,h=l?Math.min(d,l.length):0,_=new Array(h),v=new Array(d),a;for(a=0;a<h;++a)_[a]=jh(l[a],p[a]);for(;a<d;++a)v[a]=p[a];return function(z){for(a=0;a<h;++a)v[a]=_[a](z);return v}}function Rv(l,p){var d=new Date;return l=+l,p=+p,function(h){return d.setTime(l*(1-h)+p*h),d}}function Tp(l,p){return l=+l,p=+p,function(d){return l*(1-d)+p*d}}function Bv(l,p){var d={},h={},_;(l===null||typeof l!="object")&&(l={}),(p===null||typeof p!="object")&&(p={});for(_ in p)_ in l?d[_]=jh(l[_],p[_]):h[_]=p[_];return function(v){for(_ in d)h[_]=d[_](v);return h}}var Dh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Th=new RegExp(Dh.source,"g");function Fv(l){return function(){return l}}function Ov(l){return function(p){return l(p)+""}}function Nv(l,p){var d=Dh.lastIndex=Th.lastIndex=0,h,_,v,a=-1,z=[],T=[];for(l=l+"",p=p+"";(h=Dh.exec(l))&&(_=Th.exec(p));)(v=_.index)>d&&(v=p.slice(d,v),z[a]?z[a]+=v:z[++a]=v),(h=h[0])===(_=_[0])?z[a]?z[a]+=_:z[++a]=_:(z[++a]=null,T.push({i:a,x:Tp(h,_)})),d=Th.lastIndex;return d<p.length&&(v=p.slice(d),z[a]?z[a]+=v:z[++a]=v),z.length<2?T[0]?Ov(T[0].x):Fv(p):(p=T.length,function(B){for(var M=0,U;M<p;++M)z[(U=T[M]).i]=U.x(B);return z.join("")})}function jh(l,p){var d=typeof p,h;return p==null||d==="boolean"?qh(p):(d==="number"?Tp:d==="string"?(h=qu(p))?(p=h,Bd):Nv:p instanceof qu?Bd:p instanceof Date?Rv:Dv(p)?Mv:Array.isArray(p)?Lv:typeof p.valueOf!="function"&&typeof p.toString!="function"||isNaN(p)?Bv:Tp)(l,p)}function Uv(l,p){return l=+l,p=+p,function(d){return Math.round(l*(1-d)+p*d)}}function Vv(l){return function(){return l}}function qv(l){return+l}var Fd=[0,1];function so(l){return l}function Lh(l,p){return(p-=l=+l)?function(d){return(d-l)/p}:Vv(isNaN(p)?NaN:.5)}function jv(l,p){var d;return l>p&&(d=l,l=p,p=d),function(h){return Math.max(l,Math.min(p,h))}}function Gv(l,p,d){var h=l[0],_=l[1],v=p[0],a=p[1];return _<h?(h=Lh(_,h),v=d(a,v)):(h=Lh(h,_),v=d(v,a)),function(z){return v(h(z))}}function Zv(l,p,d){var h=Math.min(l.length,p.length)-1,_=new Array(h),v=new Array(h),a=-1;for(l[h]<l[0]&&(l=l.slice().reverse(),p=p.slice().reverse());++a<h;)_[a]=Lh(l[a],l[a+1]),v[a]=d(p[a],p[a+1]);return function(z){var T=cv(l,z,1,h)-1;return v[T](_[T](z))}}function vg(l,p){return p.domain(l.domain()).range(l.range()).interpolate(l.interpolate()).clamp(l.clamp()).unknown(l.unknown())}function bg(){var l=Fd,p=Fd,d=jh,h,_,v,a=so,z,T,B;function M(){var R=Math.min(l.length,p.length);return a!==so&&(a=jv(l[0],l[R-1])),z=R>2?Zv:Gv,T=B=null,U}function U(R){return R==null||isNaN(R=+R)?v:(T||(T=z(l.map(h),p,d)))(h(a(R)))}return U.invert=function(R){return a(_((B||(B=z(p,l.map(h),Tp)))(R)))},U.domain=function(R){return arguments.length?(l=Array.from(R,qv),M()):l.slice()},U.range=function(R){return arguments.length?(p=Array.from(R),M()):p.slice()},U.rangeRound=function(R){return p=Array.from(R),d=Uv,M()},U.clamp=function(R){return arguments.length?(a=R?!0:so,M()):a!==so},U.interpolate=function(R){return arguments.length?(d=R,M()):d},U.unknown=function(R){return arguments.length?(v=R,U):v},function(R,W){return h=R,_=W,M()}}function Kv(){return bg()(so,so)}function Hv(l){return Math.abs(l=Math.round(l))>=1e21?l.toLocaleString("en").replace(/,/g,""):l.toString(10)}function Ip(l,p){if((d=(l=p?l.toExponential(p-1):l.toExponential()).indexOf("e"))<0)return null;var d,h=l.slice(0,d);return[h.length>1?h[0]+h.slice(2):h,+l.slice(d+1)]}function Ll(l){return l=Ip(Math.abs(l)),l?l[1]:NaN}function Wv(l,p){return function(d,h){for(var _=d.length,v=[],a=0,z=l[0],T=0;_>0&&z>0&&(T+z+1>h&&(z=Math.max(1,h-T)),v.push(d.substring(_-=z,_+z)),!((T+=z+1)>h));)z=l[a=(a+1)%l.length];return v.reverse().join(p)}}function Xv(l){return function(p){return p.replace(/[0-9]/g,function(d){return l[+d]})}}var Yv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ap(l){if(!(p=Yv.exec(l)))throw new Error("invalid format: "+l);var p;return new Gh({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}Ap.prototype=Gh.prototype;function Gh(l){this.fill=l.fill===void 0?" ":l.fill+"",this.align=l.align===void 0?">":l.align+"",this.sign=l.sign===void 0?"-":l.sign+"",this.symbol=l.symbol===void 0?"":l.symbol+"",this.zero=!!l.zero,this.width=l.width===void 0?void 0:+l.width,this.comma=!!l.comma,this.precision=l.precision===void 0?void 0:+l.precision,this.trim=!!l.trim,this.type=l.type===void 0?"":l.type+""}Gh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jv(l){e:for(var p=l.length,d=1,h=-1,_;d<p;++d)switch(l[d]){case".":h=_=d;break;case"0":h===0&&(h=d),_=d;break;default:if(!+l[d])break e;h>0&&(h=0);break}return h>0?l.slice(0,h)+l.slice(_+1):l}var xg;function Qv(l,p){var d=Ip(l,p);if(!d)return l+"";var h=d[0],_=d[1],v=_-(xg=Math.max(-8,Math.min(8,Math.floor(_/3)))*3)+1,a=h.length;return v===a?h:v>a?h+new Array(v-a+1).join("0"):v>0?h.slice(0,v)+"."+h.slice(v):"0."+new Array(1-v).join("0")+Ip(l,Math.max(0,p+v-1))[0]}function Od(l,p){var d=Ip(l,p);if(!d)return l+"";var h=d[0],_=d[1];return _<0?"0."+new Array(-_).join("0")+h:h.length>_+1?h.slice(0,_+1)+"."+h.slice(_+1):h+new Array(_-h.length+2).join("0")}const Nd={"%":(l,p)=>(l*100).toFixed(p),b:l=>Math.round(l).toString(2),c:l=>l+"",d:Hv,e:(l,p)=>l.toExponential(p),f:(l,p)=>l.toFixed(p),g:(l,p)=>l.toPrecision(p),o:l=>Math.round(l).toString(8),p:(l,p)=>Od(l*100,p),r:Od,s:Qv,X:l=>Math.round(l).toString(16).toUpperCase(),x:l=>Math.round(l).toString(16)};function Ud(l){return l}var Vd=Array.prototype.map,qd=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $v(l){var p=l.grouping===void 0||l.thousands===void 0?Ud:Wv(Vd.call(l.grouping,Number),l.thousands+""),d=l.currency===void 0?"":l.currency[0]+"",h=l.currency===void 0?"":l.currency[1]+"",_=l.decimal===void 0?".":l.decimal+"",v=l.numerals===void 0?Ud:Xv(Vd.call(l.numerals,String)),a=l.percent===void 0?"%":l.percent+"",z=l.minus===void 0?"−":l.minus+"",T=l.nan===void 0?"NaN":l.nan+"";function B(U){U=Ap(U);var R=U.fill,W=U.align,X=U.sign,ae=U.symbol,se=U.zero,pe=U.width,ge=U.comma,rt=U.precision,Ue=U.trim,Ae=U.type;Ae==="n"?(ge=!0,Ae="g"):Nd[Ae]||(rt===void 0&&(rt=12),Ue=!0,Ae="g"),(se||R==="0"&&W==="=")&&(se=!0,R="0",W="=");var Ke=ae==="$"?d:ae==="#"&&/[boxX]/.test(Ae)?"0"+Ae.toLowerCase():"",xt=ae==="$"?h:/[%p]/.test(Ae)?a:"",Pt=Nd[Ae],Ge=/[defgprs%]/.test(Ae);rt=rt===void 0?6:/[gprs]/.test(Ae)?Math.max(1,Math.min(21,rt)):Math.max(0,Math.min(20,rt));function He(ht){var Pe=Ke,je=xt,lt,De,wt;if(Ae==="c")je=Pt(ht)+je,ht="";else{ht=+ht;var ot=ht<0||1/ht<0;if(ht=isNaN(ht)?T:Pt(Math.abs(ht),rt),Ue&&(ht=Jv(ht)),ot&&+ht==0&&X!=="+"&&(ot=!1),Pe=(ot?X==="("?X:z:X==="-"||X==="("?"":X)+Pe,je=(Ae==="s"?qd[8+xg/3]:"")+je+(ot&&X==="("?")":""),Ge){for(lt=-1,De=ht.length;++lt<De;)if(wt=ht.charCodeAt(lt),48>wt||wt>57){je=(wt===46?_+ht.slice(lt+1):ht.slice(lt))+je,ht=ht.slice(0,lt);break}}}ge&&!se&&(ht=p(ht,1/0));var Dt=Pe.length+ht.length+je.length,Lt=Dt<pe?new Array(pe-Dt+1).join(R):"";switch(ge&&se&&(ht=p(Lt+ht,Lt.length?pe-je.length:1/0),Lt=""),W){case"<":ht=Pe+ht+je+Lt;break;case"=":ht=Pe+Lt+ht+je;break;case"^":ht=Lt.slice(0,Dt=Lt.length>>1)+Pe+ht+je+Lt.slice(Dt);break;default:ht=Lt+Pe+ht+je;break}return v(ht)}return He.toString=function(){return U+""},He}function M(U,R){var W=B((U=Ap(U),U.type="f",U)),X=Math.max(-8,Math.min(8,Math.floor(Ll(R)/3)))*3,ae=Math.pow(10,-X),se=qd[8+X/3];return function(pe){return W(ae*pe)+se}}return{format:B,formatPrefix:M}}var up,wg,Sg;e0({thousands:",",grouping:[3],currency:["$",""]});function e0(l){return up=$v(l),wg=up.format,Sg=up.formatPrefix,up}function t0(l){return Math.max(0,-Ll(Math.abs(l)))}function i0(l,p){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ll(p)/3)))*3-Ll(Math.abs(l)))}function r0(l,p){return l=Math.abs(l),p=Math.abs(p)-l,Math.max(0,Ll(p)-Ll(l))+1}function n0(l,p,d,h){var _=mv(l,p,d),v;switch(h=Ap(h??",f"),h.type){case"s":{var a=Math.max(Math.abs(l),Math.abs(p));return h.precision==null&&!isNaN(v=i0(_,a))&&(h.precision=v),Sg(h,a)}case"":case"e":case"g":case"p":case"r":{h.precision==null&&!isNaN(v=r0(_,Math.max(Math.abs(l),Math.abs(p))))&&(h.precision=v-(h.type==="e"));break}case"f":case"%":{h.precision==null&&!isNaN(v=t0(_))&&(h.precision=v-(h.type==="%")*2);break}}return wg(h)}function Eg(l){var p=l.domain;return l.ticks=function(d){var h=p();return dv(h[0],h[h.length-1],d??10)},l.tickFormat=function(d,h){var _=p();return n0(_[0],_[_.length-1],d??10,h)},l.nice=function(d){d==null&&(d=10);var h=p(),_=0,v=h.length-1,a=h[_],z=h[v],T,B,M=10;for(z<a&&(B=a,a=z,z=B,B=_,_=v,v=B);M-- >0;){if(B=fg(a,z,d),B===T)return h[_]=a,h[v]=z,p(h);if(B>0)a=Math.floor(a/B)*B,z=Math.ceil(z/B)*B;else if(B<0)a=Math.ceil(a*B)/B,z=Math.floor(z*B)/B;else break;T=B}return l},l}function xp(){var l=Kv();return l.copy=function(){return vg(l,xp())},Lp.apply(l,arguments),Eg(l)}function jd(l){return function(p){return p<0?-Math.pow(-p,l):Math.pow(p,l)}}function a0(l){return l<0?-Math.sqrt(-l):Math.sqrt(l)}function o0(l){return l<0?-l*l:l*l}function s0(l){var p=l(so,so),d=1;function h(){return d===1?l(so,so):d===.5?l(a0,o0):l(jd(d),jd(1/d))}return p.exponent=function(_){return arguments.length?(d=+_,h()):d},Eg(p)}function kg(){var l=s0(bg());return l.copy=function(){return vg(l,kg()).exponent(l.exponent())},Lp.apply(l,arguments),l}function l0(){return kg.apply(null,arguments).exponent(.5)}const Lu={x:xp,y:xp,z:xp,r:l0};function u0(l){return l.constant?"symlog":l.base?"log":l.exponent?l.exponent()===.5?"sqrt":"pow":"other"}function Gd(l){return l}function c0(l){return p=>Math.log(l*p)}function p0(l){return p=>l*Math.exp(p)}function h0(l){return p=>Math.sign(p)*Math.log1p(Math.abs(p/l))}function f0(l){return p=>Math.sign(p)*Math.expm1(Math.abs(p))*l}function cp(l){return function(d){return d<0?-Math.pow(-d,l):Math.pow(d,l)}}function d0(l){const p=u0(l);if(p==="log"){const d=Math.sign(l.domain()[0]);return{lift:c0(d),ground:p0(d),scaleType:p}}return p==="pow"?{lift:cp(1),ground:cp(1/1),scaleType:p}:p==="sqrt"?{lift:cp(.5),ground:cp(1/.5),scaleType:p}:p==="symlog"?{lift:h0(1),ground:f0(1),scaleType:p}:{lift:Gd,ground:Gd,scaleType:p}}function m0(l,p){if(typeof l.range!="function")throw new Error("Scale method `range` must be a function");if(typeof l.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(p))return l.domain();l.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",l.domain()),l.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",l.range());const{lift:d,ground:h}=d0(l),_=l.domain()[0],v=Object.prototype.toString.call(_)==="[object Date]",[a,z]=l.domain().map(W=>d(v?W.getTime():W)),[T,B]=l.range(),M=p[0]||0,U=p[1]||0,R=(z-a)/(Math.abs(B-T)-M-U);return[a-M*R,U*R+z].map(W=>h(v?new Date(W):W))}function g0(l,p,d,h,_){let v,a;return _===!0?(v=0,a=100):(v=l==="r"?1:0,a=l==="y"?d:l==="r"?25:p),h===!0?[a,v]:[v,a]}function y0(l,p,d,h,_,v){return _?typeof _=="function"?_({width:p,height:d}):_:g0(l,p,d,h,v)}function pp(l){return function([d,h,_,v,a,z,T,B,M,U]){if(h===null)return null;const R=y0(l,T,B,z,M,U),W=d===Lu[l]?d():d.copy();return W.domain(pg(h[l],_)).range(R),v&&W.domain(m0(W,v)),a===!0&&(typeof W.nice=="function"?W.nice():console.error(`[Layer Cake] You set \`${l}Nice: true\` but the ${l}Scale does not have a \`.nice\` method. Ignoring...`)),W}}function hp([l,p]){return d=>{const h=l(d);return Array.isArray(h)?h.map(_=>p(_)):p(h)}}function fp([l]){if(typeof l=="function"){if(typeof l.range=="function")return l.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const dp={x:!1,y:!0,z:!1,r:!1};const _0=l=>({element:l[0]&4,width:l[0]&256,height:l[0]&512,aspectRatio:l[0]&1024,containerWidth:l[0]&128,containerHeight:l[0]&64}),Zd=l=>({element:l[2],width:l[8],height:l[9],aspectRatio:l[10],containerWidth:l[7],containerHeight:l[6]});function Kd(l){let p,d,h;const _=l[90].default,v=Bu(_,l,l[89],Zd);return{c(){p=Oe("div"),v&&v.c(),this.h()},l(a){p=Ne(a,"DIV",{class:!0});var z=Be(p);v&&v.l(z),z.forEach(ne),this.h()},h(){Y(p,"class","layercake-container svelte-vhzpsp"),ju(()=>l[92].call(p)),Qe(p,"position",l[5]),Qe(p,"top",l[5]==="absolute"?"0":null),Qe(p,"right",l[5]==="absolute"?"0":null),Qe(p,"bottom",l[5]==="absolute"?"0":null),Qe(p,"left",l[5]==="absolute"?"0":null),Qe(p,"pointer-events",l[4]===!1?"none":null)},m(a,z){Re(a,p,z),v&&v.m(p,null),l[91](p),d=Gu(p,l[92].bind(p)),h=!0},p(a,z){v&&v.p&&(!h||z[0]&1988|z[2]&134217728)&&Fu(v,_,a,a[89],h?Nu(_,a[89],z,_0):Ou(a[89]),Zd),z[0]&32&&Qe(p,"position",a[5]),z[0]&32&&Qe(p,"top",a[5]==="absolute"?"0":null),z[0]&32&&Qe(p,"right",a[5]==="absolute"?"0":null),z[0]&32&&Qe(p,"bottom",a[5]==="absolute"?"0":null),z[0]&32&&Qe(p,"left",a[5]==="absolute"?"0":null),z[0]&16&&Qe(p,"pointer-events",a[4]===!1?"none":null)},i(a){h||(ct(v,a),h=!0)},o(a){gt(v,a),h=!1},d(a){a&&ne(p),v&&v.d(a),l[91](null),d()}}}function v0(l){let p,d,h=(l[3]===!0||typeof window<"u")&&Kd(l);return{c(){h&&h.c(),p=ni()},l(_){h&&h.l(_),p=ni()},m(_,v){h&&h.m(_,v),Re(_,p,v),d=!0},p(_,v){_[3]===!0||typeof window<"u"?h?(h.p(_,v),v[0]&8&&ct(h,1)):(h=Kd(_),h.c(),ct(h,1),h.m(p.parentNode,p)):h&&(Wn(),gt(h,1,1,()=>{h=null}),Xn())},i(_){d||(ct(h),d=!0)},o(_){gt(h),d=!1},d(_){h&&h.d(_),_&&ne(p)}}}function b0(l,p,d){let h,_,v,a,z,T,B,M,U,R,W,X,ae,se,pe,ge,rt,Ue,Ae,Ke,xt,Pt,Ge,He,ht,Pe,je,lt,De,wt,ot,Dt,Lt,yi,qe,Xt,zi,$r,nr,Mn,Oi,{$$slots:yn={},$$scope:Gt}=p,{ssr:fr=!1}=p,{pointerEvents:cn=!0}=p,{position:en="relative"}=p,{percentRange:Nt=!1}=p,{width:dr=void 0}=p,{height:ar=void 0}=p,{containerWidth:or=dr||100}=p,{containerHeight:tn=ar||100}=p,{element:Cr=void 0}=p,{x:Mr=void 0}=p,{y:mr=void 0}=p,{z:Vr=void 0}=p,{r:Ti=void 0}=p,{data:Ni=[]}=p,{xDomain:sr=void 0}=p,{yDomain:lr=void 0}=p,{zDomain:gr=void 0}=p,{rDomain:Dr=void 0}=p,{xNice:Yn=!1}=p,{yNice:qr=!1}=p,{zNice:Dn=!1}=p,{rNice:Lr=!1}=p,{xReverse:Jn=dp.x}=p,{yReverse:Rr=dp.y}=p,{zReverse:Ln=dp.z}=p,{rReverse:xr=dp.r}=p,{xPadding:jr=void 0}=p,{yPadding:Gi=void 0}=p,{zPadding:ra=void 0}=p,{rPadding:Rn=void 0}=p,{xScale:Qi=Lu.x}=p,{yScale:_n=Lu.y}=p,{zScale:pn=Lu.z}=p,{rScale:Ui=Lu.r}=p,{xRange:Tn=void 0}=p,{yRange:Si=void 0}=p,{zRange:L=void 0}=p,{rRange:k=void 0}=p,{padding:N={}}=p,{extents:K={}}=p,{flatData:Q=void 0}=p,{custom:le={}}=p,fe=!1;Rh(()=>{fe=!0});const q={},ee=ki(Nt);Kt(l,ee,_e=>d(128,$r=_e));const me=ki(or);Kt(l,me,_e=>d(7,zi=_e));const Ce=ki(tn);Kt(l,Ce,_e=>d(6,Xt=_e));const Fe=ki(kh(K));Kt(l,Fe,_e=>d(127,qe=_e));const we=ki(Ni);Kt(l,we,_e=>d(126,yi=_e));const Le=ki(Q||Ni);Kt(l,Le,_e=>d(125,Lt=_e));const st=ki(N);Kt(l,st,_e=>d(124,Dt=_e));const it=ki(es(Mr));Kt(l,it,_e=>d(123,ot=_e));const ke=ki(es(mr));Kt(l,ke,_e=>d(122,wt=_e));const $e=ki(es(Vr));Kt(l,$e,_e=>d(121,De=_e));const Ye=ki(es(Ti));Kt(l,Ye,_e=>d(120,lt=_e));const et=ki(sr);Kt(l,et,_e=>d(119,je=_e));const qt=ki(lr);Kt(l,qt,_e=>d(118,Pe=_e));const nt=ki(gr);Kt(l,nt,_e=>d(117,ht=_e));const Yt=ki(Dr);Kt(l,Yt,_e=>d(116,He=_e));const jt=ki(Yn);Kt(l,jt,_e=>d(115,Ge=_e));const Ht=ki(qr);Kt(l,Ht,_e=>d(114,Pt=_e));const oi=ki(Dn);Kt(l,oi,_e=>d(113,xt=_e));const ei=ki(Lr);Kt(l,ei,_e=>d(112,Ke=_e));const yr=ki(Jn);Kt(l,yr,_e=>d(111,Ae=_e));const fi=ki(Rr);Kt(l,fi,_e=>d(110,Ue=_e));const Li=ki(Ln);Kt(l,Li,_e=>d(109,rt=_e));const _i=ki(xr);Kt(l,_i,_e=>d(108,ge=_e));const Qt=ki(jr);Kt(l,Qt,_e=>d(107,pe=_e));const si=ki(Gi);Kt(l,si,_e=>d(106,se=_e));const wr=ki(ra);Kt(l,wr,_e=>d(105,ae=_e));const ha=ki(Rn);Kt(l,ha,_e=>d(104,X=_e));const $i=ki(Tn);Kt(l,$i,_e=>d(103,W=_e));const Br=ki(Si);Kt(l,Br,_e=>d(102,R=_e));const Na=ki(L);Kt(l,Na,_e=>d(101,U=_e));const va=ki(k);Kt(l,va,_e=>d(100,M=_e));const Vi=ki(Qi);Kt(l,Vi,_e=>d(99,B=_e));const ba=ki(_n);Kt(l,ba,_e=>d(98,T=_e));const Sr=ki(pn);Kt(l,Sr,_e=>d(97,z=_e));const er=ki(Ui);Kt(l,er,_e=>d(96,a=_e));const hn=ki(q);Kt(l,hn,_e=>d(94,_=_e));const Pi=ki(le);Kt(l,Pi,_e=>d(95,v=_e));const Bn=Pr([it,ke,$e,Ye],([_e,fn,Kr,qi])=>{const Ea={};return _e&&(Ea.x=_e),fn&&(Ea.y=fn),Kr&&(Ea.z=Kr),qi&&(Ea.r=qi),Ea}),vn=Pr([st,me,Ce],([_e])=>Object.assign({top:0,right:0,bottom:0,left:0},_e)),rs=Pr([me,Ce,vn],([_e,fn,Kr])=>{const qi={};return qi.top=Kr.top,qi.right=_e-Kr.right,qi.bottom=fn-Kr.bottom,qi.left=Kr.left,qi.width=qi.right-qi.left,qi.height=qi.bottom-qi.top,qi.width<=0&&fe===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),qi.height<=0&&fe===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),qi}),Er=Pr([rs],([_e])=>_e.width);Kt(l,Er,_e=>d(8,nr=_e));const xa=Pr([rs],([_e])=>_e.height);Kt(l,xa,_e=>d(9,Mn=_e));const Gr=Pr([Le,Bn,Fe],([_e,fn,Kr])=>{const qi=kh(fn,Kr);return Object.keys(qi).length>0?{...nv(_e,qi),...Kr}:{}}),kr=Pr([Gr,et],op("x")),Qn=Pr([Gr,qt],op("y")),Zr=Pr([Gr,nt],op("z")),wa=Pr([Gr,Yt],op("r")),ns=Pr([Vi,Gr,kr,Qt,jt,yr,Er,xa,$i,ee],pp("x")),Fl=Pr([it,ns],hp),uo=Pr([ba,Gr,Qn,si,Ht,fi,Er,xa,Br,ee],pp("y")),Ol=Pr([ke,uo],hp),Ro=Pr([Sr,Gr,Zr,wr,oi,Li,Er,xa,Na,ee],pp("z")),Nl=Pr([$e,Ro],hp),Bo=Pr([er,Gr,wa,ha,ei,_i,Er,xa,va,ee],pp("r")),Os=Pr([Ye,Bo],hp),Ua=Pr([ns],fp),as=Pr([uo],fp),co=Pr([Ro],fp),Ns=Pr([Bo],fp),Va=Pr([Er,xa],([_e,fn])=>_e/fn);Kt(l,Va,_e=>d(10,Oi=_e));function Fn(_e){Bs[_e?"unshift":"push"](()=>{Cr=_e,d(2,Cr)})}function Sa(){or=this.clientWidth,tn=this.clientHeight,d(0,or),d(1,tn)}return l.$$set=_e=>{"ssr"in _e&&d(3,fr=_e.ssr),"pointerEvents"in _e&&d(4,cn=_e.pointerEvents),"position"in _e&&d(5,en=_e.position),"percentRange"in _e&&d(51,Nt=_e.percentRange),"width"in _e&&d(52,dr=_e.width),"height"in _e&&d(53,ar=_e.height),"containerWidth"in _e&&d(0,or=_e.containerWidth),"containerHeight"in _e&&d(1,tn=_e.containerHeight),"element"in _e&&d(2,Cr=_e.element),"x"in _e&&d(54,Mr=_e.x),"y"in _e&&d(55,mr=_e.y),"z"in _e&&d(56,Vr=_e.z),"r"in _e&&d(57,Ti=_e.r),"data"in _e&&d(58,Ni=_e.data),"xDomain"in _e&&d(59,sr=_e.xDomain),"yDomain"in _e&&d(60,lr=_e.yDomain),"zDomain"in _e&&d(61,gr=_e.zDomain),"rDomain"in _e&&d(62,Dr=_e.rDomain),"xNice"in _e&&d(63,Yn=_e.xNice),"yNice"in _e&&d(64,qr=_e.yNice),"zNice"in _e&&d(65,Dn=_e.zNice),"rNice"in _e&&d(66,Lr=_e.rNice),"xReverse"in _e&&d(67,Jn=_e.xReverse),"yReverse"in _e&&d(68,Rr=_e.yReverse),"zReverse"in _e&&d(69,Ln=_e.zReverse),"rReverse"in _e&&d(70,xr=_e.rReverse),"xPadding"in _e&&d(71,jr=_e.xPadding),"yPadding"in _e&&d(72,Gi=_e.yPadding),"zPadding"in _e&&d(73,ra=_e.zPadding),"rPadding"in _e&&d(74,Rn=_e.rPadding),"xScale"in _e&&d(75,Qi=_e.xScale),"yScale"in _e&&d(76,_n=_e.yScale),"zScale"in _e&&d(77,pn=_e.zScale),"rScale"in _e&&d(78,Ui=_e.rScale),"xRange"in _e&&d(79,Tn=_e.xRange),"yRange"in _e&&d(80,Si=_e.yRange),"zRange"in _e&&d(81,L=_e.zRange),"rRange"in _e&&d(82,k=_e.rRange),"padding"in _e&&d(83,N=_e.padding),"extents"in _e&&d(84,K=_e.extents),"flatData"in _e&&d(85,Q=_e.flatData),"custom"in _e&&d(86,le=_e.custom),"$$scope"in _e&&d(89,Gt=_e.$$scope)},l.$$.update=()=>{l.$$.dirty[1]&8388608&&Mr&&d(87,q.x=Mr,q),l.$$.dirty[1]&16777216&&mr&&d(87,q.y=mr,q),l.$$.dirty[1]&33554432&&Vr&&d(87,q.z=Vr,q),l.$$.dirty[1]&67108864&&Ti&&d(87,q.r=Ti,q),l.$$.dirty[1]&268435456&&sr&&d(87,q.xDomain=sr,q),l.$$.dirty[1]&536870912&&lr&&d(87,q.yDomain=lr,q),l.$$.dirty[1]&1073741824&&gr&&d(87,q.zDomain=gr,q),l.$$.dirty[2]&1&&Dr&&d(87,q.rDomain=Dr,q),l.$$.dirty[2]&131072&&Tn&&d(87,q.xRange=Tn,q),l.$$.dirty[2]&262144&&Si&&d(87,q.yRange=Si,q),l.$$.dirty[2]&524288&&L&&d(87,q.zRange=L,q),l.$$.dirty[2]&1048576&&k&&d(87,q.rRange=k,q),l.$$.dirty[1]&1048576&&Ei(ee,$r=Nt,$r),l.$$.dirty[0]&1&&Ei(me,zi=or,zi),l.$$.dirty[0]&2&&Ei(Ce,Xt=tn,Xt),l.$$.dirty[2]&4194304&&Ei(Fe,qe=kh(K),qe),l.$$.dirty[1]&134217728&&Ei(we,yi=Ni,yi),l.$$.dirty[1]&134217728|l.$$.dirty[2]&8388608&&Ei(Le,Lt=Q||Ni,Lt),l.$$.dirty[2]&2097152&&Ei(st,Dt=N,Dt),l.$$.dirty[1]&8388608&&Ei(it,ot=es(Mr),ot),l.$$.dirty[1]&16777216&&Ei(ke,wt=es(mr),wt),l.$$.dirty[1]&33554432&&Ei($e,De=es(Vr),De),l.$$.dirty[1]&67108864&&Ei(Ye,lt=es(Ti),lt),l.$$.dirty[1]&268435456&&Ei(et,je=sr,je),l.$$.dirty[1]&536870912&&Ei(qt,Pe=lr,Pe),l.$$.dirty[1]&1073741824&&Ei(nt,ht=gr,ht),l.$$.dirty[2]&1&&Ei(Yt,He=Dr,He),l.$$.dirty[2]&2&&Ei(jt,Ge=Yn,Ge),l.$$.dirty[2]&4&&Ei(Ht,Pt=qr,Pt),l.$$.dirty[2]&8&&Ei(oi,xt=Dn,xt),l.$$.dirty[2]&16&&Ei(ei,Ke=Lr,Ke),l.$$.dirty[2]&32&&Ei(yr,Ae=Jn,Ae),l.$$.dirty[2]&64&&Ei(fi,Ue=Rr,Ue),l.$$.dirty[2]&128&&Ei(Li,rt=Ln,rt),l.$$.dirty[2]&256&&Ei(_i,ge=xr,ge),l.$$.dirty[2]&512&&Ei(Qt,pe=jr,pe),l.$$.dirty[2]&1024&&Ei(si,se=Gi,se),l.$$.dirty[2]&2048&&Ei(wr,ae=ra,ae),l.$$.dirty[2]&4096&&Ei(ha,X=Rn,X),l.$$.dirty[2]&131072&&Ei($i,W=Tn,W),l.$$.dirty[2]&262144&&Ei(Br,R=Si,R),l.$$.dirty[2]&524288&&Ei(Na,U=L,U),l.$$.dirty[2]&1048576&&Ei(va,M=k,M),l.$$.dirty[2]&8192&&Ei(Vi,B=Qi,B),l.$$.dirty[2]&16384&&Ei(ba,T=_n,T),l.$$.dirty[2]&32768&&Ei(Sr,z=pn,z),l.$$.dirty[2]&65536&&Ei(er,a=Ui,a),l.$$.dirty[2]&16777216&&Ei(Pi,v=le,v),l.$$.dirty[2]&33554432&&Ei(hn,_=q,_),l.$$.dirty[2]&67108864&&ag("LayerCake",h)},d(88,h={activeGetters:Bn,width:Er,height:xa,percentRange:ee,aspectRatio:Va,containerWidth:me,containerHeight:Ce,x:it,y:ke,z:$e,r:Ye,custom:Pi,data:we,xNice:jt,yNice:Ht,zNice:oi,rNice:ei,xReverse:yr,yReverse:fi,zReverse:Li,rReverse:_i,xPadding:Qt,yPadding:si,zPadding:wr,rPadding:ha,padding:vn,flatData:Le,extents:Gr,xDomain:kr,yDomain:Qn,zDomain:Zr,rDomain:wa,xRange:Ua,yRange:as,zRange:co,rRange:Ns,config:hn,xScale:ns,xGet:Fl,yScale:uo,yGet:Ol,zScale:Ro,zGet:Nl,rScale:Bo,rGet:Os}),[or,tn,Cr,fr,cn,en,Xt,zi,nr,Mn,Oi,ee,me,Ce,Fe,we,Le,st,it,ke,$e,Ye,et,qt,nt,Yt,jt,Ht,oi,ei,yr,fi,Li,_i,Qt,si,wr,ha,$i,Br,Na,va,Vi,ba,Sr,er,hn,Pi,Er,xa,Va,Nt,dr,ar,Mr,mr,Vr,Ti,Ni,sr,lr,gr,Dr,Yn,qr,Dn,Lr,Jn,Rr,Ln,xr,jr,Gi,ra,Rn,Qi,_n,pn,Ui,Tn,Si,L,k,N,K,Q,le,q,h,Gt,yn,Fn,Sa]}class x0 extends sn{constructor(p){super(),ln(this,p,b0,v0,un,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const w0=l=>({element:l&1}),Hd=l=>({element:l[0]}),S0=l=>({element:l&1}),Wd=l=>({element:l[0]});function E0(l){let p,d,h,_,v;const a=l[12].defs,z=Bu(a,l,l[11],Wd),T=l[12].default,B=Bu(T,l,l[11],Hd);return{c(){p=Kn("svg"),d=Kn("defs"),z&&z.c(),h=Kn("g"),B&&B.c(),this.h()},l(M){p=Hn(M,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var U=Be(p);d=Hn(U,"defs",{});var R=Be(d);z&&z.l(R),R.forEach(ne),h=Hn(U,"g",{class:!0,transform:!0});var W=Be(h);B&&B.l(W),W.forEach(ne),U.forEach(ne),this.h()},h(){Y(h,"class","layercake-layout-svg_g"),Y(h,"transform",_="translate("+l[7].left+", "+l[7].top+")"),Y(p,"class","layercake-layout-svg svelte-u84d8d"),Y(p,"viewBox",l[4]),Y(p,"width",l[5]),Y(p,"height",l[6]),Qe(p,"z-index",l[2]),Qe(p,"pointer-events",l[3]===!1?"none":null)},m(M,U){Re(M,p,U),xe(p,d),z&&z.m(d,null),xe(p,h),B&&B.m(h,null),l[13](h),l[14](p),v=!0},p(M,[U]){z&&z.p&&(!v||U&2049)&&Fu(z,a,M,M[11],v?Nu(a,M[11],U,S0):Ou(M[11]),Wd),B&&B.p&&(!v||U&2049)&&Fu(B,T,M,M[11],v?Nu(T,M[11],U,w0):Ou(M[11]),Hd),(!v||U&128&&_!==(_="translate("+M[7].left+", "+M[7].top+")"))&&Y(h,"transform",_),(!v||U&16)&&Y(p,"viewBox",M[4]),(!v||U&32)&&Y(p,"width",M[5]),(!v||U&64)&&Y(p,"height",M[6]),U&4&&Qe(p,"z-index",M[2]),U&8&&Qe(p,"pointer-events",M[3]===!1?"none":null)},i(M){v||(ct(z,M),ct(B,M),v=!0)},o(M){gt(z,M),gt(B,M),v=!1},d(M){M&&ne(p),z&&z.d(M),B&&B.d(M),l[13](null),l[14](null)}}}function k0(l,p,d){let h,_,v,{$$slots:a={},$$scope:z}=p,{element:T=void 0}=p,{innerElement:B=void 0}=p,{zIndex:M=void 0}=p,{pointerEvents:U=void 0}=p,{viewBox:R=void 0}=p;const{containerWidth:W,containerHeight:X,padding:ae}=Zu("LayerCake");Kt(l,W,ge=>d(5,h=ge)),Kt(l,X,ge=>d(6,_=ge)),Kt(l,ae,ge=>d(7,v=ge));function se(ge){Bs[ge?"unshift":"push"](()=>{B=ge,d(1,B)})}function pe(ge){Bs[ge?"unshift":"push"](()=>{T=ge,d(0,T)})}return l.$$set=ge=>{"element"in ge&&d(0,T=ge.element),"innerElement"in ge&&d(1,B=ge.innerElement),"zIndex"in ge&&d(2,M=ge.zIndex),"pointerEvents"in ge&&d(3,U=ge.pointerEvents),"viewBox"in ge&&d(4,R=ge.viewBox),"$$scope"in ge&&d(11,z=ge.$$scope)},[T,B,M,U,R,h,_,v,W,X,ae,z,a,se,pe]}class z0 extends sn{constructor(p){super(),ln(this,p,k0,E0,un,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Xd(l,p,d){const h=l.slice();return h[23]=p[d],h[25]=d,h}function Yd(l){let p,d,h,_;return{c(){p=Kn("rect"),this.h()},l(v){p=Hn(v,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"class","group-rect"),Y(p,"data-id",l[25]),Y(p,"x",d=l[11].bandwidth?l[7](l[23]):l[7](l[23])[0]),Y(p,"y",h=l[13](l[12](l[23]))-1),Y(p,"width",_=l[11].bandwidth?l[11].bandwidth():l[9](l[23])),Y(p,"height","3"),Y(p,"fill","#308182"),Y(p,"stroke",l[0]),Y(p,"stroke-width",l[1])},m(v,a){Re(v,p,a)},p(v,a){a&3200&&d!==(d=v[11].bandwidth?v[7](v[23]):v[7](v[23])[0])&&Y(p,"x",d),a&13312&&h!==(h=v[13](v[12](v[23]))-1)&&Y(p,"y",h),a&3584&&_!==(_=v[11].bandwidth?v[11].bandwidth():v[9](v[23]))&&Y(p,"width",_),a&1&&Y(p,"stroke",v[0]),a&2&&Y(p,"stroke-width",v[1])},d(v){v&&ne(p)}}}function Jd(l){let p,d,h,_,v,a,z,T,B=l[12]&&Yd(l);return{c(){p=Kn("rect"),B&&B.c(),a=Kn("text"),this.h()},l(M){p=Hn(M,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),Be(p).forEach(ne),B&&B.l(M),a=Hn(M,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),Be(a).forEach(ne),this.h()},h(){Y(p,"class","group-rect"),Y(p,"data-id",l[25]),Y(p,"x",d=l[11].bandwidth?l[7](l[23]):l[7](l[23])[0]),Y(p,"y",h=l[6](l[23])),Y(p,"width",_=l[11].bandwidth?l[11].bandwidth():l[9](l[23])),Y(p,"height",v=l[8](l[23])),Y(p,"fill",l[4]),Y(p,"stroke",l[0]),Y(p,"stroke-width",l[1]),Y(a,"x",z=l[11].bandwidth?l[7](l[23])+l[11].bandwidth()/2:l[7](l[23])[0]),Y(a,"y",T=l[6](l[23])-4),Y(a,"dx",l[2]),Y(a,"dy",l[3]),Y(a,"text-anchor",l[5])},m(M,U){Re(M,p,U),B&&B.m(M,U),Re(M,a,U)},p(M,U){U&3200&&d!==(d=M[11].bandwidth?M[7](M[23]):M[7](M[23])[0])&&Y(p,"x",d),U&1088&&h!==(h=M[6](M[23]))&&Y(p,"y",h),U&3584&&_!==(_=M[11].bandwidth?M[11].bandwidth():M[9](M[23]))&&Y(p,"width",_),U&1280&&v!==(v=M[8](M[23]))&&Y(p,"height",v),U&16&&Y(p,"fill",M[4]),U&1&&Y(p,"stroke",M[0]),U&2&&Y(p,"stroke-width",M[1]),M[12]?B?B.p(M,U):(B=Yd(M),B.c(),B.m(a.parentNode,a)):B&&(B.d(1),B=null),U&3200&&z!==(z=M[11].bandwidth?M[7](M[23])+M[11].bandwidth()/2:M[7](M[23])[0])&&Y(a,"x",z),U&1088&&T!==(T=M[6](M[23])-4)&&Y(a,"y",T),U&4&&Y(a,"dx",M[2]),U&8&&Y(a,"dy",M[3]),U&32&&Y(a,"text-anchor",M[5])},d(M){M&&ne(p),B&&B.d(M),M&&ne(a)}}}function T0(l){let p,d=l[10],h=[];for(let _=0;_<d.length;_+=1)h[_]=Jd(Xd(l,d,_));return{c(){p=Kn("g");for(let _=0;_<h.length;_+=1)h[_].c();this.h()},l(_){p=Hn(_,"g",{class:!0});var v=Be(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(ne),this.h()},h(){Y(p,"class","column-group svelte-wgzwsk")},m(_,v){Re(_,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(_,[v]){if(v&16383){d=_[10];let a;for(a=0;a<d.length;a+=1){const z=Xd(_,d,a);h[a]?h[a].p(z,v):(h[a]=Jd(z),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},i:Xi,o:Xi,d(_){_&&ne(p),on(h,_)}}}function I0(l,p,d){let h,_,v,a,z,T,B,M,U;const{data:R,xGet:W,yGet:X,yRange:ae,xScale:se,yScale:pe,y:ge,z:rt}=Zu("LayerCake");Kt(l,R,He=>d(10,T=He)),Kt(l,W,He=>d(7,z=He)),Kt(l,X,He=>d(6,v=He)),Kt(l,ae,He=>d(21,a=He)),Kt(l,se,He=>d(11,B=He)),Kt(l,pe,He=>d(13,U=He)),Kt(l,rt,He=>d(12,M=He));let{stroke:Ue=""}=p,{strokeWidth:Ae=0}=p,{dxTick:Ke=0}=p,{dyTick:xt=0}=p,{fill:Pt="#00205b"}=p,{textAnchor:Ge="middle"}=p;return l.$$set=He=>{"stroke"in He&&d(0,Ue=He.stroke),"strokeWidth"in He&&d(1,Ae=He.strokeWidth),"dxTick"in He&&d(2,Ke=He.dxTick),"dyTick"in He&&d(3,xt=He.dyTick),"fill"in He&&d(4,Pt=He.fill),"textAnchor"in He&&d(5,Ge=He.textAnchor)},l.$$.update=()=>{l.$$.dirty&128&&d(9,h=He=>{const ht=z(He);return Math.max(0,ht[1]-ht[0])}),l.$$.dirty&2097216&&d(8,_=He=>a[0]-v(He))},[Ue,Ae,Ke,xt,Pt,Ge,v,z,_,h,T,B,M,U,R,W,X,ae,se,pe,rt,a]}class A0 extends sn{constructor(p){super(),ln(this,p,I0,T0,un,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function Qd(l,p,d){const h=l.slice();return h[28]=p[d],h[30]=d,h}function $d(l){let p,d,h,_;return{c(){p=Kn("line"),this.h()},l(v){p=Hn(v,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"y1",d=l[20]*-1),Y(p,"y2",h=l[14]&&l[30]%2==0?l[10]+l[8]+2:l[10]+l[8]-13),Y(p,"x1","0"),Y(p,"x2","0"),Y(p,"stroke",l[11]),Y(p,"stroke-width",_=l[15]&&Array.isArray(l[4])&&l[30]==Math.floor(l[4].length/2)?2:1),Y(p,"class","svelte-fwjh80"),is(p,"baseline",l[13])},m(v,a){Re(v,p,a)},p(v,a){a&1048576&&d!==(d=v[20]*-1)&&Y(p,"y1",d),a&17664&&h!==(h=v[14]&&v[30]%2==0?v[10]+v[8]+2:v[10]+v[8]-13)&&Y(p,"y2",h),a&2048&&Y(p,"stroke",v[11]),a&32784&&_!==(_=v[15]&&Array.isArray(v[4])&&v[30]==Math.floor(v[4].length/2)?2:1)&&Y(p,"stroke-width",_),a&8192&&is(p,"baseline",v[13])},d(v){v&&ne(p)}}}function P0(l){let p=l[1](l[28])+"",d;return{c(){d=Et(p)},l(h){d=kt(h,p)},m(h,_){Re(h,d,_)},p(h,_){_&262146&&p!==(p=h[1](h[28])+"")&&vi(d,p)},d(h){h&&ne(d)}}}function C0(l){let p,d=l[1](l[28])+"",h,_;return{c(){p=Et(l[5]),h=Et(d),_=Et(l[6])},l(v){p=kt(v,l[5]),h=kt(v,d),_=kt(v,l[6])},m(v,a){Re(v,p,a),Re(v,h,a),Re(v,_,a)},p(v,a){a&32&&vi(p,v[5]),a&262146&&d!==(d=v[1](v[28])+"")&&vi(h,d),a&64&&vi(_,v[6])},d(v){v&&ne(p),v&&ne(h),v&&ne(_)}}}function em(l){let p,d,h,_,v,a,z,T=l[0]!==!1&&$d(l);function B(R,W){return R[30]==R[18].length-1?C0:P0}let M=B(l),U=M(l);return{c(){p=Kn("g"),T&&T.c(),d=Kn("text"),U.c(),this.h()},l(R){p=Hn(R,"g",{class:!0,transform:!0});var W=Be(p);T&&T.l(W),d=Hn(W,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var X=Be(d);U.l(X),X.forEach(ne),W.forEach(ne),this.h()},h(){Y(d,"x",h=l[7]||l[16]?l[17].bandwidth()/2:0),Y(d,"y",_=l[3]?l[20]*-1-6:l[14]&&l[30]%2==0?l[8]+15:l[8]),Y(d,"dx",v=l[24](l[30])=="start"?l[9]-2:l[24](l[30])=="end"?l[9]+2:l[9]),Y(d,"dy",l[10]),Y(d,"text-anchor",l[24](l[30])),Y(d,"fill",l[12]),Y(d,"class","svelte-fwjh80"),is(d,"bold",l[15]&&Array.isArray(l[4])&&l[30]==Math.floor(l[4].length/2)),Y(p,"class",a="tick tick-"+l[28]+" svelte-fwjh80"),Y(p,"transform",z="translate("+l[17](l[28])+","+l[19][0]+")")},m(R,W){Re(R,p,W),T&&T.m(p,null),xe(p,d),U.m(d,null)},p(R,W){R[0]!==!1?T?T.p(R,W):(T=$d(R),T.c(),T.m(p,d)):T&&(T.d(1),T=null),M===(M=B(R))&&U?U.p(R,W):(U.d(1),U=M(R),U&&(U.c(),U.m(d,null))),W&196736&&h!==(h=R[7]||R[16]?R[17].bandwidth()/2:0)&&Y(d,"x",h),W&1065224&&_!==(_=R[3]?R[20]*-1-6:R[14]&&R[30]%2==0?R[8]+15:R[8])&&Y(d,"y",_),W&512&&v!==(v=R[24](R[30])=="start"?R[9]-2:R[24](R[30])=="end"?R[9]+2:R[9])&&Y(d,"dx",v),W&1024&&Y(d,"dy",R[10]),W&4096&&Y(d,"fill",R[12]),W&32784&&is(d,"bold",R[15]&&Array.isArray(R[4])&&R[30]==Math.floor(R[4].length/2)),W&262144&&a!==(a="tick tick-"+R[28]+" svelte-fwjh80")&&Y(p,"class",a),W&917504&&z!==(z="translate("+R[17](R[28])+","+R[19][0]+")")&&Y(p,"transform",z)},d(R){R&&ne(p),T&&T.d(),U.d()}}}function tm(l){let p,d,h;return{c(){p=Kn("line"),this.h()},l(_){p=Hn(_,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"class","baseline svelte-fwjh80"),Y(p,"y1",l[20]),Y(p,"y2","0"),Y(p,"x1",d=l[17](0)),Y(p,"x2",h=l[17](0)),Y(p,"stroke",l[11])},m(_,v){Re(_,p,v)},p(_,v){v&1048576&&Y(p,"y1",_[20]),v&131072&&d!==(d=_[17](0))&&Y(p,"x1",d),v&131072&&h!==(h=_[17](0))&&Y(p,"x2",h),v&2048&&Y(p,"stroke",_[11])},d(_){_&&ne(p)}}}function M0(l){let p,d,h=l[18],_=[];for(let a=0;a<h.length;a+=1)_[a]=em(Qd(l,h,a));let v=l[2]===!0&&tm(l);return{c(){p=Kn("g");for(let a=0;a<_.length;a+=1)_[a].c();d=ni(),v&&v.c(),this.h()},l(a){p=Hn(a,"g",{class:!0});var z=Be(p);for(let T=0;T<_.length;T+=1)_[T].l(z);d=ni(),v&&v.l(z),z.forEach(ne),this.h()},h(){Y(p,"class","axis x-axis")},m(a,z){Re(a,p,z);for(let T=0;T<_.length;T+=1)_[T]&&_[T].m(p,null);xe(p,d),v&&v.m(p,null)},p(a,[z]){if(z&18874363){h=a[18];let T;for(T=0;T<h.length;T+=1){const B=Qd(a,h,T);_[T]?_[T].p(B,z):(_[T]=em(B),_[T].c(),_[T].m(p,d))}for(;T<_.length;T+=1)_[T].d(1);_.length=h.length}a[2]===!0?v?v.p(a,z):(v=tm(a),v.c(),v.m(p,null)):v&&(v.d(1),v=null)},i:Xi,o:Xi,d(a){a&&ne(p),on(_,a),v&&v.d()}}}function D0(l,p,d){let h,_,v,a,z;const{width:T,height:B,xScale:M,yScale:U,yRange:R}=Zu("LayerCake");Kt(l,B,De=>d(20,z=De)),Kt(l,M,De=>d(17,v=De)),Kt(l,R,De=>d(19,a=De));let{gridlines:W=!0}=p,{formatTick:X=De=>De}=p,{baseline:ae=!1}=p,{flipped:se=!1}=p,{snapTicks:pe=!1}=p,{ticks:ge=void 0}=p,{prefix:rt=""}=p,{suffix:Ue=""}=p,{xTick:Ae=void 0}=p,{yTick:Ke=15}=p,{dxTick:xt=0}=p,{dyTick:Pt=0}=p,{lineColor:Ge="#999"}=p,{textColor:He="#555"}=p,{solid:ht=!1}=p,{stagger:Pe=!1}=p,{median:je=!0}=p;function lt(De){if(pe===!0){if(De===0)return"start";if(De===_.length-1)return"end"}return"middle"}return l.$$set=De=>{"gridlines"in De&&d(0,W=De.gridlines),"formatTick"in De&&d(1,X=De.formatTick),"baseline"in De&&d(2,ae=De.baseline),"flipped"in De&&d(3,se=De.flipped),"snapTicks"in De&&d(25,pe=De.snapTicks),"ticks"in De&&d(4,ge=De.ticks),"prefix"in De&&d(5,rt=De.prefix),"suffix"in De&&d(6,Ue=De.suffix),"xTick"in De&&d(7,Ae=De.xTick),"yTick"in De&&d(8,Ke=De.yTick),"dxTick"in De&&d(9,xt=De.dxTick),"dyTick"in De&&d(10,Pt=De.dyTick),"lineColor"in De&&d(11,Ge=De.lineColor),"textColor"in De&&d(12,He=De.textColor),"solid"in De&&d(13,ht=De.solid),"stagger"in De&&d(14,Pe=De.stagger),"median"in De&&d(15,je=De.median)},l.$$.update=()=>{l.$$.dirty&131072&&d(16,h=typeof v.bandwidth=="function"),l.$$.dirty&196624&&d(18,_=Array.isArray(ge)?ge:h?v.domain():v.ticks(ge))},[W,X,ae,se,ge,rt,Ue,Ae,Ke,xt,Pt,Ge,He,ht,Pe,je,h,v,_,a,z,B,M,R,lt,pe]}class L0 extends sn{constructor(p){super(),ln(this,p,D0,M0,un,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function R0(l){let p,d,h,_;return p=new A0({props:{fill:l[1],formatVal:l[5]}}),h=new L0({props:{gridlines:!1}}),{c(){ui(p.$$.fragment),d=vt(),ui(h.$$.fragment)},l(v){ci(p.$$.fragment,v),d=bt(v),ci(h.$$.fragment,v)},m(v,a){pi(p,v,a),Re(v,d,a),pi(h,v,a),_=!0},p(v,a){const z={};a&2&&(z.fill=v[1]),a&32&&(z.formatVal=v[5]),p.$set(z)},i(v){_||(ct(p.$$.fragment,v),ct(h.$$.fragment,v),_=!0)},o(v){gt(p.$$.fragment,v),gt(h.$$.fragment,v),_=!1},d(v){hi(p,v),v&&ne(d),hi(h,v)}}}function B0(l){let p,d;return p=new z0({props:{$$slots:{default:[R0]},$$scope:{ctx:l}}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&1058&&(v.$$scope={dirty:_,ctx:h}),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function F0(l){let p,d,h;return d=new x0({props:{padding:{top:15,right:0,bottom:20,left:0},x:l[2],y:l[3],z:l[4],xScale:mg().paddingInner([.02]).round(!0),xDomain:l[7],yDomain:l[6],zDomain:l[6],data:l[0],$$slots:{default:[B0]},$$scope:{ctx:l}}}),{c(){p=Oe("div"),ui(d.$$.fragment),this.h()},l(_){p=Ne(_,"DIV",{class:!0});var v=Be(p);ci(d.$$.fragment,v),v.forEach(ne),this.h()},h(){Y(p,"class","chart-container svelte-1i1qsul")},m(_,v){Re(_,p,v),pi(d,p,null),h=!0},p(_,[v]){const a={};v&4&&(a.x=_[2]),v&8&&(a.y=_[3]),v&16&&(a.z=_[4]),v&128&&(a.xDomain=_[7]),v&64&&(a.yDomain=_[6]),v&64&&(a.zDomain=_[6]),v&1&&(a.data=_[0]),v&1058&&(a.$$scope={dirty:v,ctx:_}),d.$set(a)},i(_){h||(ct(d.$$.fragment,_),h=!0)},o(_){gt(d.$$.fragment,_),h=!1},d(_){_&&ne(p),hi(d)}}}function O0(l,p,d){let h,_,v,{data:a}=p,{suffix:z="%"}=p,{decimals:T=null}=p,{fill:B="#00205B"}=p,{xKey:M="x"}=p,{yKey:U="y"}=p,{zKey:R=null}=p;return l.$$set=W=>{"data"in W&&d(0,a=W.data),"suffix"in W&&d(8,z=W.suffix),"decimals"in W&&d(9,T=W.decimals),"fill"in W&&d(1,B=W.fill),"xKey"in W&&d(2,M=W.xKey),"yKey"in W&&d(3,U=W.yKey),"zKey"in W&&d(4,R=W.zKey)},l.$$.update=()=>{l.$$.dirty&5&&d(7,h=a.map(W=>W[M])),l.$$.dirty&9&&d(6,_=[0,Math.max(...a.map(W=>W[U]))]),l.$$.dirty&768&&d(5,v=W=>W.toFixed(T)+z)},[a,B,M,U,R,v,_,h,z,T]}class Zh extends sn{constructor(p){super(),ln(this,p,O0,F0,un,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4})}}function im(l,p,d){const h=l.slice();return h[6]=p[d],h[8]=d,h}function rm(l){let p,d=l[0],h=[];for(let _=0;_<d.length;_+=1)h[_]=nm(im(l,d,_));return{c(){p=Kn("svg");for(let _=0;_<h.length;_+=1)h[_].c();this.h()},l(_){p=Hn(_,"svg",{class:!0});var v=Be(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(ne),this.h()},h(){Y(p,"class","stack svelte-pzvhwz")},m(_,v){Re(_,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(_,v){if(v&31){d=_[0];let a;for(a=0;a<d.length;a+=1){const z=im(_,d,a);h[a]?h[a].p(z,v):(h[a]=nm(z),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(_){_&&ne(p),on(h,_)}}}function nm(l){let p,d;return{c(){p=Kn("rect"),this.h()},l(h){p=Hn(h,"rect",{class:!0,x:!0,style:!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"class","cell svelte-pzvhwz"),Y(p,"x",d=l[4][l[8]]/l[3]*100+"%"),Qe(p,"width",l[6][l[1]]/l[3]*100+"%"),Qe(p,"fill",l[2][l[8]])},m(h,_){Re(h,p,_)},p(h,_){_&24&&d!==(d=h[4][h[8]]/h[3]*100+"%")&&Y(p,"x",d),_&11&&Qe(p,"width",h[6][h[1]]/h[3]*100+"%"),_&4&&Qe(p,"fill",h[2][h[8]])},d(h){h&&ne(p)}}}function N0(l){let p,d=l[3]&&l[4]&&rm(l);return{c(){d&&d.c(),p=ni()},l(h){d&&d.l(h),p=ni()},m(h,_){d&&d.m(h,_),Re(h,p,_)},p(h,[_]){h[3]&&h[4]?d?d.p(h,_):(d=rm(h),d.c(),d.m(p.parentNode,p)):d&&(d.d(1),d=null)},i:Xi,o:Xi,d(h){d&&d.d(h),h&&ne(p)}}}function U0(l,p,d){let{data:h}=p,{yKey:_="y"}=p,{colors:v=["#308182","#3878c5","#002417","#BD00BD","lightgrey"]}=p,a,z;function T(){d(3,a=h.map(M=>M[_]).reduce((M,U)=>M+U,0));let B=[0];h.forEach(M=>B.push(B[B.length-1]+M[_])),d(4,z=B)}return l.$$set=B=>{"data"in B&&d(0,h=B.data),"yKey"in B&&d(1,_=B.yKey),"colors"in B&&d(2,v=B.colors)},l.$$.update=()=>{l.$$.dirty&3&&(h||_)&&T()},[h,_,v,a,z]}class Kh extends sn{constructor(p){super(),ln(this,p,U0,N0,un,{data:0,yKey:1,colors:2})}}function am(l,p,d){const h=l.slice();return h[10]=p[d],h[12]=d,h}function V0(l){let p,d,h=l[6](l[10][l[3]])+"",_,v;return{c(){p=Oe("span"),d=Et("(NI "),_=Et(h),v=Et(")"),this.h()},l(a){p=Ne(a,"SPAN",{class:!0,style:!0});var z=Be(p);d=kt(z,"(NI "),_=kt(z,h),v=kt(z,")"),z.forEach(ne),this.h()},h(){Y(p,"class",""),Qe(p,"color","#1460aa")},m(a,z){Re(a,p,z),xe(p,d),xe(p,_),xe(p,v)},p(a,z){z&9&&h!==(h=a[6](a[10][a[3]])+"")&&vi(_,h)},d(a){a&&ne(p)}}}function q0(l){let p;return{c(){p=Oe("span"),this.h()},l(d){p=Ne(d,"SPAN",{class:!0,style:!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"class",""),Qe(p,"color","#1460aa")},m(d,h){Re(d,p,h)},p:Xi,d(d){d&&ne(p)}}}function j0(l){let p,d,h=yd(Math.round(l[10][l[3]]),"%)")+"",_;return{c(){p=Oe("span"),d=Et("(2011 "),_=Et(h),this.h()},l(v){p=Ne(v,"SPAN",{class:!0,style:!0});var a=Be(p);d=kt(a,"(2011 "),_=kt(a,h),a.forEach(ne),this.h()},h(){Y(p,"class",""),Qe(p,"color","#1460aa")},m(v,a){Re(v,p,a),xe(p,d),xe(p,_)},p(v,a){a&9&&h!==(h=yd(Math.round(v[10][v[3]]),"%)")+"")&&vi(_,h)},d(v){v&&ne(p)}}}function om(l){let p,d,h,_,v,a=l[10][l[1]]+"",z,T,B,M=l[6](l[10][l[2]])+"",U,R,W;function X(pe,ge){if(pe[3]=="prev"&&pe[4])return j0;if(pe[3]=="prev"&&!pe[4])return q0;if(pe[3])return V0}let ae=X(l),se=ae&&ae(l);return{c(){p=Oe("tr"),d=Oe("td"),h=Kn("svg"),_=Kn("rect"),v=vt(),z=Et(a),T=vt(),B=Oe("td"),U=Et(M),R=vt(),se&&se.c(),W=vt(),this.h()},l(pe){p=Ne(pe,"TR",{});var ge=Be(p);d=Ne(ge,"TD",{class:!0});var rt=Be(d);h=Hn(rt,"svg",{width:!0,height:!0,class:!0});var Ue=Be(h);_=Hn(Ue,"rect",{width:!0,height:!0,style:!0}),Be(_).forEach(ne),Ue.forEach(ne),v=bt(rt),z=kt(rt,a),rt.forEach(ne),T=bt(ge),B=Ne(ge,"TD",{class:!0,style:!0});var Ae=Be(B);U=kt(Ae,M),R=bt(Ae),se&&se.l(Ae),Ae.forEach(ne),W=bt(ge),ge.forEach(ne),this.h()},h(){Y(_,"width","20"),Y(_,"height","30"),Qe(_,"fill",l[5][l[12]]),Y(h,"width","20"),Y(h,"height","30"),Y(h,"class","bullet svelte-1gvovsq"),Y(d,"class","svelte-1gvovsq"),Y(B,"class","cell-right svelte-1gvovsq"),Qe(B,"vertical-align","top")},m(pe,ge){Re(pe,p,ge),xe(p,d),xe(d,h),xe(h,_),xe(d,v),xe(d,z),xe(p,T),xe(p,B),xe(B,U),xe(B,R),se&&se.m(B,null),xe(p,W)},p(pe,ge){ge&32&&Qe(_,"fill",pe[5][pe[12]]),ge&3&&a!==(a=pe[10][pe[1]]+"")&&vi(z,a),ge&5&&M!==(M=pe[6](pe[10][pe[2]])+"")&&vi(U,M),ae===(ae=X(pe))&&se?se.p(pe,ge):(se&&se.d(1),se=ae&&ae(pe),se&&(se.c(),se.m(B,null)))},d(pe){pe&&ne(p),se&&se.d()}}}function G0(l){let p,d,h=l[0],_=[];for(let v=0;v<h.length;v+=1)_[v]=om(am(l,h,v));return{c(){p=Oe("table"),d=Oe("tbody");for(let v=0;v<_.length;v+=1)_[v].c();this.h()},l(v){p=Ne(v,"TABLE",{class:!0});var a=Be(p);d=Ne(a,"TBODY",{});var z=Be(d);for(let T=0;T<_.length;T+=1)_[T].l(z);z.forEach(ne),a.forEach(ne),this.h()},h(){Y(p,"class","legend svelte-1gvovsq")},m(v,a){Re(v,p,a),xe(p,d);for(let z=0;z<_.length;z+=1)_[z]&&_[z].m(d,null)},p(v,[a]){if(a&127){h=v[0];let z;for(z=0;z<h.length;z+=1){const T=am(v,h,z);_[z]?_[z].p(T,a):(_[z]=om(T),_[z].c(),_[z].m(d,null))}for(;z<_.length;z+=1)_[z].d(1);_.length=h.length}},i:Xi,o:Xi,d(v){v&&ne(p),on(_,v)}}}function Z0(l,p,d){let h,{data:_}=p,{xKey:v="x"}=p,{yKey:a="y"}=p,{zKey:z="ni"}=p,{topic_prev_available:T=!0}=p,{colors:B=["#3878c5","#00205B","#308182","#002417","#BD00BD","lightgrey"]}=p,{decimals:M=null}=p;function U(R){let W;return M?W=(R/h*100).toFixed(M)+"%":R/h*100<1?W="<1%":W=(R/h*100).toFixed(0)+"%",W}return l.$$set=R=>{"data"in R&&d(0,_=R.data),"xKey"in R&&d(1,v=R.xKey),"yKey"in R&&d(2,a=R.yKey),"zKey"in R&&d(3,z=R.zKey),"topic_prev_available"in R&&d(4,T=R.topic_prev_available),"colors"in R&&d(5,B=R.colors),"decimals"in R&&d(7,M=R.decimals)},l.$$.update=()=>{l.$$.dirty&5&&(h=_.map(R=>R[a]).reduce((R,W)=>R+W,0)),l.$$.dirty&9&&_.map(R=>R[z]).reduce((R,W)=>R+W,0)},[_,v,a,z,T,B,U,M]}class K0 extends sn{constructor(p){super(),ln(this,p,Z0,G0,un,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function sm(l){let p,d,h,_;d=new Kh({props:{data:l[0],yKey:l[4],colors:l[6]}});let v=l[8]&&lm(l);return{c(){p=Oe("div"),ui(d.$$.fragment),h=vt(),v&&v.c(),this.h()},l(a){p=Ne(a,"DIV",{class:!0,style:!0});var z=Be(p);ci(d.$$.fragment,z),h=bt(z),v&&v.l(z),z.forEach(ne),this.h()},h(){Y(p,"class","chart svelte-1tebgpk"),Qe(p,"height",l[1]*.28+"px")},m(a,z){Re(a,p,z),pi(d,p,null),xe(p,h),v&&v.m(p,null),_=!0},p(a,z){const T={};z&1&&(T.data=a[0]),z&16&&(T.yKey=a[4]),z&64&&(T.colors=a[6]),d.$set(T),a[8]?v?v.p(a,z):(v=lm(a),v.c(),v.m(p,null)):v&&(v.d(1),v=null),(!_||z&2)&&Qe(p,"height",a[1]*.28+"px")},i(a){_||(ct(d.$$.fragment,a),_=!0)},o(a){gt(d.$$.fragment,a),_=!1},d(a){a&&ne(p),hi(d),v&&v.d()}}}function lm(l){let p,d;return{c(){p=Oe("div"),d=Et(l[8]),this.h()},l(h){p=Ne(h,"DIV",{class:!0});var _=Be(p);d=kt(_,l[8]),_.forEach(ne),this.h()},h(){Y(p,"class","label svelte-1tebgpk")},m(h,_){Re(h,p,_),xe(p,d)},p(h,_){_&256&&vi(d,h[8])},d(h){h&&ne(p)}}}function um(l){let p,d,h,_,v,a;return d=new Kh({props:{data:l[0],yKey:l[4],colors:l[6]}}),{c(){p=Oe("div"),ui(d.$$.fragment),h=vt(),_=Oe("div"),v=Et("2011 comparison not available"),this.h()},l(z){p=Ne(z,"DIV",{class:!0,style:!0});var T=Be(p);ci(d.$$.fragment,T),h=bt(T),_=Ne(T,"DIV",{class:!0,style:!0});var B=Be(_);v=kt(B,"2011 comparison not available"),B.forEach(ne),T.forEach(ne),this.h()},h(){Y(_,"class","label svelte-1tebgpk"),Qe(_,"background-color","#d8d8d8 "),Qe(_,"color","#000000"),Y(p,"class","chart svelte-1tebgpk"),Qe(p,"height",l[1]*.28+"px")},m(z,T){Re(z,p,T),pi(d,p,null),xe(p,h),xe(p,_),xe(_,v),a=!0},p(z,T){const B={};T&1&&(B.data=z[0]),T&16&&(B.yKey=z[4]),T&64&&(B.colors=z[6]),d.$set(B),(!a||T&2)&&Qe(p,"height",z[1]*.28+"px")},i(z){a||(ct(d.$$.fragment,z),a=!0)},o(z){gt(d.$$.fragment,z),a=!1},d(z){z&&ne(p),hi(d)}}}function H0(l){let p,d,h,_,v,a,z,T;d=new Kh({props:{data:l[0],yKey:l[3],colors:l[6]}});let B=(l[4]&&l[5]||l[4]=="ni")&&sm(l),M=l[4]=="prev"&&!l[5]&&um(l);return z=new K0({props:{data:l[0],xKey:l[2],yKey:l[3],zKey:l[4],topic_prev_available:l[5],decimals:l[7],colors:l[6]}}),{c(){p=Oe("div"),ui(d.$$.fragment),h=vt(),B&&B.c(),_=vt(),M&&M.c(),v=vt(),a=Oe("div"),ui(z.$$.fragment),this.h()},l(U){p=Ne(U,"DIV",{class:!0,style:!0});var R=Be(p);ci(d.$$.fragment,R),R.forEach(ne),h=bt(U),B&&B.l(U),_=bt(U),M&&M.l(U),v=bt(U),a=Ne(U,"DIV",{class:!0});var W=Be(a);ci(z.$$.fragment,W),W.forEach(ne),this.h()},h(){Y(p,"class","chart svelte-1tebgpk"),Qe(p,"padding-top","3px"),Qe(p,"height",(l[4]?l[1]*.72:l[1])+"px"),Y(a,"class","legend svelte-1tebgpk")},m(U,R){Re(U,p,R),pi(d,p,null),Re(U,h,R),B&&B.m(U,R),Re(U,_,R),M&&M.m(U,R),Re(U,v,R),Re(U,a,R),pi(z,a,null),T=!0},p(U,[R]){const W={};R&1&&(W.data=U[0]),R&8&&(W.yKey=U[3]),R&64&&(W.colors=U[6]),d.$set(W),(!T||R&18)&&Qe(p,"height",(U[4]?U[1]*.72:U[1])+"px"),U[4]&&U[5]||U[4]=="ni"?B?(B.p(U,R),R&48&&ct(B,1)):(B=sm(U),B.c(),ct(B,1),B.m(_.parentNode,_)):B&&(Wn(),gt(B,1,1,()=>{B=null}),Xn()),U[4]=="prev"&&!U[5]?M?(M.p(U,R),R&48&&ct(M,1)):(M=um(U),M.c(),ct(M,1),M.m(v.parentNode,v)):M&&(Wn(),gt(M,1,1,()=>{M=null}),Xn());const X={};R&1&&(X.data=U[0]),R&4&&(X.xKey=U[2]),R&8&&(X.yKey=U[3]),R&16&&(X.zKey=U[4]),R&32&&(X.topic_prev_available=U[5]),R&128&&(X.decimals=U[7]),R&64&&(X.colors=U[6]),z.$set(X)},i(U){T||(ct(d.$$.fragment,U),ct(B),ct(M),ct(z.$$.fragment,U),T=!0)},o(U){gt(d.$$.fragment,U),gt(B),gt(M),gt(z.$$.fragment,U),T=!1},d(U){U&&ne(p),hi(d),U&&ne(h),B&&B.d(U),U&&ne(_),M&&M.d(U),U&&ne(v),U&&ne(a),hi(z)}}}function W0(l,p,d){let{data:h}=p,{height:_=80}=p,{xKey:v="x"}=p,{yKey:a="y"}=p,{zKey:z="ni"}=p,{topic_prev_available:T=!0}=p,{colors:B=["#00205B","#3878c5","#002417","#BD00BD","lightgrey"]}=p,{decimals:M=null}=p,{label:U=null}=p;return l.$$set=R=>{"data"in R&&d(0,h=R.data),"height"in R&&d(1,_=R.height),"xKey"in R&&d(2,v=R.xKey),"yKey"in R&&d(3,a=R.yKey),"zKey"in R&&d(4,z=R.zKey),"topic_prev_available"in R&&d(5,T=R.topic_prev_available),"colors"in R&&d(6,B=R.colors),"decimals"in R&&d(7,M=R.decimals),"label"in R&&d(8,U=R.label)},[h,_,v,a,z,T,B,M,U]}class Hh extends sn{constructor(p){super(),ln(this,p,W0,H0,un,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function cm(l,p,d){const h=l.slice();return h[15]=p[d],h}function pm(l,p,d){const h=l.slice();return h[18]=p[d],h[19]=p,h[20]=d,h}function hm(l,p,d){const h=l.slice();return h[15]=p[d],h[20]=d,h}function fm(l){let p,d=l[5],h=[];for(let _=0;_<d.length;_+=1)h[_]=dm(hm(l,d,_));return{c(){p=Oe("ul");for(let _=0;_<h.length;_+=1)h[_].c();this.h()},l(_){p=Ne(_,"UL",{class:!0});var v=Be(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(ne),this.h()},h(){Y(p,"class","legend-block svelte-ezava7")},m(_,v){Re(_,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(_,v){if(v&32){d=_[5];let a;for(a=0;a<d.length;a+=1){const z=hm(_,d,a);h[a]?h[a].p(z,v):(h[a]=dm(z),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(_){_&&ne(p),on(h,_)}}}function dm(l){let p,d,h,_,v=l[15]+"",a,z;return{c(){p=Oe("li"),d=Oe("div"),h=vt(),_=Oe("span"),a=Et(v),z=vt(),this.h()},l(T){p=Ne(T,"LI",{class:!0});var B=Be(p);d=Ne(B,"DIV",{class:!0}),Be(d).forEach(ne),h=bt(B),_=Ne(B,"SPAN",{});var M=Be(_);a=kt(M,v),M.forEach(ne),z=bt(B),B.forEach(ne),this.h()},h(){Y(d,"class","legend-vis "+(l[20]==0?"bar":"bar2")+" svelte-ezava7"),Y(p,"class","svelte-ezava7")},m(T,B){Re(T,p,B),xe(p,d),xe(p,h),xe(p,_),xe(_,a),xe(p,z)},p(T,B){B&32&&v!==(v=T[15]+"")&&vi(a,v)},d(T){T&&ne(p)}}}function mm(l){let p,d=`${l[4](l[18][l[0]])}%`,h,_,v=ym(l[18][l[0]])+"",a,z,T=`calc(${l[4](l[18][l[0]])}% + 2px)`;function B(){l[12].call(_,l[19],l[20])}return{c(){p=Oe("div"),h=vt(),_=Oe("div"),a=Et(v),this.h()},l(M){p=Ne(M,"DIV",{class:!0}),Be(p).forEach(ne),h=bt(M),_=Ne(M,"DIV",{class:!0});var U=Be(_);a=kt(U,v),U.forEach(ne),this.h()},h(){Y(p,"class",Pp(l[20]==0?"bar":"bar2")+" svelte-ezava7"),Qe(p,"left","0"),Qe(p,"width",d),Qe(p,"top",l[20]==0?"0":"50%"),Qe(p,"height",l[5][1]?"50%":"100%"),Y(_,"class","label svelte-ezava7"),ju(()=>B.call(_)),Qe(_,"left",T),Qe(_,"top",l[20]==0?"0":"50%"),Qe(_,"height","50%")},m(M,U){Re(M,p,U),Re(M,h,U),Re(M,_,U),xe(_,a),z=Gu(_,B.bind(_))},p(M,U){l=M,U&25&&d!==(d=`${l[4](l[18][l[0]])}%`)&&Qe(p,"width",d),U&32&&Qe(p,"height",l[5][1]?"50%":"100%"),U&9&&v!==(v=ym(l[18][l[0]])+"")&&vi(a,v),U&25&&T!==(T=`calc(${l[4](l[18][l[0]])}% + 2px)`)&&Qe(_,"left",T)},d(M){M&&ne(p),M&&ne(h),M&&ne(_),z()}}}function gm(l){let p,d=l[15].label+"",h,_,v,a,z=`${l[5][1]?l[1]*2:l[1]}px`,T=`calc(100% - ${l[2]}px)`,B=l[15].values,M=[];for(let U=0;U<B.length;U+=1)M[U]=mm(pm(l,B,U));return{c(){p=Oe("div"),h=Et(d),_=vt(),v=Oe("div");for(let U=0;U<M.length;U+=1)M[U].c();a=vt(),this.h()},l(U){p=Ne(U,"DIV",{class:!0});var R=Be(p);h=kt(R,d),R.forEach(ne),_=bt(U),v=Ne(U,"DIV",{class:!0});var W=Be(v);for(let X=0;X<M.length;X+=1)M[X].l(W);a=bt(W),W.forEach(ne),this.h()},h(){Y(p,"class","label-group svelte-ezava7"),Y(v,"class","bar-group svelte-ezava7"),Qe(v,"height",z),Qe(v,"width",T)},m(U,R){Re(U,p,R),xe(p,h),Re(U,_,R),Re(U,v,R);for(let W=0;W<M.length;W+=1)M[W]&&M[W].m(v,null);xe(v,a)},p(U,R){if(R&8&&d!==(d=U[15].label+"")&&vi(h,d),R&57){B=U[15].values;let W;for(W=0;W<B.length;W+=1){const X=pm(U,B,W);M[W]?M[W].p(X,R):(M[W]=mm(X),M[W].c(),M[W].m(v,a))}for(;W<M.length;W+=1)M[W].d(1);M.length=B.length}R&34&&z!==(z=`${U[5][1]?U[1]*2:U[1]}px`)&&Qe(v,"height",z),R&4&&T!==(T=`calc(100% - ${U[2]}px)`)&&Qe(v,"width",T)},d(U){U&&ne(p),U&&ne(_),U&&ne(v),on(M,U)}}}function X0(l){let p,d,h=l[5][1]&&fm(l),_=l[3],v=[];for(let a=0;a<_.length;a+=1)v[a]=gm(cm(l,_,a));return{c(){h&&h.c(),p=vt();for(let a=0;a<v.length;a+=1)v[a].c();d=ni()},l(a){h&&h.l(a),p=bt(a);for(let z=0;z<v.length;z+=1)v[z].l(a);d=ni()},m(a,z){h&&h.m(a,z),Re(a,p,z);for(let T=0;T<v.length;T+=1)v[T]&&v[T].m(a,z);Re(a,d,z)},p(a,[z]){if(a[5][1]?h?h.p(a,z):(h=fm(a),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null),z&63){_=a[3];let T;for(T=0;T<_.length;T+=1){const B=cm(a,_,T);v[T]?v[T].p(B,z):(v[T]=gm(B),v[T].c(),v[T].m(d.parentNode,d))}for(;T<v.length;T+=1)v[T].d(1);v.length=_.length}},i:Xi,o:Xi,d(a){h&&h.d(a),a&&ne(p),on(v,a),a&&ne(d)}}}function ym(l){let p;return l==null?p="Not available":l<1?p="<1%":p=l.toFixed(0)+"%",p}function Y0(l,p,d){let h,_,v,a,{data:z}=p,{xKey:T="perc"}=p,{yKey:B="category"}=p,{zKey:M="ni"}=p,{formatTick:U=pe=>Math.round(pe)}=p,{suffix:R="%"}=p,{barHeight:W=20}=p,{margin:X=30}=p;function ae(pe,ge){let rt={};for(const Ae of pe)rt[Ae[ge]]||(rt[Ae[ge]]={label:Ae[ge],values:[]}),rt[Ae[ge]].values.push(Ae);let Ue=[];for(const Ae in rt)Ue.push(rt[Ae]);return Ue}function se(pe,ge){pe[ge].width=this.clientWidth,d(3,a),d(6,z),d(7,B)}return l.$$set=pe=>{"data"in pe&&d(6,z=pe.data),"xKey"in pe&&d(0,T=pe.xKey),"yKey"in pe&&d(7,B=pe.yKey),"zKey"in pe&&d(8,M=pe.zKey),"formatTick"in pe&&d(9,U=pe.formatTick),"suffix"in pe&&d(10,R=pe.suffix),"barHeight"in pe&&d(1,W=pe.barHeight),"margin"in pe&&d(2,X=pe.margin)},l.$$.update=()=>{l.$$.dirty&65&&d(11,h=[0,Math.max(...z.map(pe=>pe[T]))]),l.$$.dirty&192&&z.map(pe=>pe[B]).filter((pe,ge,rt)=>rt.indexOf(pe)===ge),l.$$.dirty&320&&d(5,_=z.map(pe=>pe[M]).filter((pe,ge,rt)=>rt.indexOf(pe)===ge)),l.$$.dirty&2048&&d(4,v=pe=>pe/h[1]*100),l.$$.dirty&192&&d(3,a=ae(z,B))},[T,W,X,a,v,_,z,B,M,U,R,h,se]}class J0 extends sn{constructor(p){super(),ln(this,p,Y0,X0,un,{data:6,xKey:0,yKey:7,zKey:8,formatTick:9,suffix:10,barHeight:1,margin:2})}}function _m(l,p,d){const h=l.slice();return h[14]=p[d],h}function vm(l,p,d){const h=l.slice();return h[17]=p[d],h[19]=d,h}function bm(l,p,d){const h=l.slice();return h[17]=p[d],h[19]=d,h}function xm(l,p,d){const h=l.slice();return h[14]=p[d],h[19]=d,h}function wm(l){let p,d=l[7],h=[];for(let _=0;_<d.length;_+=1)h[_]=Sm(xm(l,d,_));return{c(){p=Oe("ul");for(let _=0;_<h.length;_+=1)h[_].c();this.h()},l(_){p=Ne(_,"UL",{class:!0});var v=Be(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(ne),this.h()},h(){Y(p,"class","legend svelte-1hk4284")},m(_,v){Re(_,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(_,v){if(v&144){d=_[7];let a;for(a=0;a<d.length;a+=1){const z=xm(_,d,a);h[a]?h[a].p(z,v):(h[a]=Sm(z),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(_){_&&ne(p),on(h,_)}}}function Sm(l){let p,d,h,_,v=l[14]+"",a,z;return{c(){p=Oe("li"),d=Oe("div"),h=vt(),_=Oe("span"),a=Et(v),z=vt(),this.h()},l(T){p=Ne(T,"LI",{class:!0});var B=Be(p);d=Ne(B,"DIV",{class:!0}),Be(d).forEach(ne),h=bt(B),_=Ne(B,"SPAN",{class:!0});var M=Be(_);a=kt(M,v),M.forEach(ne),z=bt(B),B.forEach(ne),this.h()},h(){Y(d,"class","legend-vis "+(l[19]==0?"bar":"marker")+" svelte-1hk4284"),Qe(d,"height","1rem"),Qe(d,"width",l[19]==0?"1rem":l[4]+"px"),Y(_,"class",Pp(l[19]==0?"bold":"brackets")+" svelte-1hk4284"),Y(p,"class","svelte-1hk4284")},m(T,B){Re(T,p,B),xe(p,d),xe(p,h),xe(p,_),xe(_,a),xe(p,z)},p(T,B){B&16&&Qe(d,"width",T[19]==0?"1rem":T[4]+"px"),B&128&&v!==(v=T[14]+"")&&vi(a,v)},d(T){T&&ne(p)}}}function Em(l){let p,d=l[1](l[17].perc/100)+"",h,_;return{c(){p=Oe("span"),h=Et(d),_=Et(l[2]),this.h()},l(v){p=Ne(v,"SPAN",{class:!0,style:!0});var a=Be(p);h=kt(a,d),_=kt(a,l[2]),a.forEach(ne),this.h()},h(){Y(p,"class",Pp(l[19]==0?"bold":"sml brackets")+" svelte-1hk4284"),Qe(p,"color",l[19]==0?"#000000":"#1460aa")},m(v,a){Re(v,p,a),xe(p,h),xe(p,_)},p(v,a){a&34&&d!==(d=v[1](v[17].perc/100)+"")&&vi(h,d),a&4&&vi(_,v[2])},d(v){v&&ne(p)}}}function Q0(l){let p,d=`calc(${l[6](l[17][l[0]])}% - ${l[4]/2}px)`,h=`${l[4]}px`;return{c(){p=Oe("div"),this.h()},l(_){p=Ne(_,"DIV",{class:!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"class","marker svelte-1hk4284"),Qe(p,"left",d),Qe(p,"border-left-width",h)},m(_,v){Re(_,p,v)},p(_,v){v&113&&d!==(d=`calc(${_[6](_[17][_[0]])}% - ${_[4]/2}px)`)&&Qe(p,"left",d),v&16&&h!==(h=`${_[4]}px`)&&Qe(p,"border-left-width",h)},d(_){_&&ne(p)}}}function $0(l){let p,d=`${l[6](l[17][l[0]])}%`;return{c(){p=Oe("div"),this.h()},l(h){p=Ne(h,"DIV",{class:!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"class","bar svelte-1hk4284"),Qe(p,"left","0"),Qe(p,"width",d)},m(h,_){Re(h,p,_)},p(h,_){_&97&&d!==(d=`${h[6](h[17][h[0]])}%`)&&Qe(p,"width",d)},d(h){h&&ne(p)}}}function km(l){let p;function d(v,a){return v[19]==0?$0:Q0}let _=d(l)(l);return{c(){_.c(),p=ni()},l(v){_.l(v),p=ni()},m(v,a){_.m(v,a),Re(v,p,a)},p(v,a){_.p(v,a)},d(v){_.d(v),v&&ne(p)}}}function zm(l){let p,d=l[14].label+"",h,_,v,a,z,T=`${l[3]}px`,B=l[14].values,M=[];for(let W=0;W<B.length;W+=1)M[W]=Em(bm(l,B,W));let U=l[14].values,R=[];for(let W=0;W<U.length;W+=1)R[W]=km(vm(l,U,W));return{c(){p=Oe("div"),h=Et(d),_=vt();for(let W=0;W<M.length;W+=1)M[W].c();v=vt(),a=Oe("div");for(let W=0;W<R.length;W+=1)R[W].c();z=vt(),this.h()},l(W){p=Ne(W,"DIV",{class:!0});var X=Be(p);h=kt(X,d),_=bt(X);for(let se=0;se<M.length;se+=1)M[se].l(X);X.forEach(ne),v=bt(W),a=Ne(W,"DIV",{class:!0});var ae=Be(a);for(let se=0;se<R.length;se+=1)R[se].l(ae);z=bt(ae),ae.forEach(ne),this.h()},h(){Y(p,"class","label-group svelte-1hk4284"),Y(a,"class","bar-group svelte-1hk4284"),Qe(a,"height",T)},m(W,X){Re(W,p,X),xe(p,h),xe(p,_);for(let ae=0;ae<M.length;ae+=1)M[ae]&&M[ae].m(p,null);Re(W,v,X),Re(W,a,X);for(let ae=0;ae<R.length;ae+=1)R[ae]&&R[ae].m(a,null);xe(a,z)},p(W,X){if(X&32&&d!==(d=W[14].label+"")&&vi(h,d),X&38){B=W[14].values;let ae;for(ae=0;ae<B.length;ae+=1){const se=bm(W,B,ae);M[ae]?M[ae].p(se,X):(M[ae]=Em(se),M[ae].c(),M[ae].m(p,null))}for(;ae<M.length;ae+=1)M[ae].d(1);M.length=B.length}if(X&113){U=W[14].values;let ae;for(ae=0;ae<U.length;ae+=1){const se=vm(W,U,ae);R[ae]?R[ae].p(se,X):(R[ae]=km(se),R[ae].c(),R[ae].m(a,z))}for(;ae<R.length;ae+=1)R[ae].d(1);R.length=U.length}X&8&&T!==(T=`${W[3]}px`)&&Qe(a,"height",T)},d(W){W&&ne(p),on(M,W),W&&ne(v),W&&ne(a),on(R,W)}}}function e1(l){let p,d,h=l[7][1]&&wm(l),_=l[5],v=[];for(let a=0;a<_.length;a+=1)v[a]=zm(_m(l,_,a));return{c(){h&&h.c(),p=vt();for(let a=0;a<v.length;a+=1)v[a].c();d=ni()},l(a){h&&h.l(a),p=bt(a);for(let z=0;z<v.length;z+=1)v[z].l(a);d=ni()},m(a,z){h&&h.m(a,z),Re(a,p,z);for(let T=0;T<v.length;T+=1)v[T]&&v[T].m(a,z);Re(a,d,z)},p(a,[z]){if(a[7][1]?h?h.p(a,z):(h=wm(a),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null),z&127){_=a[5];let T;for(T=0;T<_.length;T+=1){const B=_m(a,_,T);v[T]?v[T].p(B,z):(v[T]=zm(B),v[T].c(),v[T].m(d.parentNode,d))}for(;T<v.length;T+=1)v[T].d(1);v.length=_.length}},i:Xi,o:Xi,d(a){h&&h.d(a),a&&ne(p),on(v,a),a&&ne(d)}}}function t1(l,p,d){let h,_,v,a,{data:z}=p,{xKey:T="perc"}=p,{yKey:B="category"}=p,{zKey:M="group"}=p,{formatTick:U=se=>Math.round(100*se)}=p,{suffix:R="%"}=p,{barHeight:W=25}=p,{markerWidth:X=3}=p;function ae(se,pe){let ge={};for(const Ue of se)ge[Ue[pe]]||(ge[Ue[pe]]={label:Ue[pe],values:[]}),ge[Ue[pe]].values.push(Ue);let rt=[];for(const Ue in ge)rt.push(ge[Ue]);return rt}return l.$$set=se=>{"data"in se&&d(8,z=se.data),"xKey"in se&&d(0,T=se.xKey),"yKey"in se&&d(9,B=se.yKey),"zKey"in se&&d(10,M=se.zKey),"formatTick"in se&&d(1,U=se.formatTick),"suffix"in se&&d(2,R=se.suffix),"barHeight"in se&&d(3,W=se.barHeight),"markerWidth"in se&&d(4,X=se.markerWidth)},l.$$.update=()=>{l.$$.dirty&257&&d(11,h=[0,Math.max(...z.map(se=>se[T]))]),l.$$.dirty&768&&z.map(se=>se[B]).filter((se,pe,ge)=>ge.indexOf(se)===pe),l.$$.dirty&1280&&d(7,_=z.map(se=>se[M]).filter((se,pe,ge)=>ge.indexOf(se)===pe)),l.$$.dirty&2048&&d(6,v=se=>se/h[1]*100),l.$$.dirty&768&&d(5,a=ae(z,B))},[T,U,R,W,X,a,v,_,z,B,M,h]}class Wh extends sn{constructor(p){super(),ln(this,p,t1,e1,un,{data:8,xKey:0,yKey:9,zKey:10,formatTick:1,suffix:2,barHeight:3,markerWidth:4})}}function Tm(l,p,d){const h=l.slice();return h[12]=p[d],h[14]=d,h}function Im(l,p,d){const h=l.slice();return h[15]=p[d],h[17]=d,h}function Am(l,p,d){const h=l.slice();return h[15]=p[d],h[17]=d,h}function Pm(l,p,d){const h=l.slice();return h[19]=p[d],h[14]=d,h}function Cm(l){let p,d=l[5],h=[];for(let _=0;_<d.length;_+=1)h[_]=Mm(Pm(l,d,_));return{c(){p=Oe("ul");for(let _=0;_<h.length;_+=1)h[_].c();this.h()},l(_){p=Ne(_,"UL",{class:!0});var v=Be(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(ne),this.h()},h(){Y(p,"class","legend svelte-pmaxst")},m(_,v){Re(_,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(_,v){if(v&36){d=_[5];let a;for(a=0;a<d.length;a+=1){const z=Pm(_,d,a);h[a]?h[a].p(z,v):(h[a]=Mm(z),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(_){_&&ne(p),on(h,_)}}}function Mm(l){let p,d,h,_,v=l[19]+"",a,z;return{c(){p=Oe("li"),d=Oe("div"),h=vt(),_=Oe("span"),a=Et(v),z=vt(),this.h()},l(T){p=Ne(T,"LI",{class:!0});var B=Be(p);d=Ne(B,"DIV",{class:!0}),Be(d).forEach(ne),h=bt(B),_=Ne(B,"SPAN",{class:!0});var M=Be(_);a=kt(M,v),M.forEach(ne),z=bt(B),B.forEach(ne),this.h()},h(){Y(d,"class","legend-vis "+(l[14]==0?"bar":"markerSmall")+" svelte-pmaxst"),Qe(d,"height","1rem"),Qe(d,"width",l[14]==0?"1rem":l[2]+"px"),Y(_,"class",Pp(l[14]==0?"bold":"brackets")+" svelte-pmaxst"),Y(p,"class","svelte-pmaxst")},m(T,B){Re(T,p,B),xe(p,d),xe(p,h),xe(p,_),xe(_,a),xe(p,z)},p(T,B){B&4&&Qe(d,"width",T[14]==0?"1rem":T[2]+"px"),B&32&&v!==(v=T[19]+"")&&vi(a,v)},d(T){T&&ne(p)}}}function i1(l){let p,d=l[12].values,h=[];for(let _=0;_<d.length;_+=1)h[_]=Dm(Im(l,d,_));return{c(){for(let _=0;_<h.length;_+=1)h[_].c();p=ni()},l(_){for(let v=0;v<h.length;v+=1)h[v].l(_);p=ni()},m(_,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(_,v);Re(_,p,v)},p(_,v){if(v&89){d=_[12].values;let a;for(a=0;a<d.length;a+=1){const z=Im(_,d,a);h[a]?h[a].p(z,v):(h[a]=Dm(z),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(_){on(h,_),_&&ne(p)}}}function r1(l){let p,d=l[12].values,h=[];for(let _=0;_<d.length;_+=1)h[_]=Lm(Am(l,d,_));return{c(){for(let _=0;_<h.length;_+=1)h[_].c();p=ni()},l(_){for(let v=0;v<h.length;v+=1)h[v].l(_);p=ni()},m(_,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(_,v);Re(_,p,v)},p(_,v){if(v&89){d=_[12].values;let a;for(a=0;a<d.length;a+=1){const z=Am(_,d,a);h[a]?h[a].p(z,v):(h[a]=Lm(z),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(_){on(h,_),_&&ne(p)}}}function Dm(l){let p,d,h=`calc(100% - ${l[15].offset<0?l[4](l[15][l[0]]-l[15].offset):l[4](l[15][l[0]])}%)`,_=`${l[4](l[15].offset)}%`,v=`${l[17]/l[6].length*100}%`,a=`${1/l[6].length*100}%`;return{c(){p=Oe("div"),this.h()},l(z){p=Ne(z,"DIV",{class:!0,style:!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"class","marker svelte-pmaxst"),Y(p,"style",d="border-"+(l[15].offset<0?"top":"bottom")+": none"),Qe(p,"top",h),Qe(p,"height",_),Qe(p,"left",v),Qe(p,"width",a)},m(z,T){Re(z,p,T)},p(z,T){T&8&&d!==(d="border-"+(z[15].offset<0?"top":"bottom")+": none")&&Y(p,"style",d);const B=T&8;(B||T&25&&h!==(h=`calc(100% - ${z[15].offset<0?z[4](z[15][z[0]]-z[15].offset):z[4](z[15][z[0]])}%)`))&&Qe(p,"top",h),(B||T&24&&_!==(_=`${z[4](z[15].offset)}%`))&&Qe(p,"height",_),(B||T&72&&v!==(v=`${z[17]/z[6].length*100}%`))&&Qe(p,"left",v),(B||T&72&&a!==(a=`${1/z[6].length*100}%`))&&Qe(p,"width",a)},d(z){z&&ne(p)}}}function Lm(l){let p,d=`${100-l[4](l[15][l[0]])}%`,h=`${l[4](l[15][l[0]])}%`,_=`${l[17]/l[6].length*100}%`,v=`calc(${1/l[6].length*100}% - 2px)`;return{c(){p=Oe("div"),this.h()},l(a){p=Ne(a,"DIV",{class:!0}),Be(p).forEach(ne),this.h()},h(){Y(p,"class","bar svelte-pmaxst"),Qe(p,"top",d),Qe(p,"height",h),Qe(p,"left",_),Qe(p,"width",v)},m(a,z){Re(a,p,z)},p(a,z){z&25&&d!==(d=`${100-a[4](a[15][a[0]])}%`)&&Qe(p,"top",d),z&25&&h!==(h=`${a[4](a[15][a[0]])}%`)&&Qe(p,"height",h),z&64&&_!==(_=`${a[17]/a[6].length*100}%`)&&Qe(p,"left",_),z&64&&v!==(v=`calc(${1/a[6].length*100}% - 2px)`)&&Qe(p,"width",v)},d(a){a&&ne(p)}}}function Rm(l){let p;function d(v,a){return v[14]==0?r1:i1}let _=d(l)(l);return{c(){_.c(),p=ni()},l(v){_.l(v),p=ni()},m(v,a){_.m(v,a),Re(v,p,a)},p(v,a){_.p(v,a)},d(v){_.d(v),v&&ne(p)}}}function n1(l){let p,d,h=`${l[1]}px`,_,v,a,z,T,B,M,U,R,W,X,ae,se,pe,ge=l[5][1]&&Cm(l),rt=l[3],Ue=[];for(let Ae=0;Ae<rt.length;Ae+=1)Ue[Ae]=Rm(Tm(l,rt,Ae));return{c(){ge&&ge.c(),p=vt(),d=Oe("div");for(let Ae=0;Ae<Ue.length;Ae+=1)Ue[Ae].c();_=vt(),v=Oe("div"),a=Oe("div"),z=Oe("div"),T=Et("0-14"),B=vt(),M=Oe("div"),U=Et("15-39"),R=vt(),W=Oe("div"),X=Et("40-64"),ae=vt(),se=Oe("div"),pe=Et("65+"),this.h()},l(Ae){ge&&ge.l(Ae),p=bt(Ae),d=Ne(Ae,"DIV",{class:!0});var Ke=Be(d);for(let je=0;je<Ue.length;je+=1)Ue[je].l(Ke);Ke.forEach(ne),_=bt(Ae),v=Ne(Ae,"DIV",{class:!0});var xt=Be(v);a=Ne(xt,"DIV",{class:!0});var Pt=Be(a);z=Ne(Pt,"DIV",{class:!0});var Ge=Be(z);T=kt(Ge,"0-14"),Ge.forEach(ne),B=bt(Pt),M=Ne(Pt,"DIV",{class:!0});var He=Be(M);U=kt(He,"15-39"),He.forEach(ne),R=bt(Pt),W=Ne(Pt,"DIV",{class:!0});var ht=Be(W);X=kt(ht,"40-64"),ht.forEach(ne),ae=bt(Pt),se=Ne(Pt,"DIV",{class:!0});var Pe=Be(se);pe=kt(Pe,"65+"),Pe.forEach(ne),Pt.forEach(ne),xt.forEach(ne),this.h()},h(){Y(d,"class","bar-group svelte-pmaxst"),Qe(d,"height",h),Y(z,"class","column svelte-pmaxst"),Y(M,"class","column svelte-pmaxst"),Y(W,"class","column svelte-pmaxst"),Y(se,"class","column svelte-pmaxst"),Y(a,"class","row svelte-pmaxst"),Qe(a,"width","100%"),Y(v,"class","x-scale svelte-pmaxst")},m(Ae,Ke){ge&&ge.m(Ae,Ke),Re(Ae,p,Ke),Re(Ae,d,Ke);for(let xt=0;xt<Ue.length;xt+=1)Ue[xt]&&Ue[xt].m(d,null);Re(Ae,_,Ke),Re(Ae,v,Ke),xe(v,a),xe(a,z),xe(z,T),xe(a,B),xe(a,M),xe(M,U),xe(a,R),xe(a,W),xe(W,X),xe(a,ae),xe(a,se),xe(se,pe)},p(Ae,[Ke]){if(Ae[5][1]?ge?ge.p(Ae,Ke):(ge=Cm(Ae),ge.c(),ge.m(p.parentNode,p)):ge&&(ge.d(1),ge=null),Ke&89){rt=Ae[3];let xt;for(xt=0;xt<rt.length;xt+=1){const Pt=Tm(Ae,rt,xt);Ue[xt]?Ue[xt].p(Pt,Ke):(Ue[xt]=Rm(Pt),Ue[xt].c(),Ue[xt].m(d,null))}for(;xt<Ue.length;xt+=1)Ue[xt].d(1);Ue.length=rt.length}Ke&2&&h!==(h=`${Ae[1]}px`)&&Qe(d,"height",h)},i:Xi,o:Xi,d(Ae){ge&&ge.d(Ae),Ae&&ne(p),Ae&&ne(d),on(Ue,Ae),Ae&&ne(_),Ae&&ne(v)}}}function a1(l,p,d){let h,_,v,a,z,{data:T}=p,{xKey:B="category"}=p,{yKey:M="perc"}=p,{zKey:U="group"}=p,{height:R=100}=p,{markerWidth:W=3}=p;function X(ae,se){let pe={};for(const rt of ae){pe[rt[se]]||(pe[rt[se]]={label:rt[se],values:[]});let Ue=pe[rt[se]].values.length,Ae=Ue==0?0:rt[M]-pe[rt[se]].values[Ue-1][M];pe[rt[se]].values.push({...rt,offset:Ae})}let ge=[];for(const rt in pe)ge.push(pe[rt]);return console.log(ge),ge}return l.$$set=ae=>{"data"in ae&&d(7,T=ae.data),"xKey"in ae&&d(8,B=ae.xKey),"yKey"in ae&&d(0,M=ae.yKey),"zKey"in ae&&d(9,U=ae.zKey),"height"in ae&&d(1,R=ae.height),"markerWidth"in ae&&d(2,W=ae.markerWidth)},l.$$.update=()=>{l.$$.dirty&384&&d(6,h=T.map(ae=>ae[B]).filter((ae,se,pe)=>pe.indexOf(ae)===se)),l.$$.dirty&129&&d(10,_=[0,Math.max(...T.map(ae=>ae[M]))]),l.$$.dirty&640&&d(5,v=T.map(ae=>ae[U]).filter((ae,se,pe)=>pe.indexOf(ae)===se)),l.$$.dirty&1024&&d(4,a=ae=>Math.abs(ae/_[1])*100),l.$$.dirty&640&&d(3,z=X(T,U))},[M,R,W,z,a,v,h,T,B,U,_]}class Xh extends sn{constructor(p){super(),ln(this,p,a1,n1,un,{data:7,xKey:8,yKey:0,zKey:9,height:1,markerWidth:2})}}function o1(l){let p,d,h,_,v;return{c(){p=Oe("div"),d=Oe("a"),h=Et("Back to top"),this.h()},l(a){p=Ne(a,"DIV",{role:!0,class:!0});var z=Be(p);d=Ne(z,"A",{href:!0,tabindex:!0,class:!0});var T=Be(d);h=kt(T,"Back to top"),T.forEach(ne),z.forEach(ne),this.h()},h(){Y(d,"href","#"),Y(d,"tabindex","0"),Y(d,"class","svelte-4glskh"),Y(p,"role","region"),Y(p,"class","back_to_start svelte-4glskh"),is(p,"hidden",l[0])},m(a,z){Re(a,p,z),xe(p,d),xe(d,h),_||(v=[Sp(window,"scroll",l[2]),Sp(p,"click",l[1])],_=!0)},p(a,[z]){z&1&&is(p,"hidden",a[0])},i:Xi,o:Xi,d(a){a&&ne(p),_=!1,p_(v)}}}function s1(l,p,d){let{buttonVisibleOnPX:h=200}=p,_=!0;const v=()=>{document.body.scrollIntoView()},a=()=>document.documentElement||document.body,z=()=>{a().scrollTop>h?d(0,_=!1):d(0,_=!0)};return l.$$set=T=>{"buttonVisibleOnPX"in T&&d(3,h=T.buttonVisibleOnPX)},[_,v,z,h]}class l1 extends sn{constructor(p){super(),ln(this,p,s1,o1,un,{buttonVisibleOnPX:3})}}function u1(l){let p,d,h=l[4][l[0]].title+"",_,v,a,z,T,B,M,U,R,W=l[4][l[0]].info+"",X,ae,se;return{c(){p=Oe("div"),d=Oe("div"),_=Et(h),v=vt(),a=Oe("img"),M=vt(),U=Oe("div"),R=Oe("div"),this.h()},l(pe){p=Ne(pe,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ge=Be(p);d=Ne(ge,"DIV",{class:!0});var rt=Be(d);_=kt(rt,h),v=bt(rt),a=Ne(rt,"IMG",{class:!0,src:!0,alt:!0}),rt.forEach(ne),ge.forEach(ne),M=bt(pe),U=Ne(pe,"DIV",{class:!0,id:!0});var Ue=Be(U);R=Ne(Ue,"DIV",{class:!0,"aria-hidden":!0});var Ae=Be(R);Ae.forEach(ne),Ue.forEach(ne),this.h()},h(){Y(a,"class","i-button"),Ep(a.src,z=ri+"\\img\\i-button.svg")||Y(a,"src",z),Y(a,"alt","Information button"),Y(d,"class","blocktitle"),Y(p,"class","row"),Qe(p,"display","flex"),Qe(p,"cursor","pointer"),Y(p,"data-bs-toggle","collapse"),Y(p,"data-bs-target",T="#"+l[0]+"-info"),Y(p,"aria-expanded","false"),Y(p,"aria-controls",B=l[0]+"-info"),Y(R,"class","card card-body svelte-1qrf6oz"),Y(R,"aria-hidden","true"),Y(U,"class","collapse svelte-1qrf6oz"),Y(U,"id",X=l[0]+"-info")},m(pe,ge){Re(pe,p,ge),xe(p,d),xe(d,_),xe(d,v),xe(d,a),l[6](p),Re(pe,M,ge),Re(pe,U,ge),xe(U,R),R.innerHTML=W,l[7](R),ae||(se=Sp(d,"click",l[3]),ae=!0)},p(pe,[ge]){ge&1&&h!==(h=pe[4][pe[0]].title+"")&&vi(_,h),ge&1&&T!==(T="#"+pe[0]+"-info")&&Y(p,"data-bs-target",T),ge&1&&B!==(B=pe[0]+"-info")&&Y(p,"aria-controls",B),ge&1&&W!==(W=pe[4][pe[0]].info+"")&&(R.innerHTML=W),ge&1&&X!==(X=pe[0]+"-info")&&Y(U,"id",X)},i:Xi,o:Xi,d(pe){pe&&ne(p),l[6](null),pe&&ne(M),pe&&ne(U),l[7](null),ae=!1,se()}}}function c1(l,p,d){let{id:h}=p,{place:_}=p,v,a;function z(R){let X=R.replaceAll("[",".").replaceAll("]","").split("."),ae=_.meta_data;for(let se=0;se<X.length;se++)if(ae.hasOwnProperty(X[se])&&(ae=ae[X[se]],X[se]=="last_updated")){let pe=ae.split("-");ae=pe[2]+"/"+pe[1]+"/"+pe[0]}return ae}function T(){d(1,v.ariaHidden=!a.ariaExpanded,v)}let B={popden:{title:"Population density",info:"Population density is the number of usual residents per square kilometer. A square kilometer is approximately equivalent to the floor space of 8 Titanics. It is rounded to 1 decimal place. <p class = 'pibutton'>Access data at: <a href='"+z("MYETotal[0].dataset_url")+"'>"+z("MYETotal[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("MYETotal[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("MYETotal[0].email")+"'>Email for more information</a> </p>"},pop:{title:"Population",info:"Population is based on the number of usual residents at 30th June in the mid-year population estimates.  <p class = 'pibutton'>Access data at: <a href='"+z("MYETotal[0].dataset_url")+"'>"+z("MYETotal[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("MYETotal[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("MYETotal[0].email")+"'>Email for more information</a> </p>"},generalhealth:{title:"General health",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>General health is a self-assessment of a person's general state of health. It is not based over any specified period of time. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},wellbeing:{title:"Personal wellbeing",info:"<p>Average Happiness score out of 10 for people aged 16+.  Average Life satisfaction score out of 10 for people aged 16+.<p>Average score out of 10 where 0 is ‘not at all’ and 10 is ‘completely’.</p></p><p class = 'pibutton'>Access data at: <a href='"+z("wellbeing[0].dataset_url")+"'>"+z("wellbeing[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("wellbeing[0].last_updated")+"</p> <p>Loneliness is the percentage of people aged 16+ who were lonely 'often/always' or 'some of the time'.</p><p class = 'pibutton'>Access data at: <a href='"+z("lonely[0].dataset_url")+"'>"+z("lonely[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("lonely[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("lonely[0].email")+"'>Email for more information</a> </p>"},lifeexpectancy:{title:"Life expectancy at birth",info:"<p class = 'pibutton'>Life expectancy at birth is the average number of years a person born in the current period could expect to live if the current mortality patterns remain constant.  Further information on definitions is available on the <a href = 'https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health Inequalities webpage</a></p><p class = 'pibutton'>Access data at: <a href='"+z("LE[0].dataset_url")+"'>"+z("LE[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("LE[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("LE[0].email")+"'>Email for more information</a> </p>"},env_problem:{title:"Environmental problems",info:" <p class = 'pibutton'>Access data at: <a href='"+z("Env_problem[0].dataset_url")+"'>"+z("Env_problem[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Env_problem[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("Env_problem[0].email")+"'>Email for more information</a> </p>"},renewable:{title:"Household renewable energy systems",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},cars:{title:"Car or van availability",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The number of cars or vans that are owned, or available for use, by members of a household. It includes company cars and vans that are available for private use.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},active:{title:"Active travel",info:"<p class = 'pibutton'>Access data at: <a href='"+z("Env_active[0].dataset_url")+"'>"+z("Env_active[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Env_active[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("Env_active[0].email")+"'>Email for more information</a> </p>"},crime:{title:"Police recorded crimes",info:"<p class = 'pibutton'>Access data at: <a href='"+z("crime[0].dataset_url")+"'>"+z("crime[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("crime[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("crime[0].email")+"'>Email for more information</a> </p>"},burglary:{title:"Police recorded burglaries",info:"<p class = 'pibutton'>Access data at: <a href='"+z("crime[0].dataset_url")+"'>"+z("crime[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("crime[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("crime[0].email")+"'>Email for more information</a> </p>"},crimetype:{title:"Types of crime",info:"<p class = 'pibutton'>Access data at: <a href='"+z("crime[0].dataset_url")+"'>"+z("crime[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("crime[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("crime[0].email")+"'>Email for more information</a> </p><p class = 'pibutton'>Crime per 1,000 population based on mid-year population estimate</p>"},crimeworry:{title:"Worry about crime",info:"<p class = 'pibutton'>Access data at: <a href='"+z("crimeworry[0].dataset_url")+"'>"+z("crimeworry[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("crimeworry[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("crimeworry[0].email")+"'>Email for more information</a> </p>"},crimeperception:{title:"Views on anti-social behaviour",info:"<p class = 'pibutton'>Access data at: <a href='"+z("crimeperception[0].dataset_url")+"'>"+z("crimeperception[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("crimeperception[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("crimeperception[0].email")+"'>Email for more information</a> </p>"},carers:{title:"Unpaid care giving",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Unpaid care covers looking after giving help or support to anyone because they have long-term physical or mental health conditions or illnesses, or problems related to old age. It does not include any activities as part of paid employment. All unpaid care statistics are restricted to persons aged 5 and over. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},hospitalactivity:{title:"Annual admissions to hospital",info:"<p class = 'pibutton'>Access data at: <a href='"+z("Admiss[0].dataset_url")+"'>"+z("Admiss[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Admiss[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("Admiss[0].email")+"'>Email for more information</a> </p>"},primarycare:{title:"Primary care providers",info:"<p class = 'pibutton'>Access data at: <a href='"+z("GP[0].dataset_url")+"'>"+z("GP[0].title")+"</a>, <a href='"+z("DEN[0].dataset_url")+"'>"+z("DEN[0].title")+"</a> and <a href='"+z("DEN_REG[0].dataset_url")+"'>"+z("DEN_REG[0].title")+"</a></p>"},employmentrates:{title:"Work status of adults",info:"<p class = 'pibutton'>Access data at: <a href='"+z("LMS[0].dataset_url")+"'>"+z("LMS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("LMS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("LMS[0].email")+"'>Email for more information</a> </p><p>Unemployed rates are based on those aged 16 and over, while both Employed and Inactive rates are based on those aged 16 to 64. Inactive includes students, early retirees, or people looking after a home, who are long-term sick or disabled. </p>"},employed:{title:"Work and wages",info:"<p class = 'pibutton'>Access data on number employed at: <a href='"+z("LMS[0].dataset_url")+"'>"+z("LMS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("LMS[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+z("LMS[0].email")+"'>Email for more information</a> </p><p >Access wages data at: <a href='"+z("ASHE_weekly[0].dataset_url")+"'>"+z("ASHE_weekly[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("ASHE_weekly[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("ASHE_weekly[0].email")+"'>Email for more information</a> </p><p>Median salary is the median gross weekly earnings for full-time employees.  The Median measures the amount earned by the average individual, that is the level of earnings at which half the population are above and half the population are below</p>"},wages:{title:"Average annual wage",info:"<p class = 'pibutton'>Access data at: <a href='"+z("ASHE[0].dataset_url")+"'>"+z("ASHE[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("ASHE[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("ASHE[0].email")+"'>Email for more information</a> </p><p>Median is the ..... </p>"},bres:{title:"Type of work",info:"<p class = 'pibutton'>Access data at: <a href='"+z("BRES[0].dataset_url")+"'>"+z("BRES[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("BRES[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+z("BRES[0].email")+"'>Email for more information</a> </p>"},pensionagebenefits:{title:"State Pension",info:"<p class = 'pibutton'>Access data at: <a href='"+z("BS[0].dataset_url")+"'>"+z("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("BS[0].email")+"'>Email for more information</a> </p>"},ucbenefits:{title:"Universal Credit",info:"<p class = 'pibutton'>Access data at: <a href='"+z("BS[0].dataset_url")+"'>"+z("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("BS[0].email")+"'>Email for more information</a> </p>"},pipbenefits:{title:"Personal Independence Payment",info:"<p class = 'pibutton'>Access data at:  <a href='"+z("BS[0].dataset_url")+"'>"+z("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("BS[0].email")+"'>Email for more information</a> </p>"},enrollments:{title:"People in education",info:"<p class = 'pibutton'>Access data at: <a href='"+z("Primary[0].dataset_url")+"'>"+z("Primary[0].title")+"</a>, <a href='"+z("PostPrimary[0].dataset_url")+"'>"+z("PostPrimary[0].title")+"</a>,  <a href='"+z("FE[0].dataset_url")+"'>"+z("FE[0].title")+"</a> and <a href='"+z("HE[0].dataset_url")+"'>"+z("HE[0].title")+"</a></p>"},fsme:{title:"Pupils entitled to free school meals",info:"<p class = 'pibutton'>Access data at: <a href='"+z("Primary[0].dataset_url")+"'>"+z("Primary[0].title")+"</a> and <a href='"+z("PostPrimary[0].dataset_url")+"'>"+z("PostPrimary[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Primary[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("Primary[0].email")+"'>Email for more information</a>.  Definitions are available on the <a href = 'https://www.education-ni.gov.uk/articles/school-enrolments-overview'>statistical publication page</a>. </p>"},teachers:{title:"School class size",info:"<p class = 'pibutton'>Access data at: <a href='"+z("ClassSize[0].dataset_url")+"'>"+z("ClassSize[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("ClassSize[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("ClassSize[0].email")+"'>Email for more information</a> </p>"},qualifications:{title:"Highest level of qualifications in the population",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The highest level of qualification categories are as follows:<p>No qualifications;</p><p>1 to 4 GCSEs or Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;</p><p>5 or more GCSEs or Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;</p><p>Apprenticeship;</p><p>2 or more A Levels or Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;</p><p>Degree (BA, BSc) and above or Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and</p><p>Other: Other qualifications, equivalent unknown.</p><p>Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent.</p>"},attainment:{title:"GCSEs for school leavers",info:" <p class = 'pibutton'>Access data at: <a href='"+z("Attainment[0].dataset_url")+"'>"+z("Attainment[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Attainment[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+z("Attainment[0].email")+"'>Email for more information</a> </p>"},concern:{title:"Concern about the environment",info:" <p class = 'pibutton'>Access data at: <a href='"+z("Env_concern[0].dataset_url")+"'>"+z("Env_concern[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Env_concern[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+z("Env_concern[0].email")+"'>Email for more information</a> </p>"},waste:{title:"Household waste",info:" <p class = 'pibutton'>Access data at: <a href='"+z("Env_waste[0].dataset_url")+"'>"+z("Env_waste[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Env_waste[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+z("Env_waste[0].email")+"'>Email for more information</a> </p>"},ghg:{title:"Greenhouse gas",info:" <p class = 'pibutton'>Access data at: <a href='"+z("Env_ghg[0].dataset_url")+"'>"+z("Env_ghg[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Env_ghg[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+z("Env_ghg[0].email")+"'>Email for more information</a> </p>"},empty:{title:"",info:""},destination:{title:"Next steps for school leavers",info:" <p class = 'pibutton'>Access data at: <a href='"+z("Destination[0].dataset_url")+"'>"+z("Destination[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("Destination[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("Destination[0].email")+"'>Email for more information</a> </p>"},popchange:{title:"Population change",info:" <p class = 'pibutton'>Access data at: <a href='"+z("PopChange[0].dataset_url")+"'>"+z("PopChange[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("PopChange[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("PopChange[0].email")+"'>Email for more information</a> </p>"},broadage:{title:"Age",info:" <p class = 'pibutton'> Age bands used at LGD, DEA and SDZ are different than those at the smaller data zones.  Access data at: <a href='"+z("BroadAge[0].dataset_url")+"'>"+z("BroadAge[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("BroadAge[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("BroadAge[0].email")+"'>Email for more information</a> </p>"},age:{title:"Age",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>A grouping of ages where a person’s age is their age at their last birthday on or prior to census day.  Age bands used at data zone are different than those at LGD, DEA and SDZ<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},hhsize:{title:"Household size",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The number of usual residents in the household.      <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},religion:{title:"Religion, Religion brought up in",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The religious group the person belongs to or for people with no current religion their religious group of upbringing.People with no current religion and no religion of upbringing are labelled 'None'.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},language:{title:"Main language",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Person's main language as declared in the Census.Statistics for all language questions are restrictedto persons aged 3 and over. <ahref='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},households:{title:"Households - box with numbers",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>A household is either one person living alone or a group of people living at the same address who share cooking facilities and share a living room, sitting room or dining area. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},SEN:{title:"Special educational needs (SEN)",info:" <p class = 'pibutton'>Access data at:</p><p class = 'pibutton'><a href='"+z("SEN[0].dataset_url")+"'>"+z("SEN[0].title")+"</a></p><p class = 'pibutton'><a href='"+z("Primary[0].dataset_url")+"'>"+z("Primary[0].title")+"</a></p><p class = 'pibutton'><a href='"+z("PostPrimary[0].dataset_url")+"'>"+z("PostPrimary[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("SEN[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+z("SEN[0].email")+"'>Email for more information</a> </p><p class = 'pibutton'>These figures include SEN pupils enrolled in Special Education Schools, Primary Schools and Post-Primary Schools and include Statemented and Non Statemented pupils.  Definitions are available on the <a href = 'https://www.education-ni.gov.uk/articles/school-enrolments-overview'>statistical publication page</a>.</p>"},no_bus:{title:"Business and trade",info:" <p class = 'pibutton'>Access data at: <a href='"+z("business[0].dataset_url")+"'>"+z("business[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("business[0].last_updated")+"</p>  <p class = 'pibutton'>Access data at: <a href='"+z("niets_sales[0].dataset_url")+"'>"+z("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("niets_sales[0].email")+"'>Email for more information</a> </p>"},type_bus:{title:"Type of businesses",info:" <p class = 'pibutton'>Access data at: <a href='"+z("business[0].dataset_url")+"'>"+z("business[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("business[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("business[0].email")+"'>Email for more information</a> </p>"},size_bus:{title:"Employees in businesses",info:" <p class = 'pibutton'>Access data at: <a href='"+z("businessband[0].dataset_url")+"'>"+z("businessband[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("businessband[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("businessband[0].email")+"'>Email for more information</a> </p>"},sector:{title:"Selected business sectors",info:" <p class = 'pibutton'>Access farms data at: <a href='"+z("farms[0].dataset_url")+"'>"+z("farms[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("farms[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("farms[0].email")+"'>Email for more information</a> </p> <p class = 'pibutton'>Access tourism jobs data at: <a href='"+z("tourism[0].dataset_url")+"'>"+z("tourism[0].title")+"</a></p> <p class = 'pibutton'>Access tourism accomodation data at: <a href='"+z("tourism_estab[0].dataset_url")+"'>"+z("tourism_estab[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("tourism_estab[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("tourism[0].email")+"'>Email for more information</a> </p>"},niets_sales:{title:"Places businesses sell to (sales partners)",info:"<p class = 'pibutton'>Access data at: <a href='"+z("niets_sales[0].dataset_url")+"'>"+z("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("niets_sales[0].email")+"'>Email for more information</a> </p>"},niets_purch:{title:"Places businesses buy from (purchases partners)",info:"<p class = 'pibutton'>Access data at: <a href='"+z("niets_sales[0].dataset_url")+"'>"+z("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+z("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+z("niets_sales[0].email")+"'>Email for more information</a> </p>"}};function M(R){Bs[R?"unshift":"push"](()=>{a=R,d(2,a)})}function U(R){Bs[R?"unshift":"push"](()=>{v=R,d(1,v)})}return l.$$set=R=>{"id"in R&&d(0,h=R.id),"place"in R&&d(5,_=R.place)},[h,v,a,T,B,_,M,U]}class p1 extends sn{constructor(p){super(),ln(this,p,c1,u1,un,{id:0,place:5})}}function h1(l){let p;return{c(){p=Oe("h3"),this.h()},l(d){p=Ne(d,"H3",{style:!0});var h=Be(p);h.forEach(ne),this.h()},h(){Qe(p,"margin","0 0 10px 0")},m(d,h){Re(d,p,h),p.innerHTML=l[9]},p(d,h){h&512&&(p.innerHTML=d[9])},i:Xi,o:Xi,d(d){d&&ne(p)}}}function f1(l){let p,d;return p=new p1({props:{id:l[0],place:l[2]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&1&&(v.id=h[0]),_&4&&(v.place=h[2]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function Bm(l){let p,d;return{c(){p=Oe("div"),d=Et(l[12]),this.h()},l(h){p=Ne(h,"DIV",{class:!0});var _=Be(p);d=kt(_,l[12]),_.forEach(ne),this.h()},h(){Y(p,"class","text-small")},m(h,_){Re(h,p,_),xe(p,d)},p(h,_){_&4096&&vi(d,h[12])},d(h){h&&ne(p)}}}function d1(l){let p,d;return{c(){p=new Rl(!1),d=ni(),this.h()},l(h){p=Bl(h,!1),d=ni(),this.h()},h(){p.a=d},m(h,_){p.m(l[3],h,_),Re(h,d,_)},p(h,_){_&8&&p.p(h[3])},i:Xi,o:Xi,d(h){h&&ne(d),h&&p.d()}}}function m1(l){let p,d=l[3][l[2].type]+"",h;return{c(){p=new Rl(!1),h=ni(),this.h()},l(_){p=Bl(_,!1),h=ni(),this.h()},h(){p.a=h},m(_,v){p.m(d,_,v),Re(_,h,v)},p(_,v){v&12&&d!==(d=_[3][_[2].type]+"")&&p.p(d)},i:Xi,o:Xi,d(_){_&&ne(h),_&&p.d()}}}function g1(l){let p,d,h,_,v,a;const z=[S1,w1,x1],T=[];function B(M,U){return U&1040&&(p=null),U&1040&&(d=null),p==null&&(p=!!(M[4].hasOwnProperty("none")&M[10]==null)),p?0:(d==null&&(d=!!(M[4].hasOwnProperty("ni")&M[10]=="ni")),d?1:2)}return h=B(l,-1),_=T[h]=z[h](l),{c(){_.c(),v=ni()},l(M){_.l(M),v=ni()},m(M,U){T[h].m(M,U),Re(M,v,U),a=!0},p(M,U){let R=h;h=B(M,U),h===R?T[h].p(M,U):(Wn(),gt(T[R],1,1,()=>{T[R]=null}),Xn(),_=T[h],_?_.p(M,U):(_=T[h]=z[h](M),_.c()),ct(_,1),_.m(v.parentNode,v))},i(M){a||(ct(_),a=!0)},o(M){gt(_),a=!1},d(M){T[h].d(M),M&&ne(v)}}}function y1(l){let p,d,h,_,v,a;const z=[z1,k1,E1],T=[];function B(M,U){return U&1040&&(p=null),U&1040&&(d=null),p==null&&(p=!!(M[4].hasOwnProperty("none")&M[10]==null)),p?0:(d==null&&(d=!!(M[4].hasOwnProperty("ni")&M[10]=="ni")),d?1:2)}return h=B(l,-1),_=T[h]=z[h](l),{c(){_.c(),v=ni()},l(M){_.l(M),v=ni()},m(M,U){T[h].m(M,U),Re(M,v,U),a=!0},p(M,U){let R=h;h=B(M,U),h===R?T[h].p(M,U):(Wn(),gt(T[R],1,1,()=>{T[R]=null}),Xn(),_=T[h],_?_.p(M,U):(_=T[h]=z[h](M),_.c()),ct(_,1),_.m(v.parentNode,v))},i(M){a||(ct(_),a=!0)},o(M){gt(_),a=!1},d(M){T[h].d(M),M&&ne(v)}}}function _1(l){let p,d,h,_,v,a;const z=[A1,I1,T1],T=[];function B(M,U){return U&1040&&(p=null),U&1040&&(d=null),p==null&&(p=!!(M[4].hasOwnProperty("none")&M[10]==null)),p?0:(d==null&&(d=!!(M[4].hasOwnProperty("ni")&M[10]=="ni")),d?1:2)}return h=B(l,-1),_=T[h]=z[h](l),{c(){_.c(),v=ni()},l(M){_.l(M),v=ni()},m(M,U){T[h].m(M,U),Re(M,v,U),a=!0},p(M,U){let R=h;h=B(M,U),h===R?T[h].p(M,U):(Wn(),gt(T[R],1,1,()=>{T[R]=null}),Xn(),_=T[h],_?_.p(M,U):(_=T[h]=z[h](M),_.c()),ct(_,1),_.m(v.parentNode,v))},i(M){a||(ct(_),a=!0)},o(M){gt(_),a=!1},d(M){T[h].d(M),M&&ne(v)}}}function v1(l){let p,d;return p=new J0({props:{data:l[4],zKey:"group"}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function b1(l){let p,d,h,_,v,a;const z=[M1,C1,P1],T=[];function B(M,U){return U&1040&&(p=null),U&1040&&(d=null),p==null&&(p=!!(M[4].hasOwnProperty("none")&M[10]==null)),p?0:(d==null&&(d=!!(M[4].hasOwnProperty("ni")&M[10]=="ni")),d?1:2)}return h=B(l,-1),_=T[h]=z[h](l),{c(){_.c(),v=ni()},l(M){_.l(M),v=ni()},m(M,U){T[h].m(M,U),Re(M,v,U),a=!0},p(M,U){let R=h;h=B(M,U),h===R?T[h].p(M,U):(Wn(),gt(T[R],1,1,()=>{T[R]=null}),Xn(),_=T[h],_?_.p(M,U):(_=T[h]=z[h](M),_.c()),ct(_,1),_.m(v.parentNode,v))},i(M){a||(ct(_),a=!0)},o(M){gt(_),a=!1},d(M){T[h].d(M),M&&ne(v)}}}function x1(l){let p,d;return p=new Zh({props:{data:l[4],zKey:l[5]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4]),_&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function w1(l){let p,d;return p=new Zh({props:{data:l[4].ni,zKey:l[5]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4].ni),_&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function S1(l){let p,d;return p=new Zh({props:{data:l[4].none,zKey:l[5]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4].none),_&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function E1(l){let p,d;return p=new Wh({props:{data:l[4],zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4]),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function k1(l){let p,d;return p=new Wh({props:{data:l[4].ni,zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4].ni),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function z1(l){let p,d;return p=new Wh({props:{data:l[4].none,zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4].none),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function T1(l){let p,d;return p=new Xh({props:{data:l[4],zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4]),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function I1(l){let p,d;return p=new Xh({props:{data:l[4].ni,zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4].ni),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function A1(l){let p,d;return p=new Xh({props:{data:l[4].none,zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4].none),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function P1(l){let p,d;return p=new Hh({props:{data:l[4],zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4]),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),_&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function C1(l){let p,d;return p=new Hh({props:{data:l[4].ni,zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4].ni),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),_&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function M1(l){let p,d;return p=new Hh({props:{data:l[4].none,zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&16&&(v.data=h[4].none),_&32&&(v.zKey=h[5]),_&64&&(v.label=h[6]),_&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function Fm(l){let p,d,h,_=l[11][l[2].type]+"";return{c(){p=Oe("br"),d=vt(),h=Oe("span"),this.h()},l(v){p=Ne(v,"BR",{}),d=bt(v),h=Ne(v,"SPAN",{class:!0});var a=Be(h);a.forEach(ne),this.h()},h(){Y(h,"class","text-small")},m(v,a){Re(v,p,a),Re(v,d,a),Re(v,h,a),h.innerHTML=_},p(v,a){a&2052&&_!==(_=v[11][v[2].type]+"")&&(h.innerHTML=_)},d(v){v&&ne(p),v&&ne(d),v&&ne(h)}}}function D1(l){let p,d,h,_,v,a,z,T,B,M,U,R,W,X,ae,se;const pe=[f1,h1],ge=[];function rt(Ge,He){return Ge[8]==!0|Ge[8]==null?0:1}d=rt(l),h=ge[d]=pe[d](l);let Ue=l[12]!=null&&Bm(l);const Ae=[b1,v1,_1,y1,g1,m1,d1],Ke=[];function xt(Ge,He){return He&12&&(a=null),He&12&&(z=null),He&12&&(T=null),He&12&&(B=null),He&12&&(M=null),He&12&&(U=null),a==null&&(a=!!(Ge[3]=="StackedBarChart"|Ge[3].hasOwnProperty(Ge[2].type)&Ge[3][Ge[2].type]=="StackedBarChart")),a?0:(z==null&&(z=!!(Ge[3]=="GroupChart"|Ge[3].hasOwnProperty(Ge[2].type)&Ge[3][Ge[2].type]=="GroupChart")),z?1:(T==null&&(T=!!(Ge[3]=="ProfileChart"|Ge[3].hasOwnProperty(Ge[2].type)&Ge[3][Ge[2].type]=="ProfileChart")),T?2:(B==null&&(B=!!(Ge[3]=="BarChart"|Ge[3].hasOwnProperty(Ge[2].type)&Ge[3][Ge[2].type]=="BarChart")),B?3:(M==null&&(M=!!(Ge[3]=="ColChart"|Ge[3].hasOwnProperty(Ge[2].type)&Ge[3][Ge[2].type]=="ColChart")),M?4:(U==null&&(U=!!Ge[3].hasOwnProperty(Ge[2].type)),U?5:6)))))}R=xt(l,-1),W=Ke[R]=Ae[R](l);let Pt=l[11]!=null&l[10]!=null&&Fm(l);return{c(){p=Oe("div"),h.c(),_=vt(),Ue&&Ue.c(),v=vt(),W.c(),X=vt(),Pt&&Pt.c(),this.h()},l(Ge){p=Ne(Ge,"DIV",{class:!0,style:!0});var He=Be(p);h.l(He),_=bt(He),Ue&&Ue.l(He),v=bt(He),W.l(He),X=bt(He),Pt&&Pt.l(He),He.forEach(ne),this.h()},h(){Y(p,"class",ae=Om(l[0])),Y(p,"style",l[1])},m(Ge,He){Re(Ge,p,He),ge[d].m(p,null),xe(p,_),Ue&&Ue.m(p,null),xe(p,v),Ke[R].m(p,null),xe(p,X),Pt&&Pt.m(p,null),se=!0},p(Ge,[He]){let ht=d;d=rt(Ge),d===ht?ge[d].p(Ge,He):(Wn(),gt(ge[ht],1,1,()=>{ge[ht]=null}),Xn(),h=ge[d],h?h.p(Ge,He):(h=ge[d]=pe[d](Ge),h.c()),ct(h,1),h.m(p,_)),Ge[12]!=null?Ue?Ue.p(Ge,He):(Ue=Bm(Ge),Ue.c(),Ue.m(p,v)):Ue&&(Ue.d(1),Ue=null);let Pe=R;R=xt(Ge,He),R===Pe?Ke[R].p(Ge,He):(Wn(),gt(Ke[Pe],1,1,()=>{Ke[Pe]=null}),Xn(),W=Ke[R],W?W.p(Ge,He):(W=Ke[R]=Ae[R](Ge),W.c()),ct(W,1),W.m(p,X)),Ge[11]!=null&Ge[10]!=null?Pt?Pt.p(Ge,He):(Pt=Fm(Ge),Pt.c(),Pt.m(p,null)):Pt&&(Pt.d(1),Pt=null),(!se||He&1&&ae!==(ae=Om(Ge[0])))&&Y(p,"class",ae),(!se||He&2)&&Y(p,"style",Ge[1])},i(Ge){se||(ct(h),ct(W),se=!0)},o(Ge){gt(h),gt(W),se=!1},d(Ge){Ge&&ne(p),ge[d].d(),Ue&&Ue.d(),Ke[R].d(),Pt&&Pt.d()}}}function Om(l){return l=="empty"?"":"div-grey-box"}function L1(l,p,d){let{id:h}=p,{style:_=""}=p,{place:v}=p,{content:a}=p,{chart_data:z=null}=p,{zKey:T="ni"}=p,{label:B=null}=p,{topic_prev_available:M=!0}=p,{i_button:U=!0}=p,{heading:R=null}=p,{chart_compare_type:W}=p,{compare_content:X=null}=p,{year:ae=null}=p;return l.$$set=se=>{"id"in se&&d(0,h=se.id),"style"in se&&d(1,_=se.style),"place"in se&&d(2,v=se.place),"content"in se&&d(3,a=se.content),"chart_data"in se&&d(4,z=se.chart_data),"zKey"in se&&d(5,T=se.zKey),"label"in se&&d(6,B=se.label),"topic_prev_available"in se&&d(7,M=se.topic_prev_available),"i_button"in se&&d(8,U=se.i_button),"heading"in se&&d(9,R=se.heading),"chart_compare_type"in se&&d(10,W=se.chart_compare_type),"compare_content"in se&&d(11,X=se.compare_content),"year"in se&&d(12,ae=se.year)},[h,_,v,a,z,T,B,M,U,R,W,X,ae]}class Ru extends sn{constructor(p){super(),ln(this,p,L1,D1,un,{id:0,style:1,place:2,content:3,chart_data:4,zKey:5,label:6,topic_prev_available:7,i_button:8,heading:9,chart_compare_type:10,compare_content:11,year:12})}}function Nm(l,p,d){const h=l.slice();return h[15]=p[d],h[17]=d,h}function Um(l){let p,d;return p=new Ru({props:{id:l[6][l[11][l[17]]].id,style:l[6][l[11][l[17]]].style,place:l[3],year:l[6][l[11][l[17]]].year,content:l[6][l[11][l[17]]].content,chart_data:l[6][l[11][l[17]]].chart_data,zKey:l[6][l[11][l[17]]].zKey,label:l[6][l[11][l[17]]].label,topic_prev_available:l[6][l[11][l[17]]].topic_prev_available,chart_compare_type:l[8],i_button:l[6][l[11][l[17]]].i_button,heading:l[6][l[11][l[17]]].title,compare_content:l[6][l[11][l[17]]].compare_content}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&64&&(v.id=h[6][h[11][h[17]]].id),_&64&&(v.style=h[6][h[11][h[17]]].style),_&8&&(v.place=h[3]),_&64&&(v.year=h[6][h[11][h[17]]].year),_&64&&(v.content=h[6][h[11][h[17]]].content),_&64&&(v.chart_data=h[6][h[11][h[17]]].chart_data),_&64&&(v.zKey=h[6][h[11][h[17]]].zKey),_&64&&(v.label=h[6][h[11][h[17]]].label),_&64&&(v.topic_prev_available=h[6][h[11][h[17]]].topic_prev_available),_&256&&(v.chart_compare_type=h[8]),_&64&&(v.i_button=h[6][h[11][h[17]]].i_button),_&64&&(v.heading=h[6][h[11][h[17]]].title),_&64&&(v.compare_content=h[6][h[11][h[17]]].compare_content),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function Vm(l){let p,d;return p=new Ru({props:{id:l[6][l[11][l[17]]].id,style:l[6][l[11][l[17]]].style,place:l[3],year:l[6][l[11][l[17]]].year,content:l[6][l[11][l[17]]].content,chart_data:l[6][l[11][l[17]]].chart_data,zKey:l[6][l[11][l[17]]].zKey,label:l[6][l[11][l[17]]].label,topic_prev_available:l[6][l[11][l[17]]].topic_prev_available,chart_compare_type:l[8],i_button:l[6][l[11][l[17]]].i_button,compare_content:l[6][l[11][l[17]]].compare_content}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,_){pi(p,h,_),d=!0},p(h,_){const v={};_&64&&(v.id=h[6][h[11][h[17]]].id),_&64&&(v.style=h[6][h[11][h[17]]].style),_&8&&(v.place=h[3]),_&64&&(v.year=h[6][h[11][h[17]]].year),_&64&&(v.content=h[6][h[11][h[17]]].content),_&64&&(v.chart_data=h[6][h[11][h[17]]].chart_data),_&64&&(v.zKey=h[6][h[11][h[17]]].zKey),_&64&&(v.label=h[6][h[11][h[17]]].label),_&64&&(v.topic_prev_available=h[6][h[11][h[17]]].topic_prev_available),_&256&&(v.chart_compare_type=h[8]),_&64&&(v.i_button=h[6][h[11][h[17]]].i_button),_&64&&(v.compare_content=h[6][h[11][h[17]]].compare_content),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){gt(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function qm(l){let p=l[6][l[11][l[17]]].hasOwnProperty("show")&&l[6][l[11][l[17]]].show.includes(l[3].type),d,h=!l[6][l[11][l[17]]].hasOwnProperty("show"),_,v,a=p&&Um(l),z=h&&Vm(l);return{c(){a&&a.c(),d=vt(),z&&z.c(),_=ni()},l(T){a&&a.l(T),d=bt(T),z&&z.l(T),_=ni()},m(T,B){a&&a.m(T,B),Re(T,d,B),z&&z.m(T,B),Re(T,_,B),v=!0},p(T,B){B&72&&(p=T[6][T[11][T[17]]].hasOwnProperty("show")&&T[6][T[11][T[17]]].show.includes(T[3].type)),p?a?(a.p(T,B),B&72&&ct(a,1)):(a=Um(T),a.c(),ct(a,1),a.m(d.parentNode,d)):a&&(Wn(),gt(a,1,1,()=>{a=null}),Xn()),B&64&&(h=!T[6][T[11][T[17]]].hasOwnProperty("show")),h?z?(z.p(T,B),B&64&&ct(z,1)):(z=Vm(T),z.c(),ct(z,1),z.m(_.parentNode,_)):z&&(Wn(),gt(z,1,1,()=>{z=null}),Xn())},i(T){v||(ct(a),ct(z),v=!0)},o(T){gt(a),gt(z),v=!1},d(T){a&&a.d(T),T&&ne(d),z&&z.d(T),T&&ne(_)}}}function jm(l){let p,d,h=l[2].toLocaleLowerCase()+"",_,v,a,z,T=l[10]?"Click to hide -":"Click to expand +",B,M,U,R,W,X=l[10]&&Gm(l);return{c(){p=Oe("h3"),d=Et("More "),_=Et(h),v=Et(` statistics\r
                    `),a=Oe("button"),z=Oe("span"),B=Et(T),M=vt(),X&&X.c(),U=ni(),this.h()},l(ae){p=Ne(ae,"H3",{});var se=Be(p);d=kt(se,"More "),_=kt(se,h),v=kt(se,` statistics\r
                    `),a=Ne(se,"BUTTON",{class:!0});var pe=Be(a);z=Ne(pe,"SPAN",{class:!0});var ge=Be(z);B=kt(ge,T),ge.forEach(ne),pe.forEach(ne),se.forEach(ne),M=bt(ae),X&&X.l(ae),U=ni(),this.h()},h(){Y(z,"class","text-small"),Y(a,"class","btn-toggle-more-stats svelte-17513eh")},m(ae,se){Re(ae,p,se),xe(p,d),xe(p,_),xe(p,v),xe(p,a),xe(a,z),xe(z,B),Re(ae,M,se),X&&X.m(ae,se),Re(ae,U,se),R||(W=Sp(a,"click",l[12]),R=!0)},p(ae,se){se&4&&h!==(h=ae[2].toLocaleLowerCase()+"")&&vi(_,h),se&1024&&T!==(T=ae[10]?"Click to hide -":"Click to expand +")&&vi(B,T),ae[10]?X?X.p(ae,se):(X=Gm(ae),X.c(),X.m(U.parentNode,U)):X&&(X.d(1),X=null)},d(ae){ae&&ne(p),ae&&ne(M),X&&X.d(ae),ae&&ne(U),R=!1,W()}}}function Gm(l){let p;return{c(){p=Oe("div"),this.h()},l(d){p=Ne(d,"DIV",{class:!0});var h=Be(p);h.forEach(ne),this.h()},h(){Y(p,"class","accordion-more svelte-17513eh")},m(d,h){Re(d,p,h),p.innerHTML=l[7]},p(d,h){h&128&&(p.innerHTML=d[7])},d(d){d&&ne(p)}}}function R1(l){let p,d,h,_,v,a,z,T,B,M,U,R,W,X,ae=l[3].name+"",se,pe,ge,rt,Ue,Ae,Ke,xt,Pt,Ge,He,ht,Pe,je={length:l[11].length},lt=[];for(let ot=0;ot<je.length;ot+=1)lt[ot]=qm(Nm(l,je,ot));const De=ot=>gt(lt[ot],1,1,()=>{lt[ot]=null});let wt=l[7]!=""&&jm(l);return{c(){p=Oe("div"),d=Oe("h2"),h=Oe("button"),_=Oe("span"),v=Oe("img"),z=vt(),T=Et(l[2]),R=vt(),W=Oe("div"),X=Oe("div"),se=Et(ae),pe=Et(". "),ge=new Rl(!1),rt=vt(),Ue=Oe("span"),Ae=Et(l[5]),Ke=vt(),xt=Oe("div");for(let ot=0;ot<lt.length;ot+=1)lt[ot].c();Ge=vt(),wt&&wt.c(),this.h()},l(ot){p=Ne(ot,"DIV",{class:!0});var Dt=Be(p);d=Ne(Dt,"H2",{class:!0,id:!0});var Lt=Be(d);h=Ne(Lt,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var yi=Be(h);_=Ne(yi,"SPAN",{class:!0});var qe=Be(_);v=Ne(qe,"IMG",{src:!0,alt:!0,height:!0,class:!0}),z=bt(qe),T=kt(qe,l[2]),qe.forEach(ne),yi.forEach(ne),Lt.forEach(ne),R=bt(Dt),W=Ne(Dt,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Xt=Be(W);X=Ne(Xt,"DIV",{class:!0});var zi=Be(X);se=kt(zi,ae),pe=kt(zi,". "),ge=Bl(zi,!1),rt=bt(zi),Ue=Ne(zi,"SPAN",{class:!0});var $r=Be(Ue);Ae=kt($r,l[5]),$r.forEach(ne),Ke=bt(zi),xt=Ne(zi,"DIV",{class:!0});var nr=Be(xt);for(let Mn=0;Mn<lt.length;Mn+=1)lt[Mn].l(nr);nr.forEach(ne),Ge=bt(zi),wt&&wt.l(zi),zi.forEach(ne),Xt.forEach(ne),Dt.forEach(ne),this.h()},h(){Ep(v.src,a=ri+"/img/"+l[1])||Y(v,"src",a),Y(v,"alt","logo"),Y(v,"height","40"),Y(v,"class","accordion-dept-logo"),Y(_,"class","accordion-button-title"),Y(h,"class","accordion-button collapsed"),Y(h,"type","button"),Y(h,"data-bs-toggle","collapse"),Y(h,"data-bs-target",B="#panelsStayOpen-collapse"+l[0]),Y(h,"aria-expanded","false"),Y(h,"aria-controls",M="panelsStayOpen-collapse"+l[0]),Y(d,"class","accordion-header"),Y(d,"id",U="panelsStayOpen-heading"+l[0]),ge.a=rt,Y(Ue,"class","accordion-button-title-sub"),Y(xt,"class","grid mt svelte-17513eh"),ju(()=>l[13].call(xt)),Y(X,"class","accordion-body"),Y(W,"id",He="panelsStayOpen-collapse"+l[0]),Y(W,"class","accordion-collapse collapse"),Y(W,"aria-labelledby",ht="panelsStayOpen-heading"+l[0]),Y(p,"class","accordion-item")},m(ot,Dt){Re(ot,p,Dt),xe(p,d),xe(d,h),xe(h,_),xe(_,v),xe(_,z),xe(_,T),xe(p,R),xe(p,W),xe(W,X),xe(X,se),xe(X,pe),ge.m(l[4],X),xe(X,rt),xe(X,Ue),xe(Ue,Ae),xe(X,Ke),xe(X,xt);for(let Lt=0;Lt<lt.length;Lt+=1)lt[Lt]&&lt[Lt].m(xt,null);Pt=Gu(xt,l[13].bind(xt)),xe(X,Ge),wt&&wt.m(X,null),Pe=!0},p(ot,[Dt]){if((!Pe||Dt&2&&!Ep(v.src,a=ri+"/img/"+ot[1]))&&Y(v,"src",a),(!Pe||Dt&4)&&vi(T,ot[2]),(!Pe||Dt&1&&B!==(B="#panelsStayOpen-collapse"+ot[0]))&&Y(h,"data-bs-target",B),(!Pe||Dt&1&&M!==(M="panelsStayOpen-collapse"+ot[0]))&&Y(h,"aria-controls",M),(!Pe||Dt&1&&U!==(U="panelsStayOpen-heading"+ot[0]))&&Y(d,"id",U),(!Pe||Dt&8)&&ae!==(ae=ot[3].name+"")&&vi(se,ae),(!Pe||Dt&16)&&ge.p(ot[4]),(!Pe||Dt&32)&&vi(Ae,ot[5]),Dt&2376){je={length:ot[11].length};let Lt;for(Lt=0;Lt<je.length;Lt+=1){const yi=Nm(ot,je,Lt);lt[Lt]?(lt[Lt].p(yi,Dt),ct(lt[Lt],1)):(lt[Lt]=qm(yi),lt[Lt].c(),ct(lt[Lt],1),lt[Lt].m(xt,null))}for(Wn(),Lt=je.length;Lt<lt.length;Lt+=1)De(Lt);Xn()}ot[7]!=""?wt?wt.p(ot,Dt):(wt=jm(ot),wt.c(),wt.m(X,null)):wt&&(wt.d(1),wt=null),(!Pe||Dt&1&&He!==(He="panelsStayOpen-collapse"+ot[0]))&&Y(W,"id",He),(!Pe||Dt&1&&ht!==(ht="panelsStayOpen-heading"+ot[0]))&&Y(W,"aria-labelledby",ht)},i(ot){if(!Pe){for(let Dt=0;Dt<je.length;Dt+=1)ct(lt[Dt]);Pe=!0}},o(ot){lt=lt.filter(Boolean);for(let Dt=0;Dt<lt.length;Dt+=1)gt(lt[Dt]);Pe=!1},d(ot){ot&&ne(p),on(lt,ot),Pt(),wt&&wt.d()}}}function B1(l,p,d){let{id:h}=p,{img:_}=p,{heading:v}=p,{place:a}=p,{sub_heading:z}=p,{description:T}=p,{boxes:B}=p,{more:M}=p,{chart_compare_type:U}=p,R=Object.keys(B),W,X=!1;const ae=()=>{d(10,X=!X)};function se(){W=this.clientWidth,d(9,W)}return l.$$set=pe=>{"id"in pe&&d(0,h=pe.id),"img"in pe&&d(1,_=pe.img),"heading"in pe&&d(2,v=pe.heading),"place"in pe&&d(3,a=pe.place),"sub_heading"in pe&&d(4,z=pe.sub_heading),"description"in pe&&d(5,T=pe.description),"boxes"in pe&&d(6,B=pe.boxes),"more"in pe&&d(7,M=pe.more),"chart_compare_type"in pe&&d(8,U=pe.chart_compare_type)},[h,_,v,a,z,T,B,M,U,W,X,R,ae,se]}class Ds extends sn{constructor(p){super(),ln(this,p,B1,R1,un,{id:0,img:1,heading:2,place:3,sub_heading:4,description:5,boxes:6,more:7,chart_compare_type:8})}}function Zm(l){let p,d,h,_,v,a,z,T,B,M=l[2].substr(0,2).toUpperCase()=="BT"&l[9](l[2]),U=M&&Km(l);return{c(){p=Oe("div"),d=Oe("div"),h=Oe("img"),v=Et("You searched for "),a=Oe("strong"),z=Et(l[2]),T=Et("."),B=vt(),U&&U.c(),this.h()},l(R){p=Ne(R,"DIV",{id:!0,class:!0});var W=Be(p);d=Ne(W,"DIV",{});var X=Be(d);h=Ne(X,"IMG",{src:!0,alt:!0,class:!0}),v=kt(X,"You searched for "),a=Ne(X,"STRONG",{});var ae=Be(a);z=kt(ae,l[2]),ae.forEach(ne),T=kt(X,"."),X.forEach(ne),B=bt(W),U&&U.l(W),W.forEach(ne),this.h()},h(){Ep(h.src,_=m_+"/img/search.svg")||Y(h,"src",_),Y(h,"alt","search-symbol"),Y(h,"class","svelte-19iexfz"),Y(p,"id","search-result"),Y(p,"class","svelte-19iexfz")},m(R,W){Re(R,p,W),xe(p,d),xe(d,h),xe(d,v),xe(d,a),xe(a,z),xe(d,T),xe(p,B),U&&U.m(p,null)},p(R,W){W&4&&vi(z,R[2]),W&4&&(M=R[2].substr(0,2).toUpperCase()=="BT"&R[9](R[2])),M?U?U.p(R,W):(U=Km(R),U.c(),U.m(p,null)):U&&(U.d(1),U=null)},d(R){R&&ne(p),U&&U.d()}}}function Km(l){let p,d,h,_=l[0].name+"",v,a,z,T,B,M,U,R,W,X,ae,se,pe,ge,rt;return{c(){p=Oe("div"),d=Et("This postcode is located within the "),h=Oe("strong"),v=Et(_),a=Et(" District Electoral Area."),z=vt(),T=Oe("div"),B=Et("You can view more localised information for this postcode at Super Data Zone level by selecting "),M=Oe("strong"),U=Oe("a"),R=Et(l[3]),X=Et(" or at Data Zone level by selecting "),ae=Oe("strong"),se=Oe("a"),pe=Et(l[5]),rt=Et(". Note that many of the statistics produced are not broken down to these smaller geography levels."),this.h()},l(Ue){p=Ne(Ue,"DIV",{style:!0});var Ae=Be(p);d=kt(Ae,"This postcode is located within the "),h=Ne(Ae,"STRONG",{});var Ke=Be(h);v=kt(Ke,_),Ke.forEach(ne),a=kt(Ae," District Electoral Area."),Ae.forEach(ne),z=bt(Ue),T=Ne(Ue,"DIV",{style:!0});var xt=Be(T);B=kt(xt,"You can view more localised information for this postcode at Super Data Zone level by selecting "),M=Ne(xt,"STRONG",{});var Pt=Be(M);U=Ne(Pt,"A",{href:!0});var Ge=Be(U);R=kt(Ge,l[3]),Ge.forEach(ne),Pt.forEach(ne),X=kt(xt," or at Data Zone level by selecting "),ae=Ne(xt,"STRONG",{});var He=Be(ae);se=Ne(He,"A",{href:!0});var ht=Be(se);pe=kt(ht,l[5]),ht.forEach(ne),He.forEach(ne),rt=kt(xt,". Note that many of the statistics produced are not broken down to these smaller geography levels."),xt.forEach(ne),this.h()},h(){Qe(p,"margin-left","1em"),Y(U,"href",W=ri+"/"+l[4]),Y(se,"href",ge=ri+"/"+l[6]),Qe(T,"margin-left","1em")},m(Ue,Ae){Re(Ue,p,Ae),xe(p,d),xe(p,h),xe(h,v),xe(p,a),Re(Ue,z,Ae),Re(Ue,T,Ae),xe(T,B),xe(T,M),xe(M,U),xe(U,R),xe(T,X),xe(T,ae),xe(ae,se),xe(se,pe),xe(T,rt)},p(Ue,Ae){Ae&1&&_!==(_=Ue[0].name+"")&&vi(v,_),Ae&8&&vi(R,Ue[3]),Ae&16&&W!==(W=ri+"/"+Ue[4])&&Y(U,"href",W),Ae&32&&vi(pe,Ue[5]),Ae&64&&ge!==(ge=ri+"/"+Ue[6])&&Y(se,"href",ge)},d(Ue){Ue&&ne(p),Ue&&ne(z),Ue&&ne(T)}}}function F1(l){let p=l[7]()&l[1].search_code==l[0].code&l[8](),d,h=p&&Zm(l);return{c(){h&&h.c(),d=ni()},l(_){h&&h.l(_),d=ni()},m(_,v){h&&h.m(_,v),Re(_,d,v)},p(_,[v]){v&3&&(p=_[7]()&_[1].search_code==_[0].code&_[8]()),p?h?h.p(_,v):(h=Zm(_),h.c(),h.m(d.parentNode,d)):h&&(h.d(1),h=null)},i:Xi,o:Xi,d(_){h&&h.d(_),_&&ne(d)}}}function O1(l,p,d){let{place:h}=p,{storage:_=localStorage}=p,v;function a(){return _.hasOwnProperty("search_name")}function z(){return d(2,v=_.search_name),_.removeItem("search_name"),!0}let T,B,M,U;Rh(()=>{setInterval(function(){a()&_.search_code==h.code&&(d(2,v=_.search_name),z())},500)});function R(W){let X=W.replaceAll(" ","");return fetch("https://raw.githubusercontent.com/NISRA-Tech-Lab/local-stats-dev/main/search_data/CPD_LIGHT_JULY_2024.csv").then(ae=>ae.text()).then(ae=>{const se=ae.split(`
`);let pe;for(let ge=0;ge<se.length;ge++){let rt=se[ge].split(",");if(rt[0]==X){pe=rt;break}}d(3,T=pe[21]),d(4,B=pe[20]),d(5,M=pe[19]),d(6,U=pe[18])}),!0}return l.$$set=W=>{"place"in W&&d(0,h=W.place),"storage"in W&&d(1,_=W.storage)},[h,_,v,T,B,M,U,a,z,R]}class N1 extends sn{constructor(p){super(),ln(this,p,O1,F1,un,{place:0,storage:1})}}function Hm(l,p,d){const h=l.slice();return h[31]=p[d],h[33]=d,h}function Wm(l,p,d){const h=l.slice();return h[34]=p[d],h[33]=d,h}function Xm(l,p,d){const h=l.slice();return h[36]=p[d],h}function Ym(l,p,d){const h=l.slice();return h[34]=p[d],h[33]=d,h}function Jm(l){let p,d,h,_,v,a,z,T=" &gt; ",B,M,U,R,W=l[0].place.name+"",X,ae,se,pe,ge,rt,Ue,Ae,Ke,xt,Pt,Ge,He,ht,Pe,je,lt,De,wt,ot,Dt,Lt,yi,qe,Xt,zi,$r,nr,Mn,Oi,yn,Gt,fr,cn,en,Nt,dr,ar,or,tn,Cr,Mr,mr,Vr,Ti,Ni,sr,lr,gr,Dr,Yn,qr,Dn,Lr,Jn,Rr,Ln,xr,jr,Gi=l[0].place.type!="ni"&&Qm(l);Ae=new l_({props:{search_data:l[0].search_data,group:"typestr",search:!0}}),Ae.$on("select",l[9]),yi=new N1({props:{place:l[0].place}}),zi=new Ru({props:{id:"overview",i_button:!1,heading:"About "+l[0].place.name,place:l[0].place,style:"line-height: 1.3;",content:{ni:"Northern Ireland has 11 Councils or Local Government Districts (LGDs),  which can be subdivided into electoral areas (District Electoral Areas DEAs), then further into Super Data Zones and Data Zones. Statistics can be viewed for these smaller areas.",lgd:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+zn[l[0].place.type].pl+".  It includes the larger settlements of "+l[0].place.lgd_location_description+".",dea:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+zn[l[0].place.type].pl+" in Northern Ireland.  It is within <a href = '"+ri+"/"+l[0].place.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+l[0].place.parents[0].name+" </a> and covers "+l[0].place.dea_location_description+".",sdz:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+zn[l[0].place.type].pl+". Super Data Zones are new statistical areas developed for census. They are broadly similar in population size and housing type.",dz:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+zn[l[0].place.type].pl+".  Data Zones are smaller divisions of Super Data Zones. There are on average 4 in each Super Data Zone."},chart_compare_type:l[6]}}),nr=new Ru({props:{id:"pop",place:l[0].place,year:"Population estimates "+We("MYETotal",l[0].place),content:'<span class="text-big" style="font-size: 2.8em;">'+l[0].place.data.MYETotal.value.toLocaleString()+"</span>",chart_compare_type:l[6],compare_content:{ni:"",lgd:'<span class = "em" style = "background-color: lightgrey">'+mp(l[0].place.data.population.value[2021].all/l[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population<br>The "+l[10](l[0].place.data.population.value_rank[2021].all)+" population of 11 Councils",dea:'<span class = "em" style = "background-color: lightgrey">'+mp(l[0].place.data.population.value[2021].all/l[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population",sdz:"Data not available for area comparison",dz:" Data not available for area comparison"}}}),Oi=new Ru({props:{id:"popden",place:l[0].place,year:"Population estimates "+We("MYETotal",l[0].place),content:'<div class = "row" style = "display: flex; align-items: center"><div style="font-weight: bold; font-size: 2.8em;">'+ng(l[0].place)+'</div><div style = "margin-left: 10px; line-height: 1.25em;"> people per square kilometer</div></div>',chart_compare_type:l[6],compare_content:{ni:"",lgd:l[17](l[0].place),dea:l[17](l[0].place),sdz:l[17](l[0].place),dz:l[17](l[0].place)}}});function ra(k,N){return k[0].place.type!="ni"?V1:U1}let Rn=ra(l),Qi=Rn(l);function _n(k){l[19](k)}let pn={location:{bounds:l[0].place.bounds},options:{fitBoundsOptions:{padding:20}},style:u_,$$slots:{default:[j1]},$$scope:{ctx:l}};l[3]!==void 0&&(pn.map=l[3]),dr=new J_({props:pn}),Bs.push(()=>f_(dr,"map",_n));let Ui=l[0].place.type!="ni"&&tg(l);function Tn(k,N){return k[0].place.children[0]?Z1:G1}let Si=Tn(l),L=Si(l);return Ni=new Ds({props:{id:"people",img:"nisra-taxonomy-icon-census.png",heading:"People and communities",place:l[0].place,sub_heading:l[15]("People and communities",l[0].place),description:"",chart_compare_type:l[6],boxes:{box_1:{id:"popchange",year:"Population Estimates "+We("BroadAge",l[0].place),content:l[11](l[0].place),show:["ni","lgd"]},box_1a:{id:"popchange",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Population change</span>"},box_2:{id:"broadage",year:"Population Estimates "+We("BroadAge",l[0].place),content:"GroupChart",chart_data:l[7]("BroadAge"),show:["ni","lgd","dea","sdz"]},box_2a:{id:"age",year:l[14]("age"),content:"GroupChart",chart_data:l[7]("age"),show:["dz"]},box_4:{id:"hhsize",year:l[14]("hh_size"),content:"GroupChart",chart_data:l[7]("hh_size")},box_5:{id:"religion",year:l[14]("religion_or_religion_brought_up_in"),content:"GroupChart",chart_data:l[7]("religion_or_religion_brought_up_in")},box_7:{id:"language",year:l[14]("mainlang"),content:"GroupChart",chart_data:l[7]("mainlang")}},more:`More information on the size of the population is available in the latest <a href='https://www.nisra.gov.uk/publications/2022-mid-year-population-estimates-northern-ireland'>mid-year estimates release</a>, \r
					which includes an <a href='https://www.nisra.gov.uk/system/files/statistics/MYE22-summary.pdf'>infographic</a>, \r
					<a href='https://www.nisra.gov.uk/system/files/statistics/MYE22-Factsheets.pdf'>Fact Sheets</a>, \r
					a <a href='https://www.nisra.gov.uk/system/files/statistics/Statistical%20Bulletin%20-%202022%20Mid-year%20Population%20Estimates%20for%20Northern%20Ireland.pdf'>publication</a> \r
					and statistical tables. Population characteristics are from the census data which can be explored further in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a>, \r
					bespoke tables can be created using the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a> and the NISRA website has \r
					<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'>statistical bulletins</a> providing commentary on a range of census population characteristics.`}}),lr=new Ds({props:{id:"health",img:"nisra-taxonomy-icon-health.png",heading:"Health and social care",place:l[0].place,sub_heading:l[15]("Health and social care",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_0:{id:"generalhealth",year:l[14]("general_health"),content:"GroupChart",chart_data:l[7]("general_health")},box_2a:{id:"wellbeing",year:We("wellbeing",l[0].place),content:"<p>Happiness</p><span class='text-big'>"+l[12]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy. </span><p>Life Satisfaction</p><span class='text-big'>"+l[12]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><p>Loneliness</p><span class='text-big'>"+l[12]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'>  of people who feel lonely at least some of the time. </span>",show:["ni"]},box_2b:{id:"wellbeing",year:We("wellbeing",l[0].place),content:"<p>Happiness</p><span class='text-big'>"+l[12]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy.</span><span style='color: #1460aa'> (NI "+l[0].ni.data.Happy.value+"/10) </span></p><p>Life Satisfaction</p><span class='text-big'>"+l[12]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><span style='color: #1460aa'> (NI "+l[0].ni.data.Satisfy.value+"/10) </span></p><p>Loneliness</p><span class='text-big'>"+l[12]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'> of people who feel lonely at least some of the time. </span> <span style='color: #1460aa'> (NI "+l[0].ni.data.Lonely.value+"%) </span></p>",show:["lgd"]},box_2c:{id:"wellbeing",content:"Data on happiness, life satisfaction and loneliness is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Personal wellbeing</span>"},box_3a:{id:"lifeexpectancy",year:We("LE",l[0].place),content:"<p>Male</p> <span class='text-big'>"+l[12]("LE.value.Males").toLocaleString()+"</span> years<p>Female</p> <span class='text-big'>"+l[12]("LE.value.Females").toLocaleString()+"</span> years",show:["ni"]},box_3b:{id:"lifeexpectancy",year:We("LE",l[0].place),content:"<p>Male</p> <span class='text-big'>"+l[12]("LE.value.Males").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+l[0].ni.data.LE.value.Males+") </span></p><p>Female</p> <span class='text-big'>"+l[12]("LE.value.Females").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+l[0].ni.data.LE.value.Females+") </span></p>",show:["lgd","dea"]},box_3c:{id:"lifeexpectancy",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Life expectancy at birth</span>"},box_4:{id:"carers",content:"GroupChart",year:l[14]("provision_care"),chart_data:l[7]("provision_care")},box_5:{id:"hospitalactivity",year:We("Admiss",l[0].place),content:"<p><span class='text-big'>"+l[12]("Admiss.value").toLocaleString()+"</span> hospital admissions</p><p>The most frequent primary reason was for <span class='text-bold' >"+l[12]("Admiss.text")+"</span>.</p>",show:["ni","dea"]},box_5a:{id:"hospitalactivity",content:"Data is available for "+l[16](l[0].place,"ni, dea")+" and electoral areas.",show:["lgd","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Annual admissions to hospital</span>"},box_6:{id:"primarycare",year:We("GP",l[0].place),content:"<p><span class='text-big'>"+l[12]("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+l[12]("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p><span class='text-big'>"+l[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.  </span> <span class='text-big'>"+(l[12]("DEN_REG.value.Dental_Registrations")/l[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist.</p>",show:["ni"]},box_6a:{id:"primarycare",year:We("GP",l[0].place),content:"<p><span class='text-big'>"+l[12]("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+l[12]("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p>"+l[13]("GP.value.PRACLIST").toLocaleString()+"<span style='color: #1460aa'> (NI "+l[0].ni.data.GP.value.PRACLIST.toLocaleString()+" patients per practice) </span></p><p><span class='text-big'>"+l[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(l[12]("DEN_REG.value.Dental_Registrations")/l[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist. <span style='color: #1460aa'> (NI "+(l[0].ni.data.DEN_REG.value.Dental_Registrations/l[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["lgd"]},box_6b:{id:"primarycare",year:We("DEN",l[0].place),content:"<p><span class='text-big'>"+l[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(l[12]("DEN_REG.value.Dental_Registrations")/l[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist. <span style='color: #1460aa'> (NI "+(l[0].ni.data.DEN_REG.value.Dental_Registrations/l[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["dea"]},box_6c:{id:"primarycare",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Primary care providers</span>"}},more:`<p>Significant volumes of information are prepared by the <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research'>Department of Health</a> \r
				and the <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/'>\r
				Business Services Organisation</a>, including statistics on <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health inequalities</a>, \r
				Primary care (including <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/1776-2/'>Medical</a>, \r
				<a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-dental-services-statistics/'>Dental</a>, \r
				<a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-pharmaceutical-services-and-prescribing-statistics/'>\r
				Pharmaceutical</a> and <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-ophthalmic-services-statistics/'>\r
				Ophthalmic</a>), <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/family-health-services-statistics'>\r
				Family health services</a>, <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research/hospital-waiting-times-statistics'>\r
				Hospital waiting times statistics</a>, <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research-mental-health-and-learning-disabilities/mental-health-learning-disability-and-autism-statistics'>\r
				Mental health, learning disability and autism</a>, <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research-social-services/social-care-statistics'>\r
				Social care</a>, <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/workforce-statistics'>Workforce</a>, and COVID-19.\r
				DoH also have information on 				<a href = 'https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health Inequalities</a>\r
				and <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research/doh-commissioned-surveys'> Commissioned Surveys</a> which includes the Health Survey Northern Ireland.\r
\r
				A number of <a href='https://visual.nisra.gov.uk/?body=entity/health'>interactive dashboards</a> are available and a compendium dashboard for <a href='https://visual.nisra.gov.uk/?body=entity/las'>\r
				Making Life Better</a>.\r
				\r
				The <a href='https://www.nisra.gov.uk/statistics/census/2021-census'>2021 census</a> collected data on general health, long-term conditions and carers which can \r
				be explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p><p></p>`}}),Dr=new Ds({props:{id:"work",img:"nisra-taxonomy-icon-labour-market.png",heading:"Work, pay and benefits",place:l[0].place,sub_heading:l[15]("Work, pay and benefits",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"employmentrates",year:We("LMS",l[0].place),content:"GroupChart",chart_data:l[7]("LMS"),show:["ni","lgd"]},box_1b:{id:"employmentrates",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work status of adults</span>"},box_2a:{id:"employed",year:We("LMS",l[0].place),content:"<p>People employed</p> <span class='text-big'>"+l[12]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">£'+l[12]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> ",show:["ni"]},box_2b:{id:"employed",year:We("LMS",l[0].place),content:"<p>People employed</p> <span class='text-big'>"+l[12]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">£'+l[12]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> <span style='color: #1460aa'> (NI £"+l[0].ni.data.ASHE_weekly.value.toLocaleString(void 0,{maximumFractionDigits:0})+") </span></p>",show:["lgd"]},box_2c:{id:"employed",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work and wages</span>"},box_3b:{id:"bres",year:We("BRES",l[0].place),content:"GroupChart",chart_data:l[7]("BRES"),show:["ni","lgd"]},box_3c:{id:"bres",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of work</span>"},box_4:{id:"ucbenefits",year:We("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.UC.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.UC/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_5:{id:"pipbenefits",year:We("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.PIP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.PIP/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_6:{id:"pensionagebenefits",year:We("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.RP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.RP/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}}},more:`<p>The monthly <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/labour-market-overview'>Labour Market Report</a>\r
				contains the most up to date labour market statistics. The <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/annual-survey-hours-and-earnings'>\r
				Annual Survey of Hours and Earnings</a> provides data on hourly, weekly and annual earnings. The <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/quarterly-employment-survey'>\r
				Quarterly Employment Survey</a> provides short-term employee jobs estimates for NI. Further information is available for the \r
				unemployed <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/claimant-count'>Claimant Count</a>, \r
				claimant numbers for <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/disability-benefits'>Disability Benefits</a>, \r
				and <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/work-related-benefits'>Work Related Benefits</a>. \r
				Statistics on <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/redundancies'>Redundancies</a> \r
				and <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/job-vacancies'>Job Vacancies</a> are also available. \r
				A number of <a href='https://visual.nisra.gov.uk/?body=entity/lm'>interactive dashboards</a> are available. \r
				The <a href='https://www.nisra.gov.uk/statistics/census/2021-census'>2021 census</a> collected data on occupations, industry and number of hours worked which can be \r
				explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>`}}),qr=new Ds({props:{id:"education",img:"nisra-taxonomy-icon-child-education-skills.png",heading:"Education and skills",place:l[0].place,sub_heading:l[15]("Education and skills",l[0].place),description:"",chart_compare_type:l[6],boxes:{box_1:{id:"enrollments",content:"<p style='margin:0'>Primary school <span class='text-big'>"+l[12]("Primary.value.All").toLocaleString()+"</span> <p style='margin:0'>Post primary school <span class='text-big'>"+l[12]("PostPrimary.value.All").toLocaleString()+" </span><p style='margin:0'>NI Further education colleges <span class='text-big'>"+l[12]("FE.value").toLocaleString()+"</span><p style='margin:0'>UK Higher education institutions <span class='text-big'>"+l[12]("HE.value").toLocaleString()+" </span>",year:"School:"+We("Primary",l[0].place)+", FE:"+We("FE",l[0].place)+", HE:"+We("HE",l[0].place),show:["ni","lgd","dea"]},box_1b:{id:"enrollments",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>People in education</span>"},box_2a:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(l[12]("Primary.perc.FSME")).toFixed(1)+"% </span><p style='margin:0'>Post primary school <span class='text-big'>"+Number(l[12]("PostPrimary.perc.FSME")).toFixed(1)+"% </span>",year:We("Primary",l[0].place),show:["ni"]},box_2b:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(l[12]("Primary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+l[0].ni.data.Primary.perc.FSME.toFixed(1)+"%) </span></p><p style='margin:0'>Post primary school <span class='text-big'>"+Number(l[12]("PostPrimary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+l[0].ni.data.PostPrimary.perc.FSME.toFixed(1)+"%) </span></p>",year:We("Primary",l[0].place),show:["lgd","dea"]},box_2c:{id:"fsme",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Pupils entitled to free school meals</span>"},box_3a:{id:"SEN",year:We("SEN",l[0].place),content:"<p> <span class='text-big'>"+l[12]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(l[12]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils",show:["ni"]},box_3b:{id:"SEN",year:We("SEN",l[0].place),content:"<p> <span class='text-big'>"+l[12]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(l[12]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils<span style='color: #1460aa'> (NI "+l[0].ni.data.AllSchools.perc.SEN.toFixed(1)+"%) </span></p>",show:["lgd","dea"]},box_3c:{id:"SEN",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Special educational needs (SEN)</span>"},box_4:{id:"qualifications",content:"GroupChart",year:l[14]("highest_level_of_qualifications"),chart_data:l[7]("highest_level_of_qualifications")},box_5a:{id:"attainment",year:We("Attainment",l[0].place),content:"<span class='text-big'>"+l[12]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C.</p><span class = 'text-small'>Includes GCSE English and Maths</span> <br> <span class='text-big'>",show:["ni"]},box_5b:{id:"attainment",year:We("Attainment",l[0].place),content:"<span class='text-big'>"+l[12]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C.</p><span class = 'text-small'>Includes GCSE English and Maths</span> <br> "+l[13]("Attainment.value").toLocaleString()+"<span style='color: #1460aa'>(NI "+l[0].ni.data.Attainment.value.toLocaleString(void 0,{minimumFractionDigits:1})+"%) </span>",show:["lgd"]},box_5c:{id:"attainment",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>GCSEs for school leavers</span>"},box_6:{id:"destination",year:We("Destination",l[0].place),content:"GroupChart",chart_data:l[7]("Destination"),show:["ni","lgd","dea"]},box_6b:{id:"destination",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Next steps for school leavers</span>"}},more:"<p>The <a href='https://www.nisra.gov.uk/statistics/children-education-and-skills/school-education-statistics'>Department of Education</a> publishes statistics on <a href='https://www.education-ni.gov.uk/articles/school-enrolments-overview'>school enrolments</a>, <a href='https://www.education-ni.gov.uk/articles/school-performance'>school performance</a>, <a href='https://www.education-ni.gov.uk/articles/school-leavers'>school leavers</a>, qualifications and destinations, <a href='https://www.education-ni.gov.uk/articles/pupil-attendance'>pupil attendance</a>, suspensions and expulsions, school meals and <a href='https://www.education-ni.gov.uk/articles/education-workforce'>education workforce</a>. The <a href='https://www.nisra.gov.uk/statistics/children-education-and-skills/higher-and-further-education-and-training-statistics'>Department for the Economy</a> publishes <a href='https://www.economy-ni.gov.uk/topics/statistics-and-economic-research/higher-education-statistics-and-research'>Higher</a> and <a href='https://www.economy-ni.gov.uk/topics/statistics-and-economic-research/further-education-statistics-and-research'>Further</a> education and <a href='https://www.economy-ni.gov.uk/articles/training-success-statistics'>training</a> statistics. The <a href='https://www.nisra.gov.uk/statistics/census/2021-census'>2021 census</a> collected data on qualifications which can be explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>"}}),Lr=new Ds({props:{id:"environment",img:"nisra-taxonomy-icon-summary-stats.png",heading:"Environment",place:l[0].place,sub_heading:l[15]("Environment",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"concern",year:We("Env_concern",l[0].place),content:"GroupChart",chart_data:l[7]("Env_concern"),show:["ni","lgd"]},box_1b:{id:"concern",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Concern about the environment</span>"},box_2:{id:"env_problem",year:We("Env_problem",l[0].place),content:"<p>The most important environment problems in Northern Ireland were: <span class='text-bold' 'text-big'>"+l[12]("env_problem.text")+"</span>.</p>",show:["ni"]},box_2b:{id:"env_problem",year:We("Env_problem",l[0].place),content:"<p>The most important environment problems in this area were: </p><p><span class='text-bold' >"+l[12]("env_problem.text")+"</span>.</p><p><span style='color: #1460aa'>(NI: "+l[0].ni.data.env_problem.text+")</span>.</p>",show:["lgd"]},box_2c:{id:"env_problem",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Environmental problems</span>"},box_3:{id:"ghg",year:We("Env_ghg",l[0].place),content:"<p><span class='text-big'>"+l[12]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((l[12]("Env_ghg.value.GHGALL")/l[12]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%</span> reduction since 2005.</p>",show:["ni"]},box_3a:{id:"ghg",year:We("Env_ghg",l[0].place),content:"<p><span class='text-big'>"+l[12]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((l[12]("Env_ghg.value.GHGALL")/l[12]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%</span> reduction since 2005.</p><span style='color: #1460aa'>(NI "+((l[0].ni.data.Env_ghg.value.GHGALL/l[0].ni.data.Env_ghg.value.GHGALL_BASE-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%) </span>",show:["lgd"]},box_3c:{id:"ghg",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Greenhouse gas</span>"},box_4:{id:"active",year:We("Env_active",l[0].place),content:"<span class='text-big'>"+l[12]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0})+"%</span><p>  journeys made by walking, cycling and public transport.</p>",show:["ni"]},box_4a:{id:"active",year:We("Env_active",l[0].place),content:"<span class='text-big'>"+l[12]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0})+"%</span><p>journeys made by walking, cycling and public transport.<span style='color: #1460aa'> (NI "+l[0].ni.data.Env_active.value.JWCPT+"%) </span></p>",show:["lgd"]},box_4b:{id:"active",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Active travel</span>"},box_5:{id:"waste",year:We("Env_waste",l[0].place),content:"GroupChart",chart_data:l[7]("Env_waste"),show:["ni","lgd"]},box_5a:{id:"waste",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Household waste</span>"},box_6:{id:"renewable",year:l[14]("renewable_energy"),content:"GroupChart",chart_data:l[7]("renewable_energy")}},more:`<p>The <a href='https://www.daera-ni.gov.uk/landing-pages/statistics'>Department of Agriculture, Environment and Rural Affairs (DAERA)</a>\r
				publishes statistics on the Environment from a range of sources, including \r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-greenhouse-gas-inventory'>greenhouse gas inventory</a>,\r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-local-authority-collected-municipal-waste-management-statistics'>\r
				local authority collected municipal waste management statistics</a>, \r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-environmental-statistics-report'>environmental statistics report</a>, \r
				<a href='https://www.daera-ni.gov.uk/topics/water/bathing-water-quality'>bathing water quality</a> and <a href = 'https://www.daera-ni.gov.uk/articles/air-pollution-northern-ireland'>air pollution</a>.  \r
\r
\r
	\r
\r
				The <a href='https://www.nisra.gov.uk/statistics/census/2021-census'>2021 census</a> \r
				collected data on renewable energy systems which can be\r
				explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a> \r
				and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>\r
				\r
				\r
			\r
				`}}),Rr=new Ds({props:{id:"crime",img:"nisra-taxonomy-icon-crime-justice.png",heading:"Crime and justice",place:l[0].place,sub_heading:l[15]("Crime and justice",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"crime",year:We("crime",l[0].place),content:"<p><span class='text-big'>"+l[12]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(l[12]("crime.value.allcrime")/l[12]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+" </span> crimes recorded per 1,000 population.</p>",show:["ni"]},box_1a:{id:"crime",year:We("crime",l[0].place),content:"<p><span class='text-big'>"+l[12]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(l[12]("crime.value.allcrime")/l[12]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+" </span> crimes recorded per 1,000 population.<span style='color: #1460aa'> (NI "+(l[0].ni.data.crime.value.allcrime/l[0].ni.data.MYETotal.value*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+")</span></p>",show:["lgd","dea"]},box_1b:{id:"crime",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Police recorded crimes</span>"},box_2:{id:"crimetype",year:We("crime",l[0].place),content:"GroupChart",chart_data:l[7]("crime"),show:["ni","lgd","dea"]},box_2a:{id:"crimetype",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Types of crime</span>"},box_3:{id:"burglary",year:We("crime",l[0].place),content:"<p><span class='text-big'>"+l[12]("crime.value.burglary").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>recorded burglaries</p>",show:["ni"]},box_3a:{id:"burglary",year:We("crime",l[0].place),content:"<p><span class='text-big'>"+l[12]("crime.value.burglary").toLocaleString(void 0,{maximumFractionDigits:0})+" </span> recorded burglaries</p><span style='color: #1460aa'> (NI "+l[0].ni.data.crime.value.burglary.toLocaleString()+")</span></p>",show:["lgd","dea"]},box_3b:{id:"burglary",content:"Data is available for "+l[16](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Police recorded burglaries</span>"},box_4:{id:"crimeworry",year:We("crimeworry",l[0].place),content:"<p> <span class='text-big' >"+l[12]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> of people are highly worried about crime.</p>",show:["ni"]},box_4a:{id:"crimeworry",year:We("crimeworry",l[0].place),content:"<p> <span class='text-big' >"+l[12]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> of people are highly worried about crime.<span style='color: #1460aa'> (NI "+l[0].ni.data.crimeworry.value.WorryC2.toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_4b:{id:"crimeworry",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Worry about crime</span>"},box_5:{id:"crimeperception",year:We("crimeperception",l[0].place),content:"<p> <span class='text-big' >"+l[12]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.</p>",show:["ni"]},box_5a:{id:"crimeperception",year:We("crimeperception",l[0].place),content:"<p> <span class='text-big' >"+l[12]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.<span style='color: #1460aa'> (NI "+l[0].ni.data.crimeperception.value.ASB8.toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_5b:{id:"crimeperception",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Views on anti-social behaviour</span>"}},more:`<p>Police Service of Northern Ireland (PSNI) crime statistics are published by \r
		NISRA statisticians within the\r
		<a href='https://www.psni.police.uk/inside-psni/Statistics/'>Police Service of Northern Ireland</a>.\r
		 Statistical information is available on \r
		 <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/police-recorded-crime-statistics'>Police Recorded Crime Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/anti-social-behaviour-statistics'>Anti-Social Behaviour Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/domestic-abuse-statistics'>Domestic Abuse Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/hate-motivation-statistics'>Hate Motivation Statistics</a>, <a href='https://www.psni.police.uk/official-statistics/drug-seizure-statistics'>Drug Seizure Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/road-traffic-collision-statistics'>Road Traffic Collision Statistics</a>, <a href='https://www.psni.police.uk/official-statistics/security-situation-statistics'>Security Situation Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/stop-and-search-statistics'>Stop and Search Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/statistics-police-use-force'>Statistics on Police Use of Force</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/motoring-offence-statistics'>Motoring Offence Statistics</a> and <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/police-and-criminal-evidence-pace-order'>Police and Criminal Evidence (PACE) Order Statistics</a>.  Statistics on the <a href='https://www.nisra.gov.uk/statistics/ni-road-safety-partnership/ni-road-safety-partnership-statistics'>Road Safety Partnership (RSP)</a> detections for speeding or red light running are also published by NISRA PSNI statisticians.</p>\r
\r
		 <p>Statistics on the police complaints system are published by\r
<a href='https://www.policeombudsman.org/Statistics-and-Research'>\r
Police Ombudsmans Office for Northern Ireland</a>.</p>\r
<p><a href='https://www.justice-ni.gov.uk/topics/doj-statistics-and-research'>Department of Justice statistics</a> include reoffending, victims and witnesses, prosecutions and convictions.; Statistics are also available from the <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/ni-prison-service-statistics'>Northern Ireland Prison Service</a>, <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/ni-courts-and-tribunals-service-statistics'>Northern Ireland Courts and Tribunals Service</a>, <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/youth-justice-statistics'>Youth Justice Agency statistics and </a>, <a href='https://www.justice-ni.gov.uk/topics/legal-aid/legal-services-agency-northern-ireland'>Legal Services Agency</a> and <a href='https://www.ppsni.gov.uk/statistics-and-research'>Public Prosecutions Service for Northern Ireland (PPSNI)</a>.</p>\r
<p><a href='https://www.pbni.org.uk/statistics-and-research'>Probation Board for Northern Ireland (PBNI)</a> publish statistical information on their Caseload, Stakeholder Survey Reports, and other statistical reports.</p>\r
\r
`}}),xr=new Ds({props:{id:"business",img:"nisra-taxonomy-icon-business-energy.png",heading:"Business, economy and trade",place:l[0].place,sub_heading:l[15]("Business, economy and trade",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"no_bus",year:We("business",l[0].place),content:"<span class='text-big'>"+l[12]("business.value.BCOUNTS").toLocaleString()+" </span> businesses, with a total of <span class='text-big'>£"+l[12]("niets_sales.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>million in sales and <span class='text-big'>£"+l[12]("niets_purch.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>million in purchases.",show:["ni","lgd"]},box_1a:{id:"no_bus",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Business and trade</span>"},box_2:{id:"niets_sales",year:We("niets_sales",l[0].place),content:"GroupChart",chart_data:l[7]("niets_sales"),show:["ni","lgd"]},box_2a:{id:"niets_sales",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Places businesses sell to (sales partners)</span>"},box_3:{id:"niets_purch",year:We("niets_purch",l[0].place),content:"GroupChart",chart_data:l[7]("niets_purch"),show:["ni","lgd"]},box_3a:{id:"niets_purch",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Places businesses buy from (purchases partners)</span>"},box_4:{id:"type_bus",year:We("business",l[0].place),content:"GroupChart",chart_data:l[7]("businesstype"),show:["ni","lgd"]},box_4a:{id:"type_bus",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of businesses</span>"},box_5:{id:"size_bus",year:We("businessband",l[0].place),content:"GroupChart",chart_data:l[7]("businessband"),show:["ni","lgd"]},box_5a:{id:"size_bus",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Employees in businesses</span>"},box_6:{id:"sector",year:"Agriculture "+We("farms",l[0].place)+", Tourism "+We("tourism",l[0].place),content:"<p><strong>Agriculture</strong></p><span class='text-big'>"+l[12]("farms.value.F").toLocaleString()+" </span> farms with <span class='text-big'>"+l[12]("farms.value.FA").toLocaleString()+" </span> farmers.<p><strong>Tourism</strong></p><span class='text-big'>"+l[12]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs and <span class='text-big'>"+l[12]("tourism_estab.value.estab").toLocaleString()+" </span> accommodation establishments.",show:["ni"]},box_6a:{id:"sector",year:"Agriculture "+We("farms",l[0].place)+", Tourism "+We("tourism",l[0].place),content:"<strong>Agriculture</strong><p><span class='text-big'>"+l[12]("farms.value.F").toLocaleString()+" </span> farms <span style='color: #1460aa'>("+(l[12]("farms.value.F")/l[0].ni.data.farms.value.F*100).toLocaleString(void 0,{maximumFractionDigits:0})+"% of NI)</span>.</p><span class='text-big'>"+l[12]("farms.value.FA").toLocaleString()+" </span> farmers <span style='color: #1460aa'>("+(l[12]("farms.value.FA")/l[0].ni.data.farms.value.FA*100).toLocaleString(void 0,{maximumFractionDigits:0})+"% of NI)</span>.<p><strong>Tourism</strong></p><span class='text-big'>"+l[12]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs <span style='color: #1460aa'>("+(l[12]("tourism.value.TourismJobs")/l[0].ni.data.tourism.value.TourismJobs*100).toLocaleString(void 0,{maximumFractionDigits:0})+"% of NI)</span>.<p><span class='text-big'>"+l[12]("tourism_estab.value.estab").toLocaleString()+" </span> accommodation establishments <span style='color: #1460aa'>("+(l[12]("tourism_estab.value.estab")/l[0].ni.data.tourism_estab.value.estab*100).toLocaleString(void 0,{maximumFractionDigits:0})+"% of NI)</span>.</p>",show:["lgd"]},box_6b:{id:"sector",content:"Data is available for "+l[16](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Selected business sectors</span>"}},more:`<strong>Business statistics</strong>\r
		<p>Further statistics are available on number, type and size of businesses, collected through the\r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/annual-business-inquiry'>Annual Business Inquiry</a>,\r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/research-and-development'>Research and Development</a>\r
		Survey and the <a href='https://www.nisra.gov.uk/statistics/business-statistics/inter-departmental-business-register'>Inter Departmental Business Register</a>.</p>\r
		<p>Statistics for specific business sectors include: the <a href='https://www.daera-ni.gov.uk/publications/size-and-performance-ni-food-and-drinks-processing-sector'>\r
		Food and Drinks Processing Sector</a> \r
		and the \r
		<a href='https://www.daera-ni.gov.uk/articles/agricultural-statistics'>Agriculture sector</a> \r
		both produced by DAERA; \r
		<a href='https://www.infrastructure-ni.gov.uk/articles/northern-ireland-transport-statistics'>Northern Ireland travel and transport statistics</a> produced by the Department for Infrastructure, and \r
		<a href='https://www.nisra.gov.uk/statistics/tourism/annual-and-quarterly-tourism-statistics-publications'>Tourism sector</a>\r
		published by \r
		<a href='https://www.nisra.gov.uk/statistics/economy/nisra-economic-and-labour-market-statistics-elms'>Economic and Labour Market Statistics (ELMS)</a>. Interactive dashboards are available for \r
		<a href='https://datavis.nisra.gov.uk/tourism/alternative_sources.html'>Tourism statistics</a> and \r
		<a href='https://datavis.nisra.gov.uk/daera/food-drink-processing-sector.html'>Food and Drink Processing Sector Statistics</a>.</p>\r
		<p><strong>Economy and trade statistics</strong></p>\r
		<p>Other economy and trade statistics are published by \r
		<a href='https://www.nisra.gov.uk/statistics/economy/nisra-economic-and-labour-market-statistics-elms'>Economic and Labour Market Statistics (ELMS)</a> NISRA, including \r
		<a href='https://www.nisra.gov.uk/statistics/economy/economic-output-statistics'>Economic Output Statistics</a> (which includes the Index of Services, Index of Production and;Construction Output Statistics), \r
		<a href='https://www.nisra.gov.uk/statistics/economy/economic-accounts-project'>Economic Accounts</a> (including Supply-Use Tables and Input-Output tables), \r
		<a href='https://www.nisra.gov.uk/statistics/economy/eu-exit-analysis'>research and analysis on EU Exit</a>, and \r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/broad-economy-sales-and-exports-statistics'>Economic Trade Statistics</a> (NIETS) (formerly known as Broad Economy Sales and Exports Statistics). Interactive dashboards are available for the \r
		<a href='https://datavis.nisra.gov.uk/economy-and-labour-market/economic-output-quarterly.html'>quarterly economic outputs</a> and NI \r
		<a href='https://visual.nisra.gov.uk/?body=entity/niets'>Economic Trade</a> statistics.</p>`}}),{c(){p=Oe("div"),d=Oe("div"),h=Oe("p"),_=Oe("span"),v=Oe("a"),a=Et("Home"),z=new Rl(!1),B=vt(),Gi&&Gi.c(),M=vt(),U=Oe("br"),R=Oe("span"),X=Et(W),ae=vt(),se=Oe("div"),pe=Oe("div"),ge=Oe("p"),rt=Et("Search for your area:"),Ue=vt(),ui(Ae.$$.fragment),Ke=vt(),xt=Oe("script"),Pt=Et(`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input"),\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]',\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),Ge=vt(),He=Oe("div"),ht=Oe("button"),Pe=Et("About"),je=vt(),lt=Oe("button"),De=Et("Print / PDF"),wt=vt(),ot=Oe("button"),Dt=Et("Share"),Lt=vt(),ui(yi.$$.fragment),qe=vt(),Xt=Oe("div"),ui(zi.$$.fragment),$r=vt(),ui(nr.$$.fragment),Mn=vt(),ui(Oi.$$.fragment),yn=vt(),Gt=Oe("div"),fr=Oe("div"),cn=Oe("h3"),Qi.c(),en=vt(),Nt=Oe("div"),ui(dr.$$.fragment),or=vt(),tn=Oe("div"),Ui&&Ui.c(),Cr=vt(),Mr=Oe("div"),L.c(),Vr=vt(),Ti=Oe("div"),ui(Ni.$$.fragment),sr=vt(),ui(lr.$$.fragment),gr=vt(),ui(Dr.$$.fragment),Yn=vt(),ui(qr.$$.fragment),Dn=vt(),ui(Lr.$$.fragment),Jn=vt(),ui(Rr.$$.fragment),Ln=vt(),ui(xr.$$.fragment),this.h()},l(k){p=Ne(k,"DIV",{class:!0});var N=Be(p);d=Ne(N,"DIV",{class:!0});var K=Be(d);h=Ne(K,"P",{class:!0});var Q=Be(h);_=Ne(Q,"SPAN",{class:!0});var le=Be(_);v=Ne(le,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var fe=Be(v);a=kt(fe,"Home"),fe.forEach(ne),z=Bl(le,!1),B=bt(le),Gi&&Gi.l(le),le.forEach(ne),Q.forEach(ne),M=bt(K),U=Ne(K,"BR",{class:!0}),R=Ne(K,"SPAN",{class:!0,style:!0});var q=Be(R);X=kt(q,W),q.forEach(ne),K.forEach(ne),ae=bt(N),se=Ne(N,"DIV",{class:!0});var ee=Be(se);pe=Ne(ee,"DIV",{style:!0,class:!0});var me=Be(pe);ge=Ne(me,"P",{class:!0});var Ce=Be(ge);rt=kt(Ce,"Search for your area:"),Ce.forEach(ne),Ue=bt(me),ci(Ae.$$.fragment,me),Ke=bt(me),xt=Ne(me,"SCRIPT",{class:!0});var Fe=Be(xt);Pt=kt(Fe,`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input"),\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]',\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),Fe.forEach(ne),Ge=bt(me),He=Ne(me,"DIV",{width:!0,class:!0});var we=Be(He);ht=Ne(we,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var Le=Be(ht);Pe=kt(Le,"About"),Le.forEach(ne),je=bt(we),lt=Ne(we,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var st=Be(lt);De=kt(st,"Print / PDF"),st.forEach(ne),wt=bt(we),ot=Ne(we,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var it=Be(ot);Dt=kt(it,"Share"),it.forEach(ne),we.forEach(ne),me.forEach(ne),ee.forEach(ne),N.forEach(ne),Lt=bt(k),ci(yi.$$.fragment,k),qe=bt(k),Xt=Ne(k,"DIV",{id:!0,class:!0});var ke=Be(Xt);ci(zi.$$.fragment,ke),$r=bt(ke),ci(nr.$$.fragment,ke),Mn=bt(ke),ci(Oi.$$.fragment,ke),ke.forEach(ne),yn=bt(k),Gt=Ne(k,"DIV",{class:!0});var $e=Be(Gt);fr=Ne($e,"DIV",{style:!0,class:!0});var Ye=Be(fr);cn=Ne(Ye,"H3",{class:!0});var et=Be(cn);Qi.l(et),et.forEach(ne),Ye.forEach(ne),en=bt($e),Nt=Ne($e,"DIV",{id:!0,style:!0,class:!0});var qt=Be(Nt);ci(dr.$$.fragment,qt),qt.forEach(ne),or=bt($e),tn=Ne($e,"DIV",{class:!0});var nt=Be(tn);Ui&&Ui.l(nt),nt.forEach(ne),Cr=bt($e),Mr=Ne($e,"DIV",{class:!0});var Yt=Be(Mr);L.l(Yt),Yt.forEach(ne),$e.forEach(ne),Vr=bt(k),Ti=Ne(k,"DIV",{class:!0,id:!0});var jt=Be(Ti);ci(Ni.$$.fragment,jt),sr=bt(jt),ci(lr.$$.fragment,jt),gr=bt(jt),ci(Dr.$$.fragment,jt),Yn=bt(jt),ci(qr.$$.fragment,jt),Dn=bt(jt),ci(Lr.$$.fragment,jt),Jn=bt(jt),ci(Rr.$$.fragment,jt),Ln=bt(jt),ci(xr.$$.fragment,jt),jt.forEach(ne),this.h()},h(){Y(v,"href",ri+"/"),Y(v,"data-sveltekit-noscroll",""),Y(v,"data-sveltekit-keepfocus",""),Y(v,"class","svelte-lx8mb2"),z.a=B,Y(_,"class","svelte-lx8mb2"),Y(h,"class","svelte-lx8mb2"),Y(U,"class","svelte-lx8mb2"),Y(R,"class","text-big title svelte-lx8mb2"),Qe(R,"font-size","2.5em"),Qe(R,"line-height","1em"),Y(d,"class","svelte-lx8mb2"),Y(ge,"class","svelte-lx8mb2"),Y(xt,"class","svelte-lx8mb2"),Y(ht,"class","btn svelte-lx8mb2"),Qe(ht,"width","33%"),Y(ht,"alt","Opens the About page"),Y(ht,"onclick","window.location.href='"+ri+"/about';"),Y(lt,"class","btn svelte-lx8mb2"),Qe(lt,"width","33%"),Y(lt,"title","Click to print this page to pdf or printer"),Y(lt,"onclick","window.print();return false;"),Y(ot,"class","btn svelte-lx8mb2"),Qe(ot,"width","30%"),Y(ot,"type","share"),Y(ot,"alt","Share this page"),Y(He,"width","100%"),Y(He,"class","svelte-lx8mb2"),Qe(pe,"width","350px"),Qe(pe,"padding-top","5px"),Y(pe,"class","svelte-lx8mb2"),is(pe,"float-right",l[2]>1),Y(se,"class","svelte-lx8mb2"),Y(p,"class","grid mtl svelte-lx8mb2"),Y(Xt,"id","grid"),Y(Xt,"class","grid mt svelte-lx8mb2"),Y(cn,"class","svelte-lx8mb2"),Qe(fr,"grid-column","span "+l[2]),Y(fr,"class","svelte-lx8mb2"),Y(Nt,"id","map"),Qe(Nt,"padding-right","45px"),Qe(Nt,"grid-column","span "+(l[2]==2?2:l[2]&&l[2]>2?l[2]-1:1)),Y(Nt,"class","svelte-lx8mb2"),Y(tn,"class","svelte-lx8mb2"),Y(Mr,"class","svelte-lx8mb2"),Y(Gt,"class","grid mt svelte-lx8mb2"),ju(()=>l[20].call(Gt)),Y(Ti,"class","accordion svelte-lx8mb2"),Y(Ti,"id","accordionPanelsStayOpenExample")},m(k,N){Re(k,p,N),xe(p,d),xe(d,h),xe(h,_),xe(_,v),xe(v,a),z.m(T,_),xe(_,B),Gi&&Gi.m(_,null),xe(d,M),xe(d,U),xe(d,R),xe(R,X),xe(p,ae),xe(p,se),xe(se,pe),xe(pe,ge),xe(ge,rt),xe(pe,Ue),pi(Ae,pe,null),xe(pe,Ke),xe(pe,xt),xe(xt,Pt),xe(pe,Ge),xe(pe,He),xe(He,ht),xe(ht,Pe),xe(He,je),xe(He,lt),xe(lt,De),xe(He,wt),xe(He,ot),xe(ot,Dt),Re(k,Lt,N),pi(yi,k,N),Re(k,qe,N),Re(k,Xt,N),pi(zi,Xt,null),xe(Xt,$r),pi(nr,Xt,null),xe(Xt,Mn),pi(Oi,Xt,null),Re(k,yn,N),Re(k,Gt,N),xe(Gt,fr),xe(fr,cn),Qi.m(cn,null),xe(Gt,en),xe(Gt,Nt),pi(dr,Nt,null),xe(Gt,or),xe(Gt,tn),Ui&&Ui.m(tn,null),xe(Gt,Cr),xe(Gt,Mr),L.m(Mr,null),mr=Gu(Gt,l[20].bind(Gt)),Re(k,Vr,N),Re(k,Ti,N),pi(Ni,Ti,null),xe(Ti,sr),pi(lr,Ti,null),xe(Ti,gr),pi(Dr,Ti,null),xe(Ti,Yn),pi(qr,Ti,null),xe(Ti,Dn),pi(Lr,Ti,null),xe(Ti,Jn),pi(Rr,Ti,null),xe(Ti,Ln),pi(xr,Ti,null),jr=!0},p(k,N){k[0].place.type!="ni"?Gi?Gi.p(k,N):(Gi=Qm(k),Gi.c(),Gi.m(_,null)):Gi&&(Gi.d(1),Gi=null),(!jr||N[0]&1)&&W!==(W=k[0].place.name+"")&&vi(X,W);const K={};N[0]&1&&(K.search_data=k[0].search_data),Ae.$set(K),(!jr||N[0]&4)&&is(pe,"float-right",k[2]>1);const Q={};N[0]&1&&(Q.place=k[0].place),yi.$set(Q);const le={};N[0]&1&&(le.heading="About "+k[0].place.name),N[0]&1&&(le.place=k[0].place),N[0]&1&&(le.content={ni:"Northern Ireland has 11 Councils or Local Government Districts (LGDs),  which can be subdivided into electoral areas (District Electoral Areas DEAs), then further into Super Data Zones and Data Zones. Statistics can be viewed for these smaller areas.",lgd:k[0].place.name+" is one of "+k[0].place.count.toLocaleString()+" "+zn[k[0].place.type].pl+".  It includes the larger settlements of "+k[0].place.lgd_location_description+".",dea:k[0].place.name+" is one of "+k[0].place.count.toLocaleString()+" "+zn[k[0].place.type].pl+" in Northern Ireland.  It is within <a href = '"+ri+"/"+k[0].place.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+k[0].place.parents[0].name+" </a> and covers "+k[0].place.dea_location_description+".",sdz:k[0].place.name+" is one of "+k[0].place.count.toLocaleString()+" "+zn[k[0].place.type].pl+". Super Data Zones are new statistical areas developed for census. They are broadly similar in population size and housing type.",dz:k[0].place.name+" is one of "+k[0].place.count.toLocaleString()+" "+zn[k[0].place.type].pl+".  Data Zones are smaller divisions of Super Data Zones. There are on average 4 in each Super Data Zone."}),N[0]&64&&(le.chart_compare_type=k[6]),zi.$set(le);const fe={};N[0]&1&&(fe.place=k[0].place),N[0]&1&&(fe.year="Population estimates "+We("MYETotal",k[0].place)),N[0]&1&&(fe.content='<span class="text-big" style="font-size: 2.8em;">'+k[0].place.data.MYETotal.value.toLocaleString()+"</span>"),N[0]&64&&(fe.chart_compare_type=k[6]),N[0]&1&&(fe.compare_content={ni:"",lgd:'<span class = "em" style = "background-color: lightgrey">'+mp(k[0].place.data.population.value[2021].all/k[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population<br>The "+k[10](k[0].place.data.population.value_rank[2021].all)+" population of 11 Councils",dea:'<span class = "em" style = "background-color: lightgrey">'+mp(k[0].place.data.population.value[2021].all/k[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population",sdz:"Data not available for area comparison",dz:" Data not available for area comparison"}),nr.$set(fe);const q={};N[0]&1&&(q.place=k[0].place),N[0]&1&&(q.year="Population estimates "+We("MYETotal",k[0].place)),N[0]&1&&(q.content='<div class = "row" style = "display: flex; align-items: center"><div style="font-weight: bold; font-size: 2.8em;">'+ng(k[0].place)+'</div><div style = "margin-left: 10px; line-height: 1.25em;"> people per square kilometer</div></div>'),N[0]&64&&(q.chart_compare_type=k[6]),N[0]&1&&(q.compare_content={ni:"",lgd:k[17](k[0].place),dea:k[17](k[0].place),sdz:k[17](k[0].place),dz:k[17](k[0].place)}),Oi.$set(q),Rn===(Rn=ra(k))&&Qi?Qi.p(k,N):(Qi.d(1),Qi=Rn(k),Qi&&(Qi.c(),Qi.m(cn,null))),(!jr||N[0]&4)&&Qe(fr,"grid-column","span "+k[2]);const ee={};N[0]&1&&(ee.location={bounds:k[0].place.bounds}),N[0]&48|N[1]&512&&(ee.$$scope={dirty:N,ctx:k}),!ar&&N[0]&8&&(ar=!0,ee.map=k[3],d_(()=>ar=!1)),dr.$set(ee),(!jr||N[0]&4)&&Qe(Nt,"grid-column","span "+(k[2]==2?2:k[2]&&k[2]>2?k[2]-1:1)),k[0].place.type!="ni"?Ui?Ui.p(k,N):(Ui=tg(k),Ui.c(),Ui.m(tn,null)):Ui&&(Ui.d(1),Ui=null),Si===(Si=Tn(k))&&L?L.p(k,N):(L.d(1),L=Si(k),L&&(L.c(),L.m(Mr,null)));const me={};N[0]&1&&(me.place=k[0].place),N[0]&1&&(me.sub_heading=k[15]("People and communities",k[0].place)),N[0]&64&&(me.chart_compare_type=k[6]),N[0]&1&&(me.boxes={box_1:{id:"popchange",year:"Population Estimates "+We("BroadAge",k[0].place),content:k[11](k[0].place),show:["ni","lgd"]},box_1a:{id:"popchange",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Population change</span>"},box_2:{id:"broadage",year:"Population Estimates "+We("BroadAge",k[0].place),content:"GroupChart",chart_data:k[7]("BroadAge"),show:["ni","lgd","dea","sdz"]},box_2a:{id:"age",year:k[14]("age"),content:"GroupChart",chart_data:k[7]("age"),show:["dz"]},box_4:{id:"hhsize",year:k[14]("hh_size"),content:"GroupChart",chart_data:k[7]("hh_size")},box_5:{id:"religion",year:k[14]("religion_or_religion_brought_up_in"),content:"GroupChart",chart_data:k[7]("religion_or_religion_brought_up_in")},box_7:{id:"language",year:k[14]("mainlang"),content:"GroupChart",chart_data:k[7]("mainlang")}}),Ni.$set(me);const Ce={};N[0]&1&&(Ce.place=k[0].place),N[0]&1&&(Ce.sub_heading=k[15]("Health and social care",k[0].place)),N[0]&64&&(Ce.chart_compare_type=k[6]),N[0]&1&&(Ce.boxes={box_0:{id:"generalhealth",year:k[14]("general_health"),content:"GroupChart",chart_data:k[7]("general_health")},box_2a:{id:"wellbeing",year:We("wellbeing",k[0].place),content:"<p>Happiness</p><span class='text-big'>"+k[12]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy. </span><p>Life Satisfaction</p><span class='text-big'>"+k[12]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><p>Loneliness</p><span class='text-big'>"+k[12]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'>  of people who feel lonely at least some of the time. </span>",show:["ni"]},box_2b:{id:"wellbeing",year:We("wellbeing",k[0].place),content:"<p>Happiness</p><span class='text-big'>"+k[12]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy.</span><span style='color: #1460aa'> (NI "+k[0].ni.data.Happy.value+"/10) </span></p><p>Life Satisfaction</p><span class='text-big'>"+k[12]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><span style='color: #1460aa'> (NI "+k[0].ni.data.Satisfy.value+"/10) </span></p><p>Loneliness</p><span class='text-big'>"+k[12]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'> of people who feel lonely at least some of the time. </span> <span style='color: #1460aa'> (NI "+k[0].ni.data.Lonely.value+"%) </span></p>",show:["lgd"]},box_2c:{id:"wellbeing",content:"Data on happiness, life satisfaction and loneliness is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Personal wellbeing</span>"},box_3a:{id:"lifeexpectancy",year:We("LE",k[0].place),content:"<p>Male</p> <span class='text-big'>"+k[12]("LE.value.Males").toLocaleString()+"</span> years<p>Female</p> <span class='text-big'>"+k[12]("LE.value.Females").toLocaleString()+"</span> years",show:["ni"]},box_3b:{id:"lifeexpectancy",year:We("LE",k[0].place),content:"<p>Male</p> <span class='text-big'>"+k[12]("LE.value.Males").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+k[0].ni.data.LE.value.Males+") </span></p><p>Female</p> <span class='text-big'>"+k[12]("LE.value.Females").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+k[0].ni.data.LE.value.Females+") </span></p>",show:["lgd","dea"]},box_3c:{id:"lifeexpectancy",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Life expectancy at birth</span>"},box_4:{id:"carers",content:"GroupChart",year:k[14]("provision_care"),chart_data:k[7]("provision_care")},box_5:{id:"hospitalactivity",year:We("Admiss",k[0].place),content:"<p><span class='text-big'>"+k[12]("Admiss.value").toLocaleString()+"</span> hospital admissions</p><p>The most frequent primary reason was for <span class='text-bold' >"+k[12]("Admiss.text")+"</span>.</p>",show:["ni","dea"]},box_5a:{id:"hospitalactivity",content:"Data is available for "+k[16](k[0].place,"ni, dea")+" and electoral areas.",show:["lgd","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Annual admissions to hospital</span>"},box_6:{id:"primarycare",year:We("GP",k[0].place),content:"<p><span class='text-big'>"+k[12]("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+k[12]("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p><span class='text-big'>"+k[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.  </span> <span class='text-big'>"+(k[12]("DEN_REG.value.Dental_Registrations")/k[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist.</p>",show:["ni"]},box_6a:{id:"primarycare",year:We("GP",k[0].place),content:"<p><span class='text-big'>"+k[12]("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+k[12]("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p>"+k[13]("GP.value.PRACLIST").toLocaleString()+"<span style='color: #1460aa'> (NI "+k[0].ni.data.GP.value.PRACLIST.toLocaleString()+" patients per practice) </span></p><p><span class='text-big'>"+k[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(k[12]("DEN_REG.value.Dental_Registrations")/k[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist. <span style='color: #1460aa'> (NI "+(k[0].ni.data.DEN_REG.value.Dental_Registrations/k[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["lgd"]},box_6b:{id:"primarycare",year:We("DEN",k[0].place),content:"<p><span class='text-big'>"+k[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(k[12]("DEN_REG.value.Dental_Registrations")/k[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist. <span style='color: #1460aa'> (NI "+(k[0].ni.data.DEN_REG.value.Dental_Registrations/k[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["dea"]},box_6c:{id:"primarycare",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Primary care providers</span>"}}),lr.$set(Ce);const Fe={};N[0]&1&&(Fe.place=k[0].place),N[0]&1&&(Fe.sub_heading=k[15]("Work, pay and benefits",k[0].place)),N[0]&64&&(Fe.chart_compare_type=k[6]),N[0]&1&&(Fe.boxes={box_1:{id:"employmentrates",year:We("LMS",k[0].place),content:"GroupChart",chart_data:k[7]("LMS"),show:["ni","lgd"]},box_1b:{id:"employmentrates",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work status of adults</span>"},box_2a:{id:"employed",year:We("LMS",k[0].place),content:"<p>People employed</p> <span class='text-big'>"+k[12]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">£'+k[12]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> ",show:["ni"]},box_2b:{id:"employed",year:We("LMS",k[0].place),content:"<p>People employed</p> <span class='text-big'>"+k[12]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">£'+k[12]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> <span style='color: #1460aa'> (NI £"+k[0].ni.data.ASHE_weekly.value.toLocaleString(void 0,{maximumFractionDigits:0})+") </span></p>",show:["lgd"]},box_2c:{id:"employed",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work and wages</span>"},box_3b:{id:"bres",year:We("BRES",k[0].place),content:"GroupChart",chart_data:k[7]("BRES"),show:["ni","lgd"]},box_3c:{id:"bres",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of work</span>"},box_4:{id:"ucbenefits",year:We("BS",k[0].place),content:'<span class="text-big">'+k[0].place.data.BS.value.UC.toLocaleString()+'</span> claimants<br><span class="text-big">'+(k[0].place.data.BS.value.UC/k[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.UC/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.UC/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.UC/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.UC/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_5:{id:"pipbenefits",year:We("BS",k[0].place),content:'<span class="text-big">'+k[0].place.data.BS.value.PIP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(k[0].place.data.BS.value.PIP/k[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.PIP/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.PIP/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.PIP/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.PIP/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_6:{id:"pensionagebenefits",year:We("BS",k[0].place),content:'<span class="text-big">'+k[0].place.data.BS.value.RP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(k[0].place.data.BS.value.RP/k[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.RP/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.RP/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.RP/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(k[0].ni.data.BS.value.RP/k[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}}}),Dr.$set(Fe);const we={};N[0]&1&&(we.place=k[0].place),N[0]&1&&(we.sub_heading=k[15]("Education and skills",k[0].place)),N[0]&64&&(we.chart_compare_type=k[6]),N[0]&1&&(we.boxes={box_1:{id:"enrollments",content:"<p style='margin:0'>Primary school <span class='text-big'>"+k[12]("Primary.value.All").toLocaleString()+"</span> <p style='margin:0'>Post primary school <span class='text-big'>"+k[12]("PostPrimary.value.All").toLocaleString()+" </span><p style='margin:0'>NI Further education colleges <span class='text-big'>"+k[12]("FE.value").toLocaleString()+"</span><p style='margin:0'>UK Higher education institutions <span class='text-big'>"+k[12]("HE.value").toLocaleString()+" </span>",year:"School:"+We("Primary",k[0].place)+", FE:"+We("FE",k[0].place)+", HE:"+We("HE",k[0].place),show:["ni","lgd","dea"]},box_1b:{id:"enrollments",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>People in education</span>"},box_2a:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(k[12]("Primary.perc.FSME")).toFixed(1)+"% </span><p style='margin:0'>Post primary school <span class='text-big'>"+Number(k[12]("PostPrimary.perc.FSME")).toFixed(1)+"% </span>",year:We("Primary",k[0].place),show:["ni"]},box_2b:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(k[12]("Primary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+k[0].ni.data.Primary.perc.FSME.toFixed(1)+"%) </span></p><p style='margin:0'>Post primary school <span class='text-big'>"+Number(k[12]("PostPrimary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+k[0].ni.data.PostPrimary.perc.FSME.toFixed(1)+"%) </span></p>",year:We("Primary",k[0].place),show:["lgd","dea"]},box_2c:{id:"fsme",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Pupils entitled to free school meals</span>"},box_3a:{id:"SEN",year:We("SEN",k[0].place),content:"<p> <span class='text-big'>"+k[12]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(k[12]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils",show:["ni"]},box_3b:{id:"SEN",year:We("SEN",k[0].place),content:"<p> <span class='text-big'>"+k[12]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(k[12]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils<span style='color: #1460aa'> (NI "+k[0].ni.data.AllSchools.perc.SEN.toFixed(1)+"%) </span></p>",show:["lgd","dea"]},box_3c:{id:"SEN",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Special educational needs (SEN)</span>"},box_4:{id:"qualifications",content:"GroupChart",year:k[14]("highest_level_of_qualifications"),chart_data:k[7]("highest_level_of_qualifications")},box_5a:{id:"attainment",year:We("Attainment",k[0].place),content:"<span class='text-big'>"+k[12]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C.</p><span class = 'text-small'>Includes GCSE English and Maths</span> <br> <span class='text-big'>",show:["ni"]},box_5b:{id:"attainment",year:We("Attainment",k[0].place),content:"<span class='text-big'>"+k[12]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C.</p><span class = 'text-small'>Includes GCSE English and Maths</span> <br> "+k[13]("Attainment.value").toLocaleString()+"<span style='color: #1460aa'>(NI "+k[0].ni.data.Attainment.value.toLocaleString(void 0,{minimumFractionDigits:1})+"%) </span>",show:["lgd"]},box_5c:{id:"attainment",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>GCSEs for school leavers</span>"},box_6:{id:"destination",year:We("Destination",k[0].place),content:"GroupChart",chart_data:k[7]("Destination"),show:["ni","lgd","dea"]},box_6b:{id:"destination",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Next steps for school leavers</span>"}}),qr.$set(we);const Le={};N[0]&1&&(Le.place=k[0].place),N[0]&1&&(Le.sub_heading=k[15]("Environment",k[0].place)),N[0]&64&&(Le.chart_compare_type=k[6]),N[0]&1&&(Le.boxes={box_1:{id:"concern",year:We("Env_concern",k[0].place),content:"GroupChart",chart_data:k[7]("Env_concern"),show:["ni","lgd"]},box_1b:{id:"concern",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Concern about the environment</span>"},box_2:{id:"env_problem",year:We("Env_problem",k[0].place),content:"<p>The most important environment problems in Northern Ireland were: <span class='text-bold' 'text-big'>"+k[12]("env_problem.text")+"</span>.</p>",show:["ni"]},box_2b:{id:"env_problem",year:We("Env_problem",k[0].place),content:"<p>The most important environment problems in this area were: </p><p><span class='text-bold' >"+k[12]("env_problem.text")+"</span>.</p><p><span style='color: #1460aa'>(NI: "+k[0].ni.data.env_problem.text+")</span>.</p>",show:["lgd"]},box_2c:{id:"env_problem",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Environmental problems</span>"},box_3:{id:"ghg",year:We("Env_ghg",k[0].place),content:"<p><span class='text-big'>"+k[12]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((k[12]("Env_ghg.value.GHGALL")/k[12]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%</span> reduction since 2005.</p>",show:["ni"]},box_3a:{id:"ghg",year:We("Env_ghg",k[0].place),content:"<p><span class='text-big'>"+k[12]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((k[12]("Env_ghg.value.GHGALL")/k[12]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%</span> reduction since 2005.</p><span style='color: #1460aa'>(NI "+((k[0].ni.data.Env_ghg.value.GHGALL/k[0].ni.data.Env_ghg.value.GHGALL_BASE-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%) </span>",show:["lgd"]},box_3c:{id:"ghg",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Greenhouse gas</span>"},box_4:{id:"active",year:We("Env_active",k[0].place),content:"<span class='text-big'>"+k[12]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0})+"%</span><p>  journeys made by walking, cycling and public transport.</p>",show:["ni"]},box_4a:{id:"active",year:We("Env_active",k[0].place),content:"<span class='text-big'>"+k[12]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0})+"%</span><p>journeys made by walking, cycling and public transport.<span style='color: #1460aa'> (NI "+k[0].ni.data.Env_active.value.JWCPT+"%) </span></p>",show:["lgd"]},box_4b:{id:"active",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Active travel</span>"},box_5:{id:"waste",year:We("Env_waste",k[0].place),content:"GroupChart",chart_data:k[7]("Env_waste"),show:["ni","lgd"]},box_5a:{id:"waste",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Household waste</span>"},box_6:{id:"renewable",year:k[14]("renewable_energy"),content:"GroupChart",chart_data:k[7]("renewable_energy")}}),Lr.$set(Le);const st={};N[0]&1&&(st.place=k[0].place),N[0]&1&&(st.sub_heading=k[15]("Crime and justice",k[0].place)),N[0]&64&&(st.chart_compare_type=k[6]),N[0]&1&&(st.boxes={box_1:{id:"crime",year:We("crime",k[0].place),content:"<p><span class='text-big'>"+k[12]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(k[12]("crime.value.allcrime")/k[12]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+" </span> crimes recorded per 1,000 population.</p>",show:["ni"]},box_1a:{id:"crime",year:We("crime",k[0].place),content:"<p><span class='text-big'>"+k[12]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(k[12]("crime.value.allcrime")/k[12]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+" </span> crimes recorded per 1,000 population.<span style='color: #1460aa'> (NI "+(k[0].ni.data.crime.value.allcrime/k[0].ni.data.MYETotal.value*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+")</span></p>",show:["lgd","dea"]},box_1b:{id:"crime",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Police recorded crimes</span>"},box_2:{id:"crimetype",year:We("crime",k[0].place),content:"GroupChart",chart_data:k[7]("crime"),show:["ni","lgd","dea"]},box_2a:{id:"crimetype",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Types of crime</span>"},box_3:{id:"burglary",year:We("crime",k[0].place),content:"<p><span class='text-big'>"+k[12]("crime.value.burglary").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>recorded burglaries</p>",show:["ni"]},box_3a:{id:"burglary",year:We("crime",k[0].place),content:"<p><span class='text-big'>"+k[12]("crime.value.burglary").toLocaleString(void 0,{maximumFractionDigits:0})+" </span> recorded burglaries</p><span style='color: #1460aa'> (NI "+k[0].ni.data.crime.value.burglary.toLocaleString()+")</span></p>",show:["lgd","dea"]},box_3b:{id:"burglary",content:"Data is available for "+k[16](k[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Police recorded burglaries</span>"},box_4:{id:"crimeworry",year:We("crimeworry",k[0].place),content:"<p> <span class='text-big' >"+k[12]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> of people are highly worried about crime.</p>",show:["ni"]},box_4a:{id:"crimeworry",year:We("crimeworry",k[0].place),content:"<p> <span class='text-big' >"+k[12]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> of people are highly worried about crime.<span style='color: #1460aa'> (NI "+k[0].ni.data.crimeworry.value.WorryC2.toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_4b:{id:"crimeworry",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Worry about crime</span>"},box_5:{id:"crimeperception",year:We("crimeperception",k[0].place),content:"<p> <span class='text-big' >"+k[12]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.</p>",show:["ni"]},box_5a:{id:"crimeperception",year:We("crimeperception",k[0].place),content:"<p> <span class='text-big' >"+k[12]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.<span style='color: #1460aa'> (NI "+k[0].ni.data.crimeperception.value.ASB8.toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_5b:{id:"crimeperception",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Views on anti-social behaviour</span>"}}),Rr.$set(st);const it={};N[0]&1&&(it.place=k[0].place),N[0]&1&&(it.sub_heading=k[15]("Business, economy and trade",k[0].place)),N[0]&64&&(it.chart_compare_type=k[6]),N[0]&1&&(it.boxes={box_1:{id:"no_bus",year:We("business",k[0].place),content:"<span class='text-big'>"+k[12]("business.value.BCOUNTS").toLocaleString()+" </span> businesses, with a total of <span class='text-big'>£"+k[12]("niets_sales.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>million in sales and <span class='text-big'>£"+k[12]("niets_purch.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>million in purchases.",show:["ni","lgd"]},box_1a:{id:"no_bus",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Business and trade</span>"},box_2:{id:"niets_sales",year:We("niets_sales",k[0].place),content:"GroupChart",chart_data:k[7]("niets_sales"),show:["ni","lgd"]},box_2a:{id:"niets_sales",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Places businesses sell to (sales partners)</span>"},box_3:{id:"niets_purch",year:We("niets_purch",k[0].place),content:"GroupChart",chart_data:k[7]("niets_purch"),show:["ni","lgd"]},box_3a:{id:"niets_purch",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Places businesses buy from (purchases partners)</span>"},box_4:{id:"type_bus",year:We("business",k[0].place),content:"GroupChart",chart_data:k[7]("businesstype"),show:["ni","lgd"]},box_4a:{id:"type_bus",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of businesses</span>"},box_5:{id:"size_bus",year:We("businessband",k[0].place),content:"GroupChart",chart_data:k[7]("businessband"),show:["ni","lgd"]},box_5a:{id:"size_bus",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Employees in businesses</span>"},box_6:{id:"sector",year:"Agriculture "+We("farms",k[0].place)+", Tourism "+We("tourism",k[0].place),content:"<p><strong>Agriculture</strong></p><span class='text-big'>"+k[12]("farms.value.F").toLocaleString()+" </span> farms with <span class='text-big'>"+k[12]("farms.value.FA").toLocaleString()+" </span> farmers.<p><strong>Tourism</strong></p><span class='text-big'>"+k[12]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs and <span class='text-big'>"+k[12]("tourism_estab.value.estab").toLocaleString()+" </span> accommodation establishments.",show:["ni"]},box_6a:{id:"sector",year:"Agriculture "+We("farms",k[0].place)+", Tourism "+We("tourism",k[0].place),content:"<strong>Agriculture</strong><p><span class='text-big'>"+k[12]("farms.value.F").toLocaleString()+" </span> farms <span style='color: #1460aa'>("+(k[12]("farms.value.F")/k[0].ni.data.farms.value.F*100).toLocaleString(void 0,{maximumFractionDigits:0})+"% of NI)</span>.</p><span class='text-big'>"+k[12]("farms.value.FA").toLocaleString()+" </span> farmers <span style='color: #1460aa'>("+(k[12]("farms.value.FA")/k[0].ni.data.farms.value.FA*100).toLocaleString(void 0,{maximumFractionDigits:0})+"% of NI)</span>.<p><strong>Tourism</strong></p><span class='text-big'>"+k[12]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs <span style='color: #1460aa'>("+(k[12]("tourism.value.TourismJobs")/k[0].ni.data.tourism.value.TourismJobs*100).toLocaleString(void 0,{maximumFractionDigits:0})+"% of NI)</span>.<p><span class='text-big'>"+k[12]("tourism_estab.value.estab").toLocaleString()+" </span> accommodation establishments <span style='color: #1460aa'>("+(k[12]("tourism_estab.value.estab")/k[0].ni.data.tourism_estab.value.estab*100).toLocaleString(void 0,{maximumFractionDigits:0})+"% of NI)</span>.</p>",show:["lgd"]},box_6b:{id:"sector",content:"Data is available for "+k[16](k[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Selected business sectors</span>"}}),xr.$set(it)},i(k){jr||(ct(Ae.$$.fragment,k),ct(yi.$$.fragment,k),ct(zi.$$.fragment,k),ct(nr.$$.fragment,k),ct(Oi.$$.fragment,k),ct(dr.$$.fragment,k),ct(Ni.$$.fragment,k),ct(lr.$$.fragment,k),ct(Dr.$$.fragment,k),ct(qr.$$.fragment,k),ct(Lr.$$.fragment,k),ct(Rr.$$.fragment,k),ct(xr.$$.fragment,k),jr=!0)},o(k){gt(Ae.$$.fragment,k),gt(yi.$$.fragment,k),gt(zi.$$.fragment,k),gt(nr.$$.fragment,k),gt(Oi.$$.fragment,k),gt(dr.$$.fragment,k),gt(Ni.$$.fragment,k),gt(lr.$$.fragment,k),gt(Dr.$$.fragment,k),gt(qr.$$.fragment,k),gt(Lr.$$.fragment,k),gt(Rr.$$.fragment,k),gt(xr.$$.fragment,k),jr=!1},d(k){k&&ne(p),Gi&&Gi.d(),hi(Ae),k&&ne(Lt),hi(yi,k),k&&ne(qe),k&&ne(Xt),hi(zi),hi(nr),hi(Oi),k&&ne(yn),k&&ne(Gt),Qi.d(),hi(dr),Ui&&Ui.d(),L.d(),mr(),k&&ne(Vr),k&&ne(Ti),hi(Ni),hi(lr),hi(Dr),hi(qr),hi(Lr),hi(Rr),hi(xr)}}}function Qm(l){let p,d=[...l[0].place.parents].reverse(),h=[];for(let _=0;_<d.length;_+=1)h[_]=$m(Ym(l,d,_));return{c(){for(let _=0;_<h.length;_+=1)h[_].c();p=ni()},l(_){for(let v=0;v<h.length;v+=1)h[v].l(_);p=ni()},m(_,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(_,v);Re(_,p,v)},p(_,v){if(v[0]&1){d=[..._[0].place.parents].reverse();let a;for(a=0;a<d.length;a+=1){const z=Ym(_,d,a);h[a]?h[a].p(z,v):(h[a]=$m(z),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(_){on(h,_),_&&ne(p)}}}function $m(l){let p,d=l[34].name+"",h,_,v,a=" &gt; ",z;return{c(){p=Oe("a"),h=Et(d),v=new Rl(!1),z=ni(),this.h()},l(T){p=Ne(T,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var B=Be(p);h=kt(B,d),B.forEach(ne),v=Bl(T,!1),z=ni(),this.h()},h(){Y(p,"href",_=ri+"/"+l[34].code+"/"),Y(p,"data-sveltekit-noscroll",""),Y(p,"data-sveltekit-keepfocus",""),Y(p,"class","svelte-lx8mb2"),v.a=z},m(T,B){Re(T,p,B),xe(p,h),v.m(a,T,B),Re(T,z,B)},p(T,B){B[0]&1&&d!==(d=T[34].name+"")&&vi(h,d),B[0]&1&&_!==(_=ri+"/"+T[34].code+"/")&&Y(p,"href",_)},d(T){T&&ne(p),T&&ne(z),T&&v.d()}}}function U1(l){let p,d;return{c(){p=Oe("p"),d=Et("Zoom and click on map to explore other areas"),this.h()},l(h){p=Ne(h,"P",{class:!0});var _=Be(p);d=kt(_,"Zoom and click on map to explore other areas"),_.forEach(ne),this.h()},h(){Y(p,"class","text-bold svelte-lx8mb2")},m(h,_){Re(h,p,_),xe(p,d)},p:Xi,d(h){h&&ne(p)}}}function V1(l){let p,d,h=l[0].place.name+"",_,v,a=zn[l[0].place.type].name+"",z,T,B,M,U,R,W;return{c(){p=Et("You are currently viewing "),d=Oe("span"),_=Et(h),v=vt(),z=Et(a),T=vt(),B=Oe("span"),M=vt(),U=Oe("p"),R=Oe("span"),W=Et("Zoom and click on map to explore other areas"),this.h()},l(X){p=kt(X,"You are currently viewing "),d=Ne(X,"SPAN",{style:!0,class:!0});var ae=Be(d);_=kt(ae,h),ae.forEach(ne),v=bt(X),z=kt(X,a),T=bt(X),B=Ne(X,"SPAN",{style:!0,class:!0});var se=Be(B);se.forEach(ne),M=bt(X),U=Ne(X,"P",{class:!0});var pe=Be(U);R=Ne(pe,"SPAN",{class:!0});var ge=Be(R);W=kt(ge,"Zoom and click on map to explore other areas"),ge.forEach(ne),pe.forEach(ne),this.h()},h(){Qe(d,"color","#3878c5"),Y(d,"class","svelte-lx8mb2"),Qe(B,"color","#00205b"),Y(B,"class","svelte-lx8mb2"),Y(R,"class","text-bold svelte-lx8mb2"),Y(U,"class","svelte-lx8mb2")},m(X,ae){Re(X,p,ae),Re(X,d,ae),xe(d,_),Re(X,v,ae),Re(X,z,ae),Re(X,T,ae),Re(X,B,ae),Re(X,M,ae),Re(X,U,ae),xe(U,R),xe(R,W)},p(X,ae){ae[0]&1&&h!==(h=X[0].place.name+"")&&vi(_,h),ae[0]&1&&a!==(a=zn[X[0].place.type].name+"")&&vi(z,a)},d(X){X&&ne(p),X&&ne(d),X&&ne(v),X&&ne(z),X&&ne(T),X&&ne(B),X&&ne(M),X&&ne(U)}}}function q1(l){let p,d,h,_,v,a,z;const T=[ts[l[36]],{id:l[36]+"-fill"},{type:"fill"},{isChild:l[5][l[36]]},{click:!0},{selected:l[4].selected},{highlight:!0},{highlighted:l[4].highlighted},{hover:!0},{hovered:l[4].hovered},{layout:{visibility:l[4].type==l[36]||l[4].childType==l[36]?"visible":"none"}},{paint:l[4].type==l[36]?Qr["fill-self"]:l[4].childType==l[36]?Qr["fill-child"]:Qr.fill}];let B={};for(let X=0;X<T.length;X+=1)B=gp(B,T[X]);p=new Eh({props:B}),p.$on("select",l[8]);const M=[ts[l[36]],{id:l[36]+"-bounds"},{type:"line"},{selected:l[4].selected},{highlight:!0},{highlighted:l[4].highlighted},{layout:{visibility:l[4].type==l[36]||l[4].childType==l[36]?"visible":"none"}},{paint:l[4].type==l[36]?Qr["line-active"]:l[4].childType==l[36]?Qr["line-child"]:Qr.line}];let U={};for(let X=0;X<M.length;X+=1)U=gp(U,M[X]);h=new Eh({props:U});const R=[ts[l[36]],{id:l[36]+"-self"},{type:"line"},{selected:l[4].selected},{layout:{visibility:l[4].type==l[36]?"visible":"none"}},{paint:l[4].type==l[36]?Qr["line-self"]:Qr.line}];let W={};for(let X=0;X<R.length;X+=1)W=gp(W,R[X]);return v=new Eh({props:W}),{c(){ui(p.$$.fragment),d=vt(),ui(h.$$.fragment),_=vt(),ui(v.$$.fragment),a=vt()},l(X){ci(p.$$.fragment,X),d=bt(X),ci(h.$$.fragment,X),_=bt(X),ci(v.$$.fragment,X),a=bt(X)},m(X,ae){pi(p,X,ae),Re(X,d,ae),pi(h,X,ae),Re(X,_,ae),pi(v,X,ae),Re(X,a,ae),z=!0},p(X,ae){const se=ae[0]&48?yp(T,[ae&0&&_p(ts[X[36]]),T[1],T[2],ae[0]&32&&{isChild:X[5][X[36]]},T[4],ae[0]&16&&{selected:X[4].selected},T[6],ae[0]&16&&{highlighted:X[4].highlighted},T[8],ae[0]&16&&{hovered:X[4].hovered},ae[0]&16&&{layout:{visibility:X[4].type==X[36]||X[4].childType==X[36]?"visible":"none"}},ae[0]&16&&{paint:X[4].type==X[36]?Qr["fill-self"]:X[4].childType==X[36]?Qr["fill-child"]:Qr.fill}]):{};p.$set(se);const pe=ae[0]&16?yp(M,[ae&0&&_p(ts[X[36]]),M[1],M[2],ae[0]&16&&{selected:X[4].selected},M[4],ae[0]&16&&{highlighted:X[4].highlighted},ae[0]&16&&{layout:{visibility:X[4].type==X[36]||X[4].childType==X[36]?"visible":"none"}},ae[0]&16&&{paint:X[4].type==X[36]?Qr["line-active"]:X[4].childType==X[36]?Qr["line-child"]:Qr.line}]):{};h.$set(pe);const ge=ae[0]&16?yp(R,[ae&0&&_p(ts[X[36]]),R[1],R[2],ae[0]&16&&{selected:X[4].selected},ae[0]&16&&{layout:{visibility:X[4].type==X[36]?"visible":"none"}},ae[0]&16&&{paint:X[4].type==X[36]?Qr["line-self"]:Qr.line}]):{};v.$set(ge)},i(X){z||(ct(p.$$.fragment,X),ct(h.$$.fragment,X),ct(v.$$.fragment,X),z=!0)},o(X){gt(p.$$.fragment,X),gt(h.$$.fragment,X),gt(v.$$.fragment,X),z=!1},d(X){hi(p,X),X&&ne(d),hi(h,X),X&&ne(_),hi(v,X),X&&ne(a)}}}function eg(l){let p,d;const h=[vd[l[36]]];let _={$$slots:{default:[q1]},$$scope:{ctx:l}};for(let v=0;v<h.length;v+=1)_=gp(_,h[v]);return p=new ev({props:_}),{c(){ui(p.$$.fragment)},l(v){ci(p.$$.fragment,v)},m(v,a){pi(p,v,a),d=!0},p(v,a){const z=a&0?yp(h,[_p(vd[v[36]])]):{};a[0]&48|a[1]&512&&(z.$$scope={dirty:a,ctx:v}),p.$set(z)},i(v){d||(ct(p.$$.fragment,v),d=!0)},o(v){gt(p.$$.fragment,v),d=!1},d(v){hi(p,v)}}}function j1(l){let p,d,h=["dz","sdz","dea","lgd"],_=[];for(let a=0;a<4;a+=1)_[a]=eg(Xm(l,h,a));const v=a=>gt(_[a],1,1,()=>{_[a]=null});return{c(){for(let a=0;a<4;a+=1)_[a].c();p=ni()},l(a){for(let z=0;z<4;z+=1)_[z].l(a);p=ni()},m(a,z){for(let T=0;T<4;T+=1)_[T]&&_[T].m(a,z);Re(a,p,z),d=!0},p(a,z){if(z[0]&304){h=["dz","sdz","dea","lgd"];let T;for(T=0;T<4;T+=1){const B=Xm(a,h,T);_[T]?(_[T].p(B,z),ct(_[T],1)):(_[T]=eg(B),_[T].c(),ct(_[T],1),_[T].m(p.parentNode,p))}for(Wn(),T=4;T<4;T+=1)v(T);Xn()}},i(a){if(!d){for(let z=0;z<4;z+=1)ct(_[z]);d=!0}},o(a){_=_.filter(Boolean);for(let z=0;z<4;z+=1)gt(_[z]);d=!1},d(a){on(_,a),a&&ne(p)}}}function tg(l){let p,d,h=l[0].place.name+"",_,v,a,z=[...l[0].place.parents].reverse(),T=[];for(let B=0;B<z.length;B+=1)T[B]=ig(Wm(l,z,B));return{c(){p=Oe("span"),d=Et("Select a larger area containing "),_=Et(h),v=vt(),a=Oe("span");for(let B=0;B<T.length;B+=1)T[B].c();this.h()},l(B){p=Ne(B,"SPAN",{class:!0});var M=Be(p);d=kt(M,"Select a larger area containing "),_=kt(M,h),M.forEach(ne),v=bt(B),a=Ne(B,"SPAN",{class:!0});var U=Be(a);for(let R=0;R<T.length;R+=1)T[R].l(U);U.forEach(ne),this.h()},h(){Y(p,"class","text-bold svelte-lx8mb2"),Y(a,"class","text-small svelte-lx8mb2")},m(B,M){Re(B,p,M),xe(p,d),xe(p,_),Re(B,v,M),Re(B,a,M);for(let U=0;U<T.length;U+=1)T[U]&&T[U].m(a,null)},p(B,M){if(M[0]&1&&h!==(h=B[0].place.name+"")&&vi(_,h),M[0]&1){z=[...B[0].place.parents].reverse();let U;for(U=0;U<z.length;U+=1){const R=Wm(B,z,U);T[U]?T[U].p(R,M):(T[U]=ig(R),T[U].c(),T[U].m(a,null))}for(;U<T.length;U+=1)T[U].d(1);T.length=z.length}},d(B){B&&ne(p),B&&ne(v),B&&ne(a),on(T,B)}}}function ig(l){let p,d,h=l[33]>0?"↳ ":"",_,v=l[34].name+"",a,z;return{c(){p=Oe("span"),d=new Rl(!1),_=Oe("a"),a=Et(v),this.h()},l(T){p=Ne(T,"SPAN",{style:!0,class:!0});var B=Be(p);d=Bl(B,!1),_=Ne(B,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var M=Be(_);a=kt(M,v),M.forEach(ne),B.forEach(ne),this.h()},h(){d.a=_,Y(_,"href",z=ri+"/"+l[34].code),Y(_,"data-sveltekit-noscroll",""),Y(_,"data-sveltekit-keepfocus",""),Y(_,"class","svelte-lx8mb2"),Qe(p,"display","block"),Qe(p,"margin-left",(l[33]>0?(l[33]-1)*15:0)+"px"),Y(p,"class","svelte-lx8mb2")},m(T,B){Re(T,p,B),d.m(h,p),xe(p,_),xe(_,a)},p(T,B){B[0]&1&&v!==(v=T[34].name+"")&&vi(a,v),B[0]&1&&z!==(z=ri+"/"+T[34].code)&&Y(_,"href",z)},d(T){T&&ne(p)}}}function G1(l){let p,d,h=l[0].place.name+"",_,v,a=zn[l[0].place.type].name+"",z;return{c(){p=Oe("span"),d=Et("No areas below "),_=Et(h),v=vt(),z=Et(a),this.h()},l(T){p=Ne(T,"SPAN",{class:!0});var B=Be(p);d=kt(B,"No areas below "),_=kt(B,h),v=bt(B),z=kt(B,a),B.forEach(ne),this.h()},h(){Y(p,"class","muted svelte-lx8mb2")},m(T,B){Re(T,p,B),xe(p,d),xe(p,_),xe(p,v),xe(p,z)},p(T,B){B[0]&1&&h!==(h=T[0].place.name+"")&&vi(_,h),B[0]&1&&a!==(a=zn[T[0].place.type].name+"")&&vi(z,a)},d(T){T&&ne(p)}}}function Z1(l){let p,d,h=(l[0].place.children[0]?zn[l[0].place.children[0].type].name:"Areas")+"",_,v,a=l[0].place.name+"",z,T,B,M,U=l[0].place.children,R=[];for(let W=0;W<U.length;W+=1)R[W]=rg(Hm(l,U,W));return{c(){p=Oe("span"),d=Et("Select a "),_=Et(h),v=Et(" within "),z=Et(a),T=Oe("br"),B=vt(),M=Oe("span");for(let W=0;W<R.length;W+=1)R[W].c();this.h()},l(W){p=Ne(W,"SPAN",{class:!0});var X=Be(p);d=kt(X,"Select a "),_=kt(X,h),v=kt(X," within "),z=kt(X,a),X.forEach(ne),T=Ne(W,"BR",{class:!0}),B=bt(W),M=Ne(W,"SPAN",{class:!0});var ae=Be(M);for(let se=0;se<R.length;se+=1)R[se].l(ae);ae.forEach(ne),this.h()},h(){Y(p,"class","text-bold svelte-lx8mb2"),Y(T,"class","svelte-lx8mb2"),Y(M,"class","text-small svelte-lx8mb2")},m(W,X){Re(W,p,X),xe(p,d),xe(p,_),xe(p,v),xe(p,z),Re(W,T,X),Re(W,B,X),Re(W,M,X);for(let ae=0;ae<R.length;ae+=1)R[ae]&&R[ae].m(M,null)},p(W,X){if(X[0]&1&&h!==(h=(W[0].place.children[0]?zn[W[0].place.children[0].type].name:"Areas")+"")&&vi(_,h),X[0]&1&&a!==(a=W[0].place.name+"")&&vi(z,a),X[0]&1){U=W[0].place.children;let ae;for(ae=0;ae<U.length;ae+=1){const se=Hm(W,U,ae);R[ae]?R[ae].p(se,X):(R[ae]=rg(se),R[ae].c(),R[ae].m(M,null))}for(;ae<R.length;ae+=1)R[ae].d(1);R.length=U.length}},d(W){W&&ne(p),W&&ne(T),W&&ne(B),W&&ne(M),on(R,W)}}}function rg(l){let p,d=l[31].name+"",h,_,v=l[33]<l[0].place.children.length-1?", ":"",a;return{c(){p=Oe("a"),h=Et(d),a=Et(v),this.h()},l(z){p=Ne(z,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var T=Be(p);h=kt(T,d),T.forEach(ne),a=kt(z,v),this.h()},h(){Y(p,"href",_=ri+"/"+l[31].code),Y(p,"data-sveltekit-noscroll",""),Y(p,"data-sveltekit-keepfocus",""),Y(p,"class","svelte-lx8mb2")},m(z,T){Re(z,p,T),xe(p,h),Re(z,a,T)},p(z,T){T[0]&1&&d!==(d=z[31].name+"")&&vi(h,d),T[0]&1&&_!==(_=ri+"/"+z[31].code)&&Y(p,"href",_),T[0]&1&&v!==(v=z[33]<z[0].place.children.length-1?", ":"")&&vi(a,v)},d(z){z&&ne(p),z&&ne(a)}}}function K1(l){let p,d,h=l[0].place&&l[0].ni&&Jm(l);return{c(){h&&h.c(),p=ni()},l(_){h&&h.l(_),p=ni()},m(_,v){h&&h.m(_,v),Re(_,p,v),d=!0},p(_,v){_[0].place&&_[0].ni?h?(h.p(_,v),v[0]&1&&ct(h,1)):(h=Jm(_),h.c(),ct(h,1),h.m(p.parentNode,p)):h&&(Wn(),gt(h,1,1,()=>{h=null}),Xn())},i(_){d||(ct(h),d=!0)},o(_){gt(h),d=!1},d(_){h&&h.d(_),_&&ne(p)}}}function H1(l){let p,d,h,_,v,a,z,T,B,M,U,R,W,X,ae,se;return document.title=p=l[0].place.name+" Local Statistics Explorer",W=new l1({}),ae=new g_({props:{column:"wide",$$slots:{default:[K1]},$$scope:{ctx:l}}}),{c(){d=Oe("meta"),h=Oe("meta"),v=Oe("meta"),a=Oe("meta"),T=Oe("meta"),M=Oe("meta"),R=vt(),ui(W.$$.fragment),X=vt(),ui(ae.$$.fragment),this.h()},l(pe){const ge=h_("svelte-ovl3z1",document.head);d=Ne(ge,"META",{name:!0,content:!0,class:!0}),h=Ne(ge,"META",{property:!0,content:!0,class:!0}),v=Ne(ge,"META",{property:!0,content:!0,class:!0}),a=Ne(ge,"META",{property:!0,content:!0,class:!0}),T=Ne(ge,"META",{property:!0,content:!0,class:!0}),M=Ne(ge,"META",{name:!0,content:!0,class:!0}),ge.forEach(ne),R=bt(pe),ci(W.$$.fragment,pe),X=bt(pe),ci(ae.$$.fragment,pe),this.h()},h(){Y(d,"name","description"),Y(d,"content",""),Y(d,"class","svelte-lx8mb2"),Y(h,"property","og:title"),Y(h,"content",_=l[0].place.name+" Local Statistics"),Y(h,"class","svelte-lx8mb2"),Y(v,"property","og:type"),Y(v,"content","website"),Y(v,"class","svelte-lx8mb2"),Y(a,"property","og:url"),Y(a,"content",z=wp.base+"/"+l[0].place.code+"/"),Y(a,"class","svelte-lx8mb2"),Y(T,"property","og:description"),Y(T,"content",B="Explore NISRA Statistics for "+l[0].place.name+"."),Y(T,"class","svelte-lx8mb2"),Y(M,"name","description"),Y(M,"content",U="Explore NISRA Statistics for "+l[0].place.name+"."),Y(M,"class","svelte-lx8mb2")},m(pe,ge){xe(document.head,d),xe(document.head,h),xe(document.head,v),xe(document.head,a),xe(document.head,T),xe(document.head,M),Re(pe,R,ge),pi(W,pe,ge),Re(pe,X,ge),pi(ae,pe,ge),se=!0},p(pe,ge){(!se||ge[0]&1)&&p!==(p=pe[0].place.name+" Local Statistics Explorer")&&(document.title=p),(!se||ge[0]&1&&_!==(_=pe[0].place.name+" Local Statistics"))&&Y(h,"content",_),(!se||ge[0]&1&&z!==(z=wp.base+"/"+pe[0].place.code+"/"))&&Y(a,"content",z),(!se||ge[0]&1&&B!==(B="Explore NISRA Statistics for "+pe[0].place.name+"."))&&Y(T,"content",B),(!se||ge[0]&1&&U!==(U="Explore NISRA Statistics for "+pe[0].place.name+"."))&&Y(M,"content",U);const rt={};ge[0]&127|ge[1]&512&&(rt.$$scope={dirty:ge,ctx:pe}),ae.$set(rt)},i(pe){se||(ct(W.$$.fragment,pe),ct(ae.$$.fragment,pe),se=!0)},o(pe){gt(W.$$.fragment,pe),gt(ae.$$.fragment,pe),se=!1},d(pe){ne(d),ne(h),ne(v),ne(a),ne(T),ne(M),pe&&ne(R),hi(W,pe),pe&&ne(X),hi(ae,pe)}}}function mp(l){let p=(l*100).toFixed(1);return p<.1?"<0.1%":p+"%"}function We(l,p){return p.meta_data.hasOwnProperty(l)?p.meta_data[l][0].year:null}function ng(l){let p=l.data.MYETotal.value/(l.hectares/100);return p<10?p="<10":p=(Math.round(p*10)/10).toLocaleString(void 0,{minimumFractionDigits:1}),p}function W1(l,p,d){let h,_,{data:v}=p,a,z,T=null,B={selected:null,type:null,childType:null,highlighted:[],hovered:null},M={};Object.keys(ts).forEach(Pe=>d(5,M[Pe]=!1,M));function U(Pe){let je=[];if(v.place.data.hasOwnProperty(Pe)){let lt=v.place.data[Pe].perc,De,wt;lt.hasOwnProperty("2021")?(De=lt[2021],wt=v.ni.data[Pe].perc[2021]):(De=lt,wt=v.ni.data[Pe].perc);let ot,Dt,Lt=Object.keys(ap[Pe]);for(let yi=0;yi<Lt.length;yi++){for(let qe=0;qe<Object.keys(De).length;qe++)if(ap[Pe][Lt[yi]].category==Object.keys(De)[qe]){ot=ap[Pe][Lt[yi]].category,Dt=ap[Pe][Lt[yi]].label;break}De[ot]<=100&&(je.push({group:"Northern Ireland",category:Dt,perc:wt[ot],width:0}),v.place.name!="Northern Ireland"&&je.push({group:v.place.name,category:Dt,perc:De[ot],width:0}))}}return je}function R(Pe){T&&T.fitBounds(Pe,{padding:20})}function W(Pe){let je=JSON.parse(JSON.stringify(B)),lt=v.place.code,De=v.place.type,wt=v.place.children[0]?v.place.children.map(qe=>qe.code):[],ot=v.place.type=="rgn"?"cty":wt[0]?v.place.children[0].type:null;d(4,B.selected=lt,B),d(4,B.type=De,B),d(4,B.childType=ot,B),d(4,B.highlighted=wt,B);let Dt=Object.keys(ts),Lt=["fill-color","fill-opacity"],yi=["line-color","line-width","line-opacity"];T&&(B.type!=je.type||B.childType!=je.childType)&&(Dt.forEach(qe=>{let Xt=qe==De||ot&&qe==ot?"visible":"none";T.setLayoutProperty(qe+"-fill","visibility",Xt),T.setLayoutProperty(qe+"-bounds","visibility",Xt),v.place.type!="ni"&&T.setLayoutProperty(qe+"-self","visibility",Xt),d(5,M[qe]=qe==ot,M)}),v.place.type!="ni"&&(Lt.forEach(qe=>T.setPaintProperty(De+"-fill",qe,Qr[wt[0]?"fill-active":"fill-self"][qe])),yi.forEach(qe=>{T.setPaintProperty(De+"-bounds",qe,Qr["line-active"][qe]),T.setPaintProperty(De+"-self",qe,Qr["line-self"][qe])})),ot&&(Lt.forEach(qe=>T.setPaintProperty(ot+"-fill",qe,Qr["fill-child"][qe])),yi.forEach(qe=>T.setPaintProperty(ot+"-bounds",qe,Qr["line-child"][qe]))))}function X(Pe){W(),R(v.place.bounds)}function ae(Pe){_d(`${ri}/${Pe.detail.code}/`,{noScroll:!0,keepFocus:!0})}function se(Pe){_d(`${ri}/${Pe.detail.value}/`,{noScroll:!0,keepFocus:!0})}function pe(){d(2,z=a<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}function ge(Pe){return Pe==1?"largest":Pe==v.place.count?"smallest":Pe+a_(Pe)+" largest"}function rt(Pe){let je="";if(Pe.data.hasOwnProperty("PopChange")){let lt=Pe.data.PopChange.value,De=Object.keys(lt).slice(-1),wt=De-10,ot=(lt[De]-lt[wt])/lt[wt]*100,Dt;ot<0?Dt="Down":ot>0&&(Dt="Up"),je="<p>The population of "+Pe.name+" in "+wt+' was <span class="text-big">'+lt[wt].toLocaleString()+"</span> and in "+De+' was <span class="text-big">'+lt[De].toLocaleString()+'</span><p><span class="em '+o_(ot)+'">'+Dt+" "+s_(ot,"%",1)+"</span> since "+wt+" Mid-Year Population Estimate</p>"}return je}function Ue(Pe){let lt=Pe.replaceAll("[",".").replaceAll("]","").split("."),De=v.place.data;for(let wt=0;wt<lt.length;wt++)De.hasOwnProperty(lt[wt])?De=De[lt[wt]]:De=[];return De}function Ae(Pe){let lt=Pe.replaceAll("[",".").replaceAll("]","").split("."),De=v.ni.data,wt=Ue(Pe);lt[0]=="grouped_data_nocompare"|lt[0]=="grouped_data_areacompare"&&(De=v.ni);for(let ot=0;ot<lt.length;ot++)De.hasOwnProperty(lt[ot])?De=De[lt[ot]]:De=[];return wt>De+2?De="<p>This is higher than the NI value</p>":wt<De-2?De="<p>This is lower than the NI value</p>":De="<p>This is similar to the NI value</p>",De}function Ke(Pe){return v.place.data.hasOwnProperty(Pe)?Object.keys(v.place.data[Pe].perc).slice(-1)+" Census":null}function xt(Pe,je){if(je.type=="ni")return"";if(je.type=="lgd")return"You can also explore "+Pe+" data for <a href = '"+ri+"/"+je.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[0].name+"</a>";if(je.type=="dea")return"You can also explore "+Pe+" data for <a href = '"+ri+"/"+je.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[0].name+"</a> and <a href = '"+ri+"/"+je.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[1].name+"</a>";if(je.type=="sdz")return"You can also explore "+Pe+" data for <a href = '"+ri+"/"+je.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[0].name+"</a>, <a href = '"+ri+"/"+je.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[1].name+"</a> and <a href = '"+ri+"/"+je.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[2].name+"</a>";if(je.type=="dz")return"You can also explore "+Pe+" data for <a href = '"+ri+"/"+je.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[0].name+"</a>, <a href = '"+ri+"/"+je.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[1].name+"</a>, <a href = '"+ri+"/"+je.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[2].name+"</a> and <a href = '"+ri+"/"+je.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+je.parents[3].name+"</a>"}function Pt(Pe,je){if(Pe.type=="ni")return"";if(Pe.type=="dea"&je=="ni, lgd")return"<a href = '"+ri+"/"+Pe.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[0].name+"</a> and <a href = '"+ri+"/"+Pe.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[1].name+"</a>";if(Pe.type=="sdz"&je=="ni, lgd")return"<a href = '"+ri+"/"+Pe.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[1].name+"</a> and <a href = '"+ri+"/"+Pe.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[2].name+"</a>";if(Pe.type=="dz"&je=="ni, lgd")return"<a href = '"+ri+"/"+Pe.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[2].name+"</a> and <a href = '"+ri+"/"+Pe.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[3].name+"</a>";if(Pe.type=="lgd"&je=="ni, dea")return"<a href = '"+ri+"/"+Pe.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[0].name+"</a>";if(Pe.type=="sdz"&je=="ni, dea")return"<a href = '"+ri+"/"+Pe.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[0].name+"</a> and <a href = '"+ri+"/"+Pe.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[2].name+"</a>";if(Pe.type=="dz"&je=="ni, dea")return"<a href = '"+ri+"/"+Pe.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[2].name+"</a> and <a href = '"+ri+"/"+Pe.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[3].name+"</a>";if(Pe.type=="sdz"&je=="ni, lgd, dea")return"<a href = '"+ri+"/"+Pe.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[0].name+"</a>, <a href = '"+ri+"/"+Pe.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[1].name+"</a> and <a href = '"+ri+"/"+Pe.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[2].name+"</a>";if(Pe.type=="dz"&je=="ni, lgd, dea")return"<a href = '"+ri+"/"+Pe.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[1].name+"</a>, <a href = '"+ri+"/"+Pe.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[2].name+"</a> and <a href = '"+ri+"/"+Pe.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+Pe.parents[3].name+"</a>"}function Ge(Pe){let je=Pe.data.MYETotal.value/(Pe.hectares/100),lt=v.ni.data.MYETotal.value/(v.ni.hectares/100),De=je/lt;return Math.round(De)==1?De='Approximately <span class = "em" style = "background-color: lightgrey">the same density level</span> as the Northern Ireland average':De>1?De='Approximately <span class = "em" style = "background-color: lightgrey">'+De.toFixed(0)+" times </span> the Northern Ireland average":De='Approximately <span class = "em" style = "background-color: lightgrey">1/'+(1/De).toFixed(0)+" </span> of the Northern Ireland average",De}function He(Pe){T=Pe,d(3,T)}function ht(){a=this.clientWidth,d(1,a)}return l.$$set=Pe=>{"data"in Pe&&d(0,v=Pe.data)},l.$$.update=()=>{l.$$.dirty[0]&2&&a&&pe(),l.$$.dirty[0]&1&&v.place&&v.place.type!="ni",l.$$.dirty[0]&262145&&d(6,h=_?null:v.place.type!="ni"?"ni":null),l.$$.dirty[0]&1&&v.place&&X(v.place)},d(18,_=!1),[v,a,z,T,B,M,h,U,ae,se,ge,rt,Ue,Ae,Ke,xt,Pt,Ge,_,He,ht]}class rb extends sn{constructor(p){super(),ln(this,p,W1,H1,un,{data:0},null,[-1,-1])}}export{rb as component,ib as universal};
