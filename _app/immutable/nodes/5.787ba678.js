import{g as n_,e as xi,c as _d,a as vd,s as a_,b as o_,d as s_,S as l_}from"../chunks/navigation.15fa8b2b.js";import{g as Pn,a as wp,m as Fu,b as Rl,c as u_,d as nn,e as c_}from"../chunks/config.d859441b.js";import{s as cn,f as Oe,g as Ne,h as Ze,d as se,j as ne,J as Ku,i as De,K as Hu,H as ag,o as Bh,C as Nu,E as Uu,F as Vu,G as ju,p as Ns,e as oi,w as Wu,L as p_,I as Ht,M as Ti,k as Qe,N as Wn,O as Xn,u as Ae,v as tr,P as un,Q as as,l as Vt,m as jt,n as ki,a as wt,c as St,r as Ua,R as Ap,y as Th,A as h_,S as po,T as ho,x as Sp,D as f_,U as d_,V as _p}from"../chunks/scheduler.a2c9abeb.js";import{S as pn,i as hn,a as ot,g as Bn,t as _t,c as Fn,b as hi,d as fi,m as di,e as mi,f as m_}from"../chunks/index.49c2d5c7.js";import{b as er,a as g_}from"../chunks/paths.df9c57a8.js";import{S as y_}from"../chunks/Section.985dde47.js";/* empty css                                                              */import{w as Ai,h as Nr}from"../chunks/singletons.d777e7f0.js";function xh(l,p){const d={},h={},y={$$scope:1};let v=l.length;for(;v--;){const a=l[v],k=p[v];if(k){for(const I in a)I in k||(h[I]=1);for(const I in k)y[I]||(d[I]=k[I],y[I]=1);l[v]=k}else for(const I in a)y[I]=1}for(const a in h)a in d||(d[a]=void 0);return d}async function bd(l,p){return await(await p(wp.app_json_data+l+".json")).json()}async function __({params:l,fetch:p}){let d=l.code,h=await n_(wp.search_data,p),y={};h.forEach(I=>y[I.code]=I.name),h.forEach(I=>{I.typepl=Pn[I.type].pl,I.typenm=Pn[I.type].name,I.typestr=y[I.parent]&&I.parent==I.code?`View:  ${y[I.parent]}
        ${Pn[I.parent_type].name}  `:y[I.parent]&&I.parent!=I.code?`${Pn[I.type].name} `:""});let v=h.sort((I,B)=>I.name.localeCompare(B.name)),a=await bd("N92000002",p),k=await bd(d,p);return{search_data:v,place:k,ni:a}}const nb=Object.freeze(Object.defineProperty({__proto__:null,load:__},Symbol.toStringTag,{value:"Module"}));var v_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b_(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var x_={rgb2hsl:Xu,rgb2hsv:Pp,rgb2hwb:Yu,rgb2cmyk:Ju,rgb2keyword:Qu,rgb2xyz:Fh,rgb2lab:Oh,rgb2lch:w_,hsl2rgb:Cp,hsl2hsv:S_,hsl2hwb:E_,hsl2cmyk:k_,hsl2keyword:I_,hsv2rgb:Mp,hsv2hsl:z_,hsv2hwb:T_,hsv2cmyk:A_,hsv2keyword:P_,hwb2rgb:$u,hwb2hsl:C_,hwb2hsv:M_,hwb2cmyk:D_,hwb2keyword:L_,cmyk2rgb:ec,cmyk2hsl:R_,cmyk2hsv:B_,cmyk2hwb:F_,cmyk2keyword:O_,keyword2rgb:Us,keyword2hsl:j_,keyword2hsv:q_,keyword2hwb:G_,keyword2cmyk:Z_,keyword2lab:K_,keyword2xyz:H_,xyz2rgb:og,xyz2lab:sg,xyz2lch:N_,lab2xyz:Nh,lab2rgb:lg,lab2lch:Uh,lch2lab:Vh,lch2xyz:U_,lch2rgb:V_};function Xu(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255,y=Math.min(p,d,h),v=Math.max(p,d,h),a=v-y,k,I,B;return v==y?k=0:p==v?k=(d-h)/a:d==v?k=2+(h-p)/a:h==v&&(k=4+(p-d)/a),k=Math.min(k*60,360),k<0&&(k+=360),B=(y+v)/2,v==y?I=0:B<=.5?I=a/(v+y):I=a/(2-v-y),[k,I*100,B*100]}function Pp(l){var p=l[0],d=l[1],h=l[2],y=Math.min(p,d,h),v=Math.max(p,d,h),a=v-y,k,I,B;return v==0?I=0:I=a/v*1e3/10,v==y?k=0:p==v?k=(d-h)/a:d==v?k=2+(h-p)/a:h==v&&(k=4+(p-d)/a),k=Math.min(k*60,360),k<0&&(k+=360),B=v/255*1e3/10,[k,I,B]}function Yu(l){var p=l[0],d=l[1],v=l[2],h=Xu(l)[0],y=1/255*Math.min(p,Math.min(d,v)),v=1-1/255*Math.max(p,Math.max(d,v));return[h,y*100,v*100]}function Ju(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255,y,v,a,k;return k=Math.min(1-p,1-d,1-h),y=(1-p-k)/(1-k)||0,v=(1-d-k)/(1-k)||0,a=(1-h-k)/(1-k)||0,[y*100,v*100,a*100,k*100]}function Qu(l){return ug[JSON.stringify(l)]}function Fh(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255;p=p>.04045?Math.pow((p+.055)/1.055,2.4):p/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92;var y=p*.4124+d*.3576+h*.1805,v=p*.2126+d*.7152+h*.0722,a=p*.0193+d*.1192+h*.9505;return[y*100,v*100,a*100]}function Oh(l){var p=Fh(l),d=p[0],h=p[1],y=p[2],v,a,k;return d/=95.047,h/=100,y/=108.883,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,v=116*h-16,a=500*(d-h),k=200*(h-y),[v,a,k]}function w_(l){return Uh(Oh(l))}function Cp(l){var p=l[0]/360,d=l[1]/100,h=l[2]/100,y,v,a,k,I;if(d==0)return I=h*255,[I,I,I];h<.5?v=h*(1+d):v=h+d-h*d,y=2*h-v,k=[0,0,0];for(var B=0;B<3;B++)a=p+1/3*-(B-1),a<0&&a++,a>1&&a--,6*a<1?I=y+(v-y)*6*a:2*a<1?I=v:3*a<2?I=y+(v-y)*(2/3-a)*6:I=y,k[B]=I*255;return k}function S_(l){var p=l[0],d=l[1]/100,h=l[2]/100,y,v;return h===0?[0,0,0]:(h*=2,d*=h<=1?h:2-h,v=(h+d)/2,y=2*d/(h+d),[p,y*100,v*100])}function E_(l){return Yu(Cp(l))}function k_(l){return Ju(Cp(l))}function I_(l){return Qu(Cp(l))}function Mp(l){var p=l[0]/60,d=l[1]/100,I=l[2]/100,h=Math.floor(p)%6,y=p-Math.floor(p),v=255*I*(1-d),a=255*I*(1-d*y),k=255*I*(1-d*(1-y)),I=255*I;switch(h){case 0:return[I,k,v];case 1:return[a,I,v];case 2:return[v,I,k];case 3:return[v,a,I];case 4:return[k,v,I];case 5:return[I,v,a]}}function z_(l){var p=l[0],d=l[1]/100,h=l[2]/100,y,v;return v=(2-d)*h,y=d*h,y/=v<=1?v:2-v,y=y||0,v/=2,[p,y*100,v*100]}function T_(l){return Yu(Mp(l))}function A_(l){return Ju(Mp(l))}function P_(l){return Qu(Mp(l))}function $u(l){var p=l[0]/360,d=l[1]/100,h=l[2]/100,y=d+h,v,a,k,I;switch(y>1&&(d/=y,h/=y),v=Math.floor(6*p),a=1-h,k=6*p-v,v&1&&(k=1-k),I=d+k*(a-d),v){default:case 6:case 0:r=a,g=I,b=d;break;case 1:r=I,g=a,b=d;break;case 2:r=d,g=a,b=I;break;case 3:r=d,g=I,b=a;break;case 4:r=I,g=d,b=a;break;case 5:r=a,g=d,b=I;break}return[r*255,g*255,b*255]}function C_(l){return Xu($u(l))}function M_(l){return Pp($u(l))}function D_(l){return Ju($u(l))}function L_(l){return Qu($u(l))}function ec(l){var p=l[0]/100,d=l[1]/100,h=l[2]/100,y=l[3]/100,v,a,k;return v=1-Math.min(1,p*(1-y)+y),a=1-Math.min(1,d*(1-y)+y),k=1-Math.min(1,h*(1-y)+y),[v*255,a*255,k*255]}function R_(l){return Xu(ec(l))}function B_(l){return Pp(ec(l))}function F_(l){return Yu(ec(l))}function O_(l){return Qu(ec(l))}function og(l){var p=l[0]/100,d=l[1]/100,h=l[2]/100,y,v,a;return y=p*3.2406+d*-1.5372+h*-.4986,v=p*-.9689+d*1.8758+h*.0415,a=p*.0557+d*-.204+h*1.057,y=y>.0031308?1.055*Math.pow(y,1/2.4)-.055:y=y*12.92,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v=v*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,y=Math.min(Math.max(0,y),1),v=Math.min(Math.max(0,v),1),a=Math.min(Math.max(0,a),1),[y*255,v*255,a*255]}function sg(l){var p=l[0],d=l[1],h=l[2],y,v,a;return p/=95.047,d/=100,h/=108.883,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,y=116*d-16,v=500*(p-d),a=200*(d-h),[y,v,a]}function N_(l){return Uh(sg(l))}function Nh(l){var p=l[0],d=l[1],h=l[2],y,v,a,k;return p<=8?(v=p*100/903.3,k=7.787*(v/100)+16/116):(v=100*Math.pow((p+16)/116,3),k=Math.pow(v/100,1/3)),y=y/95.047<=.008856?y=95.047*(d/500+k-16/116)/7.787:95.047*Math.pow(d/500+k,3),a=a/108.883<=.008859?a=108.883*(k-h/200-16/116)/7.787:108.883*Math.pow(k-h/200,3),[y,v,a]}function Uh(l){var p=l[0],d=l[1],h=l[2],y,v,a;return y=Math.atan2(h,d),v=y*360/2/Math.PI,v<0&&(v+=360),a=Math.sqrt(d*d+h*h),[p,a,v]}function lg(l){return og(Nh(l))}function Vh(l){var p=l[0],d=l[1],h=l[2],y,v,a;return a=h/360*2*Math.PI,y=d*Math.cos(a),v=d*Math.sin(a),[p,y,v]}function U_(l){return Nh(Vh(l))}function V_(l){return lg(Vh(l))}function Us(l){return Ah[l]}function j_(l){return Xu(Us(l))}function q_(l){return Pp(Us(l))}function G_(l){return Yu(Us(l))}function Z_(l){return Ju(Us(l))}function K_(l){return Oh(Us(l))}function H_(l){return Fh(Us(l))}var Ah={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ug={};for(var xd in Ah)ug[JSON.stringify(Ah[xd])]=xd;var wh=x_,Bl=function(){return new tc};for(var Ru in wh){Bl[Ru+"Raw"]=function(l){return function(p){return typeof p=="number"&&(p=Array.prototype.slice.call(arguments)),wh[l](p)}}(Ru);var wd=/(\w+)2(\w+)/.exec(Ru),Sh=wd[1],W_=wd[2];Bl[Sh]=Bl[Sh]||{},Bl[Sh][W_]=Bl[Ru]=function(l){return function(p){typeof p=="number"&&(p=Array.prototype.slice.call(arguments));var d=wh[l](p);if(typeof d=="string"||d===void 0)return d;for(var h=0;h<d.length;h++)d[h]=Math.round(d[h]);return d}}(Ru)}var tc=function(){this.convs={}};tc.prototype.routeSpace=function(l,p){var d=p[0];return d===void 0?this.getValues(l):(typeof d=="number"&&(d=Array.prototype.slice.call(p)),this.setValues(l,d))};tc.prototype.setValues=function(l,p){return this.space=l,this.convs={},this.convs[l]=p,this};tc.prototype.getValues=function(l){var p=this.convs[l];if(!p){var d=this.space,h=this.convs[d];p=Bl[d][l](h),this.convs[l]=p}return p};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(l){tc.prototype[l]=function(p){return this.routeSpace(l,arguments)}});var cg={exports:{}};(function(l,p){(function(d,h){l.exports=h()})(v_,function(){var d,h,y;function v(a,k){if(!d)d=k;else if(!h)h=k;else{var I="var sharedChunk = {}; ("+d+")(sharedChunk); ("+h+")(sharedChunk);",B={};d(B),y=k(B),typeof window<"u"&&(y.workerUrl=window.URL.createObjectURL(new Blob([I],{type:"text/javascript"})))}}return v(["exports"],function(a){function k(e,t){return e(t={exports:{}},t.exports),t.exports}var I=B;function B(e,t,i,u){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=i,this.p2y=u}B.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},B.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},B.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},B.prototype.solveCurveX=function(e,t){var i,u,f,m,x;for(t===void 0&&(t=1e-6),f=e,x=0;x<8;x++){if(m=this.sampleCurveX(f)-e,Math.abs(m)<t)return f;var E=this.sampleCurveDerivativeX(f);if(Math.abs(E)<1e-6)break;f-=m/E}if((f=e)<(i=0))return i;if(f>(u=1))return u;for(;i<u;){if(m=this.sampleCurveX(f),Math.abs(m-e)<t)return f;e>m?i=f:u=f,f=.5*(u-i)+i}return f},B.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var C=F;function F(e,t){this.x=e,this.y=t}F.prototype={clone:function(){return new F(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),u=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=u,this},_rotateAround:function(e,t){var i=Math.cos(e),u=Math.sin(e),f=t.y+u*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-u*(this.y-t.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},F.convert=function(e){return e instanceof F?e:Array.isArray(e)?new F(e[0],e[1]):e};var D=typeof self<"u"?self:{},X=Math.pow(2,53)-1;function te(e,t,i,u){var f=new I(e,t,i,u);return function(m){return f.solve(m)}}var oe=te(.25,.1,.25,1);function he(e,t,i){return Math.min(i,Math.max(t,e))}function ve(e,t,i){var u=i-t,f=((e-t)%u+u)%u+t;return f===t?i:f}function xe(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var u=0,f=t;u<f.length;u+=1){var m=f[u];for(var x in m)e[x]=m[x]}return e}var tt=1;function Ge(){return tt++}function qe(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function He(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function ni(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function Ot(e,t){return e.indexOf(t,e.length-t.length)!==-1}function Ue(e,t,i){var u={};for(var f in e)u[f]=t.call(i||this,e[f],f,e);return u}function Xe(e,t,i){var u={};for(var f in e)t.call(i||this,e[f],f,e)&&(u[f]=e[f]);return u}function xt(e){return Array.isArray(e)?e.map(xt):typeof e=="object"&&e?Ue(e,xt):e}var ii={};function Ve(e){ii[e]||(typeof console<"u"&&console.warn(e),ii[e]=!0)}function lt(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function Me(e){for(var t=0,i=0,u=e.length,f=u-1,m=void 0,x=void 0;i<u;f=i++)t+=((x=e[f]).x-(m=e[i]).x)*(m.y+x.y);return t}function st(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ft(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,f,m,x){var E=m||x;return t[f]=!E||E.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Ut=null;function Mt(e){if(Ut==null){var t=e.navigator?e.navigator.userAgent:null;Ut=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ut}function kt(e){try{var t=D[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Pe,rt,zi,xr,qi=D.performance&&D.performance.now?D.performance.now.bind(D.performance):Date.now.bind(Date),Fi=D.requestAnimationFrame||D.mozRequestAnimationFrame||D.webkitRequestAnimationFrame||D.msRequestAnimationFrame,li=D.cancelAnimationFrame||D.mozCancelAnimationFrame||D.webkitCancelAnimationFrame||D.msCancelAnimationFrame,ur={now:qi,frame:function(e){var t=Fi(e);return{cancel:function(){return li(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=D.document.createElement("canvas"),u=i.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Pe||(Pe=D.document.createElement("a")),Pe.href=e,Pe.href},hardwareConcurrency:D.navigator&&D.navigator.hardwareConcurrency||4,get devicePixelRatio(){return D.devicePixelRatio},get prefersReducedMotion(){return!!D.matchMedia&&(rt==null&&(rt=D.matchMedia("(prefers-reduced-motion: reduce)")),rt.matches)}},qt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},fn={supported:!1,testSupport:function(e){!dn&&xr&&(mn?Zt(e):zi=e)}},dn=!1,mn=!1;function Zt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,xr),e.isContextLost())return;fn.supported=!0}catch{}e.deleteTexture(t),dn=!0}D.document&&((xr=D.document.createElement("img")).onload=function(){zi&&Zt(zi),zi=null,mn=!0},xr.onerror=function(){dn=!0,zi=null},xr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ci="01",Gi=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function cr(e){return e.indexOf("mapbox:")===0}Gi.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ci,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Gi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Gi.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Gi.prototype.normalizeStyleURL=function(e,t){if(!cr(e))return e;var i=pr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Gi.prototype.normalizeGlyphsURL=function(e,t){if(!cr(e))return e;var i=pr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Gi.prototype.normalizeSourceURL=function(e,t){if(!cr(e))return e;var i=pr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Gi.prototype.normalizeSpriteURL=function(e,t,i,u){var f=pr(e);return cr(e)?(f.path="/styles/v1"+f.path+"/sprite"+t+i,this._makeAPIURL(f,this._customAccessToken||u)):(f.path+=""+t+i,hr(f))},Gi.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!cr(e))return e;var i=pr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ur.devicePixelRatio>=2||t===512?"@2x":"")+(fn.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var u=this._customAccessToken||function(f){for(var m=0,x=f;m<x.length;m+=1){var E=x[m].match(/^access_token=(.*)$/);if(E)return E[1]}return null}(i.params)||qt.ACCESS_TOKEN;return qt.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,u)},Gi.prototype.canonicalizeTileURL=function(e,t){var i=pr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=i.path.replace("/v4/","");var f=i.params;return t&&(f=f.filter(function(m){return!m.match(/^access_token=/)})),f.length&&(u+="?"+f.join("&")),u},Gi.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&cr(t),u=[],f=0,m=e.tiles||[];f<m.length;f+=1){var x=m[f];Ur(x)?u.push(this.canonicalizeTileURL(x,i)):u.push(x)}return u},Gi.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=pr(qt.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,e.protocol==="http"){var f=e.params.indexOf("secure");f>=0&&e.params.splice(f,1)}if(u.path!=="/"&&(e.path=""+u.path+e.path),!qt.REQUIRE_ACCESS_TOKEN)return hr(e);if(!(t=t||qt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(m){return m.indexOf("access_token")===-1}),e.params.push("access_token="+t),hr(e)};var Wr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ur(e){return Wr.test(e)}var Tr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function pr(e){var t=e.match(Tr);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function hr(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function gn(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(D.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Zi=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Zi.prototype.getStorageKey=function(e){var t,i=gn(qt.ACCESS_TOKEN);return t=i&&i.u?D.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,f){return String.fromCharCode(+("0x"+f))})):qt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Zi.prototype.fetchEventData=function(){var e=kt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var u=D.localStorage.getItem(t);u&&(this.eventData=JSON.parse(u));var f=D.localStorage.getItem(i);f&&(this.anonId=f)}catch{Ve("Unable to read from LocalStorage")}},Zi.prototype.saveEventData=function(){var e=kt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{D.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&D.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Ve("Unable to write to LocalStorage")}},Zi.prototype.processRequests=function(e){},Zi.prototype.postEvent=function(e,t,i,u){var f=this;if(qt.EVENTS_URL){var m=pr(qt.EVENTS_URL);m.params.push("access_token="+(u||qt.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Ci,userId:this.anonId},E=t?xe(x,t):x,T={url:hr(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=$t(T,function(A){f.pendingRequest=null,i(A),f.saveEventData(),f.processRequests(u)})}},Zi.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var fr,dr,wr=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,u,f,m){this.skuToken=f,(qt.EVENTS_URL&&m||qt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(x){return cr(x)||Ur(x)}))&&this.queueRequest({id:u,timestamp:Date.now()},m)},t.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){var f=this.queue.shift(),m=f.id,x=f.timestamp;m&&this.success[m]||(this.anonId||this.fetchEventData(),He(this.anonId)||(this.anonId=qe()),this.postEvent(x,{skuToken:this.skuToken},function(E){E||m&&(u.success[m]=!0)},i))}},t}(Zi),Vr=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,u){qt.EVENTS_URL&&qt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(f){return cr(f)||Ur(f)})&&this.queueRequest(Date.now(),u)},t.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var f=gn(qt.ACCESS_TOKEN),m=f?f.u:qt.ACCESS_TOKEN,x=m!==this.eventData.tokenU;He(this.anonId)||(this.anonId=qe(),x=!0);var E=this.queue.shift();if(this.eventData.lastSuccess){var T=new Date(this.eventData.lastSuccess),A=new Date(E),M=(E-this.eventData.lastSuccess)/864e5;x=x||M>=1||M<-1||T.getDate()!==A.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(E,{"enabled.telemetry":!1},function(R){R||(u.eventData.lastSuccess=E,u.eventData.tokenU=m)},i)}},t}(Zi)),an=Vr.postTurnstileEvent.bind(Vr),Xi=new wr,Yn=Xi.postMapLoadEvent.bind(Xi),wn=500,Ar=50;function Jn(){D.caches&&!fr&&(fr=D.caches.open("mapbox-tiles"))}function Qn(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Oi,$n=1/0;function Cn(){return Oi==null&&(Oi=D.OffscreenCanvas&&new D.OffscreenCanvas(1,1).getContext("2d")&&typeof D.createImageBitmap=="function"),Oi}var Pr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Pr);var q=function(e){function t(i,u,f){u===401&&Ur(f)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=u,this.url=f,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),pt=st()?function(){return self.worker&&self.worker.referrer}:function(){return(D.location.protocol==="blob:"?D.parent:D).location.href},mr,gr,jr=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(pt())&&!/^\w+:/.test(i))){if(D.fetch&&D.Request&&D.AbortController&&D.Request.prototype.hasOwnProperty("signal"))return function(u,f){var m,x=new D.AbortController,E=new D.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:pt(),signal:x.signal}),T=!1,A=!1,M=(m=E.url).indexOf("sku=")>0&&Ur(m);u.type==="json"&&E.headers.set("Accept","application/json");var R=function(G,Q,$){if(!A){if(G&&G.message!=="SecurityError"&&Ve(G),Q&&$)return U(Q);var pe=Date.now();D.fetch(E).then(function(ae){if(ae.ok){var me=M?ae.clone():null;return U(ae,me,pe)}return f(new q(ae.statusText,ae.status,u.url))}).catch(function(ae){ae.code!==20&&f(new Error(ae.message))})}},U=function(G,Q,$){(u.type==="arrayBuffer"?G.arrayBuffer():u.type==="json"?G.json():G.text()).then(function(pe){A||(Q&&$&&function(ae,me,be){if(Jn(),fr){var we={status:me.status,statusText:me.statusText,headers:new D.Headers};me.headers.forEach(function(Ce,je){return we.headers.set(je,Ce)});var Ee=ft(me.headers.get("Cache-Control")||"");Ee["no-store"]||(Ee["max-age"]&&we.headers.set("Expires",new Date(be+1e3*Ee["max-age"]).toUTCString()),new Date(we.headers.get("Expires")).getTime()-be<42e4||function(Ce,je){if(dr===void 0)try{new Response(new ReadableStream),dr=!0}catch{dr=!1}dr?je(Ce.body):Ce.blob().then(je)}(me,function(Ce){var je=new D.Response(Ce,we);Jn(),fr&&fr.then(function($e){return $e.put(Qn(ae.url),je)}).catch(function($e){return Ve($e.message)})}))}}(E,Q,$),T=!0,f(null,pe,G.headers.get("Cache-Control"),G.headers.get("Expires")))}).catch(function(pe){A||f(new Error(pe.message))})};return M?function(G,Q){if(Jn(),!fr)return Q(null);var $=Qn(G.url);fr.then(function(pe){pe.match($).then(function(ae){var me=function(be){if(!be)return!1;var we=new Date(be.headers.get("Expires")||0),Ee=ft(be.headers.get("Cache-Control")||"");return we>Date.now()&&!Ee["no-cache"]}(ae);pe.delete($),me&&pe.put($,ae.clone()),Q(null,ae,me)}).catch(Q)}).catch(Q)}(E,R):R(null,null),{cancel:function(){A=!0,T||x.abort()}}}(e,t);if(st()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(u,f){var m=new D.XMLHttpRequest;for(var x in m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer"),u.headers)m.setRequestHeader(x,u.headers[x]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=function(){f(new Error(m.statusText))},m.onload=function(){if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){var E=m.response;if(u.type==="json")try{E=JSON.parse(m.response)}catch(T){return f(T)}f(null,E,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else f(new q(m.statusText,m.status,u.url))},m.send(u.body),{cancel:function(){return m.abort()}}}(e,t)},Sr=function(e,t){return jr(xe(e,{type:"arrayBuffer"}),t)},$t=function(e,t){return jr(xe(e,{method:"POST"}),t)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";mr=[],gr=0;var N=function(e,t){if(fn.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),gr>=qt.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return mr.push(i),i}gr++;var u=!1,f=function(){if(!u)for(u=!0,gr--;mr.length&&gr<qt.MAX_PARALLEL_IMAGE_REQUESTS;){var x=mr.shift();x.cancelled||(x.cancel=N(x.requestParameters,x.callback).cancel)}},m=Sr(e,function(x,E,T,A){f(),x?t(x):E&&(Cn()?function(M,R){var U=new D.Blob([new Uint8Array(M)],{type:"image/png"});D.createImageBitmap(U).then(function(G){R(null,G)}).catch(function(G){R(new Error("Could not load image because of "+G.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(E,t):function(M,R,U,G){var Q=new D.Image,$=D.URL;Q.onload=function(){R(null,Q),$.revokeObjectURL(Q.src),Q.onload=null,D.requestAnimationFrame(function(){Q.src=L})},Q.onerror=function(){return R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var pe=new D.Blob([new Uint8Array(M)],{type:"image/png"});Q.cacheControl=U,Q.expires=G,Q.src=M.byteLength?$.createObjectURL(pe):L}(E,t,T,A))});return{cancel:function(){m.cancel(),f()}}};function j(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function H(e,t,i){if(i&&i[e]){var u=i[e].indexOf(t);u!==-1&&i[e].splice(u,1)}}var Y=function(e,t){t===void 0&&(t={}),xe(this,t),this.type=e},ue=function(e){function t(i,u){u===void 0&&(u={}),e.call(this,"error",xe({error:i},u))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Y),fe=function(){};fe.prototype.on=function(e,t){return this._listeners=this._listeners||{},j(e,t,this._listeners),this},fe.prototype.off=function(e,t){return H(e,t,this._listeners),H(e,t,this._oneTimeListeners),this},fe.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},j(e,t,this._oneTimeListeners),this},fe.prototype.fire=function(e,t){typeof e=="string"&&(e=new Y(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var u=0,f=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];u<f.length;u+=1)f[u].call(this,e);for(var m=0,x=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];m<x.length;m+=1){var E=x[m];H(i,E,this._oneTimeListeners),E.call(this,e)}var T=this._eventedParent;T&&(xe(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(e))}else e instanceof ue&&console.error(e.error);return this},fe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},fe.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var V={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},re=function(e,t,i,u){this.message=(e?e+": ":"")+i,u&&(this.identifier=u),t!=null&&t.__line__&&(this.line=t.__line__)};function ye(e){var t=e.value;return t?[new re(e.key,t,"constants have been deprecated as of v8")]:[]}function Le(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var u=0,f=t;u<f.length;u+=1){var m=f[u];for(var x in m)e[x]=m[x]}return e}function Fe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ke(e){if(Array.isArray(e))return e.map(ke);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=ke(e[i]);return t}return Fe(e)}var Be=function(e){function t(i,u){e.call(this,u),this.message=u,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),gt=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,u=t;i<u.length;i+=1){var f=u[i];this.bindings[f[0]]=f[1]}};gt.prototype.concat=function(e){return new gt(this,e)},gt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},gt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var ut={kind:"null"},ze={kind:"number"},nt={kind:"string"},Ye={kind:"boolean"},et={kind:"color"},Gt={kind:"object"},at={kind:"value"},ei={kind:"collator"},wi={kind:"formatted"},Wt={kind:"resolvedImage"};function ui(e,t){return{kind:"array",itemType:e,N:t}}function ti(e){if(e.kind==="array"){var t=ti(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var Er=[ut,ze,nt,Ye,et,wi,Gt,ui(at),Wt];function gi(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!gi(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,u=Er;i<u.length;i+=1)if(!gi(u[i],t))return null}}return"Expected "+ti(e)+" but found "+ti(t)+" instead."}function Ni(e,t){return t.some(function(i){return i.kind===e.kind})}function bi(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Jt=k(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(E){return(E=Math.round(E))<0?0:E>255?255:E}function f(E){return u(E[E.length-1]==="%"?parseFloat(E)/100*255:parseInt(E))}function m(E){return(T=E[E.length-1]==="%"?parseFloat(E)/100:parseFloat(E))<0?0:T>1?1:T;var T}function x(E,T,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?E+(T-E)*A*6:2*A<1?T:3*A<2?E+(T-E)*(2/3-A)*6:E}try{t.parseCSSColor=function(E){var T,A=E.replace(/ /g,"").toLowerCase();if(A in i)return i[A].slice();if(A[0]==="#")return A.length===4?(T=parseInt(A.substr(1),16))>=0&&T<=4095?[(3840&T)>>4|(3840&T)>>8,240&T|(240&T)>>4,15&T|(15&T)<<4,1]:null:A.length===7&&(T=parseInt(A.substr(1),16))>=0&&T<=16777215?[(16711680&T)>>16,(65280&T)>>8,255&T,1]:null;var M=A.indexOf("("),R=A.indexOf(")");if(M!==-1&&R+1===A.length){var U=A.substr(0,M),G=A.substr(M+1,R-(M+1)).split(","),Q=1;switch(U){case"rgba":if(G.length!==4)return null;Q=m(G.pop());case"rgb":return G.length!==3?null:[f(G[0]),f(G[1]),f(G[2]),Q];case"hsla":if(G.length!==4)return null;Q=m(G.pop());case"hsl":if(G.length!==3)return null;var $=(parseFloat(G[0])%360+360)%360/360,pe=m(G[1]),ae=m(G[2]),me=ae<=.5?ae*(pe+1):ae+pe-ae*pe,be=2*ae-me;return[u(255*x(be,me,$+1/3)),u(255*x(be,me,$)),u(255*x(be,me,$-1/3)),Q];default:return null}}return null}}catch{}}).parseCSSColor,ci=function(e,t,i,u){u===void 0&&(u=1),this.r=e,this.g=t,this.b=i,this.a=u};ci.parse=function(e){if(e){if(e instanceof ci)return e;if(typeof e=="string"){var t=Jt(e);if(t)return new ci(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},ci.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+u+")"},ci.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},ci.black=new ci(0,0,0,1),ci.white=new ci(1,1,1,1),ci.transparent=new ci(0,0,0,0),ci.red=new ci(1,0,0,1);var Cr=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Cr.prototype.compare=function(e,t){return this.collator.compare(e,t)},Cr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var fa=function(e,t,i,u,f){this.text=e,this.image=t,this.scale=i,this.fontStack=u,this.textColor=f},nr=function(e){this.sections=e};nr.fromString=function(e){return new nr([new fa(e,null,null,null,null)])},nr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},nr.factory=function(e){return e instanceof nr?e:nr.fromString(e)},nr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},nr.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var u=i[t];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(f)}}return e};var qr=function(e){this.name=e.name,this.available=e.available};function Va(e,t,i,u){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,t,i,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof u=="number"?[e,t,i,u]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ba(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof ci||e instanceof Cr||e instanceof nr||e instanceof qr)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!ba(i[t]))return!1;return!0}if(typeof e=="object"){for(var u in e)if(!ba(e[u]))return!1;return!0}return!1}function Ki(e){if(e===null)return ut;if(typeof e=="string")return nt;if(typeof e=="boolean")return Ye;if(typeof e=="number")return ze;if(e instanceof ci)return et;if(e instanceof Cr)return ei;if(e instanceof nr)return wi;if(e instanceof qr)return Wt;if(Array.isArray(e)){for(var t,i=e.length,u=0,f=e;u<f.length;u+=1){var m=Ki(f[u]);if(t){if(t===m)continue;t=at;break}t=m}return ui(t||at,i)}return Gt}function xa(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof ci||e instanceof nr||e instanceof qr?e.toString():JSON.stringify(e)}qr.prototype.toString=function(){return this.name},qr.fromString=function(e){return e?new qr({name:e,available:!1}):null},qr.prototype.serialize=function(){return["image",this.name]};var Mr=function(e,t){this.type=e,this.value=t};Mr.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!ba(e[1]))return t.error("invalid value");var i=e[1],u=Ki(i),f=t.expectedType;return u.kind!=="array"||u.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(u=f),new Mr(u,i)},Mr.prototype.evaluate=function(){return this.value},Mr.prototype.eachChild=function(){},Mr.prototype.outputDefined=function(){return!0},Mr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ci?["rgba"].concat(this.value.toArray()):this.value instanceof nr?this.value.serialize():this.value};var ar=function(e){this.name="ExpressionEvaluationError",this.message=e};ar.prototype.toJSON=function(){return this.message};var yn={string:nt,number:ze,boolean:Ye,object:Gt},Di=function(e,t){this.type=e,this.args=t};Di.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,u=1,f=e[0];if(f==="array"){var m,x;if(e.length>2){var E=e[1];if(typeof E!="string"||!(E in yn)||E==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);m=yn[E],u++}else m=at;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);x=e[2],u++}i=ui(m,x)}else i=yn[f];for(var T=[];u<e.length;u++){var A=t.parse(e[u],u,at);if(!A)return null;T.push(A)}return new Di(i,T)},Di.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!gi(this.type,Ki(i)))return i;if(t===this.args.length-1)throw new ar("Expected value to be of type "+ti(this.type)+", but found "+ti(Ki(i))+" instead.")}return null},Di.prototype.eachChild=function(e){this.args.forEach(e)},Di.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Di.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var u=e.N;(typeof u=="number"||this.args.length>1)&&t.push(u)}}return t.concat(this.args.map(function(f){return f.serialize()}))};var On=function(e){this.type=wi,this.sections=e};On.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var u=[],f=!1,m=1;m<=e.length-1;++m){var x=e[m];if(f&&typeof x=="object"&&!Array.isArray(x)){f=!1;var E=null;if(x["font-scale"]&&!(E=t.parse(x["font-scale"],1,ze)))return null;var T=null;if(x["text-font"]&&!(T=t.parse(x["text-font"],1,ui(nt))))return null;var A=null;if(x["text-color"]&&!(A=t.parse(x["text-color"],1,et)))return null;var M=u[u.length-1];M.scale=E,M.font=T,M.textColor=A}else{var R=t.parse(e[m],1,at);if(!R)return null;var U=R.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,u.push({content:R,scale:null,font:null,textColor:null})}}return new On(u)},On.prototype.evaluate=function(e){return new nr(this.sections.map(function(t){var i=t.content.evaluate(e);return Ki(i)===Wt?new fa("",i,null,null,null):new fa(xa(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},On.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var u=i[t];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},On.prototype.outputDefined=function(){return!1},On.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var u=i[t];e.push(u.content.serialize());var f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),e.push(f)}return e};var Sn=function(e){this.type=Wt,this.input=e};Sn.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,nt);return i?new Sn(i):t.error("No image name provided.")},Sn.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=qr.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},Sn.prototype.eachChild=function(e){e(this.input)},Sn.prototype.outputDefined=function(){return!1},Sn.prototype.serialize=function(){return["image",this.input.serialize()]};var os={"to-boolean":Ye,"to-color":et,"to-number":ze,"to-string":nt},Dr=function(e,t){this.type=e,this.args=t};Dr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var u=os[i],f=[],m=1;m<e.length;m++){var x=t.parse(e[m],m,at);if(!x)return null;f.push(x)}return new Dr(u,f)},Dr.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var t,i,u=0,f=this.args;u<f.length;u+=1){if(i=null,(t=f[u].evaluate(e))instanceof ci)return t;if(typeof t=="string"){var m=e.parseColor(t);if(m)return m}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Va(t[0],t[1],t[2],t[3])))return new ci(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ar(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var x=null,E=0,T=this.args;E<T.length;E+=1){if((x=T[E].evaluate(e))===null)return 0;var A=Number(x);if(!isNaN(A))return A}throw new ar("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?nr.fromString(xa(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?qr.fromString(xa(this.args[0].evaluate(e))):xa(this.args[0].evaluate(e))},Dr.prototype.eachChild=function(e){this.args.forEach(e)},Dr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Dr.prototype.serialize=function(){if(this.type.kind==="formatted")return new On([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Sn(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var wa=["Unknown","Point","LineString","Polygon"],Xr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Xr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Xr.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?wa[this.feature.type]:this.feature.type:null},Xr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Xr.prototype.canonicalID=function(){return this.canonical},Xr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Xr.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ci.parse(e)),t};var Lr=function(e,t,i,u){this.name=e,this.type=t,this._evaluate=i,this.args=u};Lr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Lr.prototype.eachChild=function(e){this.args.forEach(e)},Lr.prototype.outputDefined=function(){return!1},Lr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Lr.parse=function(e,t){var i,u=e[0],f=Lr.definitions[u];if(!f)return t.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var m=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,E=x.filter(function(Tt){var ht=Tt[0];return!Array.isArray(ht)||ht.length===e.length-1}),T=null,A=0,M=E;A<M.length;A+=1){var R=M[A],U=R[0],G=R[1];T=new Hi(t.registry,t.path,null,t.scope);for(var Q=[],$=!1,pe=1;pe<e.length;pe++){var ae=e[pe],me=Array.isArray(U)?U[pe-1]:U.type,be=T.parse(ae,1+Q.length,me);if(!be){$=!0;break}Q.push(be)}if(!$)if(Array.isArray(U)&&U.length!==Q.length)T.error("Expected "+U.length+" arguments, but found "+Q.length+" instead.");else{for(var we=0;we<Q.length;we++){var Ee=Array.isArray(U)?U[we]:U.type,Ce=Q[we];T.concat(we+1).checkSubtype(Ee,Ce.type)}if(T.errors.length===0)return new Lr(u,m,G,Q)}}if(E.length===1)(i=t.errors).push.apply(i,T.errors);else{for(var je=(E.length?E:x).map(function(Tt){var ht;return ht=Tt[0],Array.isArray(ht)?"("+ht.map(ti).join(", ")+")":"("+ti(ht.type)+"...)"}).join(" | "),$e=[],Et=1;Et<e.length;Et++){var ct=t.parse(e[Et],1+$e.length);if(!ct)return null;$e.push(ti(ct.type))}t.error("Expected arguments of type "+je+", but found ("+$e.join(", ")+") instead.")}return null},Lr.register=function(e,t){for(var i in Lr.definitions=t,t)e[i]=Lr};var ea=function(e,t,i){this.type=ei,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function Yr(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Sa(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function ss(e,t){var i=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(i*f*8192),Math.round(u*f*8192)]}function Nl(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function fo(e,t){for(var i,u,f,m,x,E,T,A=!1,M=0,R=t.length;M<R;M++)for(var U=t[M],G=0,Q=U.length;G<Q-1;G++){if((m=(i=e)[0]-(u=U[G])[0])*(T=i[1]-(f=U[G+1])[1])-(E=i[0]-f[0])*(x=i[1]-u[1])==0&&m*E<=0&&x*T<=0)return!1;Nl(e,U[G],U[G+1])&&(A=!A)}return A}function Ul(e,t){for(var i=0;i<t.length;i++)if(fo(e,t[i]))return!0;return!1}function No(e,t,i,u){var f=u[0]-i[0],m=u[1]-i[1],x=(e[0]-i[0])*m-f*(e[1]-i[1]),E=(t[0]-i[0])*m-f*(t[1]-i[1]);return x>0&&E<0||x<0&&E>0}function Vl(e,t,i){for(var u=0,f=i;u<f.length;u+=1)for(var m=f[u],x=0;x<m.length-1;++x)if((R=[(M=m[x+1])[0]-(A=m[x])[0],M[1]-A[1]])[0]*(U=[(T=t)[0]-(E=e)[0],T[1]-E[1]])[1]-R[1]*U[0]!=0&&No(E,T,A,M)&&No(A,M,E,T))return!0;var E,T,A,M,R,U;return!1}function Uo(e,t){for(var i=0;i<e.length;++i)if(!fo(e[i],t))return!1;for(var u=0;u<e.length-1;++u)if(Vl(e[u],e[u+1],t))return!1;return!0}function Vs(e,t){for(var i=0;i<t.length;i++)if(Uo(e,t[i]))return!0;return!1}function ja(e,t,i){for(var u=[],f=0;f<e.length;f++){for(var m=[],x=0;x<e[f].length;x++){var E=ss(e[f][x],i);Yr(t,E),m.push(E)}u.push(m)}return u}function ls(e,t,i){for(var u=[],f=0;f<e.length;f++){var m=ja(e[f],t,i);u.push(m)}return u}function mo(e,t,i,u){if(e[0]<i[0]||e[0]>i[2]){var f=.5*u,m=e[0]-i[0]>f?-u:i[0]-e[0]>f?u:0;m===0&&(m=e[0]-i[2]>f?-u:i[2]-e[0]>f?u:0),e[0]+=m}Yr(t,e)}function js(e,t,i,u){for(var f=8192*Math.pow(2,u.z),m=[8192*u.x,8192*u.y],x=[],E=0,T=e;E<T.length;E+=1)for(var A=0,M=T[E];A<M.length;A+=1){var R=M[A],U=[R.x+m[0],R.y+m[1]];mo(U,t,i,f),x.push(U)}return x}function qa(e,t,i,u){for(var f,m=8192*Math.pow(2,u.z),x=[8192*u.x,8192*u.y],E=[],T=0,A=e;T<A.length;T+=1){for(var M=[],R=0,U=A[T];R<U.length;R+=1){var G=U[R],Q=[G.x+x[0],G.y+x[1]];Yr(t,Q),M.push(Q)}E.push(M)}if(t[2]-t[0]<=m/2){(f=t)[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var $=0,pe=E;$<pe.length;$+=1)for(var ae=0,me=pe[$];ae<me.length;ae+=1)mo(me[ae],t,i,m)}return E}ea.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var u=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Ye);if(!u)return null;var f=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Ye);if(!f)return null;var m=null;return i.locale&&!(m=t.parse(i.locale,1,nt))?null:new ea(u,f,m)},ea.prototype.evaluate=function(e){return new Cr(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},ea.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},ea.prototype.outputDefined=function(){return!1},ea.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Nn=function(e,t){this.type=Ye,this.geojson=e,this.geometries=t};function Ea(e){if(e instanceof Lr&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Nn)return!1;var t=!0;return e.eachChild(function(i){t&&!Ea(i)&&(t=!1)}),t}function ge(e){if(e instanceof Lr&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!ge(i)&&(t=!1)}),t}function _n(e,t){if(e instanceof Lr&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(u){i&&!_n(u,t)&&(i=!1)}),i}Nn.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(ba(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var u=0;u<i.features.length;++u){var f=i.features[u].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Nn(i,i.features[u].geometry)}else if(i.type==="Feature"){var m=i.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Nn(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Nn(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Nn.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],m=t.canonicalID();if(i.type==="Polygon"){var x=ja(i.coordinates,f,m),E=js(t.geometry(),u,f,m);if(!Sa(u,f))return!1;for(var T=0,A=E;T<A.length;T+=1)if(!fo(A[T],x))return!1}if(i.type==="MultiPolygon"){var M=ls(i.coordinates,f,m),R=js(t.geometry(),u,f,m);if(!Sa(u,f))return!1;for(var U=0,G=R;U<G.length;U+=1)if(!Ul(G[U],M))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],m=t.canonicalID();if(i.type==="Polygon"){var x=ja(i.coordinates,f,m),E=qa(t.geometry(),u,f,m);if(!Sa(u,f))return!1;for(var T=0,A=E;T<A.length;T+=1)if(!Uo(A[T],x))return!1}if(i.type==="MultiPolygon"){var M=ls(i.coordinates,f,m),R=qa(t.geometry(),u,f,m);if(!Sa(u,f))return!1;for(var U=0,G=R;U<G.length;U+=1)if(!Vs(G[U],M))return!1}return!0}(e,this.geometries)}return!1},Nn.prototype.eachChild=function(){},Nn.prototype.outputDefined=function(){return!0},Nn.prototype.serialize=function(){return["within",this.geojson]};var Jr=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Jr.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Jr(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Jr.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Jr.prototype.eachChild=function(){},Jr.prototype.outputDefined=function(){return!1},Jr.prototype.serialize=function(){return["var",this.name]};var Hi=function(e,t,i,u,f){t===void 0&&(t=[]),u===void 0&&(u=new gt),f===void 0&&(f=[]),this.registry=e,this.path=t,this.key=t.map(function(m){return"["+m+"]"}).join(""),this.scope=u,this.errors=f,this.expectedType=i};function ka(e,t){for(var i,u=e.length-1,f=0,m=u,x=0;f<=m;)if((i=e[x=Math.floor((f+m)/2)])<=t){if(x===u||t<e[x+1])return x;f=x+1}else{if(!(i>t))throw new ar("Input is not a number.");m=x-1}return 0}Hi.prototype.parse=function(e,t,i,u,f){return f===void 0&&(f={}),t?this.concat(t,i,u)._parse(e,f):this._parse(e,f)},Hi.prototype._parse=function(e,t){function i(A,M,R){return R==="assert"?new Di(M,[A]):R==="coerce"?new Dr(M,[A]):A}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if(typeof u!="string")return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var f=this.registry[u];if(f){var m=f.parse(e,this);if(!m)return null;if(this.expectedType){var x=this.expectedType,E=m.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||E.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(x,E))return null}else m=i(m,x,t.typeAnnotation||"coerce");else m=i(m,x,t.typeAnnotation||"assert")}if(!(m instanceof Mr)&&m.type.kind!=="resolvedImage"&&function A(M){if(M instanceof Jr)return A(M.boundExpression);if(M instanceof Lr&&M.name==="error"||M instanceof ea||M instanceof Nn)return!1;var R=M instanceof Dr||M instanceof Di,U=!0;return M.eachChild(function(G){U=R?U&&A(G):U&&G instanceof Mr}),!!U&&Ea(M)&&_n(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(m)){var T=new Xr;try{m=new Mr(m.type,m.evaluate(T))}catch(A){return this.error(A.message),null}}return m}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Hi.prototype.concat=function(e,t,i){var u=typeof e=="number"?this.path.concat(e):this.path,f=i?this.scope.concat(i):this.scope;return new Hi(this.registry,u,t||null,f,this.errors)},Hi.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var u=""+this.key+t.map(function(f){return"["+f+"]"}).join("");this.errors.push(new Be(u,e))},Hi.prototype.checkSubtype=function(e,t){var i=gi(e,t);return i&&this.error(i),i};var Un=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var u=0,f=i;u<f.length;u+=1){var m=f[u],x=m[1];this.labels.push(m[0]),this.outputs.push(x)}};function kr(e,t,i){return e*(1-i)+t*i}Un.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,ze);if(!i)return null;var u=[],f=null;t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(var m=1;m<e.length;m+=2){var x=m===1?-1/0:e[m],E=e[m+1],T=m,A=m+1;if(typeof x!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=x)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);var M=t.parse(E,A,f);if(!M)return null;f=f||M.type,u.push([x,M])}return new Un(f,i,u)},Un.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return i[0].evaluate(e);var f=t.length;return u>=t[f-1]?i[f-1].evaluate(e):i[ka(t,u)].evaluate(e)},Un.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Un.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Un.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Vo=Object.freeze({__proto__:null,number:kr,color:function(e,t,i){return new ci(kr(e.r,t.r,i),kr(e.g,t.g,i),kr(e.b,t.b,i),kr(e.a,t.a,i))},array:function(e,t,i){return e.map(function(u,f){return kr(u,t[f],i)})}}),rc=6/29*3*(6/29),Lp=Math.PI/180,Rp=180/Math.PI;function jl(e){return e>.008856451679035631?Math.pow(e,1/3):e/rc+4/29}function ql(e){return e>6/29?e*e*e:rc*(e-4/29)}function Gl(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Zl(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nc(e){var t=Zl(e.r),i=Zl(e.g),u=Zl(e.b),f=jl((.4124564*t+.3575761*i+.1804375*u)/.95047),m=jl((.2126729*t+.7151522*i+.072175*u)/1);return{l:116*m-16,a:500*(f-m),b:200*(m-jl((.0193339*t+.119192*i+.9503041*u)/1.08883)),alpha:e.a}}function ac(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,u=isNaN(e.b)?t:t-e.b/200;return t=1*ql(t),i=.95047*ql(i),u=1.08883*ql(u),new ci(Gl(3.2404542*i-1.5371385*t-.4985314*u),Gl(-.969266*i+1.8760108*t+.041556*u),Gl(.0556434*i-.2040259*t+1.0572252*u),e.alpha)}function Bp(e,t,i){var u=t-e;return e+i*(u>180||u<-180?u-360*Math.round(u/360):u)}var us={forward:nc,reverse:ac,interpolate:function(e,t,i){return{l:kr(e.l,t.l,i),a:kr(e.a,t.a,i),b:kr(e.b,t.b,i),alpha:kr(e.alpha,t.alpha,i)}}},cs={forward:function(e){var t=nc(e),i=t.l,u=t.a,f=t.b,m=Math.atan2(f,u)*Rp;return{h:m<0?m+360:m,c:Math.sqrt(u*u+f*f),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Lp,i=e.c;return ac({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Bp(e.h,t.h,i),c:kr(e.c,t.c,i),l:kr(e.l,t.l,i),alpha:kr(e.alpha,t.alpha,i)}}},oc=Object.freeze({__proto__:null,lab:us,hcl:cs}),on=function(e,t,i,u,f){this.type=e,this.operator=t,this.interpolation=i,this.input=u,this.labels=[],this.outputs=[];for(var m=0,x=f;m<x.length;m+=1){var E=x[m],T=E[1];this.labels.push(E[0]),this.outputs.push(T)}};function Kl(e,t,i,u){var f=u-i,m=e-i;return f===0?0:t===1?m/f:(Math.pow(t,m)-1)/(Math.pow(t,f)-1)}on.interpolationFactor=function(e,t,i,u){var f=0;if(e.name==="exponential")f=Kl(t,e.base,i,u);else if(e.name==="linear")f=Kl(t,1,i,u);else if(e.name==="cubic-bezier"){var m=e.controlPoints;f=new I(m[0],m[1],m[2],m[3]).solve(Kl(t,1,i,u))}return f},on.parse=function(e,t){var i=e[0],u=e[1],f=e[2],m=e.slice(3);if(!Array.isArray(u)||u.length===0)return t.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){var x=u[1];if(typeof x!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:x}}else{if(u[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(u[0]),1,0);var E=u.slice(1);if(E.length!==4||E.some(function(pe){return typeof pe!="number"||pe<0||pe>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:E}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(f=t.parse(f,2,ze)))return null;var T=[],A=null;i==="interpolate-hcl"||i==="interpolate-lab"?A=et:t.expectedType&&t.expectedType.kind!=="value"&&(A=t.expectedType);for(var M=0;M<m.length;M+=2){var R=m[M],U=m[M+1],G=M+3,Q=M+4;if(typeof R!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(T.length&&T[T.length-1][0]>=R)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);var $=t.parse(U,Q,A);if(!$)return null;A=A||$.type,T.push([R,$])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new on(A,i,u,f,T):t.error("Type "+ti(A)+" is not interpolatable.")},on.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return i[0].evaluate(e);var f=t.length;if(u>=t[f-1])return i[f-1].evaluate(e);var m=ka(t,u),x=on.interpolationFactor(this.interpolation,u,t[m],t[m+1]),E=i[m].evaluate(e),T=i[m+1].evaluate(e);return this.operator==="interpolate"?Vo[this.type.kind.toLowerCase()](E,T,x):this.operator==="interpolate-hcl"?cs.reverse(cs.interpolate(cs.forward(E),cs.forward(T),x)):us.reverse(us.interpolate(us.forward(E),us.forward(T),x))},on.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},on.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},on.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var Ga=function(e,t){this.type=e,this.args=t};Ga.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,u=t.expectedType;u&&u.kind!=="value"&&(i=u);for(var f=[],m=0,x=e.slice(1);m<x.length;m+=1){var E=t.parse(x[m],1+f.length,i,void 0,{typeAnnotation:"omit"});if(!E)return null;i=i||E.type,f.push(E)}var T=u&&f.some(function(A){return gi(u,A.type)});return new Ga(T?at:i,f)},Ga.prototype.evaluate=function(e){for(var t,i=null,u=0,f=0,m=this.args;f<m.length&&(u++,(i=m[f].evaluate(e))&&i instanceof qr&&!i.available&&(t||(t=i.name),i=null,u===this.args.length&&(i=t)),i===null);f+=1);return i},Ga.prototype.eachChild=function(e){this.args.forEach(e)},Ga.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ga.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Za=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Za.prototype.evaluate=function(e){return this.result.evaluate(e)},Za.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},Za.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],u=1;u<e.length-1;u+=2){var f=e[u];if(typeof f!="string")return t.error("Expected string, but found "+typeof f+" instead.",u);if(/[^a-zA-Z0-9_]/.test(f))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);var m=t.parse(e[u+1],u+1);if(!m)return null;i.push([f,m])}var x=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return x?new Za(i,x):null},Za.prototype.outputDefined=function(){return this.result.outputDefined()},Za.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var u=i[t];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var go=function(e,t,i){this.type=e,this.index=t,this.input=i};go.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,ze),u=t.parse(e[2],2,ui(t.expectedType||at));return i&&u?new go(u.type.itemType,i,u):null},go.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ar("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new ar("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new ar("Array index must be an integer, but found "+t+" instead.");return i[t]},go.prototype.eachChild=function(e){e(this.index),e(this.input)},go.prototype.outputDefined=function(){return!1},go.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var yo=function(e,t){this.type=Ye,this.needle=e,this.haystack=t};yo.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,at),u=t.parse(e[2],2,at);return i&&u?Ni(i.type,[Ye,nt,ze,ut,at])?new yo(i,u):t.error("Expected first argument to be of type boolean, string, number or null, but found "+ti(i.type)+" instead"):null},yo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!bi(t,["boolean","string","number","null"]))throw new ar("Expected first argument to be of type boolean, string, number or null, but found "+ti(Ki(t))+" instead.");if(!bi(i,["string","array"]))throw new ar("Expected second argument to be of type array or string, but found "+ti(Ki(i))+" instead.");return i.indexOf(t)>=0},yo.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},yo.prototype.outputDefined=function(){return!0},yo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ka=function(e,t,i){this.type=ze,this.needle=e,this.haystack=t,this.fromIndex=i};Ka.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,at),u=t.parse(e[2],2,at);if(!i||!u)return null;if(!Ni(i.type,[Ye,nt,ze,ut,at]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+ti(i.type)+" instead");if(e.length===4){var f=t.parse(e[3],3,ze);return f?new Ka(i,u,f):null}return new Ka(i,u)},Ka.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!bi(t,["boolean","string","number","null"]))throw new ar("Expected first argument to be of type boolean, string, number or null, but found "+ti(Ki(t))+" instead.");if(!bi(i,["string","array"]))throw new ar("Expected second argument to be of type array or string, but found "+ti(Ki(i))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return i.indexOf(t,u)}return i.indexOf(t)},Ka.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Ka.prototype.outputDefined=function(){return!1},Ka.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var _o=function(e,t,i,u,f,m){this.inputType=e,this.type=t,this.input=i,this.cases=u,this.outputs=f,this.otherwise=m};_o.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,u;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(var f={},m=[],x=2;x<e.length-1;x+=2){var E=e[x],T=e[x+1];Array.isArray(E)||(E=[E]);var A=t.concat(x);if(E.length===0)return A.error("Expected at least one branch label.");for(var M=0,R=E;M<R.length;M+=1){var U=R[M];if(typeof U!="number"&&typeof U!="string")return A.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof U=="number"&&Math.floor(U)!==U)return A.error("Numeric branch labels must be integer values.");if(i){if(A.checkSubtype(i,Ki(U)))return null}else i=Ki(U);if(f[String(U)]!==void 0)return A.error("Branch labels must be unique.");f[String(U)]=m.length}var G=t.parse(T,x,u);if(!G)return null;u=u||G.type,m.push(G)}var Q=t.parse(e[1],1,at);if(!Q)return null;var $=t.parse(e[e.length-1],e.length-1,u);return $?Q.type.kind!=="value"&&t.concat(1).checkSubtype(i,Q.type)?null:new _o(i,u,Q,f,m,$):null},_o.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Ki(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},_o.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},_o.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},_o.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],u={},f=0,m=Object.keys(this.cases).sort();f<m.length;f+=1){var x=m[f];(R=u[this.cases[x]])===void 0?(u[this.cases[x]]=i.length,i.push([this.cases[x],[x]])):i[R][1].push(x)}for(var E=function(G){return e.inputType.kind==="number"?Number(G):G},T=0,A=i;T<A.length;T+=1){var M=A[T],R=M[0],U=M[1];t.push(U.length===1?E(U[0]):U.map(E)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var vo=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};vo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var u=[],f=1;f<e.length-1;f+=2){var m=t.parse(e[f],f,Ye);if(!m)return null;var x=t.parse(e[f+1],f+1,i);if(!x)return null;u.push([m,x]),i=i||x.type}var E=t.parse(e[e.length-1],e.length-1,i);return E?new vo(i,u,E):null},vo.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var u=i[t],f=u[1];if(u[0].evaluate(e))return f.evaluate(e)}return this.otherwise.evaluate(e)},vo.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var u=i[t],f=u[1];e(u[0]),e(f)}e(this.otherwise)},vo.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},vo.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ha=function(e,t,i,u){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=u};function sc(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function lc(e,t,i,u){return u.compare(t,i)===0}function Ri(e,t,i){var u=e!=="=="&&e!=="!=";return function(){function f(m,x,E){this.type=Ye,this.lhs=m,this.rhs=x,this.collator=E,this.hasUntypedArgument=m.type.kind==="value"||x.type.kind==="value"}return f.parse=function(m,x){if(m.length!==3&&m.length!==4)return x.error("Expected two or three arguments.");var E=m[0],T=x.parse(m[1],1,at);if(!T)return null;if(!sc(E,T.type))return x.concat(1).error('"'+E+`" comparisons are not supported for type '`+ti(T.type)+"'.");var A=x.parse(m[2],2,at);if(!A)return null;if(!sc(E,A.type))return x.concat(2).error('"'+E+`" comparisons are not supported for type '`+ti(A.type)+"'.");if(T.type.kind!==A.type.kind&&T.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot compare types '"+ti(T.type)+"' and '"+ti(A.type)+"'.");u&&(T.type.kind==="value"&&A.type.kind!=="value"?T=new Di(A.type,[T]):T.type.kind!=="value"&&A.type.kind==="value"&&(A=new Di(T.type,[A])));var M=null;if(m.length===4){if(T.type.kind!=="string"&&A.type.kind!=="string"&&T.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(M=x.parse(m[3],3,ei)))return null}return new f(T,A,M)},f.prototype.evaluate=function(m){var x=this.lhs.evaluate(m),E=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){var T=Ki(x),A=Ki(E);if(T.kind!==A.kind||T.kind!=="string"&&T.kind!=="number")throw new ar('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+T.kind+", "+A.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var M=Ki(x),R=Ki(E);if(M.kind!=="string"||R.kind!=="string")return t(m,x,E)}return this.collator?i(m,x,E,this.collator.evaluate(m)):t(m,x,E)},f.prototype.eachChild=function(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)},f.prototype.outputDefined=function(){return!0},f.prototype.serialize=function(){var m=[e];return this.eachChild(function(x){m.push(x.serialize())}),m},f}()}Ha.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,at),u=t.parse(e[2],2,ze);if(!i||!u)return null;if(!Ni(i.type,[ui(at),nt,at]))return t.error("Expected first argument to be of type array or string, but found "+ti(i.type)+" instead");if(e.length===4){var f=t.parse(e[3],3,ze);return f?new Ha(i.type,i,u,f):null}return new Ha(i.type,i,u)},Ha.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!bi(t,["string","array"]))throw new ar("Expected first argument to be of type array or string, but found "+ti(Ki(t))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return t.slice(i,u)}return t.slice(i)},Ha.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Ha.prototype.outputDefined=function(){return!1},Ha.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Fp=Ri("==",function(e,t,i){return t===i},lc),qs=Ri("!=",function(e,t,i){return t!==i},function(e,t,i,u){return!lc(0,t,i,u)}),uc=Ri("<",function(e,t,i){return t<i},function(e,t,i,u){return u.compare(t,i)<0}),cc=Ri(">",function(e,t,i){return t>i},function(e,t,i,u){return u.compare(t,i)>0}),pc=Ri("<=",function(e,t,i){return t<=i},function(e,t,i,u){return u.compare(t,i)<=0}),hc=Ri(">=",function(e,t,i){return t>=i},function(e,t,i,u){return u.compare(t,i)>=0}),bo=function(e,t,i,u,f){this.type=nt,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=u,this.maxFractionDigits=f};bo.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,ze);if(!i)return null;var u=e[2];if(typeof u!="object"||Array.isArray(u))return t.error("NumberFormat options argument must be an object.");var f=null;if(u.locale&&!(f=t.parse(u.locale,1,nt)))return null;var m=null;if(u.currency&&!(m=t.parse(u.currency,1,nt)))return null;var x=null;if(u["min-fraction-digits"]&&!(x=t.parse(u["min-fraction-digits"],1,ze)))return null;var E=null;return u["max-fraction-digits"]&&!(E=t.parse(u["max-fraction-digits"],1,ze))?null:new bo(i,f,m,x,E)},bo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},bo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},bo.prototype.outputDefined=function(){return!1},bo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Wa=function(e){this.type=ze,this.input=e};Wa.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+ti(i.type)+" instead."):new Wa(i):null},Wa.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new ar("Expected value to be of type string or array, but found "+ti(Ki(t))+" instead.")},Wa.prototype.eachChild=function(e){e(this.input)},Wa.prototype.outputDefined=function(){return!1},Wa.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var xo={"==":Fp,"!=":qs,">":cc,"<":uc,">=":hc,"<=":pc,array:Di,at:go,boolean:Di,case:vo,coalesce:Ga,collator:ea,format:On,image:Sn,in:yo,"index-of":Ka,interpolate:on,"interpolate-hcl":on,"interpolate-lab":on,length:Wa,let:Za,literal:Mr,match:_o,number:Di,"number-format":bo,object:Di,slice:Ha,step:Un,string:Di,"to-boolean":Dr,"to-color":Dr,"to-number":Dr,"to-string":Dr,var:Jr,within:Nn};function fc(e,t){var i=t[0],u=t[1],f=t[2],m=t[3];i=i.evaluate(e),u=u.evaluate(e),f=f.evaluate(e);var x=m?m.evaluate(e):1,E=Va(i,u,f,x);if(E)throw new ar(E);return new ci(i/255*x,u/255*x,f/255*x,x)}function dc(e,t){return e in t}function Hl(e,t){var i=t[e];return i===void 0?null:i}function wo(e){return{type:e}}function mc(e){return{result:"success",value:e}}function So(e){return{result:"error",value:e}}function Eo(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function gc(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ps(e){return!!e.expression&&e.expression.interpolated}function Ui(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Gs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Op(e){return e}function jo(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function yc(e,t,i,u,f){return jo(typeof i===f?u[i]:void 0,e.default,t.default)}function Np(e,t,i){if(Ui(i)!=="number")return jo(e.default,t.default);var u=e.stops.length;if(u===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[u-1][0])return e.stops[u-1][1];var f=ka(e.stops.map(function(m){return m[0]}),i);return e.stops[f][1]}function _c(e,t,i){var u=e.base!==void 0?e.base:1;if(Ui(i)!=="number")return jo(e.default,t.default);var f=e.stops.length;if(f===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[f-1][0])return e.stops[f-1][1];var m=ka(e.stops.map(function(R){return R[0]}),i),x=function(R,U,G,Q){var $=Q-G,pe=R-G;return $===0?0:U===1?pe/$:(Math.pow(U,pe)-1)/(Math.pow(U,$)-1)}(i,u,e.stops[m][0],e.stops[m+1][0]),E=e.stops[m][1],T=e.stops[m+1][1],A=Vo[t.type]||Op;if(e.colorSpace&&e.colorSpace!=="rgb"){var M=oc[e.colorSpace];A=function(R,U){return M.reverse(M.interpolate(M.forward(R),M.forward(U),x))}}return typeof E.evaluate=="function"?{evaluate:function(){for(var R=[],U=arguments.length;U--;)R[U]=arguments[U];var G=E.evaluate.apply(void 0,R),Q=T.evaluate.apply(void 0,R);if(G!==void 0&&Q!==void 0)return A(G,Q,x)}}:A(E,T,x)}function Zs(e,t,i){return t.type==="color"?i=ci.parse(i):t.type==="formatted"?i=nr.fromString(i.toString()):t.type==="resolvedImage"?i=qr.fromString(i.toString()):Ui(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),jo(i,e.default,t.default)}Lr.register(xo,{error:[{kind:"error"},[nt],function(e,t){throw new ar(t[0].evaluate(e))}],typeof:[nt,[at],function(e,t){return ti(Ki(t[0].evaluate(e)))}],"to-rgba":[ui(ze,4),[et],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[et,[ze,ze,ze],fc],rgba:[et,[ze,ze,ze,ze],fc],has:{type:Ye,overloads:[[[nt],function(e,t){return dc(t[0].evaluate(e),e.properties())}],[[nt,Gt],function(e,t){var i=t[1];return dc(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:at,overloads:[[[nt],function(e,t){return Hl(t[0].evaluate(e),e.properties())}],[[nt,Gt],function(e,t){var i=t[1];return Hl(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[at,[nt],function(e,t){return Hl(t[0].evaluate(e),e.featureState||{})}],properties:[Gt,[],function(e){return e.properties()}],"geometry-type":[nt,[],function(e){return e.geometryType()}],id:[at,[],function(e){return e.id()}],zoom:[ze,[],function(e){return e.globals.zoom}],"heatmap-density":[ze,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[ze,[],function(e){return e.globals.lineProgress||0}],accumulated:[at,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[ze,wo(ze),function(e,t){for(var i=0,u=0,f=t;u<f.length;u+=1)i+=f[u].evaluate(e);return i}],"*":[ze,wo(ze),function(e,t){for(var i=1,u=0,f=t;u<f.length;u+=1)i*=f[u].evaluate(e);return i}],"-":{type:ze,overloads:[[[ze,ze],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[ze],function(e,t){return-t[0].evaluate(e)}]]},"/":[ze,[ze,ze],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[ze,[ze,ze],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[ze,[],function(){return Math.LN2}],pi:[ze,[],function(){return Math.PI}],e:[ze,[],function(){return Math.E}],"^":[ze,[ze,ze],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[ze,[ze],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[ze,[ze],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[ze,[ze],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[ze,[ze],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[ze,[ze],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[ze,[ze],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[ze,[ze],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[ze,[ze],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[ze,[ze],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[ze,[ze],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[ze,wo(ze),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[ze,wo(ze),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[ze,[ze],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[ze,[ze],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[ze,[ze],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[ze,[ze],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Ye,[nt,at],function(e,t){var i=t[0],u=t[1];return e.properties()[i.value]===u.value}],"filter-id-==":[Ye,[at],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Ye,[nt],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Ye,[nt,at],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f<m}],"filter-id-<":[Ye,[at],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u<f}],"filter->":[Ye,[nt,at],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f>m}],"filter-id->":[Ye,[at],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u>f}],"filter-<=":[Ye,[nt,at],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[Ye,[at],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u<=f}],"filter->=":[Ye,[nt,at],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[Ye,[at],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u>=f}],"filter-has":[Ye,[at],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Ye,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Ye,[ui(nt)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ye,[ui(at)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ye,[nt,ui(at)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Ye,[nt,ui(at)],function(e,t){var i=t[0],u=t[1];return function(f,m,x,E){for(;x<=E;){var T=x+E>>1;if(m[T]===f)return!0;m[T]>f?E=T-1:x=T+1}return!1}(e.properties()[i.value],u.value,0,u.value.length-1)}],all:{type:Ye,overloads:[[[Ye,Ye],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[wo(Ye),function(e,t){for(var i=0,u=t;i<u.length;i+=1)if(!u[i].evaluate(e))return!1;return!0}]]},any:{type:Ye,overloads:[[[Ye,Ye],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[wo(Ye),function(e,t){for(var i=0,u=t;i<u.length;i+=1)if(u[i].evaluate(e))return!0;return!1}]]},"!":[Ye,[Ye],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Ye,[nt],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[nt,[nt],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[nt,[nt],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[nt,wo(at),function(e,t){return t.map(function(i){return xa(i.evaluate(e))}).join("")}],"resolved-locale":[nt,[ei],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var qo=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Xr,this._defaultValue=t?function(i){return i.type==="color"&&Gs(i.default)?new ci(0,0,0,0):i.type==="color"?ci.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function hs(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in xo}function Ks(e,t){var i=new Hi(xo,[],t?function(f){var m={color:et,string:nt,number:ze,enum:nt,boolean:Ye,formatted:wi,resolvedImage:Wt};return f.type==="array"?ui(m[f.value]||at,f.length):m[f.type]}(t):void 0),u=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?mc(new qo(u,t)):So(i.errors)}qo.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=u,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)},qo.prototype.evaluate=function(e,t,i,u,f,m){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=u,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new ar("Expected value to be one of "+Object.keys(this._enumValues).map(function(E){return JSON.stringify(E)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}};var fs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!ge(t.expression)};fs.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,u,f,m)},fs.prototype.evaluate=function(e,t,i,u,f,m){return this._styleExpression.evaluate(e,t,i,u,f,m)};var Go=function(e,t,i,u){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!ge(t.expression),this.interpolationType=u};function vc(e,t){if((e=Ks(e,t)).result==="error")return e;var i=e.value.expression,u=Ea(i);if(!u&&!Eo(t))return So([new Be("","data expressions not supported")]);var f=_n(i,["zoom"]);if(!f&&!gc(t))return So([new Be("","zoom expressions not supported")]);var m=function x(E){var T=null;if(E instanceof Za)T=x(E.result);else if(E instanceof Ga)for(var A=0,M=E.args;A<M.length&&!(T=x(M[A]));A+=1);else(E instanceof Un||E instanceof on)&&E.input instanceof Lr&&E.input.name==="zoom"&&(T=E);return T instanceof Be||E.eachChild(function(R){var U=x(R);U instanceof Be?T=U:!T&&U?T=new Be("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):T&&U&&T!==U&&(T=new Be("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),T}(i);return m||f?m instanceof Be?So([m]):m instanceof on&&!ps(t)?So([new Be("",'"interpolate" expressions cannot be used with this property')]):mc(m?new Go(u?"camera":"composite",e.value,m.labels,m instanceof on?m.interpolation:void 0):new fs(u?"constant":"source",e.value)):So([new Be("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Go.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,u,f,m)},Go.prototype.evaluate=function(e,t,i,u,f,m){return this._styleExpression.evaluate(e,t,i,u,f,m)},Go.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?on.interpolationFactor(this.interpolationType,e,t,i):0};var Zo=function(e,t){this._parameters=e,this._specification=t,Le(this,function i(u,f){var m,x,E,T=f.type==="color",A=u.stops&&typeof u.stops[0][0]=="object",M=A||!(A||u.property!==void 0),R=u.type||(ps(f)?"exponential":"interval");if(T&&((u=Le({},u)).stops&&(u.stops=u.stops.map(function(ct){return[ct[0],ci.parse(ct[1])]})),u.default=ci.parse(u.default?u.default:f.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!oc[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if(R==="exponential")m=_c;else if(R==="interval")m=Np;else if(R==="categorical"){m=yc,x=Object.create(null);for(var U=0,G=u.stops;U<G.length;U+=1){var Q=G[U];x[Q[0]]=Q[1]}E=typeof u.stops[0][0]}else{if(R!=="identity")throw new Error('Unknown function type "'+R+'"');m=Zs}if(A){for(var $={},pe=[],ae=0;ae<u.stops.length;ae++){var me=u.stops[ae],be=me[0].zoom;$[be]===void 0&&($[be]={zoom:be,type:u.type,property:u.property,default:u.default,stops:[]},pe.push(be)),$[be].stops.push([me[0].value,me[1]])}for(var we=[],Ee=0,Ce=pe;Ee<Ce.length;Ee+=1){var je=Ce[Ee];we.push([$[je].zoom,i($[je],f)])}var $e={name:"linear"};return{kind:"composite",interpolationType:$e,interpolationFactor:on.interpolationFactor.bind(void 0,$e),zoomStops:we.map(function(ct){return ct[0]}),evaluate:function(ct,Tt){var ht=ct.zoom;return _c({stops:we,base:u.base},f,ht).evaluate(ht,Tt)}}}if(M){var Et=R==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:Et,interpolationFactor:on.interpolationFactor.bind(void 0,Et),zoomStops:u.stops.map(function(ct){return ct[0]}),evaluate:function(ct){return m(u,f,ct.zoom,x,E)}}}return{kind:"source",evaluate:function(ct,Tt){var ht=Tt&&Tt.properties?Tt.properties[u.property]:void 0;return ht===void 0?jo(u.default,f.default):m(u,f,ht,x,E)}}}(this._parameters,this._specification))};function da(e){var t=e.key,i=e.value,u=e.valueSpec||{},f=e.objectElementValidators||{},m=e.style,x=e.styleSpec,E=[],T=Ui(i);if(T!=="object")return[new re(t,i,"object expected, "+T+" found")];for(var A in i){var M=A.split(".")[0],R=u[M]||u["*"],U=void 0;if(f[M])U=f[M];else if(u[M])U=pi;else if(f["*"])U=f["*"];else{if(!u["*"]){E.push(new re(t,i[A],'unknown property "'+A+'"'));continue}U=pi}E=E.concat(U({key:(t&&t+".")+A,value:i[A],valueSpec:R,style:m,styleSpec:x,object:i,objectKey:A},i))}for(var G in u)f[G]||u[G].required&&u[G].default===void 0&&i[G]===void 0&&E.push(new re(t,i,'missing required property "'+G+'"'));return E}function bc(e){var t=e.value,i=e.valueSpec,u=e.style,f=e.styleSpec,m=e.key,x=e.arrayElementValidator||pi;if(Ui(t)!=="array")return[new re(m,t,"array expected, "+Ui(t)+" found")];if(i.length&&t.length!==i.length)return[new re(m,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new re(m,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var E={type:i.value,values:i.values};f.$version<7&&(E.function=i.function),Ui(i.value)==="object"&&(E=i.value);for(var T=[],A=0;A<t.length;A++)T=T.concat(x({array:t,arrayIndex:A,value:t[A],valueSpec:E,style:u,styleSpec:f,key:m+"["+A+"]"}));return T}function xc(e){var t=e.key,i=e.value,u=e.valueSpec,f=Ui(i);return f==="number"&&i!=i&&(f="NaN"),f!=="number"?[new re(t,i,"number expected, "+f+" found")]:"minimum"in u&&i<u.minimum?[new re(t,i,i+" is less than the minimum value "+u.minimum)]:"maximum"in u&&i>u.maximum?[new re(t,i,i+" is greater than the maximum value "+u.maximum)]:[]}function wc(e){var t,i,u,f=e.valueSpec,m=Fe(e.value.type),x={},E=m!=="categorical"&&e.value.property===void 0,T=!E,A=Ui(e.value.stops)==="array"&&Ui(e.value.stops[0])==="array"&&Ui(e.value.stops[0][0])==="object",M=da({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(G){if(m==="identity")return[new re(G.key,G.value,'identity function may not have a "stops" property')];var Q=[],$=G.value;return Q=Q.concat(bc({key:G.key,value:$,valueSpec:G.valueSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:R})),Ui($)==="array"&&$.length===0&&Q.push(new re(G.key,$,"array must have at least one stop")),Q},default:function(G){return pi({key:G.key,value:G.value,valueSpec:f,style:G.style,styleSpec:G.styleSpec})}}});return m==="identity"&&E&&M.push(new re(e.key,e.value,'missing required property "property"')),m==="identity"||e.value.stops||M.push(new re(e.key,e.value,'missing required property "stops"')),m==="exponential"&&e.valueSpec.expression&&!ps(e.valueSpec)&&M.push(new re(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(T&&!Eo(e.valueSpec)?M.push(new re(e.key,e.value,"property functions not supported")):E&&!gc(e.valueSpec)&&M.push(new re(e.key,e.value,"zoom functions not supported"))),m!=="categorical"&&!A||e.value.property!==void 0||M.push(new re(e.key,e.value,'"property" property is required')),M;function R(G){var Q=[],$=G.value,pe=G.key;if(Ui($)!=="array")return[new re(pe,$,"array expected, "+Ui($)+" found")];if($.length!==2)return[new re(pe,$,"array length 2 expected, length "+$.length+" found")];if(A){if(Ui($[0])!=="object")return[new re(pe,$,"object expected, "+Ui($[0])+" found")];if($[0].zoom===void 0)return[new re(pe,$,"object stop key must have zoom")];if($[0].value===void 0)return[new re(pe,$,"object stop key must have value")];if(u&&u>Fe($[0].zoom))return[new re(pe,$[0].zoom,"stop zoom values must appear in ascending order")];Fe($[0].zoom)!==u&&(u=Fe($[0].zoom),i=void 0,x={}),Q=Q.concat(da({key:pe+"[0]",value:$[0],valueSpec:{zoom:{}},style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:xc,value:U}}))}else Q=Q.concat(U({key:pe+"[0]",value:$[0],valueSpec:{},style:G.style,styleSpec:G.styleSpec},$));return hs(ke($[1]))?Q.concat([new re(pe+"[1]",$[1],"expressions are not allowed in function stops.")]):Q.concat(pi({key:pe+"[1]",value:$[1],valueSpec:f,style:G.style,styleSpec:G.styleSpec}))}function U(G,Q){var $=Ui(G.value),pe=Fe(G.value),ae=G.value!==null?G.value:Q;if(t){if($!==t)return[new re(G.key,ae,$+" stop domain type must match previous stop domain type "+t)]}else t=$;if($!=="number"&&$!=="string"&&$!=="boolean")return[new re(G.key,ae,"stop domain value must be a number, string, or boolean")];if($!=="number"&&m!=="categorical"){var me="number expected, "+$+" found";return Eo(f)&&m===void 0&&(me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new re(G.key,ae,me)]}return m!=="categorical"||$!=="number"||isFinite(pe)&&Math.floor(pe)===pe?m!=="categorical"&&$==="number"&&i!==void 0&&pe<i?[new re(G.key,ae,"stop domain values must appear in ascending order")]:(i=pe,m==="categorical"&&pe in x?[new re(G.key,ae,"stop domain values must be unique")]:(x[pe]=!0,[])):[new re(G.key,ae,"integer expected, found "+pe)]}}function ko(e){var t=(e.expressionContext==="property"?vc:Ks)(ke(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(u){return new re(""+e.key+u.key,e.value,u.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new re(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!ge(i))return[new re(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!ge(i))return[new re(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!_n(i,["zoom","feature-state"]))return[new re(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Ea(i))return[new re(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ds(e){var t=e.key,i=e.value,u=e.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(Fe(i))===-1&&f.push(new re(t,i,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(u.values).indexOf(Fe(i))===-1&&f.push(new re(t,i,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(i)+" found")),f}function Hs(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var u=i[t];if(!Hs(u)&&typeof u!="boolean")return!1}return!0;default:return!0}}Zo.deserialize=function(e){return new Zo(e._parameters,e._specification)},Zo.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Wl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ws(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Hs(e)||(e=Xs(e));var t=Ks(e,Wl);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,u,f){return t.value.evaluate(i,u,{},f)},needGeometry:function i(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(var f=1;f<u.length;f++)if(i(u[f]))return!0;return!1}(e)}}function Up(e,t){return e<t?-1:e>t?1:0}function Xs(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?Xl(e[1],e[2],"=="):i==="!="?Ys(Xl(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Xl(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(Xs))):i==="all"?["all"].concat(e.slice(1).map(Xs)):i==="none"?["all"].concat(e.slice(1).map(Xs).map(Ys)):i==="in"?Sc(e[1],e.slice(2)):i==="!in"?Ys(Sc(e[1],e.slice(2))):i==="has"?Ec(e[1]):i==="!has"?Ys(Ec(e[1])):i!=="within"||e}function Xl(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function Sc(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Up)]]:["filter-in-small",e,["literal",t]]}}function Ec(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ys(e){return["!",e]}function Yl(e){return Hs(ke(e.value))?ko(Le({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var u=i.value,f=i.key;if(Ui(u)!=="array")return[new re(f,u,"array expected, "+Ui(u)+" found")];var m,x=i.styleSpec,E=[];if(u.length<1)return[new re(f,u,"filter array must have at least 1 element")];switch(E=E.concat(ds({key:f+"[0]",value:u[0],valueSpec:x.filter_operator,style:i.style,styleSpec:i.styleSpec})),Fe(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Fe(u[1])==="$type"&&E.push(new re(f,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":u.length!==3&&E.push(new re(f,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&(m=Ui(u[1]))!=="string"&&E.push(new re(f+"[1]",u[1],"string expected, "+m+" found"));for(var T=2;T<u.length;T++)m=Ui(u[T]),Fe(u[1])==="$type"?E=E.concat(ds({key:f+"["+T+"]",value:u[T],valueSpec:x.geometry_type,style:i.style,styleSpec:i.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&E.push(new re(f+"["+T+"]",u[T],"string, number, or boolean expected, "+m+" found"));break;case"any":case"all":case"none":for(var A=1;A<u.length;A++)E=E.concat(t({key:f+"["+A+"]",value:u[A],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":m=Ui(u[1]),u.length!==2?E.push(new re(f,u,'filter array for "'+u[0]+'" operator must have 2 elements')):m!=="string"&&E.push(new re(f+"[1]",u[1],"string expected, "+m+" found"));break;case"within":m=Ui(u[1]),u.length!==2?E.push(new re(f,u,'filter array for "'+u[0]+'" operator must have 2 elements')):m!=="object"&&E.push(new re(f+"[1]",u[1],"object expected, "+m+" found"))}return E}(e)}function Jl(e,t){var i=e.key,u=e.style,f=e.styleSpec,m=e.value,x=e.objectKey,E=f[t+"_"+e.layerType];if(!E)return[];var T=x.match(/^(.*)-transition$/);if(t==="paint"&&T&&E[T[1]]&&E[T[1]].transition)return pi({key:i,value:m,valueSpec:f.transition,style:u,styleSpec:f});var A,M=e.valueSpec||E[x];if(!M)return[new re(i,m,'unknown property "'+x+'"')];if(Ui(m)==="string"&&Eo(M)&&!M.tokens&&(A=/^{([^}]+)}$/.exec(m)))return[new re(i,m,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var R=[];return e.layerType==="symbol"&&(x==="text-field"&&u&&!u.glyphs&&R.push(new re(i,m,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Gs(ke(m))&&Fe(m.type)==="identity"&&R.push(new re(i,m,'"text-font" does not support identity functions'))),R.concat(pi({key:e.key,value:m,valueSpec:M,style:u,styleSpec:f,expressionContext:"property",propertyType:t,propertyKey:x}))}function Ql(e){return Jl(e,"paint")}function ms(e){return Jl(e,"layout")}function kc(e){var t=[],i=e.value,u=e.key,f=e.style,m=e.styleSpec;i.type||i.ref||t.push(new re(u,i,'either "type" or "ref" is required'));var x,E=Fe(i.type),T=Fe(i.ref);if(i.id)for(var A=Fe(i.id),M=0;M<e.arrayIndex;M++){var R=f.layers[M];Fe(R.id)===A&&t.push(new re(u,i.id,'duplicate layer id "'+i.id+'", previously used at line '+R.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(Q){Q in i&&t.push(new re(u,i[Q],'"'+Q+'" is prohibited for ref layers'))}),f.layers.forEach(function(Q){Fe(Q.id)===T&&(x=Q)}),x?x.ref?t.push(new re(u,i.ref,"ref cannot reference another ref layer")):E=Fe(x.type):t.push(new re(u,i.ref,'ref layer "'+T+'" not found'));else if(E!=="background")if(i.source){var U=f.sources&&f.sources[i.source],G=U&&Fe(U.type);U?G==="vector"&&E==="raster"?t.push(new re(u,i.source,'layer "'+i.id+'" requires a raster source')):G==="raster"&&E!=="raster"?t.push(new re(u,i.source,'layer "'+i.id+'" requires a vector source')):G!=="vector"||i["source-layer"]?G==="raster-dem"&&E!=="hillshade"?t.push(new re(u,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!i.paint||!i.paint["line-gradient"]||G==="geojson"&&U.lineMetrics||t.push(new re(u,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new re(u,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new re(u,i.source,'source "'+i.source+'" not found'))}else t.push(new re(u,i,'missing required property "source"'));return t=t.concat(da({key:u,value:i,valueSpec:m.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return pi({key:u+".type",value:i.type,valueSpec:m.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Yl,layout:function(Q){return da({layer:i,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{"*":function($){return ms(Le({layerType:E},$))}}})},paint:function(Q){return da({layer:i,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{"*":function($){return Ql(Le({layerType:E},$))}}})}}}))}function Io(e){var t=e.value,i=e.key,u=Ui(t);return u!=="string"?[new re(i,t,"string expected, "+u+" found")]:[]}var Yi={promoteId:function(e){var t=e.key,i=e.value;if(Ui(i)==="string")return Io({key:t,value:i});var u=[];for(var f in i)u.push.apply(u,Io({key:t+"."+f,value:i[f]}));return u}};function Js(e){var t=e.value,i=e.key,u=e.styleSpec,f=e.style;if(!t.type)return[new re(i,t,'"type" is required')];var m,x=Fe(t.type);switch(x){case"vector":case"raster":case"raster-dem":return da({key:i,value:t,valueSpec:u["source_"+x.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Yi});case"geojson":if(m=da({key:i,value:t,valueSpec:u.source_geojson,style:f,styleSpec:u,objectElementValidators:Yi}),t.cluster)for(var E in t.clusterProperties){var T=t.clusterProperties[E],A=T[0],M=typeof A=="string"?[A,["accumulated"],["get",E]]:A;m.push.apply(m,ko({key:i+"."+E+".map",value:T[1],expressionContext:"cluster-map"})),m.push.apply(m,ko({key:i+"."+E+".reduce",value:M,expressionContext:"cluster-reduce"}))}return m;case"video":return da({key:i,value:t,valueSpec:u.source_video,style:f,styleSpec:u});case"image":return da({key:i,value:t,valueSpec:u.source_image,style:f,styleSpec:u});case"canvas":return[new re(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ds({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,styleSpec:u})}}function zo(e){var t=e.value,i=e.styleSpec,u=i.light,f=e.style,m=[],x=Ui(t);if(t===void 0)return m;if(x!=="object")return m.concat([new re("light",t,"object expected, "+x+" found")]);for(var E in t){var T=E.match(/^(.*)-transition$/);m=m.concat(T&&u[T[1]]&&u[T[1]].transition?pi({key:E,value:t[E],valueSpec:i.transition,style:f,styleSpec:i}):u[E]?pi({key:E,value:t[E],valueSpec:u[E],style:f,styleSpec:i}):[new re(E,t[E],'unknown property "'+E+'"')])}return m}var Xa={"*":function(){return[]},array:bc,boolean:function(e){var t=e.value,i=e.key,u=Ui(t);return u!=="boolean"?[new re(i,t,"boolean expected, "+u+" found")]:[]},number:xc,color:function(e){var t=e.key,i=e.value,u=Ui(i);return u!=="string"?[new re(t,i,"color expected, "+u+" found")]:Jt(i)===null?[new re(t,i,'color expected, "'+i+'" found')]:[]},constants:ye,enum:ds,filter:Yl,function:wc,layer:kc,object:da,source:Js,light:zo,string:Io,formatted:function(e){return Io(e).length===0?[]:ko(e)},resolvedImage:function(e){return Io(e).length===0?[]:ko(e)}};function pi(e){var t=e.value,i=e.valueSpec,u=e.styleSpec;return i.expression&&Gs(Fe(t))?wc(e):i.expression&&hs(ke(t))?ko(e):i.type&&Xa[i.type]?Xa[i.type](e):da(Le({},e,{valueSpec:i.type?u[i.type]:i}))}function Vi(e){var t=e.value,i=e.key,u=Io(e);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new re(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new re(i,t,'"glyphs" url must include a "{range}" token'))),u}function ta(e,t){t===void 0&&(t=V);var i=[];return i=i.concat(pi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Vi,"*":function(){return[]}}})),e.constants&&(i=i.concat(ye({key:"constants",value:e.constants,style:e,styleSpec:t}))),gs(i)}function gs(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function Ko(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return gs(e.apply(this,t))}}ta.source=Ko(Js),ta.light=Ko(zo),ta.layer=Ko(kc),ta.filter=Ko(Yl),ta.paintProperty=Ko(Ql),ta.layoutProperty=Ko(ms);var ys=ta,Vp=ys.light,jp=ys.paintProperty,_s=ys.layoutProperty;function vs(e,t){var i=!1;if(t&&t.length)for(var u=0,f=t;u<f.length;u+=1)e.fire(new ue(new Error(f[u].message))),i=!0;return i}var Ma=Rr;function Rr(e,t,i){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var f=new Int32Array(this.arrayBuffer);e=f[0],this.d=(t=f[1])+2*(i=f[2]);for(var m=0;m<this.d*this.d;m++){var x=f[3+m],E=f[3+m+1];u.push(x===E?null:f.subarray(x,E))}var T=f[3+u.length+1];this.keys=f.subarray(f[3+u.length],T),this.bboxes=f.subarray(T),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var A=0;A<this.d*this.d;A++)u.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var M=i/t*e;this.min=-M,this.max=e+M}Rr.prototype.insert=function(e,t,i,u,f){this._forEachCell(t,i,u,f,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(f)},Rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rr.prototype._insertCell=function(e,t,i,u,f,m){this.cells[f].push(m)},Rr.prototype.query=function(e,t,i,u,f){var m=this.min,x=this.max;if(e<=m&&t<=m&&x<=i&&x<=u&&!f)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(e,t,i,u,this._queryCell,E,{},f),E},Rr.prototype._queryCell=function(e,t,i,u,f,m,x,E){var T=this.cells[f];if(T!==null)for(var A=this.keys,M=this.bboxes,R=0;R<T.length;R++){var U=T[R];if(x[U]===void 0){var G=4*U;(E?E(M[G+0],M[G+1],M[G+2],M[G+3]):e<=M[G+2]&&t<=M[G+3]&&i>=M[G+0]&&u>=M[G+1])?(x[U]=!0,m.push(A[U])):x[U]=!1}}},Rr.prototype._forEachCell=function(e,t,i,u,f,m,x,E){for(var T=this._convertToCellCoord(e),A=this._convertToCellCoord(t),M=this._convertToCellCoord(i),R=this._convertToCellCoord(u),U=T;U<=M;U++)for(var G=A;G<=R;G++){var Q=this.d*G+U;if((!E||E(this._convertFromCellCoord(U),this._convertFromCellCoord(G),this._convertFromCellCoord(U+1),this._convertFromCellCoord(G+1)))&&f.call(this,e,t,i,u,Q,m,x,E))return}},Rr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Rr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,u=0;u<this.cells.length;u++)i+=this.cells[u].length;var f=new Int32Array(t+i+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var m=t,x=0;x<e.length;x++){var E=e[x];f[3+x]=m,f.set(E,m),m+=E.length}return f[3+e.length]=m,f.set(this.keys,m),f[3+e.length+1]=m+=this.keys.length,f.set(this.bboxes,m),m+=this.bboxes.length,f.buffer};var bs=D.ImageData,Ic=D.ImageBitmap,Ir={};function yt(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Ir[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Vn in yt("Object",Object),Ma.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Ma.deserialize=function(e){return new Ma(e.buffer)},yt("Grid",Ma),yt("Color",ci),yt("Error",Error),yt("ResolvedImage",qr),yt("StylePropertyFunction",Zo),yt("StyleExpression",qo,{omit:["_evaluator"]}),yt("ZoomDependentExpression",Go),yt("ZoomConstantExpression",fs),yt("CompoundExpression",Lr,{omit:["_evaluate"]}),xo)xo[Vn]._classRegistryKey||yt("Expression_"+Vn,xo[Vn]);function Qs(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Ho(e){return Ic&&e instanceof Ic}function ma(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Qs(e)||Ho(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof bs)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],f=0,m=e;f<m.length;f+=1)u.push(ma(m[f],t));return u}if(typeof e=="object"){var x=e.constructor,E=x._classRegistryKey;if(!E)throw new Error("can't serialize object of unregistered class");var T=x.serialize?x.serialize(e,t):{};if(!x.serialize){for(var A in e)if(e.hasOwnProperty(A)&&!(Ir[E].omit.indexOf(A)>=0)){var M=e[A];T[A]=Ir[E].shallow.indexOf(A)>=0?M:ma(M,t)}e instanceof Error&&(T.message=e.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return E!=="Object"&&(T.$name=E),T}throw new Error("can't serialize object of type "+typeof e)}function jn(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Qs(e)||Ho(e)||ArrayBuffer.isView(e)||e instanceof bs)return e;if(Array.isArray(e))return e.map(jn);if(typeof e=="object"){var t=e.$name||"Object",i=Ir[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var u=Object.create(i.prototype),f=0,m=Object.keys(e);f<m.length;f+=1){var x=m[f];if(x!=="$name"){var E=e[x];u[x]=Ir[t].shallow.indexOf(x)>=0?E:jn(E)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var $l=function(){this.first=!0};$l.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var it={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function eu(e){for(var t=0,i=e;t<i.length;t+=1)if($s(i[t].charCodeAt(0)))return!0;return!1}function $s(e){return!(e!==746&&e!==747&&(e<4352||!(it["Bopomofo Extended"](e)||it.Bopomofo(e)||it["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||it["CJK Compatibility Ideographs"](e)||it["CJK Compatibility"](e)||it["CJK Radicals Supplement"](e)||it["CJK Strokes"](e)||!(!it["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||it["CJK Unified Ideographs Extension A"](e)||it["CJK Unified Ideographs"](e)||it["Enclosed CJK Letters and Months"](e)||it["Hangul Compatibility Jamo"](e)||it["Hangul Jamo Extended-A"](e)||it["Hangul Jamo Extended-B"](e)||it["Hangul Jamo"](e)||it["Hangul Syllables"](e)||it.Hiragana(e)||it["Ideographic Description Characters"](e)||it.Kanbun(e)||it["Kangxi Radicals"](e)||it["Katakana Phonetic Extensions"](e)||it.Katakana(e)&&e!==12540||!(!it["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!it["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||it["Unified Canadian Aboriginal Syllabics"](e)||it["Unified Canadian Aboriginal Syllabics Extended"](e)||it["Vertical Forms"](e)||it["Yijing Hexagram Symbols"](e)||it["Yi Syllables"](e)||it["Yi Radicals"](e))))}function tu(e){return!($s(e)||function(t){return!!(it["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||it["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||it["Letterlike Symbols"](t)||it["Number Forms"](t)||it["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||it["Control Pictures"](t)&&t!==9251||it["Optical Character Recognition"](t)||it["Enclosed Alphanumerics"](t)||it["Geometric Shapes"](t)||it["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||it["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||it["CJK Symbols and Punctuation"](t)||it.Katakana(t)||it["Private Use Area"](t)||it["CJK Compatibility Forms"](t)||it["Small Form Variants"](t)||it["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function aa(e){return e>=1424&&e<=2303||it["Arabic Presentation Forms-A"](e)||it["Arabic Presentation Forms-B"](e)}function qn(e,t){return!(!t&&aa(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||it.Khmer(e))}function el(e){for(var t=0,i=e;t<i.length;t+=1)if(aa(i[t].charCodeAt(0)))return!0;return!1}var tl=null,Gn="unavailable",Da=null,zc=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Gn="error"),tl&&tl(e)};function xs(){iu.fire(new Y("pluginStateChange",{pluginStatus:Gn,pluginURL:Da}))}var iu=new fe,ru=function(){return Gn},ga=function(){if(Gn!=="deferred"||!Da)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Gn="loading",xs(),Da&&Sr({url:Da},function(e){e?zc(e):(Gn="loaded",xs())})},ia={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Gn==="loaded"||ia.applyArabicShaping!=null},isLoading:function(){return Gn==="loading"},setState:function(e){Gn=e.pluginStatus,Da=e.pluginURL},isParsed:function(){return ia.applyArabicShaping!=null&&ia.processBidirectionalText!=null&&ia.processStyledBidirectionalText!=null},getPluginURL:function(){return Da}},ai=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $l,this.transition={})};ai.prototype.isSupportedScript=function(e){return function(t,i){for(var u=0,f=t;u<f.length;u+=1)if(!qn(f[u].charCodeAt(0),i))return!1;return!0}(e,ia.isLoaded())},ai.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ai.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var Ia=function(e,t){this.property=e,this.value=t,this.expression=function(i,u){if(Gs(i))return new Zo(i,u);if(hs(i)){var f=vc(i,u);if(f.result==="error")throw new Error(f.value.map(function(x){return x.key+": "+x.message}).join(", "));return f.value}var m=i;return typeof i=="string"&&u.type==="color"&&(m=ci.parse(i)),{kind:"constant",evaluate:function(){return m}}}(t===void 0?e.specification.default:t,e.specification)};Ia.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ia.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var oa=function(e){this.property=e,this.value=new Ia(e,void 0)};oa.prototype.transitioned=function(e,t){return new To(this.property,this.value,t,xe({},e.transition,this.transition),e.now)},oa.prototype.untransitioned=function(){return new To(this.property,this.value,null,{},0)};var sn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};sn.prototype.getValue=function(e){return xt(this._values[e].value.value)},sn.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new oa(this._values[e].property)),this._values[e].value=new Ia(this._values[e].property,t===null?void 0:xt(t))},sn.prototype.getTransition=function(e){return xt(this._values[e].transition)},sn.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new oa(this._values[e].property)),this._values[e].transition=xt(t)||void 0},sn.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t],f=this.getValue(u);f!==void 0&&(e[u]=f);var m=this.getTransition(u);m!==void 0&&(e[u+"-transition"]=m)}return e},sn.prototype.transitioned=function(e,t){for(var i=new Ya(this._properties),u=0,f=Object.keys(this._values);u<f.length;u+=1){var m=f[u];i._values[m]=this._values[m].transitioned(e,t._values[m])}return i},sn.prototype.untransitioned=function(){for(var e=new Ya(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t];e._values[u]=this._values[u].untransitioned()}return e};var To=function(e,t,i,u,f){this.property=e,this.value=t,this.begin=f+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=i)};To.prototype.possiblyEvaluate=function(e,t,i){var u=e.now||0,f=this.value.possiblyEvaluate(e,t,i),m=this.prior;if(m){if(u>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(u<this.begin)return m.possiblyEvaluate(e,t,i);var x=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,t,i),f,function(E){if(E<=0)return 0;if(E>=1)return 1;var T=E*E,A=T*E;return 4*(E<.5?A:3*(E-T)+A-.75)}(x))}return f};var Ya=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Ya.prototype.possiblyEvaluate=function(e,t,i){for(var u=new ws(this._properties),f=0,m=Object.keys(this._values);f<m.length;f+=1){var x=m[f];u._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return u},Ya.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var ya=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ya.prototype.getValue=function(e){return xt(this._values[e].value)},ya.prototype.setValue=function(e,t){this._values[e]=new Ia(this._values[e].property,t===null?void 0:xt(t))},ya.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t],f=this.getValue(u);f!==void 0&&(e[u]=f)}return e},ya.prototype.possiblyEvaluate=function(e,t,i){for(var u=new ws(this._properties),f=0,m=Object.keys(this._values);f<m.length;f+=1){var x=m[f];u._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return u};var En=function(e,t,i){this.property=e,this.value=t,this.parameters=i};En.prototype.isConstant=function(){return this.value.kind==="constant"},En.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},En.prototype.evaluate=function(e,t,i,u){return this.property.evaluate(this.value,this.parameters,e,t,i,u)};var ws=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};ws.prototype.get=function(e){return this._values[e]};var It=function(e){this.specification=e};It.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},It.prototype.interpolate=function(e,t,i){var u=Vo[this.specification.type];return u?u(e,t,i):e};var vt=function(e,t){this.specification=e,this.overrides=t};vt.prototype.possiblyEvaluate=function(e,t,i,u){return new En(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,u)}:e.expression,t)},vt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new En(this,{kind:"constant",value:void 0},e.parameters);var u=Vo[this.specification.type];return u?new En(this,{kind:"constant",value:u(e.value.value,t.value.value,i)},e.parameters):e},vt.prototype.evaluate=function(e,t,i,u,f,m){return e.kind==="constant"?e.value:e.evaluate(t,i,u,f,m)};var il=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,u,f,m){if(i.value===void 0)return new En(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){var x=i.expression.evaluate(u,null,{},f,m),E=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,T=this._calculate(E,E,E,u);return new En(this,{kind:"constant",value:T},u)}if(i.expression.kind==="camera"){var A=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new En(this,{kind:"constant",value:A},u)}return new En(this,i.expression,u)},t.prototype.evaluate=function(i,u,f,m,x,E){if(i.kind==="source"){var T=i.evaluate(u,f,m,x,E);return this._calculate(T,T,T,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},f,m),i.evaluate({zoom:Math.floor(u.zoom)},f,m),i.evaluate({zoom:Math.floor(u.zoom)+1},f,m),u):i.value},t.prototype._calculate=function(i,u,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:f,to:u}},t.prototype.interpolate=function(i){return i},t}(vt),kn=function(e){this.specification=e};kn.prototype.possiblyEvaluate=function(e,t,i,u){if(e.value!==void 0){if(e.expression.kind==="constant"){var f=e.expression.evaluate(t,null,{},i,u);return this._calculate(f,f,f,t)}return this._calculate(e.expression.evaluate(new ai(Math.floor(t.zoom-1),t)),e.expression.evaluate(new ai(Math.floor(t.zoom),t)),e.expression.evaluate(new ai(Math.floor(t.zoom+1),t)),t)}},kn.prototype._calculate=function(e,t,i,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},kn.prototype.interpolate=function(e){return e};var _a=function(e){this.specification=e};_a.prototype.possiblyEvaluate=function(e,t,i,u){return!!e.expression.evaluate(t,null,{},i,u)},_a.prototype.interpolate=function(){return!1};var ln=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var u=this.defaultPropertyValues[t]=new Ia(i,void 0),f=this.defaultTransitionablePropertyValues[t]=new oa(i);this.defaultTransitioningPropertyValues[t]=f.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=u.possiblyEvaluate({})}};yt("DataDrivenProperty",vt),yt("DataConstantProperty",It),yt("CrossFadedDataDrivenProperty",il),yt("CrossFadedProperty",kn),yt("ColorRampProperty",_a);var za=function(e){function t(i,u){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new ya(u.layout)),u.paint)){for(var f in this._transitionablePaint=new sn(u.paint),i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(var m in i.layout)this.setLayoutProperty(m,i.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ws(u.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,u,f){f===void 0&&(f={}),u!=null&&this._validate(_s,"layers."+this.id+".layout."+i,i,u,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)},t.prototype.getPaintProperty=function(i){return Ot(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,u,f){if(f===void 0&&(f={}),u!=null&&this._validate(jp,"layers."+this.id+".paint."+i,i,u,f))return!1;if(Ot(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;var m=this._transitionablePaint._values[i],x=m.property.specification["property-type"]==="cross-faded-data-driven",E=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);var A=this._transitionablePaint._values[i].value;return A.isDataDriven()||E||x||this._handleOverridablePaintPropertyUpdate(i,T,A)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,u,f){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Xe(i,function(u,f){return!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length)})},t.prototype._validate=function(i,u,f,m,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&vs(this,i.call(ys,{key:u,layerType:this.type,objectKey:f,value:m,styleSpec:V,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var u=this.paint.get(i);if(u instanceof En&&Eo(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1},t}(fe),nu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},rl=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Pi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Qr(e,t){t===void 0&&(t=1);var i=0,u=0;return{members:e.map(function(f){var m=nu[f.type].BYTES_PER_ELEMENT,x=i=Tc(i,Math.max(t,m)),E=f.components||1;return u=Math.max(u,m),i+=m*E,{name:f.name,type:f.type,components:E,offset:x}}),size:Tc(i,Math.max(u,t)),alignment:t}}function Tc(e,t){return Math.ceil(e/t)*t}Pi.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Pi.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Pi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Pi.prototype.clear=function(){this.length=0},Pi.prototype.resize=function(e){this.reserve(e),this.length=e},Pi.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Pi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ao=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.int16[m+0]=u,this.int16[m+1]=f,i},t}(Pi);Ao.prototype.bytesPerElement=4,yt("StructArrayLayout2i4",Ao);var au=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=4*i;return this.int16[E+0]=u,this.int16[E+1]=f,this.int16[E+2]=m,this.int16[E+3]=x,i},t}(Pi);au.prototype.bytesPerElement=8,yt("StructArrayLayout4i8",au);var La=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,T){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=x,this.int16[A+4]=E,this.int16[A+5]=T,i},t}(Pi);La.prototype.bytesPerElement=12,yt("StructArrayLayout2i4i12",La);var Zn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,T){var A=4*i,M=8*i;return this.int16[A+0]=u,this.int16[A+1]=f,this.uint8[M+4]=m,this.uint8[M+5]=x,this.uint8[M+6]=E,this.uint8[M+7]=T,i},t}(Pi);Zn.prototype.bytesPerElement=8,yt("StructArrayLayout2i4ub8",Zn);var Wo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.float32[m+0]=u,this.float32[m+1]=f,i},t}(Pi);Wo.prototype.bytesPerElement=8,yt("StructArrayLayout2f8",Wo);var Ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,T,A,M,R){var U=this.length;return this.resize(U+1),this.emplace(U,i,u,f,m,x,E,T,A,M,R)},t.prototype.emplace=function(i,u,f,m,x,E,T,A,M,R,U){var G=10*i;return this.uint16[G+0]=u,this.uint16[G+1]=f,this.uint16[G+2]=m,this.uint16[G+3]=x,this.uint16[G+4]=E,this.uint16[G+5]=T,this.uint16[G+6]=A,this.uint16[G+7]=M,this.uint16[G+8]=R,this.uint16[G+9]=U,i},t}(Pi);Ta.prototype.bytesPerElement=20,yt("StructArrayLayout10ui20",Ta);var nl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,T,A,M,R,U,G){var Q=this.length;return this.resize(Q+1),this.emplace(Q,i,u,f,m,x,E,T,A,M,R,U,G)},t.prototype.emplace=function(i,u,f,m,x,E,T,A,M,R,U,G,Q){var $=12*i;return this.int16[$+0]=u,this.int16[$+1]=f,this.int16[$+2]=m,this.int16[$+3]=x,this.uint16[$+4]=E,this.uint16[$+5]=T,this.uint16[$+6]=A,this.uint16[$+7]=M,this.int16[$+8]=R,this.int16[$+9]=U,this.int16[$+10]=G,this.int16[$+11]=Q,i},t}(Pi);nl.prototype.bytesPerElement=24,yt("StructArrayLayout4i4ui4i24",nl);var Xo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.float32[x+0]=u,this.float32[x+1]=f,this.float32[x+2]=m,i},t}(Pi);Xo.prototype.bytesPerElement=12,yt("StructArrayLayout3f12",Xo);var Ss=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.uint32[1*i+0]=u,i},t}(Pi);Ss.prototype.bytesPerElement=4,yt("StructArrayLayout1ul4",Ss);var ou=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,T,A,M){var R=this.length;return this.resize(R+1),this.emplace(R,i,u,f,m,x,E,T,A,M)},t.prototype.emplace=function(i,u,f,m,x,E,T,A,M,R){var U=10*i,G=5*i;return this.int16[U+0]=u,this.int16[U+1]=f,this.int16[U+2]=m,this.int16[U+3]=x,this.int16[U+4]=E,this.int16[U+5]=T,this.uint32[G+3]=A,this.uint16[U+8]=M,this.uint16[U+9]=R,i},t}(Pi);ou.prototype.bytesPerElement=20,yt("StructArrayLayout6i1ul2ui20",ou);var Yo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,T){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=x,this.int16[A+4]=E,this.int16[A+5]=T,i},t}(Pi);Yo.prototype.bytesPerElement=12,yt("StructArrayLayout2i2i2i12",Yo);var Po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x){var E=this.length;return this.resize(E+1),this.emplace(E,i,u,f,m,x)},t.prototype.emplace=function(i,u,f,m,x,E){var T=4*i,A=8*i;return this.float32[T+0]=u,this.float32[T+1]=f,this.float32[T+2]=m,this.int16[A+6]=x,this.int16[A+7]=E,i},t}(Pi);Po.prototype.bytesPerElement=16,yt("StructArrayLayout2f1f2i16",Po);var su=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=12*i,T=3*i;return this.uint8[E+0]=u,this.uint8[E+1]=f,this.float32[T+1]=m,this.float32[T+2]=x,i},t}(Pi);su.prototype.bytesPerElement=12,yt("StructArrayLayout2ub2f12",su);var Ja=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.uint16[x+0]=u,this.uint16[x+1]=f,this.uint16[x+2]=m,i},t}(Pi);Ja.prototype.bytesPerElement=6,yt("StructArrayLayout3ui6",Ja);var Qa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,T,A,M,R,U,G,Q,$,pe,ae,me){var be=this.length;return this.resize(be+1),this.emplace(be,i,u,f,m,x,E,T,A,M,R,U,G,Q,$,pe,ae,me)},t.prototype.emplace=function(i,u,f,m,x,E,T,A,M,R,U,G,Q,$,pe,ae,me,be){var we=24*i,Ee=12*i,Ce=48*i;return this.int16[we+0]=u,this.int16[we+1]=f,this.uint16[we+2]=m,this.uint16[we+3]=x,this.uint32[Ee+2]=E,this.uint32[Ee+3]=T,this.uint32[Ee+4]=A,this.uint16[we+10]=M,this.uint16[we+11]=R,this.uint16[we+12]=U,this.float32[Ee+7]=G,this.float32[Ee+8]=Q,this.uint8[Ce+36]=$,this.uint8[Ce+37]=pe,this.uint8[Ce+38]=ae,this.uint32[Ee+10]=me,this.int16[we+22]=be,i},t}(Pi);Qa.prototype.bytesPerElement=48,yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Qa);var al=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,T,A,M,R,U,G,Q,$,pe,ae,me,be,we,Ee,Ce,je,$e,Et,ct,Tt,ht,Qt){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,i,u,f,m,x,E,T,A,M,R,U,G,Q,$,pe,ae,me,be,we,Ee,Ce,je,$e,Et,ct,Tt,ht,Qt)},t.prototype.emplace=function(i,u,f,m,x,E,T,A,M,R,U,G,Q,$,pe,ae,me,be,we,Ee,Ce,je,$e,Et,ct,Tt,ht,Qt,Lt){var bt=34*i,ri=17*i;return this.int16[bt+0]=u,this.int16[bt+1]=f,this.int16[bt+2]=m,this.int16[bt+3]=x,this.int16[bt+4]=E,this.int16[bt+5]=T,this.int16[bt+6]=A,this.int16[bt+7]=M,this.uint16[bt+8]=R,this.uint16[bt+9]=U,this.uint16[bt+10]=G,this.uint16[bt+11]=Q,this.uint16[bt+12]=$,this.uint16[bt+13]=pe,this.uint16[bt+14]=ae,this.uint16[bt+15]=me,this.uint16[bt+16]=be,this.uint16[bt+17]=we,this.uint16[bt+18]=Ee,this.uint16[bt+19]=Ce,this.uint16[bt+20]=je,this.uint16[bt+21]=$e,this.uint16[bt+22]=Et,this.uint32[ri+12]=ct,this.float32[ri+13]=Tt,this.float32[ri+14]=ht,this.float32[ri+15]=Qt,this.float32[ri+16]=Lt,i},t}(Pi);al.prototype.bytesPerElement=68,yt("StructArrayLayout8i15ui1ul4f68",al);var $a=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.float32[1*i+0]=u,i},t}(Pi);$a.prototype.bytesPerElement=4,yt("StructArrayLayout1f4",$a);var sa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.int16[x+0]=u,this.int16[x+1]=f,this.int16[x+2]=m,i},t}(Pi);sa.prototype.bytesPerElement=6,yt("StructArrayLayout3i6",sa);var lu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=4*i;return this.uint32[2*i+0]=u,this.uint16[x+2]=f,this.uint16[x+3]=m,i},t}(Pi);lu.prototype.bytesPerElement=8,yt("StructArrayLayout1ul2ui8",lu);var Es=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.uint16[m+0]=u,this.uint16[m+1]=f,i},t}(Pi);Es.prototype.bytesPerElement=4,yt("StructArrayLayout2ui4",Es);var uu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.uint16[1*i+0]=u,i},t}(Pi);uu.prototype.bytesPerElement=2,yt("StructArrayLayout1ui2",uu);var ol=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=4*i;return this.float32[E+0]=u,this.float32[E+1]=f,this.float32[E+2]=m,this.float32[E+3]=x,i},t}(Pi);ol.prototype.bytesPerElement=16,yt("StructArrayLayout4f16",ol);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new C(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(rl);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(ou);yt("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(rl);o.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(Qa);yt("PlacedSymbolArray",c);var _=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(rl);_.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new _(this,i)},t}(al);yt("SymbolInstanceArray",w);var S=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}($a);yt("GlyphOffsetArray",S);var z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(sa);yt("SymbolLineVertexArray",z);var P=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(rl);P.prototype.size=8;var O=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new P(this,i)},t}(lu);yt("FeatureIndexArray",O);var Z=Qr([{name:"a_pos",components:2,type:"Int16"}],4).members,K=function(e){e===void 0&&(e=[]),this.segments=e};function W(e,t){return 256*(e=he(Math.floor(e),0,255))+he(Math.floor(t),0,255)}K.prototype.prepareSegment=function(e,t,i,u){var f=this.segments[this.segments.length-1];return e>K.MAX_VERTEX_ARRAY_LENGTH&&Ve("Max vertices per segment is "+K.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!f||f.vertexLength+e>K.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==u)&&(f={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},u!==void 0&&(f.sortKey=u),this.segments.push(f)),f},K.prototype.get=function(){return this.segments},K.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var u in i.vaos)i.vaos[u].destroy()}},K.simpleSegment=function(e,t,i,u){return new K([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:u,vaos:{},sortKey:0}])},K.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yt("SegmentVector",K);var ie=Qr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ee=k(function(e){e.exports=function(t,i){var u,f,m,x,E,T,A,M;for(f=t.length-(u=3&t.length),m=i,E=3432918353,T=461845907,M=0;M<f;)A=255&t.charCodeAt(M)|(255&t.charCodeAt(++M))<<8|(255&t.charCodeAt(++M))<<16|(255&t.charCodeAt(++M))<<24,++M,m=27492+(65535&(x=5*(65535&(m=(m^=A=(65535&(A=(A=(65535&A)*E+(((A>>>16)*E&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(A=0,u){case 3:A^=(255&t.charCodeAt(M+2))<<16;case 2:A^=(255&t.charCodeAt(M+1))<<8;case 1:m^=A=(65535&(A=(A=(65535&(A^=255&t.charCodeAt(M)))*E+(((A>>>16)*E&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295}return m^=t.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}}),ce=k(function(e){e.exports=function(t,i){for(var u,f=t.length,m=i^f,x=0;f>=4;)u=1540483477*(65535&(u=255&t.charCodeAt(x)|(255&t.charCodeAt(++x))<<8|(255&t.charCodeAt(++x))<<16|(255&t.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:m^=(255&t.charCodeAt(x+2))<<16;case 2:m^=(255&t.charCodeAt(x+1))<<8;case 1:m=1540483477*(65535&(m^=255&t.charCodeAt(x)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}}),J=ee,le=ce;J.murmur3=ee,J.murmur2=le;var de=function(){this.ids=[],this.positions=[],this.indexed=!1};de.prototype.add=function(e,t,i,u){this.ids.push(Ie(e)),this.positions.push(t,i,u)},de.prototype.getPositions=function(e){for(var t=Ie(e),i=0,u=this.ids.length-1;i<u;){var f=i+u>>1;this.ids[f]>=t?u=f:i=f+1}for(var m=[];this.ids[i]===t;)m.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return m},de.serialize=function(e,t){var i=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function f(m,x,E,T){for(;E<T;){for(var A=m[E+T>>1],M=E-1,R=T+1;;){do M++;while(m[M]<A);do R--;while(m[R]>A);if(M>=R)break;Se(m,M,R),Se(x,3*M,3*R),Se(x,3*M+1,3*R+1),Se(x,3*M+2,3*R+2)}R-E<T-R?(f(m,x,E,R),E=R+1):(f(m,x,R+1,T),T=R)}}(i,u,0,i.length-1),t&&t.push(i.buffer,u.buffer),{ids:i,positions:u}},de.deserialize=function(e){var t=new de;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var _e=Math.pow(2,53)-1;function Ie(e){var t=+e;return!isNaN(t)&&t<=_e?t:J(String(e))}function Se(e,t,i){var u=e[t];e[t]=e[i],e[i]=u}yt("FeaturePositionMap",de);var Te=function(e,t){this.gl=e.gl,this.location=t},Re=function(e){function t(i,u){e.call(this,i,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Te),We=function(e){function t(i,u){e.call(this,i,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Te),Ke=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Te),dt=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Te),zt=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Te),Ct=function(e){function t(i,u){e.call(this,i,u),this.current=ci.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Te),Pt=new Float32Array(16),_i=function(e){function t(i,u){e.call(this,i,u),this.current=Pt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var u=1;u<16;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Te);function mt(e){return[W(255*e.r,255*e.g),W(255*e.b,255*e.a)]}var Nt=function(e,t,i){this.value=e,this.uniformNames=t.map(function(u){return"u_"+u}),this.type=i};Nt.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Nt.prototype.getBinding=function(e,t,i){return this.type==="color"?new Ct(e,t):new We(e,t)};var Yt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Yt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Yt.prototype.setUniform=function(e,t,i,u){var f=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;f&&e.set(f)},Yt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new zt(e,t):new We(e,t)};var Ft=function(e,t,i,u){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(f){return{name:"a_"+f,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new u};Ft.prototype.populatePaintArray=function(e,t,i,u,f){var m=this.paintVertexArray.length,x=this.expression.evaluate(new ai(0),t,{},u,[],f);this.paintVertexArray.resize(e),this._setPaintValue(m,e,x)},Ft.prototype.updatePaintArray=function(e,t,i,u){var f=this.expression.evaluate({zoom:0},i,u);this._setPaintValue(e,t,f)},Ft.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var u=mt(i),f=e;f<t;f++)this.paintVertexArray.emplace(f,u[0],u[1]);else{for(var m=e;m<t;m++)this.paintVertexArray.emplace(m,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Ft.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ft.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Bt=function(e,t,i,u,f,m){this.expression=e,this.uniformNames=t.map(function(x){return"u_"+x+"_t"}),this.type=i,this.useIntegerZoom=u,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=t.map(function(x){return{name:"a_"+x,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new m};Bt.prototype.populatePaintArray=function(e,t,i,u,f){var m=this.expression.evaluate(new ai(this.zoom),t,{},u,[],f),x=this.expression.evaluate(new ai(this.zoom+1),t,{},u,[],f),E=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(E,e,m,x)},Bt.prototype.updatePaintArray=function(e,t,i,u){var f=this.expression.evaluate({zoom:this.zoom},i,u),m=this.expression.evaluate({zoom:this.zoom+1},i,u);this._setPaintValue(e,t,f,m)},Bt.prototype._setPaintValue=function(e,t,i,u){if(this.type==="color")for(var f=mt(i),m=mt(u),x=e;x<t;x++)this.paintVertexArray.emplace(x,f[0],f[1],m[0],m[1]);else{for(var E=e;E<t;E++)this.paintVertexArray.emplace(E,i,u);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(u))}},Bt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Bt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Bt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,u=he(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(u)},Bt.prototype.getBinding=function(e,t,i){return new We(e,t)};var Xt=function(e,t,i,u,f,m){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=u,this.layerId=m,this.zoomInPaintVertexArray=new f,this.zoomOutPaintVertexArray=new f};Xt.prototype.populatePaintArray=function(e,t,i){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,t.patterns&&t.patterns[this.layerId],i)},Xt.prototype.updatePaintArray=function(e,t,i,u,f){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],f)},Xt.prototype._setPaintValues=function(e,t,i,u){if(u&&i){var f=u[i.min],m=u[i.mid],x=u[i.max];if(f&&m&&x)for(var E=e;E<t;E++)this.zoomInPaintVertexArray.emplace(E,m.tl[0],m.tl[1],m.br[0],m.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1],m.pixelRatio,f.pixelRatio),this.zoomOutPaintVertexArray.emplace(E,m.tl[0],m.tl[1],m.br[0],m.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],m.pixelRatio,x.pixelRatio)}},Xt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ie.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ie.members,this.expression.isStateDependent))},Xt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Rt=function(e,t,i){this.binders={},this._buffers=[];var u=[];for(var f in e.paint._values)if(i(f)){var m=e.paint.get(f);if(m instanceof En&&Eo(m.property.specification)){var x=Gr(f,e.type),E=m.value,T=m.property.specification.type,A=m.property.useIntegerZoom,M=m.property.specification["property-type"],R=M==="cross-faded"||M==="cross-faded-data-driven";if(E.kind==="constant")this.binders[f]=R?new Yt(E.value,x):new Nt(E.value,x,T),u.push("/u_"+f);else if(E.kind==="source"||R){var U=or(f,T,"source");this.binders[f]=R?new Xt(E,T,A,t,U,e.id):new Ft(E,x,T,U),u.push("/a_"+f)}else{var G=or(f,T,"composite");this.binders[f]=new Bt(E,x,T,A,t,G),u.push("/z_"+f)}}}this.cacheKey=u.sort().join("")};Rt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Ft||t instanceof Bt?t.maxValue:0},Rt.prototype.populatePaintArrays=function(e,t,i,u,f){for(var m in this.binders){var x=this.binders[m];(x instanceof Ft||x instanceof Bt||x instanceof Xt)&&x.populatePaintArray(e,t,i,u,f)}},Rt.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var u=this.binders[i];u instanceof Yt&&u.setConstantPatternPositions(e,t)}},Rt.prototype.updatePaintArrays=function(e,t,i,u,f){var m=!1;for(var x in e)for(var E=0,T=t.getPositions(x);E<T.length;E+=1){var A=T[E],M=i.feature(A.index);for(var R in this.binders){var U=this.binders[R];if((U instanceof Ft||U instanceof Bt||U instanceof Xt)&&U.expression.isStateDependent===!0){var G=u.paint.get(R);U.expression=G.value,U.updatePaintArray(A.start,A.end,M,e[x],f),m=!0}}}return m},Rt.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Nt||i instanceof Yt)&&e.push.apply(e,i.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},Rt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ft||i instanceof Bt)for(var u=0;u<i.paintVertexAttributes.length;u++)e.push(i.paintVertexAttributes[u].name);else if(i instanceof Xt)for(var f=0;f<ie.members.length;f++)e.push(ie.members[f].name)}return e},Rt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Nt||i instanceof Yt||i instanceof Bt)for(var u=0,f=i.uniformNames;u<f.length;u+=1)e.push(f[u])}return e},Rt.prototype.getPaintVertexBuffers=function(){return this._buffers},Rt.prototype.getUniforms=function(e,t){var i=[];for(var u in this.binders){var f=this.binders[u];if(f instanceof Nt||f instanceof Yt||f instanceof Bt)for(var m=0,x=f.uniformNames;m<x.length;m+=1){var E=x[m];if(t[E]){var T=f.getBinding(e,t[E],E);i.push({name:E,property:u,binding:T})}}}return i},Rt.prototype.setUniforms=function(e,t,i,u){for(var f=0,m=t;f<m.length;f+=1){var x=m[f],E=x.name,T=x.property;this.binders[T].setUniform(x.binding,u,i.get(T),E)}},Rt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Xt){var u=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(i instanceof Ft||i instanceof Bt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Rt.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Ft||i instanceof Bt||i instanceof Xt)&&i.upload(e)}this.updatePaintBuffers()},Rt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Ft||t instanceof Bt||t instanceof Xt)&&t.destroy()}};var Dt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var u=0,f=e;u<f.length;u+=1){var m=f[u];this.programConfigurations[m.id]=new Rt(m,t,i)}this.needsUpload=!1,this._featureMap=new de,this._bufferOffset=0};function Gr(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function or(e,t,i){var u={color:{source:Wo,composite:ol},number:{source:$a,composite:Wo}},f=function(m){return{"line-pattern":{source:Ta,composite:Ta},"fill-pattern":{source:Ta,composite:Ta},"fill-extrusion-pattern":{source:Ta,composite:Ta}}[m]}(e);return f&&f[i]||u[t][i]}Dt.prototype.populatePaintArrays=function(e,t,i,u,f,m){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,t,u,f,m);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Dt.prototype.updatePaintArrays=function(e,t,i,u){for(var f=0,m=i;f<m.length;f+=1){var x=m[f];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,t,x,u)||this.needsUpload}},Dt.prototype.get=function(e){return this.programConfigurations[e]},Dt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Dt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},yt("ConstantBinder",Nt),yt("CrossFadedConstantBinder",Yt),yt("SourceExpressionBinder",Ft),yt("CrossFadedCompositeBinder",Xt),yt("CompositeExpressionBinder",Bt),yt("ProgramConfiguration",Rt,{omit:["_buffers"]}),yt("ProgramConfigurationSet",Dt);var vn=Math.pow(2,14)-1,$r=-vn-1;function ir(e){for(var t=8192/e.extent,i=e.loadGeometry(),u=0;u<i.length;u++)for(var f=i[u],m=0;m<f.length;m++){var x=f[m],E=Math.round(x.x*t),T=Math.round(x.y*t);x.x=he(E,$r,vn),x.y=he(T,$r,vn),(E<x.x||E>x.x+1||T<x.y||T>x.y+1)&&Ve("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function yr(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ir(e):[]}}function Kn(e,t,i,u,f){e.emplaceBack(2*t+(u+1)/2,2*i+(f+1)/2)}var In=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ao,this.indexArray=new Ja,this.segments=new K,this.programConfigurations=new Dt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function eo(e,t){for(var i=0;i<e.length;i++)if(Aa(t,e[i]))return!0;for(var u=0;u<t.length;u++)if(Aa(e,t[u]))return!0;return!!ks(e,t)}function Mn(e,t,i){return!!Aa(e,t)||!!to(t,e,i)}function va(e,t){if(e.length===1)return Is(t,e[0]);for(var i=0;i<t.length;i++)for(var u=t[i],f=0;f<u.length;f++)if(Aa(e,u[f]))return!0;for(var m=0;m<e.length;m++)if(Is(t,e[m]))return!0;for(var x=0;x<t.length;x++)if(ks(e,t[x]))return!0;return!1}function la(e,t,i){if(e.length>1){if(ks(e,t))return!0;for(var u=0;u<t.length;u++)if(to(t[u],e,i))return!0}for(var f=0;f<e.length;f++)if(to(e[f],t,i))return!0;return!1}function ks(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var u=e[i],f=e[i+1],m=0;m<t.length-1;m++)if(Jo(u,f,t[m],t[m+1]))return!0;return!1}function Jo(e,t,i,u){return lt(e,i,u)!==lt(t,i,u)&&lt(e,t,i)!==lt(e,t,u)}function to(e,t,i){var u=i*i;if(t.length===1)return e.distSqr(t[0])<u;for(var f=1;f<t.length;f++)if(Qo(e,t[f-1],t[f])<u)return!0;return!1}function Qo(e,t,i){var u=t.distSqr(i);if(u===0)return e.distSqr(t);var f=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/u;return e.distSqr(f<0?t:f>1?i:i.sub(t)._mult(f)._add(t))}function Is(e,t){for(var i,u,f,m=!1,x=0;x<e.length;x++)for(var E=0,T=(i=e[x]).length-1;E<i.length;T=E++)(u=i[E]).y>t.y!=(f=i[T]).y>t.y&&t.x<(f.x-u.x)*(t.y-u.y)/(f.y-u.y)+u.x&&(m=!m);return m}function Aa(e,t){for(var i=!1,u=0,f=e.length-1;u<e.length;f=u++){var m=e[u],x=e[f];m.y>t.y!=x.y>t.y&&t.x<(x.x-m.x)*(t.y-m.y)/(x.y-m.y)+m.x&&(i=!i)}return i}function zs(e,t,i){var u=i[0],f=i[2];if(e.x<u.x&&t.x<u.x||e.x>f.x&&t.x>f.x||e.y<u.y&&t.y<u.y||e.y>f.y&&t.y>f.y)return!1;var m=lt(e,t,i[0]);return m!==lt(e,t,i[1])||m!==lt(e,t,i[2])||m!==lt(e,t,i[3])}function Pa(e,t,i){var u=t.paint.get(e).value;return u.kind==="constant"?u.value:i.programConfigurations.get(t.id).getMaxValue(e)}function Zr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ra(e,t,i,u,f){if(!t[0]&&!t[1])return e;var m=C.convert(t)._mult(f);i==="viewport"&&m._rotate(-u);for(var x=[],E=0;E<e.length;E++)x.push(e[E].sub(m));return x}In.prototype.populate=function(e,t,i){var u=this.layers[0],f=[],m=null;u.type==="circle"&&(m=u.layout.get("circle-sort-key"));for(var x=0,E=e;x<E.length;x+=1){var T=E[x],A=T.feature,M=T.id,R=T.index,U=T.sourceLayerIndex,G=this.layers[0]._featureFilter.needGeometry,Q=yr(A,G);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),Q,i)){var $=m?m.evaluate(Q,{},i):void 0,pe={id:M,properties:A.properties,type:A.type,sourceLayerIndex:U,index:R,geometry:G?Q.geometry:ir(A),patterns:{},sortKey:$};f.push(pe)}}m&&f.sort(function($e,Et){return $e.sortKey-Et.sortKey});for(var ae=0,me=f;ae<me.length;ae+=1){var be=me[ae],we=be.geometry,Ee=be.index,Ce=be.sourceLayerIndex,je=e[Ee].feature;this.addFeature(be,we,Ee,i),t.featureIndex.insert(je,we,Ee,Ce,this.index)}},In.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},In.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},In.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},In.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Z),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},In.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},In.prototype.addFeature=function(e,t,i,u){for(var f=0,m=t;f<m.length;f+=1)for(var x=0,E=m[f];x<E.length;x+=1){var T=E[x],A=T.x,M=T.y;if(!(A<0||A>=8192||M<0||M>=8192)){var R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),U=R.vertexLength;Kn(this.layoutVertexArray,A,M,-1,-1),Kn(this.layoutVertexArray,A,M,1,-1),Kn(this.layoutVertexArray,A,M,1,1),Kn(this.layoutVertexArray,A,M,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+3,U+2),R.vertexLength+=4,R.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},u)},yt("CircleBucket",In,{omit:["layers"]});var io=new ln({"circle-sort-key":new vt(V.layout_circle["circle-sort-key"])}),Co={paint:new ln({"circle-radius":new vt(V.paint_circle["circle-radius"]),"circle-color":new vt(V.paint_circle["circle-color"]),"circle-blur":new vt(V.paint_circle["circle-blur"]),"circle-opacity":new vt(V.paint_circle["circle-opacity"]),"circle-translate":new It(V.paint_circle["circle-translate"]),"circle-translate-anchor":new It(V.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new It(V.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new It(V.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vt(V.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vt(V.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vt(V.paint_circle["circle-stroke-opacity"])}),layout:io},Ii=typeof Float32Array<"u"?Float32Array:Array;function ra(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Dn(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3],E=t[4],T=t[5],A=t[6],M=t[7],R=t[8],U=t[9],G=t[10],Q=t[11],$=t[12],pe=t[13],ae=t[14],me=t[15],be=i[0],we=i[1],Ee=i[2],Ce=i[3];return e[0]=be*u+we*E+Ee*R+Ce*$,e[1]=be*f+we*T+Ee*U+Ce*pe,e[2]=be*m+we*A+Ee*G+Ce*ae,e[3]=be*x+we*M+Ee*Q+Ce*me,e[4]=(be=i[4])*u+(we=i[5])*E+(Ee=i[6])*R+(Ce=i[7])*$,e[5]=be*f+we*T+Ee*U+Ce*pe,e[6]=be*m+we*A+Ee*G+Ce*ae,e[7]=be*x+we*M+Ee*Q+Ce*me,e[8]=(be=i[8])*u+(we=i[9])*E+(Ee=i[10])*R+(Ce=i[11])*$,e[9]=be*f+we*T+Ee*U+Ce*pe,e[10]=be*m+we*A+Ee*G+Ce*ae,e[11]=be*x+we*M+Ee*Q+Ce*me,e[12]=(be=i[12])*u+(we=i[13])*E+(Ee=i[14])*R+(Ce=i[15])*$,e[13]=be*f+we*T+Ee*U+Ce*pe,e[14]=be*m+we*A+Ee*G+Ce*ae,e[15]=be*x+we*M+Ee*Q+Ce*me,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var Mo,qp=Dn;function sl(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3];return e[0]=i[0]*u+i[4]*f+i[8]*m+i[12]*x,e[1]=i[1]*u+i[5]*f+i[9]*m+i[13]*x,e[2]=i[2]*u+i[6]*f+i[10]*m+i[14]*x,e[3]=i[3]*u+i[7]*f+i[11]*m+i[15]*x,e}Mo=new Ii(3),Ii!=Float32Array&&(Mo[0]=0,Mo[1]=0,Mo[2]=0),function(){var e=new Ii(4);Ii!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var Gp=(function(){var e=new Ii(2);Ii!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,Co)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new In(i)},t.prototype.queryRadius=function(i){var u=i;return Pa("circle-radius",this,u)+Pa("circle-stroke-width",this,u)+Zr(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,T,A){for(var M=Ra(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,T),R=this.paint.get("circle-radius").evaluate(u,f)+this.paint.get("circle-stroke-width").evaluate(u,f),U=this.paint.get("circle-pitch-alignment")==="map",G=U?M:function(je,$e){return je.map(function(Et){return Ts(Et,$e)})}(M,A),Q=U?R*T:R,$=0,pe=m;$<pe.length;$+=1)for(var ae=0,me=pe[$];ae<me.length;ae+=1){var be=me[ae],we=U?be:Ts(be,A),Ee=Q,Ce=sl([],[be.x,be.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ee*=Ce[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ee*=E.cameraToCenterDistance/Ce[3]),Mn(G,we,Ee))return!0}return!1},t}(za));function Ts(e,t){var i=sl([],[e.x,e.y,0,1],t);return new C(i[0]/i[3],i[1]/i[3])}var Ac=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(In);function $o(e,t,i,u){var f=t.width,m=t.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==f*m*i)throw new RangeError("mismatched image size")}else u=new Uint8Array(f*m*i);return e.width=f,e.height=m,e.data=u,e}function ll(e,t,i){var u=t.width,f=t.height;if(u!==e.width||f!==e.height){var m=$o({},{width:u,height:f},i);Zp(e,m,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,f)},i),e.width=u,e.height=f,e.data=m.data}}function Zp(e,t,i,u,f,m){if(f.width===0||f.height===0)return t;if(f.width>e.width||f.height>e.height||i.x>e.width-f.width||i.y>e.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||u.x>t.width-f.width||u.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=e.data,E=t.data,T=0;T<f.height;T++)for(var A=((i.y+T)*e.width+i.x)*m,M=((u.y+T)*t.width+u.x)*m,R=0;R<f.width*m;R++)E[M+R]=x[A+R];return t}yt("HeatmapBucket",Ac,{omit:["layers"]});var As=function(e,t){$o(this,e,1,t)};As.prototype.resize=function(e){ll(this,e,1)},As.prototype.clone=function(){return new As({width:this.width,height:this.height},new Uint8Array(this.data))},As.copy=function(e,t,i,u,f){Zp(e,t,i,u,f,1)};var Hn=function(e,t){$o(this,e,4,t)};Hn.prototype.resize=function(e){ll(this,e,4)},Hn.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Hn.prototype.clone=function(){return new Hn({width:this.width,height:this.height},new Uint8Array(this.data))},Hn.copy=function(e,t,i,u,f){Zp(e,t,i,u,f,4)},yt("AlphaImage",As),yt("RGBAImage",Hn);var Ig={paint:new ln({"heatmap-radius":new vt(V.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vt(V.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new It(V.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _a(V.paint_heatmap["heatmap-color"]),"heatmap-opacity":new It(V.paint_heatmap["heatmap-opacity"])})};function Jh(e){var t={},i=e.resolution||256,u=e.clips?e.clips.length:1,f=e.image||new Hn({width:i,height:u}),m=function(Q,$,pe){t[e.evaluationKey]=pe;var ae=e.expression.evaluate(t);f.data[Q+$+0]=Math.floor(255*ae.r/ae.a),f.data[Q+$+1]=Math.floor(255*ae.g/ae.a),f.data[Q+$+2]=Math.floor(255*ae.b/ae.a),f.data[Q+$+3]=Math.floor(255*ae.a)};if(e.clips)for(var x=0,E=0;x<u;++x,E+=4*i)for(var T=0,A=0;T<i;T++,A+=4){var M=T/(i-1),R=e.clips[x];m(E,A,R.start*(1-M)+R.end*M)}else for(var U=0,G=0;U<i;U++,G+=4)m(0,G,U/(i-1));return f}var zg=function(e){function t(i){e.call(this,i,Ig),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Ac(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Jh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(za),Tg={paint:new ln({"hillshade-illumination-direction":new It(V.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new It(V.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new It(V.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new It(V.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new It(V.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new It(V.paint_hillshade["hillshade-accent-color"])})},Ag=function(e){function t(i){e.call(this,i,Tg)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(za),Pg=Qr([{name:"a_pos",components:2,type:"Int16"}],4).members,Kp=Pc,Cg=Pc;function Pc(e,t,i){i=i||2;var u,f,m,x,E,T,A,M=t&&t.length,R=M?t[0]*i:e.length,U=Qh(e,0,R,i,!0),G=[];if(!U||U.next===U.prev)return G;if(M&&(U=function($,pe,ae,me){var be,we,Ee,Ce=[];for(be=0,we=pe.length;be<we;be++)(Ee=Qh($,pe[be]*me,be<we-1?pe[be+1]*me:$.length,me,!1))===Ee.next&&(Ee.steiner=!0),Ce.push(Ng(Ee));for(Ce.sort(Bg),be=0;be<Ce.length;be++)Fg(Ce[be],ae),ae=es(ae,ae.next);return ae}(e,t,U,i)),e.length>80*i){u=m=e[0],f=x=e[1];for(var Q=i;Q<R;Q+=i)(E=e[Q])<u&&(u=E),(T=e[Q+1])<f&&(f=T),E>m&&(m=E),T>x&&(x=T);A=(A=Math.max(m-u,x-f))!==0?1/A:0}return cu(U,G,i,u,f,A),G}function Qh(e,t,i,u,f){var m,x;if(f===Xp(e,t,i,u)>0)for(m=t;m<i;m+=u)x=tf(m,e[m],e[m+1],x);else for(m=i-u;m>=t;m-=u)x=tf(m,e[m],e[m+1],x);return x&&Cc(x,x.next)&&(hu(x),x=x.next),x}function es(e,t){if(!e)return e;t||(t=e);var i,u=e;do if(i=!1,u.steiner||!Cc(u,u.next)&&Br(u.prev,u,u.next)!==0)u=u.next;else{if(hu(u),(u=t=u.prev)===u.next)break;i=!0}while(i||u!==t);return t}function cu(e,t,i,u,f,m,x){if(e){!x&&m&&function(M,R,U,G){var Q=M;do Q.z===null&&(Q.z=Hp(Q.x,Q.y,R,U,G)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==M);Q.prevZ.nextZ=null,Q.prevZ=null,function($){var pe,ae,me,be,we,Ee,Ce,je,$e=1;do{for(ae=$,$=null,we=null,Ee=0;ae;){for(Ee++,me=ae,Ce=0,pe=0;pe<$e&&(Ce++,me=me.nextZ);pe++);for(je=$e;Ce>0||je>0&&me;)Ce!==0&&(je===0||!me||ae.z<=me.z)?(be=ae,ae=ae.nextZ,Ce--):(be=me,me=me.nextZ,je--),we?we.nextZ=be:$=be,be.prevZ=we,we=be;ae=me}we.nextZ=null,$e*=2}while(Ee>1)}(Q)}(e,u,f,m);for(var E,T,A=e;e.prev!==e.next;)if(E=e.prev,T=e.next,m?Dg(e,u,f,m):Mg(e))t.push(E.i/i),t.push(e.i/i),t.push(T.i/i),hu(e),e=T.next,A=T.next;else if((e=T)===A){x?x===1?cu(e=Lg(es(e),t,i),t,i,u,f,m,2):x===2&&Rg(e,t,i,u,f,m):cu(es(e),t,i,u,f,m,1);break}}}function Mg(e){var t=e.prev,i=e,u=e.next;if(Br(t,i,u)>=0)return!1;for(var f=e.next.next;f!==e.prev;){if(ul(t.x,t.y,i.x,i.y,u.x,u.y,f.x,f.y)&&Br(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Dg(e,t,i,u){var f=e.prev,m=e,x=e.next;if(Br(f,m,x)>=0)return!1;for(var E=f.x>m.x?f.x>x.x?f.x:x.x:m.x>x.x?m.x:x.x,T=f.y>m.y?f.y>x.y?f.y:x.y:m.y>x.y?m.y:x.y,A=Hp(f.x<m.x?f.x<x.x?f.x:x.x:m.x<x.x?m.x:x.x,f.y<m.y?f.y<x.y?f.y:x.y:m.y<x.y?m.y:x.y,t,i,u),M=Hp(E,T,t,i,u),R=e.prevZ,U=e.nextZ;R&&R.z>=A&&U&&U.z<=M;){if(R!==e.prev&&R!==e.next&&ul(f.x,f.y,m.x,m.y,x.x,x.y,R.x,R.y)&&Br(R.prev,R,R.next)>=0||(R=R.prevZ,U!==e.prev&&U!==e.next&&ul(f.x,f.y,m.x,m.y,x.x,x.y,U.x,U.y)&&Br(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;R&&R.z>=A;){if(R!==e.prev&&R!==e.next&&ul(f.x,f.y,m.x,m.y,x.x,x.y,R.x,R.y)&&Br(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;U&&U.z<=M;){if(U!==e.prev&&U!==e.next&&ul(f.x,f.y,m.x,m.y,x.x,x.y,U.x,U.y)&&Br(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function Lg(e,t,i){var u=e;do{var f=u.prev,m=u.next.next;!Cc(f,m)&&$h(f,u,u.next,m)&&pu(f,m)&&pu(m,f)&&(t.push(f.i/i),t.push(u.i/i),t.push(m.i/i),hu(u),hu(u.next),u=e=m),u=u.next}while(u!==e);return es(u)}function Rg(e,t,i,u,f,m){var x=e;do{for(var E=x.next.next;E!==x.prev;){if(x.i!==E.i&&Ug(x,E)){var T=ef(x,E);return x=es(x,x.next),T=es(T,T.next),cu(x,t,i,u,f,m),void cu(T,t,i,u,f,m)}E=E.next}x=x.next}while(x!==e)}function Bg(e,t){return e.x-t.x}function Fg(e,t){if(t=function(u,f){var m,x=f,E=u.x,T=u.y,A=-1/0;do{if(T<=x.y&&T>=x.next.y&&x.next.y!==x.y){var M=x.x+(T-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(M<=E&&M>A){if(A=M,M===E){if(T===x.y)return x;if(T===x.next.y)return x.next}m=x.x<x.next.x?x:x.next}}x=x.next}while(x!==f);if(!m)return null;if(E===A)return m;var R,U=m,G=m.x,Q=m.y,$=1/0;x=m;do E>=x.x&&x.x>=G&&E!==x.x&&ul(T<Q?E:A,T,G,Q,T<Q?A:E,T,x.x,x.y)&&(R=Math.abs(T-x.y)/(E-x.x),pu(x,u)&&(R<$||R===$&&(x.x>m.x||x.x===m.x&&Og(m,x)))&&(m=x,$=R)),x=x.next;while(x!==U);return m}(e,t)){var i=ef(t,e);es(t,t.next),es(i,i.next)}}function Og(e,t){return Br(e.prev,e,t.prev)<0&&Br(t.next,e,e.next)<0}function Hp(e,t,i,u,f){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*f)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-u)*f)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ng(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function ul(e,t,i,u,f,m,x,E){return(f-x)*(t-E)-(e-x)*(m-E)>=0&&(e-x)*(u-E)-(i-x)*(t-E)>=0&&(i-x)*(m-E)-(f-x)*(u-E)>=0}function Ug(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,u){var f=i;do{if(f.i!==i.i&&f.next.i!==i.i&&f.i!==u.i&&f.next.i!==u.i&&$h(f,f.next,i,u))return!0;f=f.next}while(f!==i);return!1}(e,t)&&(pu(e,t)&&pu(t,e)&&function(i,u){var f=i,m=!1,x=(i.x+u.x)/2,E=(i.y+u.y)/2;do f.y>E!=f.next.y>E&&f.next.y!==f.y&&x<(f.next.x-f.x)*(E-f.y)/(f.next.y-f.y)+f.x&&(m=!m),f=f.next;while(f!==i);return m}(e,t)&&(Br(e.prev,e,t.prev)||Br(e,t.prev,t))||Cc(e,t)&&Br(e.prev,e,e.next)>0&&Br(t.prev,t,t.next)>0)}function Br(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Cc(e,t){return e.x===t.x&&e.y===t.y}function $h(e,t,i,u){var f=Dc(Br(e,t,i)),m=Dc(Br(e,t,u)),x=Dc(Br(i,u,e)),E=Dc(Br(i,u,t));return f!==m&&x!==E||!(f!==0||!Mc(e,i,t))||!(m!==0||!Mc(e,u,t))||!(x!==0||!Mc(i,e,u))||!(E!==0||!Mc(i,t,u))}function Mc(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Dc(e){return e>0?1:e<0?-1:0}function pu(e,t){return Br(e.prev,e,e.next)<0?Br(e,t,e.next)>=0&&Br(e,e.prev,t)>=0:Br(e,t,e.prev)<0||Br(e,e.next,t)<0}function ef(e,t){var i=new Wp(e.i,e.x,e.y),u=new Wp(t.i,t.x,t.y),f=e.next,m=t.prev;return e.next=t,t.prev=e,i.next=f,f.prev=i,u.next=i,i.prev=u,m.next=u,u.prev=m,u}function tf(e,t,i,u){var f=new Wp(e,t,i);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function hu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Wp(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xp(e,t,i,u){for(var f=0,m=t,x=i-u;m<i;m+=u)f+=(e[x]-e[m])*(e[m+1]+e[x+1]),x=m;return f}function Vg(e,t,i,u,f){(function m(x,E,T,A,M){for(;A>T;){if(A-T>600){var R=A-T+1,U=E-T+1,G=Math.log(R),Q=.5*Math.exp(2*G/3),$=.5*Math.sqrt(G*Q*(R-Q)/R)*(U-R/2<0?-1:1);m(x,E,Math.max(T,Math.floor(E-U*Q/R+$)),Math.min(A,Math.floor(E+(R-U)*Q/R+$)),M)}var pe=x[E],ae=T,me=A;for(fu(x,T,E),M(x[A],pe)>0&&fu(x,T,A);ae<me;){for(fu(x,ae,me),ae++,me--;M(x[ae],pe)<0;)ae++;for(;M(x[me],pe)>0;)me--}M(x[T],pe)===0?fu(x,T,me):fu(x,++me,A),me<=E&&(T=me+1),E<=me&&(A=me-1)}})(e,t,i||0,u||e.length-1,f||jg)}function fu(e,t,i){var u=e[t];e[t]=e[i],e[i]=u}function jg(e,t){return e<t?-1:e>t?1:0}function Yp(e,t){var i=e.length;if(i<=1)return[e];for(var u,f,m=[],x=0;x<i;x++){var E=Me(e[x]);E!==0&&(e[x].area=Math.abs(E),f===void 0&&(f=E<0),f===E<0?(u&&m.push(u),u=[e[x]]):u.push(e[x]))}if(u&&m.push(u),t>1)for(var T=0;T<m.length;T++)m[T].length<=t||(Vg(m[T],t,1,m[T].length-1,qg),m[T]=m[T].slice(0,t));return m}function qg(e,t){return t.area-e.area}function Jp(e,t,i){for(var u=i.patternDependencies,f=!1,m=0,x=t;m<x.length;m+=1){var E=x[m].paint.get(e+"-pattern");E.isConstant()||(f=!0);var T=E.constantOr(null);T&&(f=!0,u[T.to]=!0,u[T.from]=!0)}return f}function Qp(e,t,i,u,f){for(var m=f.patternDependencies,x=0,E=t;x<E.length;x+=1){var T=E[x],A=T.paint.get(e+"-pattern").value;if(A.kind!=="constant"){var M=A.evaluate({zoom:u-1},i,{},f.availableImages),R=A.evaluate({zoom:u},i,{},f.availableImages),U=A.evaluate({zoom:u+1},i,{},f.availableImages);R=R&&R.name?R.name:R,U=U&&U.name?U.name:U,m[M=M&&M.name?M.name:M]=!0,m[R]=!0,m[U]=!0,i.patterns[T.id]={min:M,mid:R,max:U}}}return i}Pc.deviation=function(e,t,i,u){var f=t&&t.length,m=Math.abs(Xp(e,0,f?t[0]*i:e.length,i));if(f)for(var x=0,E=t.length;x<E;x++)m-=Math.abs(Xp(e,t[x]*i,x<E-1?t[x+1]*i:e.length,i));var T=0;for(x=0;x<u.length;x+=3){var A=u[x]*i,M=u[x+1]*i,R=u[x+2]*i;T+=Math.abs((e[A]-e[R])*(e[M+1]-e[A+1])-(e[A]-e[M])*(e[R+1]-e[A+1]))}return m===0&&T===0?0:Math.abs((T-m)/m)},Pc.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},u=0,f=0;f<e.length;f++){for(var m=0;m<e[f].length;m++)for(var x=0;x<t;x++)i.vertices.push(e[f][m][x]);f>0&&i.holes.push(u+=e[f-1].length)}return i},Kp.default=Cg;var Ba=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ao,this.indexArray=new Ja,this.indexArray2=new Es,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new K,this.segments2=new K,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ba.prototype.populate=function(e,t,i){this.hasPattern=Jp("fill",this.layers,t);for(var u=this.layers[0].layout.get("fill-sort-key"),f=[],m=0,x=e;m<x.length;m+=1){var E=x[m],T=E.feature,A=E.id,M=E.index,R=E.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,G=yr(T,U);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),G,i)){var Q=u?u.evaluate(G,{},i,t.availableImages):void 0,$={id:A,properties:T.properties,type:T.type,sourceLayerIndex:R,index:M,geometry:U?G.geometry:ir(T),patterns:{},sortKey:Q};f.push($)}}u&&f.sort(function(je,$e){return je.sortKey-$e.sortKey});for(var pe=0,ae=f;pe<ae.length;pe+=1){var me=ae[pe],be=me.geometry,we=me.index,Ee=me.sourceLayerIndex;if(this.hasPattern){var Ce=Qp("fill",this.layers,me,this.zoom,t);this.patternFeatures.push(Ce)}else this.addFeature(me,be,we,i,{});t.featureIndex.insert(e[we].feature,be,we,Ee,this.index)}},Ba.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ba.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.patternFeatures;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Ba.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ba.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ba.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pg),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Ba.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ba.prototype.addFeature=function(e,t,i,u,f){for(var m=0,x=Yp(t,500);m<x.length;m+=1){for(var E=x[m],T=0,A=0,M=E;A<M.length;A+=1)T+=M[A].length;for(var R=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),U=R.vertexLength,G=[],Q=[],$=0,pe=E;$<pe.length;$+=1){var ae=pe[$];if(ae.length!==0){ae!==E[0]&&Q.push(G.length/2);var me=this.segments2.prepareSegment(ae.length,this.layoutVertexArray,this.indexArray2),be=me.vertexLength;this.layoutVertexArray.emplaceBack(ae[0].x,ae[0].y),this.indexArray2.emplaceBack(be+ae.length-1,be),G.push(ae[0].x),G.push(ae[0].y);for(var we=1;we<ae.length;we++)this.layoutVertexArray.emplaceBack(ae[we].x,ae[we].y),this.indexArray2.emplaceBack(be+we-1,be+we),G.push(ae[we].x),G.push(ae[we].y);me.vertexLength+=ae.length,me.primitiveLength+=ae.length}}for(var Ee=Kp(G,Q),Ce=0;Ce<Ee.length;Ce+=3)this.indexArray.emplaceBack(U+Ee[Ce],U+Ee[Ce+1],U+Ee[Ce+2]);R.vertexLength+=T,R.primitiveLength+=Ee.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},yt("FillBucket",Ba,{omit:["layers","patternFeatures"]});var Gg=new ln({"fill-sort-key":new vt(V.layout_fill["fill-sort-key"])}),Zg={paint:new ln({"fill-antialias":new It(V.paint_fill["fill-antialias"]),"fill-opacity":new vt(V.paint_fill["fill-opacity"]),"fill-color":new vt(V.paint_fill["fill-color"]),"fill-outline-color":new vt(V.paint_fill["fill-outline-color"]),"fill-translate":new It(V.paint_fill["fill-translate"]),"fill-translate-anchor":new It(V.paint_fill["fill-translate-anchor"]),"fill-pattern":new il(V.paint_fill["fill-pattern"])}),layout:Gg},Kg=function(e){function t(i){e.call(this,i,Zg)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u);var f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new Ba(i)},t.prototype.queryRadius=function(){return Zr(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,T){return va(Ra(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,T),m)},t.prototype.isTileClipped=function(){return!0},t}(za),Hg=Qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,rf=cl;function cl(e,t,i,u,f){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=f,e.readFields(Wg,this,t)}function Wg(e,t,i){e==1?t.id=i.readVarint():e==2?function(u,f){for(var m=u.readVarint()+u.pos;u.pos<m;){var x=f._keys[u.readVarint()],E=f._values[u.readVarint()];f.properties[x]=E}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function Xg(e){for(var t,i,u=0,f=0,m=e.length,x=m-1;f<m;x=f++)u+=((i=e[x]).x-(t=e[f]).x)*(t.y+i.y);return u}cl.types=["Unknown","Point","LineString","Polygon"],cl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,u=1,f=0,m=0,x=0,E=[];e.pos<i;){if(f<=0){var T=e.readVarint();u=7&T,f=T>>3}if(f--,u===1||u===2)m+=e.readSVarint(),x+=e.readSVarint(),u===1&&(t&&E.push(t),t=[]),t.push(new C(m,x));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&E.push(t),E},cl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,u=0,f=0,m=0,x=1/0,E=-1/0,T=1/0,A=-1/0;e.pos<t;){if(u<=0){var M=e.readVarint();i=7&M,u=M>>3}if(u--,i===1||i===2)(f+=e.readSVarint())<x&&(x=f),f>E&&(E=f),(m+=e.readSVarint())<T&&(T=m),m>A&&(A=m);else if(i!==7)throw new Error("unknown command "+i)}return[x,T,E,A]},cl.prototype.toGeoJSON=function(e,t,i){var u,f,m=this.extent*Math.pow(2,i),x=this.extent*e,E=this.extent*t,T=this.loadGeometry(),A=cl.types[this.type];function M(G){for(var Q=0;Q<G.length;Q++){var $=G[Q];G[Q]=[360*($.x+x)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*($.y+E)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(u=0;u<T.length;u++)R[u]=T[u][0];M(T=R);break;case 2:for(u=0;u<T.length;u++)M(T[u]);break;case 3:for(T=function(G){var Q=G.length;if(Q<=1)return[G];for(var $,pe,ae=[],me=0;me<Q;me++){var be=Xg(G[me]);be!==0&&(pe===void 0&&(pe=be<0),pe===be<0?($&&ae.push($),$=[G[me]]):$.push(G[me]))}return $&&ae.push($),ae}(T),u=0;u<T.length;u++)for(f=0;f<T[u].length;f++)M(T[u][f])}T.length===1?T=T[0]:A="Multi"+A;var U={type:"Feature",geometry:{type:A,coordinates:T},properties:this.properties};return"id"in this&&(U.id=this.id),U};var nf=af;function af(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Yg,this,t),this.length=this._features.length}function Yg(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(u){for(var f=null,m=u.readVarint()+u.pos;u.pos<m;){var x=u.readVarint()>>3;f=x===1?u.readString():x===2?u.readFloat():x===3?u.readDouble():x===4?u.readVarint64():x===5?u.readVarint():x===6?u.readSVarint():x===7?u.readBoolean():null}return f}(i))}function Jg(e,t,i){if(e===3){var u=new nf(i,i.readVarint()+i.pos);u.length&&(t[u.name]=u)}}af.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new rf(this._pbf,t,this.extent,this._keys,this._values)};var pl={VectorTile:function(e,t){this.layers=e.readFields(Jg,{},t)},VectorTileFeature:rf,VectorTileLayer:nf},Qg=pl.VectorTileFeature.types,$p=Math.pow(2,13);function du(e,t,i,u,f,m,x,E){e.emplaceBack(t,i,2*Math.floor(u*$p)+x,f*$p*2,m*$p*2,Math.round(E))}var Fa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new La,this.indexArray=new Ja,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new K,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function $g(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Fa.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=Jp("fill-extrusion",this.layers,t);for(var u=0,f=e;u<f.length;u+=1){var m=f[u],x=m.feature,E=m.id,T=m.index,A=m.sourceLayerIndex,M=this.layers[0]._featureFilter.needGeometry,R=yr(x,M);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),R,i)){var U={id:E,sourceLayerIndex:A,index:T,geometry:M?R.geometry:ir(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(Qp("fill-extrusion",this.layers,U,this.zoom,t)):this.addFeature(U,U.geometry,T,i,{}),t.featureIndex.insert(x,U.geometry,T,A,this.index,!0)}}},Fa.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.features;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Fa.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Fa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fa.prototype.addFeature=function(e,t,i,u,f){for(var m=0,x=Yp(t,500);m<x.length;m+=1){for(var E=x[m],T=0,A=0,M=E;A<M.length;A+=1)T+=M[A].length;for(var R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),U=0,G=E;U<G.length;U+=1){var Q=G[U];if(Q.length!==0&&!((ri=Q).every(function(Kt){return Kt.x<0})||ri.every(function(Kt){return Kt.x>8192})||ri.every(function(Kt){return Kt.y<0})||ri.every(function(Kt){return Kt.y>8192})))for(var $=0,pe=0;pe<Q.length;pe++){var ae=Q[pe];if(pe>=1){var me=Q[pe-1];if(!$g(ae,me)){R.vertexLength+4>K.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var be=ae.sub(me)._perp()._unit(),we=me.dist(ae);$+we>32768&&($=0),du(this.layoutVertexArray,ae.x,ae.y,be.x,be.y,0,0,$),du(this.layoutVertexArray,ae.x,ae.y,be.x,be.y,0,1,$),du(this.layoutVertexArray,me.x,me.y,be.x,be.y,0,0,$+=we),du(this.layoutVertexArray,me.x,me.y,be.x,be.y,0,1,$);var Ee=R.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),R.vertexLength+=4,R.primitiveLength+=2}}}}if(R.vertexLength+T>K.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),Qg[e.type]==="Polygon"){for(var Ce=[],je=[],$e=R.vertexLength,Et=0,ct=E;Et<ct.length;Et+=1){var Tt=ct[Et];if(Tt.length!==0){Tt!==E[0]&&je.push(Ce.length/2);for(var ht=0;ht<Tt.length;ht++){var Qt=Tt[ht];du(this.layoutVertexArray,Qt.x,Qt.y,0,0,1,1,0),Ce.push(Qt.x),Ce.push(Qt.y)}}}for(var Lt=Kp(Ce,je),bt=0;bt<Lt.length;bt+=3)this.indexArray.emplaceBack($e+Lt[bt],$e+Lt[bt+2],$e+Lt[bt+1]);R.primitiveLength+=Lt.length/3,R.vertexLength+=T}}var ri;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},yt("FillExtrusionBucket",Fa,{omit:["layers","features"]});var ey={paint:new ln({"fill-extrusion-opacity":new It(V["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vt(V["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new It(V["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new It(V["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new il(V["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vt(V["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vt(V["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new It(V["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ty=function(e){function t(i){e.call(this,i,ey)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Fa(i)},t.prototype.queryRadius=function(){return Zr(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,T,A){var M=Ra(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,T),R=this.paint.get("fill-extrusion-height").evaluate(u,f),U=this.paint.get("fill-extrusion-base").evaluate(u,f),G=function($,pe,ae,me){for(var be=[],we=0,Ee=$;we<Ee.length;we+=1){var Ce=Ee[we],je=[Ce.x,Ce.y,0,1];sl(je,je,pe),be.push(new C(je[0]/je[3],je[1]/je[3]))}return be}(M,A),Q=function($,pe,ae,me){for(var be=[],we=[],Ee=me[8]*pe,Ce=me[9]*pe,je=me[10]*pe,$e=me[11]*pe,Et=me[8]*ae,ct=me[9]*ae,Tt=me[10]*ae,ht=me[11]*ae,Qt=0,Lt=$;Qt<Lt.length;Qt+=1){for(var bt=[],ri=[],Kt=0,yi=Lt[Qt];Kt<yi.length;Kt+=1){var At=yi[Kt],Si=At.x,Qi=At.y,sr=me[0]*Si+me[4]*Qi+me[12],rr=me[1]*Si+me[5]*Qi+me[13],$i=me[2]*Si+me[6]*Qi+me[14],lr=me[3]*Si+me[7]*Qi+me[15],Kr=$i+je,Hr=lr+$e,Tn=sr+Et,tn=rr+ct,An=$i+Tt,_r=lr+ht,rn=new C((sr+Ee)/Hr,(rr+Ce)/Hr);rn.z=Kr/Hr,bt.push(rn);var si=new C(Tn/_r,tn/_r);si.z=An/_r,ri.push(si)}be.push(bt),we.push(ri)}return[be,we]}(m,U,R,A);return function($,pe,ae){var me=1/0;va(ae,pe)&&(me=of(ae,pe[0]));for(var be=0;be<pe.length;be++)for(var we=pe[be],Ee=$[be],Ce=0;Ce<we.length-1;Ce++){var je=we[Ce],$e=[je,we[Ce+1],Ee[Ce+1],Ee[Ce],je];eo(ae,$e)&&(me=Math.min(me,of(ae,$e)))}return me!==1/0&&me}(Q[0],Q[1],G)},t}(za);function mu(e,t){return e.x*t.x+e.y*t.y}function of(e,t){if(e.length===1){for(var i,u=0,f=t[u++];!i||f.equals(i);)if(!(i=t[u++]))return 1/0;for(;u<t.length;u++){var m=t[u],x=e[0],E=i.sub(f),T=m.sub(f),A=x.sub(f),M=mu(E,E),R=mu(E,T),U=mu(T,T),G=mu(A,E),Q=mu(A,T),$=M*U-R*R,pe=(U*G-R*Q)/$,ae=(M*Q-R*G)/$,me=f.z*(1-pe-ae)+i.z*pe+m.z*ae;if(isFinite(me))return me}return 1/0}for(var be=1/0,we=0,Ee=t;we<Ee.length;we+=1)be=Math.min(be,Ee[we].z);return be}var iy=Qr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ry=Qr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,ny=pl.VectorTileFeature.types,ay=Math.cos(Math.PI/180*37.5),sf=Math.pow(2,14)/.5,Ln=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new Zn,this.layoutVertexArray2=new Wo,this.indexArray=new Ja,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new K,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Ln.prototype.populate=function(e,t,i){this.hasPattern=Jp("line",this.layers,t);for(var u=this.layers[0].layout.get("line-sort-key"),f=[],m=0,x=e;m<x.length;m+=1){var E=x[m],T=E.feature,A=E.id,M=E.index,R=E.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,G=yr(T,U);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),G,i)){var Q=u?u.evaluate(G,{},i):void 0,$={id:A,properties:T.properties,type:T.type,sourceLayerIndex:R,index:M,geometry:U?G.geometry:ir(T),patterns:{},sortKey:Q};f.push($)}}u&&f.sort(function(je,$e){return je.sortKey-$e.sortKey});for(var pe=0,ae=f;pe<ae.length;pe+=1){var me=ae[pe],be=me.geometry,we=me.index,Ee=me.sourceLayerIndex;if(this.hasPattern){var Ce=Qp("line",this.layers,me,this.zoom,t);this.patternFeatures.push(Ce)}else this.addFeature(me,be,we,i,{});t.featureIndex.insert(e[we].feature,be,we,Ee,this.index)}},Ln.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ln.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.patternFeatures;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Ln.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ln.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ln.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ry)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,iy),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ln.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ln.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Ln.prototype.addFeature=function(e,t,i,u,f){var m=this.layers[0].layout,x=m.get("line-join").evaluate(e,{}),E=m.get("line-cap"),T=m.get("line-miter-limit"),A=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var M=0,R=t;M<R.length;M+=1)this.addLine(R[M],e,x,E,T,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},Ln.prototype.addLine=function(e,t,i,u,f,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<e.length-1;x++)this.totalDistance+=e[x].dist(e[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var E=ny[t.type]==="Polygon",T=e.length;T>=2&&e[T-1].equals(e[T-2]);)T--;for(var A=0;A<T-1&&e[A].equals(e[A+1]);)A++;if(!(T<(E?3:2))){i==="bevel"&&(f=1.05);var M,R=this.overscaling<=16?122880/(512*this.overscaling):0,U=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray),G=void 0,Q=void 0,$=void 0,pe=void 0;this.e1=this.e2=-1,E&&(pe=e[A].sub(M=e[T-2])._unit()._perp());for(var ae=A;ae<T;ae++)if(!(Q=ae===T-1?E?e[A+1]:void 0:e[ae+1])||!e[ae].equals(Q)){pe&&($=pe),M&&(G=M),M=e[ae],pe=Q?Q.sub(M)._unit()._perp():$;var me=($=$||pe).add(pe);me.x===0&&me.y===0||me._unit();var be=$.x*pe.x+$.y*pe.y,we=me.x*pe.x+me.y*pe.y,Ee=we!==0?1/we:1/0,Ce=2*Math.sqrt(2-2*we),je=we<ay&&G&&Q,$e=$.x*pe.y-$.y*pe.x>0;if(je&&ae>A){var Et=M.dist(G);if(Et>2*R){var ct=M.sub(M.sub(G)._mult(R/Et)._round());this.updateDistance(G,ct),this.addCurrentVertex(ct,$,0,0,U),G=ct}}var Tt=G&&Q,ht=Tt?i:E?"butt":u;if(Tt&&ht==="round"&&(Ee<m?ht="miter":Ee<=2&&(ht="fakeround")),ht==="miter"&&Ee>f&&(ht="bevel"),ht==="bevel"&&(Ee>2&&(ht="flipbevel"),Ee<f&&(ht="miter")),G&&this.updateDistance(G,M),ht==="miter")me._mult(Ee),this.addCurrentVertex(M,me,0,0,U);else if(ht==="flipbevel"){if(Ee>100)me=pe.mult(-1);else{var Qt=Ee*$.add(pe).mag()/$.sub(pe).mag();me._perp()._mult(Qt*($e?-1:1))}this.addCurrentVertex(M,me,0,0,U),this.addCurrentVertex(M,me.mult(-1),0,0,U)}else if(ht==="bevel"||ht==="fakeround"){var Lt=-Math.sqrt(Ee*Ee-1),bt=$e?Lt:0,ri=$e?0:Lt;if(G&&this.addCurrentVertex(M,$,bt,ri,U),ht==="fakeround")for(var Kt=Math.round(180*Ce/Math.PI/20),yi=1;yi<Kt;yi++){var At=yi/Kt;if(At!==.5){var Si=At-.5;At+=At*Si*(At-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*Si*Si+(.848013+be*(.215638*be-1.06021)))}var Qi=pe.sub($)._mult(At)._add($)._unit()._mult($e?-1:1);this.addHalfVertex(M,Qi.x,Qi.y,!1,$e,0,U)}Q&&this.addCurrentVertex(M,pe,-bt,-ri,U)}else if(ht==="butt")this.addCurrentVertex(M,me,0,0,U);else if(ht==="square"){var sr=G?1:-1;this.addCurrentVertex(M,me,sr,sr,U)}else ht==="round"&&(G&&(this.addCurrentVertex(M,$,0,0,U),this.addCurrentVertex(M,$,1,1,U,!0)),Q&&(this.addCurrentVertex(M,pe,-1,-1,U,!0),this.addCurrentVertex(M,pe,0,0,U)));if(je&&ae<T-1){var rr=M.dist(Q);if(rr>2*R){var $i=M.add(Q.sub(M)._mult(R/rr)._round());this.updateDistance(M,$i),this.addCurrentVertex($i,pe,0,0,U),M=$i}}}}},Ln.prototype.addCurrentVertex=function(e,t,i,u,f,m){m===void 0&&(m=!1);var x=t.y*u-t.x,E=-t.y-t.x*u;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,m,!1,i,f),this.addHalfVertex(e,x,E,m,!0,-u,f),this.distance>sf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,u,f,m))},Ln.prototype.addHalfVertex=function(e,t,i,u,f,m,x){var E=.5*(this.lineClips?this.scaledDistance*(sf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(f?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(m===0?0:m<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var T=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),x.primitiveLength++),f?this.e2=T:this.e1=T},Ln.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ln.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},yt("LineBucket",Ln,{omit:["layers","patternFeatures"]});var oy=new ln({"line-cap":new It(V.layout_line["line-cap"]),"line-join":new vt(V.layout_line["line-join"]),"line-miter-limit":new It(V.layout_line["line-miter-limit"]),"line-round-limit":new It(V.layout_line["line-round-limit"]),"line-sort-key":new vt(V.layout_line["line-sort-key"])}),lf={paint:new ln({"line-opacity":new vt(V.paint_line["line-opacity"]),"line-color":new vt(V.paint_line["line-color"]),"line-translate":new It(V.paint_line["line-translate"]),"line-translate-anchor":new It(V.paint_line["line-translate-anchor"]),"line-width":new vt(V.paint_line["line-width"]),"line-gap-width":new vt(V.paint_line["line-gap-width"]),"line-offset":new vt(V.paint_line["line-offset"]),"line-blur":new vt(V.paint_line["line-blur"]),"line-dasharray":new kn(V.paint_line["line-dasharray"]),"line-pattern":new il(V.paint_line["line-pattern"]),"line-gradient":new _a(V.paint_line["line-gradient"])}),layout:oy},uf=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,u){return u=new ai(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,i,u)},t.prototype.evaluate=function(i,u,f,m){return u=xe({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,i,u,f,m)},t}(vt))(lf.paint.properties["line-width"].specification);uf.useIntegerZoom=!0;var sy=function(e){function t(i){e.call(this,i,lf),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Un,this.gradientVersion=(this.gradientVersion+1)%X)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u),this.paint._values["line-floorwidth"]=uf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new Ln(i)},t.prototype.queryRadius=function(i){var u=i,f=cf(Pa("line-width",this,u),Pa("line-gap-width",this,u)),m=Pa("line-offset",this,u);return f/2+Math.abs(m)+Zr(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,T){var A=Ra(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,T),M=T/2*cf(this.paint.get("line-width").evaluate(u,f),this.paint.get("line-gap-width").evaluate(u,f)),R=this.paint.get("line-offset").evaluate(u,f);return R&&(m=function(U,G){for(var Q=[],$=new C(0,0),pe=0;pe<U.length;pe++){for(var ae=U[pe],me=[],be=0;be<ae.length;be++){var we=ae[be],Ee=ae[be+1],Ce=be===0?$:we.sub(ae[be-1])._unit()._perp(),je=be===ae.length-1?$:Ee.sub(we)._unit()._perp(),$e=Ce._add(je)._unit();$e._mult(1/($e.x*je.x+$e.y*je.y)),me.push($e._mult(G)._add(we))}Q.push(me)}return Q}(m,R*T)),function(U,G,Q){for(var $=0;$<G.length;$++){var pe=G[$];if(U.length>=3){for(var ae=0;ae<pe.length;ae++)if(Aa(U,pe[ae]))return!0}if(la(U,pe,Q))return!0}return!1}(A,m,M)},t.prototype.isTileClipped=function(){return!0},t}(za);function cf(e,t){return t>0?t+2*e:e}var ly=Qr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uy=Qr([{name:"a_projected_pos",components:3,type:"Float32"}],4),cy=(Qr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),pf=(Qr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),py=Qr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hy(e,t,i){return e.sections.forEach(function(u){u.text=function(f,m,x){var E=m.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?f=f.toLocaleUpperCase():E==="lowercase"&&(f=f.toLocaleLowerCase()),ia.applyArabicShaping&&(f=ia.applyArabicShaping(f)),f}(u.text,t,i)}),e}Qr([{name:"triangle",components:3,type:"Uint16"}]),Qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qr([{type:"Float32",name:"offsetX"}]),Qr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var gu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},hf=function(e,t,i,u,f){var m,x,E=8*f-u-1,T=(1<<E)-1,A=T>>1,M=-7,R=i?f-1:0,U=i?-1:1,G=e[t+R];for(R+=U,m=G&(1<<-M)-1,G>>=-M,M+=E;M>0;m=256*m+e[t+R],R+=U,M-=8);for(x=m&(1<<-M)-1,m>>=-M,M+=u;M>0;x=256*x+e[t+R],R+=U,M-=8);if(m===0)m=1-A;else{if(m===T)return x?NaN:1/0*(G?-1:1);x+=Math.pow(2,u),m-=A}return(G?-1:1)*x*Math.pow(2,m-u)},ff=function(e,t,i,u,f,m){var x,E,T,A=8*m-f-1,M=(1<<A)-1,R=M>>1,U=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=u?0:m-1,Q=u?1:-1,$=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(E=isNaN(t)?1:0,x=M):(x=Math.floor(Math.log(t)/Math.LN2),t*(T=Math.pow(2,-x))<1&&(x--,T*=2),(t+=x+R>=1?U/T:U*Math.pow(2,1-R))*T>=2&&(x++,T/=2),x+R>=M?(E=0,x=M):x+R>=1?(E=(t*T-1)*Math.pow(2,f),x+=R):(E=t*Math.pow(2,R-1)*Math.pow(2,f),x=0));f>=8;e[i+G]=255&E,G+=Q,E/=256,f-=8);for(x=x<<f|E,A+=f;A>0;e[i+G]=255&x,G+=Q,x/=256,A-=8);e[i+G-Q]|=128*$},Lc=ji;function ji(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}ji.Varint=0,ji.Fixed64=1,ji.Bytes=2,ji.Fixed32=5;var df=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Do(e){return e.type===ji.Bytes?e.readVarint()+e.pos:e.pos+1}function hl(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function mf(e,t,i){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(u);for(var f=i.pos-1;f>=e;f--)i.buf[f+u]=i.buf[f]}function fy(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function dy(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function my(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function gy(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function yy(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function _y(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function vy(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function by(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function xy(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Rc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function fl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function gf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function wy(e,t,i){e===1&&i.readMessage(Sy,t)}function Sy(e,t,i){if(e===3){var u=i.readMessage(Ey,{}),f=u.width,m=u.height,x=u.left,E=u.top,T=u.advance;t.push({id:u.id,bitmap:new As({width:f+6,height:m+6},u.bitmap),metrics:{width:f,height:m,left:x,top:E,advance:T}})}}function Ey(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function yf(e){for(var t=0,i=0,u=0,f=e;u<f.length;u+=1){var m=f[u];t+=m.w*m.h,i=Math.max(i,m.w)}e.sort(function($,pe){return pe.h-$.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],E=0,T=0,A=0,M=e;A<M.length;A+=1)for(var R=M[A],U=x.length-1;U>=0;U--){var G=x[U];if(!(R.w>G.w||R.h>G.h)){if(R.x=G.x,R.y=G.y,T=Math.max(T,R.y+R.h),E=Math.max(E,R.x+R.w),R.w===G.w&&R.h===G.h){var Q=x.pop();U<x.length&&(x[U]=Q)}else R.h===G.h?(G.x+=R.w,G.w-=R.w):R.w===G.w?(G.y+=R.h,G.h-=R.h):(x.push({x:G.x+R.w,y:G.y,w:G.w-R.w,h:R.h}),G.y+=R.h,G.h-=R.h);break}}return{w:E,h:T,fill:t/(E*T)||0}}ji.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var u=this.readVarint(),f=u>>3,m=this.pos;this.type=7&u,e(f,t,this),this.pos===m&&this.skip(u)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Rc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=gf(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Rc(this.buf,this.pos)+4294967296*Rc(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Rc(this.buf,this.pos)+4294967296*gf(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=hf(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=hf(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,u=this.buf;return t=127&(i=u[this.pos++]),i<128?t:(t|=(127&(i=u[this.pos++]))<<7,i<128?t:(t|=(127&(i=u[this.pos++]))<<14,i<128?t:(t|=(127&(i=u[this.pos++]))<<21,i<128?t:function(f,m,x){var E,T,A=x.buf;if(E=(112&(T=A[x.pos++]))>>4,T<128||(E|=(127&(T=A[x.pos++]))<<3,T<128)||(E|=(127&(T=A[x.pos++]))<<10,T<128)||(E|=(127&(T=A[x.pos++]))<<17,T<128)||(E|=(127&(T=A[x.pos++]))<<24,T<128)||(E|=(1&(T=A[x.pos++]))<<31,T<128))return hl(f,E,m);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&df?function(i,u,f){return df.decode(i.subarray(u,f))}(this.buf,t,e):function(i,u,f){for(var m="",x=u;x<f;){var E,T,A,M=i[x],R=null,U=M>239?4:M>223?3:M>191?2:1;if(x+U>f)break;U===1?M<128&&(R=M):U===2?(192&(E=i[x+1]))==128&&(R=(31&M)<<6|63&E)<=127&&(R=null):U===3?(T=i[x+2],(192&(E=i[x+1]))==128&&(192&T)==128&&((R=(15&M)<<12|(63&E)<<6|63&T)<=2047||R>=55296&&R<=57343)&&(R=null)):U===4&&(T=i[x+2],A=i[x+3],(192&(E=i[x+1]))==128&&(192&T)==128&&(192&A)==128&&((R=(15&M)<<18|(63&E)<<12|(63&T)<<6|63&A)<=65535||R>=1114112)&&(R=null)),R===null?(R=65533,U=1):R>65535&&(R-=65536,m+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),m+=String.fromCharCode(R),x+=U}return m}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==ji.Bytes)return e.push(this.readVarint(t));var i=Do(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==ji.Bytes)return e.push(this.readSVarint());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==ji.Bytes)return e.push(this.readBoolean());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==ji.Bytes)return e.push(this.readFloat());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==ji.Bytes)return e.push(this.readDouble());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==ji.Bytes)return e.push(this.readFixed32());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==ji.Bytes)return e.push(this.readSFixed32());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==ji.Bytes)return e.push(this.readFixed64());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==ji.Bytes)return e.push(this.readSFixed64());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===ji.Varint)for(;this.buf[this.pos++]>127;);else if(t===ji.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ji.Fixed32)this.pos+=4;else{if(t!==ji.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),fl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),fl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),fl(this.buf,-1&e,this.pos),fl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),fl(this.buf,-1&e,this.pos),fl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var u,f;if(t>=0?(u=t%4294967296|0,f=t/4294967296|0):(f=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,f=f+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(m,x,E){E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,E.buf[E.pos]=127&(m>>>=7)}(u,0,i),function(m,x){var E=(7&m)<<4;x.buf[x.pos++]|=E|((m>>>=3)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m)))))}(f,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(u,f,m){for(var x,E,T=0;T<f.length;T++){if((x=f.charCodeAt(T))>55295&&x<57344){if(!E){x>56319||T+1===f.length?(u[m++]=239,u[m++]=191,u[m++]=189):E=x;continue}if(x<56320){u[m++]=239,u[m++]=191,u[m++]=189,E=x;continue}x=E-55296<<10|x-56320|65536,E=null}else E&&(u[m++]=239,u[m++]=191,u[m++]=189,E=null);x<128?u[m++]=x:(x<2048?u[m++]=x>>6|192:(x<65536?u[m++]=x>>12|224:(u[m++]=x>>18|240,u[m++]=x>>12&63|128),u[m++]=x>>6&63|128),u[m++]=63&x|128)}return m}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&mf(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),ff(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ff(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var u=this.pos-i;u>=128&&mf(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,t,i){this.writeTag(e,ji.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,fy,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,dy,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,yy,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,my,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,gy,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,_y,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,vy,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,by,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xy,t)},writeBytesField:function(e,t){this.writeTag(e,ji.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,ji.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,ji.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,ji.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,ji.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,ji.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,ji.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,ji.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,ji.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,ji.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var Bc=function(e,t){var i=t.pixelRatio,u=t.version,f=t.stretchX,m=t.stretchY,x=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=f,this.stretchY=m,this.content=x,this.version=u},yu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};yu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},yu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},yu.tlbr.get=function(){return this.tl.concat(this.br)},yu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Bc.prototype,yu);var _u=function(e,t){var i={},u={};this.haveRenderCallbacks=[];var f=[];this.addImages(e,i,f),this.addImages(t,u,f);var m=yf(f),x=new Hn({width:m.w||1,height:m.h||1});for(var E in e){var T=e[E],A=i[E].paddedRect;Hn.copy(T.data,x,{x:0,y:0},{x:A.x+1,y:A.y+1},T.data)}for(var M in t){var R=t[M],U=u[M].paddedRect,G=U.x+1,Q=U.y+1,$=R.data.width,pe=R.data.height;Hn.copy(R.data,x,{x:0,y:0},{x:G,y:Q},R.data),Hn.copy(R.data,x,{x:0,y:pe-1},{x:G,y:Q-1},{width:$,height:1}),Hn.copy(R.data,x,{x:0,y:0},{x:G,y:Q+pe},{width:$,height:1}),Hn.copy(R.data,x,{x:$-1,y:0},{x:G-1,y:Q},{width:1,height:pe}),Hn.copy(R.data,x,{x:0,y:0},{x:G+$,y:Q},{width:1,height:pe})}this.image=x,this.iconPositions=i,this.patternPositions=u};_u.prototype.addImages=function(e,t,i){for(var u in e){var f=e[u],m={x:0,y:0,w:f.data.width+2,h:f.data.height+2};i.push(m),t[u]=new Bc(m,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},_u.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},_u.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var u=e.tl;i.update(t.data,void 0,{x:u[0],y:u[1]})}},yt("ImagePosition",Bc),yt("ImageAtlas",_u);var ua={horizontal:1,vertical:2,horizontalOnly:3},dl=function(){this.scale=1,this.fontStack="",this.imageName=null};dl.forText=function(e,t){var i=new dl;return i.scale=e||1,i.fontStack=t,i},dl.forImage=function(e){var t=new dl;return t.imageName=e,t};var zn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Fc(e,t,i,u,f,m,x,E,T,A,M,R,U,G,Q,$){var pe,ae=zn.fromFeature(e,f);R===ua.vertical&&ae.verticalizePunctuation();var me=ia.processBidirectionalText,be=ia.processStyledBidirectionalText;if(me&&ae.sections.length===1){pe=[];for(var we=0,Ee=me(ae.toString(),eh(ae,A,m,t,u,G,Q));we<Ee.length;we+=1){var Ce=Ee[we],je=new zn;je.text=Ce,je.sections=ae.sections;for(var $e=0;$e<Ce.length;$e++)je.sectionIndex.push(0);pe.push(je)}}else if(be){pe=[];for(var Et=0,ct=be(ae.text,ae.sectionIndex,eh(ae,A,m,t,u,G,Q));Et<ct.length;Et+=1){var Tt=ct[Et],ht=new zn;ht.text=Tt[0],ht.sectionIndex=Tt[1],ht.sections=ae.sections,pe.push(ht)}}else pe=function(bt,ri){for(var Kt=[],yi=bt.text,At=0,Si=0,Qi=ri;Si<Qi.length;Si+=1){var sr=Qi[Si];Kt.push(bt.substring(At,sr)),At=sr}return At<yi.length&&Kt.push(bt.substring(At,yi.length)),Kt}(ae,eh(ae,A,m,t,u,G,Q));var Qt=[],Lt={positionedLines:Qt,text:ae.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(bt,ri,Kt,yi,At,Si,Qi,sr,rr,$i,lr,Kr){for(var Hr=0,Tn=-17,tn=0,An=0,_r=sr==="right"?1:sr==="left"?0:.5,rn=0,si=0,Bi=At;si<Bi.length;si+=1){var Mi=Bi[si];Mi.trim();var vi=Mi.getMaxScale(),Rn=24*(vi-1),bn={positionedGlyphs:[],lineOffset:0};bt.positionedLines[rn]=bn;var Wi=bn.positionedGlyphs,zr=0;if(Mi.length()){for(var xn=0;xn<Mi.length();xn++){var Ei=Mi.getSection(xn),ro=Mi.getSectionIndex(xn),ca=Mi.getCharCode(xn),no=0,vr=null,ao=null,Ca=null,wl=24,Ds=!(rr===ua.horizontal||!lr&&!$s(ca)||lr&&(Oc[ca]||(Fo=ca,it.Arabic(Fo)||it["Arabic Supplement"](Fo)||it["Arabic Extended-A"](Fo)||it["Arabic Presentation Forms-A"](Fo)||it["Arabic Presentation Forms-B"](Fo))));if(Ei.imageName){var Sl=yi[Ei.imageName];if(!Sl)continue;Ca=Ei.imageName,bt.iconsInText=bt.iconsInText||!0,ao=Sl.paddedRect;var Bo=Sl.displaySize;Ei.scale=24*Ei.scale/Kr,no=Rn+(24-Bo[1]*Ei.scale),wl=(vr={width:Bo[0],height:Bo[1],left:1,top:-3,advance:Ds?Bo[1]:Bo[0]}).advance;var El=Ds?Bo[0]*Ei.scale-24*vi:Bo[1]*Ei.scale-24*vi;El>0&&El>zr&&(zr=El)}else{var Hc=Kt[Ei.fontStack],kl=Hc&&Hc[ca];if(kl&&kl.rect)ao=kl.rect,vr=kl.metrics;else{var xu=ri[Ei.fontStack],Wc=xu&&xu[ca];if(!Wc)continue;vr=Wc.metrics}no=24*(vi-Ei.scale)}Ds?(bt.verticalizable=!0,Wi.push({glyph:ca,imageName:Ca,x:Hr,y:Tn+no,vertical:Ds,scale:Ei.scale,fontStack:Ei.fontStack,sectionIndex:ro,metrics:vr,rect:ao}),Hr+=wl*Ei.scale+$i):(Wi.push({glyph:ca,imageName:Ca,x:Hr,y:Tn+no,vertical:Ds,scale:Ei.scale,fontStack:Ei.fontStack,sectionIndex:ro,metrics:vr,rect:ao}),Hr+=vr.advance*Ei.scale+$i)}Wi.length!==0&&(tn=Math.max(Hr-$i,tn),Iy(Wi,0,Wi.length-1,_r,zr)),Hr=0;var Xc=Si*vi+zr;bn.lineOffset=Math.max(zr,Rn),Tn+=Xc,An=Math.max(Xc,An),++rn}else Tn+=Si,++rn}var Fo,wu=Tn- -17,Il=th(Qi),is=Il.horizontalAlign,zl=Il.verticalAlign;(function(Yc,Jc,Su,Eu,Qc,ku,Iu,zu,$c){var Tl,ep=(Jc-Su)*Qc;Tl=ku!==Iu?-zu*Eu- -17:(-Eu*$c+.5)*Iu;for(var Al=0,Tu=Yc;Al<Tu.length;Al+=1)for(var Ls=0,Au=Tu[Al].positionedGlyphs;Ls<Au.length;Ls+=1){var Pl=Au[Ls];Pl.x+=ep,Pl.y+=Tl}})(bt.positionedLines,_r,is,zl,tn,An,Si,wu,At.length),bt.top+=-zl*wu,bt.bottom=bt.top+wu,bt.left+=-is*tn,bt.right=bt.left+tn}(Lt,t,i,u,pe,x,E,T,R,A,U,$),!function(bt){for(var ri=0,Kt=bt;ri<Kt.length;ri+=1)if(Kt[ri].positionedGlyphs.length!==0)return!1;return!0}(Qt)&&Lt}zn.fromFeature=function(e,t){for(var i=new zn,u=0;u<e.sections.length;u++){var f=e.sections[u];f.image?i.addImageSection(f):i.addTextSection(f,t)}return i},zn.prototype.length=function(){return this.text.length},zn.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},zn.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},zn.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},zn.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var u=e.charCodeAt(i+1)||null,f=e.charCodeAt(i-1)||null;t+=u&&tu(u)&&!gu[e[i+1]]||f&&tu(f)&&!gu[e[i-1]]||!gu[e[i]]?e[i]:gu[e[i]]}return t}(this.text)},zn.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Oc[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,u=this.text.length-1;u>=0&&u>=e&&Oc[this.text.charCodeAt(u)];u--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},zn.prototype.substring=function(e,t){var i=new zn;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},zn.prototype.toString=function(){return this.text},zn.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},zn.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(dl.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(i)},zn.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(dl.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Ve("Reached maximum number of images 6401")}else Ve("Can't add FormattedSection with an empty image.")},zn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Oc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},na={};function _f(e,t,i,u,f,m){if(t.imageName){var x=u[t.imageName];return x?x.displaySize[0]*t.scale*24/m+f:0}var E=i[t.fontStack],T=E&&E[e];return T?T.metrics.advance*t.scale+f:0}function vf(e,t,i,u){var f=Math.pow(e-t,2);return u?e<t?f/2:2*f:f+Math.abs(i)*i}function ky(e,t,i){var u=0;return e===10&&(u-=1e4),i&&(u+=150),e!==40&&e!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function bf(e,t,i,u,f,m){for(var x=null,E=vf(t,i,f,m),T=0,A=u;T<A.length;T+=1){var M=A[T],R=vf(t-M.x,i,f,m)+M.badness;R<=E&&(x=M,E=R)}return{index:e,x:t,priorBreak:x,badness:E}}function eh(e,t,i,u,f,m,x){if(m!=="point")return[];if(!e)return[];for(var E,T=[],A=function(pe,ae,me,be,we,Ee){for(var Ce=0,je=0;je<pe.length();je++){var $e=pe.getSection(je);Ce+=_f(pe.getCharCode(je),$e,be,we,ae,Ee)}return Ce/Math.max(1,Math.ceil(Ce/me))}(e,t,i,u,f,x),M=e.text.indexOf("")>=0,R=0,U=0;U<e.length();U++){var G=e.getSection(U),Q=e.getCharCode(U);if(Oc[Q]||(R+=_f(Q,G,u,f,t,x)),U<e.length()-1){var $=!((E=Q)<11904||!(it["Bopomofo Extended"](E)||it.Bopomofo(E)||it["CJK Compatibility Forms"](E)||it["CJK Compatibility Ideographs"](E)||it["CJK Compatibility"](E)||it["CJK Radicals Supplement"](E)||it["CJK Strokes"](E)||it["CJK Symbols and Punctuation"](E)||it["CJK Unified Ideographs Extension A"](E)||it["CJK Unified Ideographs"](E)||it["Enclosed CJK Letters and Months"](E)||it["Halfwidth and Fullwidth Forms"](E)||it.Hiragana(E)||it["Ideographic Description Characters"](E)||it["Kangxi Radicals"](E)||it["Katakana Phonetic Extensions"](E)||it.Katakana(E)||it["Vertical Forms"](E)||it["Yi Radicals"](E)||it["Yi Syllables"](E)));(na[Q]||$||G.imageName)&&T.push(bf(U+1,R,A,T,ky(Q,e.getCharCode(U+1),$&&M),!1))}}return function pe(ae){return ae?pe(ae.priorBreak).concat(ae.index):[]}(bf(e.length(),R,A,T,0,!0))}function th(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Iy(e,t,i,u,f){if(u||f)for(var m=e[i],x=(e[i].x+m.metrics.advance*m.scale)*u,E=t;E<=i;E++)e[E].x-=x,e[E].y+=f}function xf(e,t,i,u,f,m){var x,E=e.image;if(E.content){var T=E.content,A=E.pixelRatio||1;x=[T[0]/A,T[1]/A,E.displaySize[0]-T[2]/A,E.displaySize[1]-T[3]/A]}var M,R,U,G,Q=t.left*m,$=t.right*m;i==="width"||i==="both"?(G=f[0]+Q-u[3],R=f[0]+$+u[1]):R=(G=f[0]+(Q+$-E.displaySize[0])/2)+E.displaySize[0];var pe=t.top*m,ae=t.bottom*m;return i==="height"||i==="both"?(M=f[1]+pe-u[0],U=f[1]+ae+u[2]):U=(M=f[1]+(pe+ae-E.displaySize[1])/2)+E.displaySize[1],{image:E,top:M,right:R,bottom:U,left:G,collisionPadding:x}}na[10]=!0,na[32]=!0,na[38]=!0,na[40]=!0,na[41]=!0,na[43]=!0,na[45]=!0,na[47]=!0,na[173]=!0,na[183]=!0,na[8203]=!0,na[8208]=!0,na[8211]=!0,na[8231]=!0;var ml=function(e){function t(i,u,f,m){e.call(this,i,u),this.angle=f,m!==void 0&&(this.segment=m)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(C);function ih(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new ai(e+1))};if(i.kind==="source")return{kind:"source"};for(var u=i.zoomStops,f=i.interpolationType,m=0;m<u.length&&u[m]<=e;)m++;for(var x=m=Math.max(0,m-1);x<u.length&&u[x]<e+1;)x++;x=Math.min(u.length-1,x);var E=u[m],T=u[x];return i.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:T,interpolationType:f}:{kind:"camera",minZoom:E,maxZoom:T,minSize:i.evaluate(new ai(E)),maxSize:i.evaluate(new ai(T)),interpolationType:f}}function wf(e,t,i){var u=t.uSize,f=i.lowerSize;return e.kind==="source"?f/128:e.kind==="composite"?kr(f/128,i.upperSize/128,t.uSizeT):u}function Sf(e,t){var i=0,u=0;if(e.kind==="constant")u=e.layoutSize;else if(e.kind!=="source"){var f=e.interpolationType,m=f?he(on.interpolationFactor(f,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?u=kr(e.minSize,e.maxSize,m):i=m}return{uSizeT:i,uSize:u}}yt("Anchor",ml);var zy=Object.freeze({__proto__:null,getSizeData:ih,evaluateSizeForFeature:wf,evaluateSizeForZoom:Sf,SIZE_PACK_FACTOR:128});function Ef(e,t,i,u,f){if(t.segment===void 0)return!0;for(var m=t,x=t.segment+1,E=0;E>-i/2;){if(--x<0)return!1;E-=e[x].dist(m),m=e[x]}E+=e[x].dist(e[x+1]),x++;for(var T=[],A=0;E<i/2;){var M=e[x],R=e[x+1];if(!R)return!1;var U=e[x-1].angleTo(M)-M.angleTo(R);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:E,angleDelta:U}),A+=U;E-T[0].distance>u;)A-=T.shift().angleDelta;if(A>f)return!1;x++,E+=M.dist(R)}return!0}function kf(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function If(e,t,i){return e?.6*t*i:0}function zf(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Ty(e,t,i,u,f,m){for(var x=If(i,f,m),E=zf(i,u)*m,T=0,A=kf(e)/2,M=0;M<e.length-1;M++){var R=e[M],U=e[M+1],G=R.dist(U);if(T+G>A){var Q=(A-T)/G,$=kr(R.x,U.x,Q),pe=kr(R.y,U.y,Q),ae=new ml($,pe,U.angleTo(R),M);return ae._round(),!x||Ef(e,ae,E,x,t)?ae:void 0}T+=G}}function Ay(e,t,i,u,f,m,x,E,T){var A=If(u,m,x),M=zf(u,f),R=M*x,U=e[0].x===0||e[0].x===T||e[0].y===0||e[0].y===T;return t-R<t/4&&(t=R+t/4),function G(Q,$,pe,ae,me,be,we,Ee,Ce){for(var je=be/2,$e=kf(Q),Et=0,ct=$-pe,Tt=[],ht=0;ht<Q.length-1;ht++){for(var Qt=Q[ht],Lt=Q[ht+1],bt=Qt.dist(Lt),ri=Lt.angleTo(Qt);ct+pe<Et+bt;){var Kt=((ct+=pe)-Et)/bt,yi=kr(Qt.x,Lt.x,Kt),At=kr(Qt.y,Lt.y,Kt);if(yi>=0&&yi<Ce&&At>=0&&At<Ce&&ct-je>=0&&ct+je<=$e){var Si=new ml(yi,At,ri,ht);Si._round(),ae&&!Ef(Q,Si,be,ae,me)||Tt.push(Si)}}Et+=bt}return Ee||Tt.length||we||(Tt=G(Q,Et/2,pe,ae,me,be,we,!0,Ce)),Tt}(e,U?t/2*E%t:(M/2+2*m)*x*E%t,t,A,i,R,U,!1,T)}function Tf(e,t,i,u,f){for(var m=[],x=0;x<e.length;x++)for(var E=e[x],T=void 0,A=0;A<E.length-1;A++){var M=E[A],R=E[A+1];M.x<t&&R.x<t||(M.x<t?M=new C(t,M.y+(t-M.x)/(R.x-M.x)*(R.y-M.y))._round():R.x<t&&(R=new C(t,M.y+(t-M.x)/(R.x-M.x)*(R.y-M.y))._round()),M.y<i&&R.y<i||(M.y<i?M=new C(M.x+(i-M.y)/(R.y-M.y)*(R.x-M.x),i)._round():R.y<i&&(R=new C(M.x+(i-M.y)/(R.y-M.y)*(R.x-M.x),i)._round()),M.x>=u&&R.x>=u||(M.x>=u?M=new C(u,M.y+(u-M.x)/(R.x-M.x)*(R.y-M.y))._round():R.x>=u&&(R=new C(u,M.y+(u-M.x)/(R.x-M.x)*(R.y-M.y))._round()),M.y>=f&&R.y>=f||(M.y>=f?M=new C(M.x+(f-M.y)/(R.y-M.y)*(R.x-M.x),f)._round():R.y>=f&&(R=new C(M.x+(f-M.y)/(R.y-M.y)*(R.x-M.x),f)._round()),T&&M.equals(T[T.length-1])||m.push(T=[M]),T.push(R)))))}return m}function Af(e,t,i,u){var f=[],m=e.image,x=m.pixelRatio,E=m.paddedRect.w-2,T=m.paddedRect.h-2,A=e.right-e.left,M=e.bottom-e.top,R=m.stretchX||[[0,E]],U=m.stretchY||[[0,T]],G=function(yi,At){return yi+At[1]-At[0]},Q=R.reduce(G,0),$=U.reduce(G,0),pe=E-Q,ae=T-$,me=0,be=Q,we=0,Ee=$,Ce=0,je=pe,$e=0,Et=ae;if(m.content&&u){var ct=m.content;me=Nc(R,0,ct[0]),we=Nc(U,0,ct[1]),be=Nc(R,ct[0],ct[2]),Ee=Nc(U,ct[1],ct[3]),Ce=ct[0]-me,$e=ct[1]-we,je=ct[2]-ct[0]-be,Et=ct[3]-ct[1]-Ee}var Tt=function(yi,At,Si,Qi){var sr=Uc(yi.stretch-me,be,A,e.left),rr=Vc(yi.fixed-Ce,je,yi.stretch,Q),$i=Uc(At.stretch-we,Ee,M,e.top),lr=Vc(At.fixed-$e,Et,At.stretch,$),Kr=Uc(Si.stretch-me,be,A,e.left),Hr=Vc(Si.fixed-Ce,je,Si.stretch,Q),Tn=Uc(Qi.stretch-we,Ee,M,e.top),tn=Vc(Qi.fixed-$e,Et,Qi.stretch,$),An=new C(sr,$i),_r=new C(Kr,$i),rn=new C(Kr,Tn),si=new C(sr,Tn),Bi=new C(rr/x,lr/x),Mi=new C(Hr/x,tn/x),vi=t*Math.PI/180;if(vi){var Rn=Math.sin(vi),bn=Math.cos(vi),Wi=[bn,-Rn,Rn,bn];An._matMult(Wi),_r._matMult(Wi),si._matMult(Wi),rn._matMult(Wi)}var zr=yi.stretch+yi.fixed,xn=At.stretch+At.fixed;return{tl:An,tr:_r,bl:si,br:rn,tex:{x:m.paddedRect.x+1+zr,y:m.paddedRect.y+1+xn,w:Si.stretch+Si.fixed-zr,h:Qi.stretch+Qi.fixed-xn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bi,pixelOffsetBR:Mi,minFontScaleX:je/x/A,minFontScaleY:Et/x/M,isSDF:i}};if(u&&(m.stretchX||m.stretchY))for(var ht=Pf(R,pe,Q),Qt=Pf(U,ae,$),Lt=0;Lt<ht.length-1;Lt++)for(var bt=ht[Lt],ri=ht[Lt+1],Kt=0;Kt<Qt.length-1;Kt++)f.push(Tt(bt,Qt[Kt],ri,Qt[Kt+1]));else f.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:T+1}));return f}function Nc(e,t,i){for(var u=0,f=0,m=e;f<m.length;f+=1){var x=m[f];u+=Math.max(t,Math.min(i,x[1]))-Math.max(t,Math.min(i,x[0]))}return u}function Pf(e,t,i){for(var u=[{fixed:-1,stretch:0}],f=0,m=e;f<m.length;f+=1){var x=m[f],E=x[0],T=x[1],A=u[u.length-1];u.push({fixed:E-A.stretch,stretch:A.stretch}),u.push({fixed:E-A.stretch,stretch:A.stretch+(T-E)})}return u.push({fixed:t+1,stretch:i}),u}function Uc(e,t,i,u){return e/t*i+u}function Vc(e,t,i,u){return e-t*i/u}var jc=function(e,t,i,u,f,m,x,E,T,A){if(this.boxStartIndex=e.length,T){var M=m.top,R=m.bottom,U=m.collisionPadding;U&&(M-=U[1],R+=U[3]);var G=R-M;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{var Q=m.top*x-E,$=m.bottom*x+E,pe=m.left*x-E,ae=m.right*x+E,me=m.collisionPadding;if(me&&(pe-=me[0]*x,Q-=me[1]*x,ae+=me[2]*x,$+=me[3]*x),A){var be=new C(pe,Q),we=new C(ae,Q),Ee=new C(pe,$),Ce=new C(ae,$),je=A*Math.PI/180;be._rotate(je),we._rotate(je),Ee._rotate(je),Ce._rotate(je),pe=Math.min(be.x,we.x,Ee.x,Ce.x),ae=Math.max(be.x,we.x,Ee.x,Ce.x),Q=Math.min(be.y,we.y,Ee.y,Ce.y),$=Math.max(be.y,we.y,Ee.y,Ce.y)}e.emplaceBack(t.x,t.y,pe,Q,ae,$,i,u,f)}this.boxEndIndex=e.length},gl=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Py),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Py(e,t){return e<t?-1:e>t?1:0}function Cy(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var u=1/0,f=1/0,m=-1/0,x=-1/0,E=e[0],T=0;T<E.length;T++){var A=E[T];(!T||A.x<u)&&(u=A.x),(!T||A.y<f)&&(f=A.y),(!T||A.x>m)&&(m=A.x),(!T||A.y>x)&&(x=A.y)}var M=Math.min(m-u,x-f),R=M/2,U=new gl([],My);if(M===0)return new C(u,f);for(var G=u;G<m;G+=M)for(var Q=f;Q<x;Q+=M)U.push(new yl(G+R,Q+R,R,e));for(var $=function(me){for(var be=0,we=0,Ee=0,Ce=me[0],je=0,$e=Ce.length,Et=$e-1;je<$e;Et=je++){var ct=Ce[je],Tt=Ce[Et],ht=ct.x*Tt.y-Tt.x*ct.y;we+=(ct.x+Tt.x)*ht,Ee+=(ct.y+Tt.y)*ht,be+=3*ht}return new yl(we/be,Ee/be,0,me)}(e),pe=U.length;U.length;){var ae=U.pop();(ae.d>$.d||!$.d)&&($=ae,i&&console.log("found best %d after %d probes",Math.round(1e4*ae.d)/1e4,pe)),ae.max-$.d<=t||(U.push(new yl(ae.p.x-(R=ae.h/2),ae.p.y-R,R,e)),U.push(new yl(ae.p.x+R,ae.p.y-R,R,e)),U.push(new yl(ae.p.x-R,ae.p.y+R,R,e)),U.push(new yl(ae.p.x+R,ae.p.y+R,R,e)),pe+=4)}return i&&(console.log("num probes: "+pe),console.log("best distance: "+$.d)),$.p}function My(e,t){return t.max-e.max}function yl(e,t,i,u){this.p=new C(e,t),this.h=i,this.d=function(f,m){for(var x=!1,E=1/0,T=0;T<m.length;T++)for(var A=m[T],M=0,R=A.length,U=R-1;M<R;U=M++){var G=A[M],Q=A[U];G.y>f.y!=Q.y>f.y&&f.x<(Q.x-G.x)*(f.y-G.y)/(Q.y-G.y)+G.x&&(x=!x),E=Math.min(E,Qo(f,G,Q))}return(x?1:-1)*Math.sqrt(E)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}gl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},gl.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},gl.prototype.peek=function(){return this.data[0]},gl.prototype._up=function(e){for(var t=this.data,i=this.compare,u=t[e];e>0;){var f=e-1>>1,m=t[f];if(i(u,m)>=0)break;t[e]=m,e=f}t[e]=u},gl.prototype._down=function(e){for(var t=this.data,i=this.compare,u=this.length>>1,f=t[e];e<u;){var m=1+(e<<1),x=t[m],E=m+1;if(E<this.length&&i(t[E],x)<0&&(m=E,x=t[E]),i(x,f)>=0)break;t[e]=x,e=m}t[e]=f};var rh=Number.POSITIVE_INFINITY;function Cf(e,t){return t[1]!==rh?function(i,u,f){var m=0,x=0;switch(u=Math.abs(u),f=Math.abs(f),i){case"top-right":case"top-left":case"top":x=f-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-f}switch(i){case"top-right":case"bottom-right":case"right":m=-u;break;case"top-left":case"bottom-left":case"left":m=u}return[m,x]}(e,t[0],t[1]):function(i,u){var f=0,m=0;u<0&&(u=0);var x=u/Math.sqrt(2);switch(i){case"top-right":case"top-left":m=x-7;break;case"bottom-right":case"bottom-left":m=7-x;break;case"bottom":m=7-u;break;case"top":m=u-7}switch(i){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=u;break;case"right":f=-u}return[f,m]}(e,t[0])}function nh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Mf(e,t,i,u,f,m,x,E,T,A,M,R,U,G,Q){var $=function(we,Ee,Ce,je,$e,Et,ct,Tt){for(var ht=je.layout.get("text-rotate").evaluate(Et,{})*Math.PI/180,Qt=[],Lt=0,bt=Ee.positionedLines;Lt<bt.length;Lt+=1)for(var ri=bt[Lt],Kt=0,yi=ri.positionedGlyphs;Kt<yi.length;Kt+=1){var At=yi[Kt];if(At.rect){var Si=At.rect||{},Qi=4,sr=!0,rr=1,$i=0,lr=($e||Tt)&&At.vertical,Kr=At.metrics.advance*At.scale/2;if(Tt&&Ee.verticalizable&&($i=ri.lineOffset/2-(At.imageName?-(24-At.metrics.width*At.scale)/2:24*(At.scale-1))),At.imageName){var Hr=ct[At.imageName];sr=Hr.sdf,Qi=1/(rr=Hr.pixelRatio)}var Tn=$e?[At.x+Kr,At.y]:[0,0],tn=$e?[0,0]:[At.x+Kr+Ce[0],At.y+Ce[1]-$i],An=[0,0];lr&&(An=tn,tn=[0,0]);var _r=(At.metrics.left-Qi)*At.scale-Kr+tn[0],rn=(-At.metrics.top-Qi)*At.scale+tn[1],si=_r+Si.w*At.scale/rr,Bi=rn+Si.h*At.scale/rr,Mi=new C(_r,rn),vi=new C(si,rn),Rn=new C(_r,Bi),bn=new C(si,Bi);if(lr){var Wi=new C(-Kr,Kr- -17),zr=-Math.PI/2,xn=12-Kr,Ei=new C(22-xn,-(At.imageName?xn:0)),ro=new(Function.prototype.bind.apply(C,[null].concat(An)));Mi._rotateAround(zr,Wi)._add(Ei)._add(ro),vi._rotateAround(zr,Wi)._add(Ei)._add(ro),Rn._rotateAround(zr,Wi)._add(Ei)._add(ro),bn._rotateAround(zr,Wi)._add(Ei)._add(ro)}if(ht){var ca=Math.sin(ht),no=Math.cos(ht),vr=[no,-ca,ca,no];Mi._matMult(vr),vi._matMult(vr),Rn._matMult(vr),bn._matMult(vr)}var ao=new C(0,0),Ca=new C(0,0);Qt.push({tl:Mi,tr:vi,bl:Rn,br:bn,tex:Si,writingMode:Ee.writingMode,glyphOffset:Tn,sectionIndex:At.sectionIndex,isSDF:sr,pixelOffsetTL:ao,pixelOffsetBR:Ca,minFontScaleX:0,minFontScaleY:0})}}return Qt}(0,i,E,f,m,x,u,e.allowVerticalPlacement),pe=e.textSizeData,ae=null;pe.kind==="source"?(ae=[128*f.layout.get("text-size").evaluate(x,{})])[0]>32640&&Ve(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):pe.kind==="composite"&&((ae=[128*G.compositeTextSizes[0].evaluate(x,{},Q),128*G.compositeTextSizes[1].evaluate(x,{},Q)])[0]>32640||ae[1]>32640)&&Ve(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,$,ae,E,m,x,A,t,T.lineStartIndex,T.lineLength,U,Q);for(var me=0,be=M;me<be.length;me+=1)R[be[me]]=e.text.placedSymbolArray.length-1;return 4*$.length}function Df(e){for(var t in e)return e[t];return null}function Dy(e,t,i,u){var f=e.compareText;if(t in f){for(var m=f[t],x=m.length-1;x>=0;x--)if(u.dist(m[x])<i)return!0}else f[t]=[];return f[t].push(u),!1}var Ly=pl.VectorTileFeature.types,Ry=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qc(e,t,i,u,f,m,x,E,T,A,M,R,U){var G=E?Math.min(32640,Math.round(E[0])):0,Q=E?Math.min(32640,Math.round(E[1])):0;e.emplaceBack(t,i,Math.round(32*u),Math.round(32*f),m,x,(G<<1)+(T?1:0),Q,16*A,16*M,256*R,256*U)}function ah(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function By(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(el(i[t].text))return!0;return!1}var _l=function(e){this.layoutVertexArray=new nl,this.indexArray=new Ja,this.programConfigurations=e,this.segments=new K,this.dynamicLayoutVertexArray=new Xo,this.opacityVertexArray=new Ss,this.placedSymbolArray=new c};_l.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},_l.prototype.upload=function(e,t,i,u){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ly.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,uy.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Ry,!0),this.opacityVertexBuffer.itemSize=1),(i||u)&&this.programConfigurations.upload(e))},_l.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},yt("SymbolBuffers",_l);var vu=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new K,this.collisionVertexArray=new su};vu.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,cy.members,!0)},vu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},yt("CollisionBuffers",vu);var Li=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(m){return m.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ra([]),this.placementViewportMatrix=ra([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ih(this.zoom,t["text-size"]),this.iconSizeData=ih(this.zoom,t["icon-size"]);var i=this.layers[0].layout,u=i.get("symbol-sort-key"),f=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(m){return ua[m]})),this.stateDependentLayerIds=this.layers.filter(function(m){return m.isStateDependent()}).map(function(m){return m.id}),this.sourceID=e.sourceID};Li.prototype.createArrays=function(){this.text=new _l(new Dt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new _l(new Dt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new S,this.lineVertexArray=new z,this.symbolInstances=new w},Li.prototype.calculateGlyphDependencies=function(e,t,i,u,f){for(var m=0;m<e.length;m++)if(t[e.charCodeAt(m)]=!0,(i||u)&&f){var x=gu[e.charAt(m)];x&&(t[x.charCodeAt(0)]=!0)}},Li.prototype.populate=function(e,t,i){var u=this.layers[0],f=u.layout,m=f.get("text-font"),x=f.get("text-field"),E=f.get("icon-image"),T=(x.value.kind!=="constant"||x.value.value instanceof nr&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),A=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,M=f.get("symbol-sort-key");if(this.features=[],T||A){for(var R=t.iconDependencies,U=t.glyphDependencies,G=t.availableImages,Q=new ai(this.zoom),$=0,pe=e;$<pe.length;$+=1){var ae=pe[$],me=ae.feature,be=ae.id,we=ae.index,Ee=ae.sourceLayerIndex,Ce=u._featureFilter.needGeometry,je=yr(me,Ce);if(u._featureFilter.filter(Q,je,i)){Ce||(je.geometry=ir(me));var $e=void 0;if(T){var Et=u.getValueAndResolveTokens("text-field",je,i,G),ct=nr.factory(Et);By(ct)&&(this.hasRTLText=!0),(!this.hasRTLText||ru()==="unavailable"||this.hasRTLText&&ia.isParsed())&&($e=hy(ct,u,je))}var Tt=void 0;if(A){var ht=u.getValueAndResolveTokens("icon-image",je,i,G);Tt=ht instanceof qr?ht:qr.fromString(ht)}if($e||Tt){var Qt=this.sortFeaturesByKey?M.evaluate(je,{},i):void 0;if(this.features.push({id:be,text:$e,icon:Tt,index:we,sourceLayerIndex:Ee,geometry:je.geometry,properties:me.properties,type:Ly[me.type],sortKey:Qt}),Tt&&(R[Tt.name]=!0),$e){var Lt=m.evaluate(je,{},i).join(","),bt=f.get("text-rotation-alignment")==="map"&&f.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ua.vertical)>=0;for(var ri=0,Kt=$e.sections;ri<Kt.length;ri+=1){var yi=Kt[ri];if(yi.image)R[yi.image.name]=!0;else{var At=eu($e.toString()),Si=yi.fontStack||Lt,Qi=U[Si]=U[Si]||{};this.calculateGlyphDependencies(yi.text,Qi,bt,this.allowVerticalPlacement,At)}}}}}}f.get("symbol-placement")==="line"&&(this.features=function(sr){var rr={},$i={},lr=[],Kr=0;function Hr(Wi){lr.push(sr[Wi]),Kr++}function Tn(Wi,zr,xn){var Ei=$i[Wi];return delete $i[Wi],$i[zr]=Ei,lr[Ei].geometry[0].pop(),lr[Ei].geometry[0]=lr[Ei].geometry[0].concat(xn[0]),Ei}function tn(Wi,zr,xn){var Ei=rr[zr];return delete rr[zr],rr[Wi]=Ei,lr[Ei].geometry[0].shift(),lr[Ei].geometry[0]=xn[0].concat(lr[Ei].geometry[0]),Ei}function An(Wi,zr,xn){var Ei=xn?zr[0][zr[0].length-1]:zr[0][0];return Wi+":"+Ei.x+":"+Ei.y}for(var _r=0;_r<sr.length;_r++){var rn=sr[_r],si=rn.geometry,Bi=rn.text?rn.text.toString():null;if(Bi){var Mi=An(Bi,si),vi=An(Bi,si,!0);if(Mi in $i&&vi in rr&&$i[Mi]!==rr[vi]){var Rn=tn(Mi,vi,si),bn=Tn(Mi,vi,lr[Rn].geometry);delete rr[Mi],delete $i[vi],$i[An(Bi,lr[bn].geometry,!0)]=bn,lr[Rn].geometry=null}else Mi in $i?Tn(Mi,vi,si):vi in rr?tn(Mi,vi,si):(Hr(_r),rr[Mi]=Kr-1,$i[vi]=Kr-1)}else Hr(_r)}return lr.filter(function(Wi){return Wi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(sr,rr){return sr.sortKey-rr.sortKey})}},Li.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Li.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Li.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Li.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Li.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Li.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Li.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var u=e.dist(t[e.segment+1]),f=e.dist(t[e.segment]),m={},x=e.segment+1;x<t.length;x++)m[x]={x:t[x].x,y:t[x].y,tileUnitDistanceFromAnchor:u},x<t.length-1&&(u+=t[x+1].dist(t[x]));for(var E=e.segment||0;E>=0;E--)m[E]={x:t[E].x,y:t[E].y,tileUnitDistanceFromAnchor:f},E>0&&(f+=t[E-1].dist(t[E]));for(var T=0;T<t.length;T++){var A=m[T];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Li.prototype.addSymbols=function(e,t,i,u,f,m,x,E,T,A,M,R){for(var U=e.indexArray,G=e.layoutVertexArray,Q=e.segments.prepareSegment(4*t.length,G,U,this.canOverlap?m.sortKey:void 0),$=this.glyphOffsetArray.length,pe=Q.vertexLength,ae=this.allowVerticalPlacement&&x===ua.vertical?Math.PI/2:0,me=m.text&&m.text.sections,be=0;be<t.length;be++){var we=t[be],Ee=we.tl,Ce=we.tr,je=we.bl,$e=we.br,Et=we.tex,ct=we.pixelOffsetTL,Tt=we.pixelOffsetBR,ht=we.minFontScaleX,Qt=we.minFontScaleY,Lt=we.glyphOffset,bt=we.isSDF,ri=we.sectionIndex,Kt=Q.vertexLength,yi=Lt[1];qc(G,E.x,E.y,Ee.x,yi+Ee.y,Et.x,Et.y,i,bt,ct.x,ct.y,ht,Qt),qc(G,E.x,E.y,Ce.x,yi+Ce.y,Et.x+Et.w,Et.y,i,bt,Tt.x,ct.y,ht,Qt),qc(G,E.x,E.y,je.x,yi+je.y,Et.x,Et.y+Et.h,i,bt,ct.x,Tt.y,ht,Qt),qc(G,E.x,E.y,$e.x,yi+$e.y,Et.x+Et.w,Et.y+Et.h,i,bt,Tt.x,Tt.y,ht,Qt),ah(e.dynamicLayoutVertexArray,E,ae),U.emplaceBack(Kt,Kt+1,Kt+2),U.emplaceBack(Kt+1,Kt+2,Kt+3),Q.vertexLength+=4,Q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lt[0]),be!==t.length-1&&ri===t[be+1].sectionIndex||e.programConfigurations.populatePaintArrays(G.length,m,m.index,{},R,me&&me[ri])}e.placedSymbolArray.emplaceBack(E.x,E.y,$,this.glyphOffsetArray.length-$,pe,T,A,E.segment,i?i[0]:0,i?i[1]:0,u[0],u[1],x,0,!1,0,M)},Li.prototype._addCollisionDebugVertex=function(e,t,i,u,f,m){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,u,f,Math.round(m.x),Math.round(m.y))},Li.prototype.addCollisionDebugVertices=function(e,t,i,u,f,m,x){var E=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),T=E.vertexLength,A=f.layoutVertexArray,M=f.collisionVertexArray,R=x.anchorX,U=x.anchorY;this._addCollisionDebugVertex(A,M,m,R,U,new C(e,t)),this._addCollisionDebugVertex(A,M,m,R,U,new C(i,t)),this._addCollisionDebugVertex(A,M,m,R,U,new C(i,u)),this._addCollisionDebugVertex(A,M,m,R,U,new C(e,u)),E.vertexLength+=4;var G=f.indexArray;G.emplaceBack(T,T+1),G.emplaceBack(T+1,T+2),G.emplaceBack(T+2,T+3),G.emplaceBack(T+3,T),E.primitiveLength+=4},Li.prototype.addDebugCollisionBoxes=function(e,t,i,u){for(var f=e;f<t;f++){var m=this.collisionBoxArray.get(f);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,u?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,i)}},Li.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vu(Yo,pf.members,Es),this.iconCollisionBox=new vu(Yo,pf.members,Es);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Li.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,u,f,m,x,E,T){for(var A={},M=t;M<i;M++){var R=e.get(M);A.textBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},A.textFeatureIndex=R.featureIndex;break}for(var U=u;U<f;U++){var G=e.get(U);A.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},A.verticalTextFeatureIndex=G.featureIndex;break}for(var Q=m;Q<x;Q++){var $=e.get(Q);A.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},A.iconFeatureIndex=$.featureIndex;break}for(var pe=E;pe<T;pe++){var ae=e.get(pe);A.verticalIconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},A.verticalIconFeatureIndex=ae.featureIndex;break}return A},Li.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Li.prototype.hasTextData=function(){return this.text.segments.get().length>0},Li.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Li.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Li.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Li.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Li.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),u=i.vertexStartIndex+4*i.numGlyphs,f=i.vertexStartIndex;f<u;f+=4)e.indexArray.emplaceBack(f,f+1,f+2),e.indexArray.emplaceBack(f+1,f+2,f+3)},Li.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),u=[],f=[],m=[],x=0;x<this.symbolInstances.length;++x){m.push(x);var E=this.symbolInstances.get(x);u.push(0|Math.round(t*E.anchorX+i*E.anchorY)),f.push(E.featureIndex)}return m.sort(function(T,A){return u[T]-u[A]||f[A]-f[T]}),m},Li.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Li.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,u=this.symbolInstanceIndexes;i<u.length;i+=1){var f=this.symbolInstances.get(u[i]);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(function(m,x,E){m>=0&&E.indexOf(m)===x&&t.addIndicesForPlacedSymbol(t.text,m)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},yt("SymbolBucket",Li,{omit:["layers","collisionBoxArray","features","compareText"]}),Li.MAX_GLYPHS=65535,Li.addDynamicAttributes=ah;var Fy=new ln({"symbol-placement":new It(V.layout_symbol["symbol-placement"]),"symbol-spacing":new It(V.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new It(V.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vt(V.layout_symbol["symbol-sort-key"]),"symbol-z-order":new It(V.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new It(V.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new It(V.layout_symbol["icon-ignore-placement"]),"icon-optional":new It(V.layout_symbol["icon-optional"]),"icon-rotation-alignment":new It(V.layout_symbol["icon-rotation-alignment"]),"icon-size":new vt(V.layout_symbol["icon-size"]),"icon-text-fit":new It(V.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new It(V.layout_symbol["icon-text-fit-padding"]),"icon-image":new vt(V.layout_symbol["icon-image"]),"icon-rotate":new vt(V.layout_symbol["icon-rotate"]),"icon-padding":new It(V.layout_symbol["icon-padding"]),"icon-keep-upright":new It(V.layout_symbol["icon-keep-upright"]),"icon-offset":new vt(V.layout_symbol["icon-offset"]),"icon-anchor":new vt(V.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new It(V.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new It(V.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new It(V.layout_symbol["text-rotation-alignment"]),"text-field":new vt(V.layout_symbol["text-field"]),"text-font":new vt(V.layout_symbol["text-font"]),"text-size":new vt(V.layout_symbol["text-size"]),"text-max-width":new vt(V.layout_symbol["text-max-width"]),"text-line-height":new It(V.layout_symbol["text-line-height"]),"text-letter-spacing":new vt(V.layout_symbol["text-letter-spacing"]),"text-justify":new vt(V.layout_symbol["text-justify"]),"text-radial-offset":new vt(V.layout_symbol["text-radial-offset"]),"text-variable-anchor":new It(V.layout_symbol["text-variable-anchor"]),"text-anchor":new vt(V.layout_symbol["text-anchor"]),"text-max-angle":new It(V.layout_symbol["text-max-angle"]),"text-writing-mode":new It(V.layout_symbol["text-writing-mode"]),"text-rotate":new vt(V.layout_symbol["text-rotate"]),"text-padding":new It(V.layout_symbol["text-padding"]),"text-keep-upright":new It(V.layout_symbol["text-keep-upright"]),"text-transform":new vt(V.layout_symbol["text-transform"]),"text-offset":new vt(V.layout_symbol["text-offset"]),"text-allow-overlap":new It(V.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new It(V.layout_symbol["text-ignore-placement"]),"text-optional":new It(V.layout_symbol["text-optional"])}),oh={paint:new ln({"icon-opacity":new vt(V.paint_symbol["icon-opacity"]),"icon-color":new vt(V.paint_symbol["icon-color"]),"icon-halo-color":new vt(V.paint_symbol["icon-halo-color"]),"icon-halo-width":new vt(V.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vt(V.paint_symbol["icon-halo-blur"]),"icon-translate":new It(V.paint_symbol["icon-translate"]),"icon-translate-anchor":new It(V.paint_symbol["icon-translate-anchor"]),"text-opacity":new vt(V.paint_symbol["text-opacity"]),"text-color":new vt(V.paint_symbol["text-color"],{runtimeType:et,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new vt(V.paint_symbol["text-halo-color"]),"text-halo-width":new vt(V.paint_symbol["text-halo-width"]),"text-halo-blur":new vt(V.paint_symbol["text-halo-blur"]),"text-translate":new It(V.paint_symbol["text-translate"]),"text-translate-anchor":new It(V.paint_symbol["text-translate-anchor"])}),layout:Fy},vl=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ut,this.defaultValue=e};vl.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},vl.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},vl.prototype.outputDefined=function(){return!1},vl.prototype.serialize=function(){return null},yt("FormatSectionOverride",vl,{omit:["defaultValue"]});var Oy=function(e){function t(i){e.call(this,i,oh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,u){if(e.prototype.recalculate.call(this,i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var f=this.layout.get("text-writing-mode");if(f){for(var m=[],x=0,E=f;x<E.length;x+=1){var T=E[x];m.indexOf(T)<0&&m.push(T)}this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,u,f,m){var x=this.layout.get(i).evaluate(u,{},f,m),E=this._unevaluatedLayout._values[i];return E.isDataDriven()||hs(E.value)||!x?x:function(T,A){return A.replace(/{([^{}]+)}/g,function(M,R){return R in T?String(T[R]):""})}(u.properties,x)},t.prototype.createBucket=function(i){return new Li(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,u=oh.paint.overridableProperties;i<u.length;i+=1){var f=u[i];if(t.hasPaintOverride(this.layout,f)){var m,x=this.paint.get(f),E=new vl(x),T=new qo(E,x.property.specification);m=x.value.kind==="constant"||x.value.kind==="source"?new fs("source",T):new Go("composite",T,x.value.zoomStops,x.value._interpolationType),this.paint._values[f]=new En(x.property,m,x.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,u){var f=i.get("text-field"),m=oh.paint.properties[u],x=!1,E=function(M){for(var R=0,U=M;R<U.length;R+=1)if(m.overrides&&m.overrides.hasOverride(U[R]))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof nr)E(f.value.value.sections);else if(f.value.kind==="source"){var T=function(M){x||(M instanceof Mr&&Ki(M.value)===wi?E(M.value.sections):M instanceof On?E(M.sections):M.eachChild(T))},A=f.value;A._styleExpression&&T(A._styleExpression.expression)}return x},t}(za),Ny={paint:new ln({"background-color":new It(V.paint_background["background-color"]),"background-pattern":new kn(V.paint_background["background-pattern"]),"background-opacity":new It(V.paint_background["background-opacity"])})},Uy=function(e){function t(i){e.call(this,i,Ny)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(za),Vy={paint:new ln({"raster-opacity":new It(V.paint_raster["raster-opacity"]),"raster-hue-rotate":new It(V.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new It(V.paint_raster["raster-brightness-min"]),"raster-brightness-max":new It(V.paint_raster["raster-brightness-max"]),"raster-saturation":new It(V.paint_raster["raster-saturation"]),"raster-contrast":new It(V.paint_raster["raster-contrast"]),"raster-resampling":new It(V.paint_raster["raster-resampling"]),"raster-fade-duration":new It(V.paint_raster["raster-fade-duration"])})},jy=function(e){function t(i){e.call(this,i,Vy)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(za),qy=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(za),Gy={circle:Gp,heatmap:zg,hillshade:Ag,fill:Kg,"fill-extrusion":ty,line:sy,symbol:Oy,background:Uy,raster:jy},Lf=D.HTMLImageElement,Rf=D.HTMLCanvasElement,Bf=D.HTMLVideoElement,Ff=D.ImageData,Gc=D.ImageBitmap,Ps=function(e,t,i,u){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,u)};Ps.prototype.update=function(e,t,i){var u=e.width,f=e.height,m=!(this.size&&this.size[0]===u&&this.size[1]===f||i),x=this.context,E=x.gl;if(this.useMipmap=!!(t&&t.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!t||t.premultiply!==!1)),m)this.size=[u,f],e instanceof Lf||e instanceof Rf||e instanceof Bf||e instanceof Ff||Gc&&e instanceof Gc?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,e):E.texImage2D(E.TEXTURE_2D,0,this.format,u,f,0,this.format,E.UNSIGNED_BYTE,e.data);else{var T=i||{x:0,y:0},A=T.x,M=T.y;e instanceof Lf||e instanceof Rf||e instanceof Bf||e instanceof Ff||Gc&&e instanceof Gc?E.texSubImage2D(E.TEXTURE_2D,0,A,M,E.RGBA,E.UNSIGNED_BYTE,e):E.texSubImage2D(E.TEXTURE_2D,0,A,M,u,f,E.RGBA,E.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)},Ps.prototype.bind=function(e,t,i){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),i!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,t),this.wrap=t)},Ps.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ps.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var sh=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};sh.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},sh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var bl=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ni(["receive","process"],this),this.invoker=new sh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=st()?e:D};function Of(e,t,i){var u=2*Math.PI*6378137/256/Math.pow(2,i);return[e*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}bl.prototype.send=function(e,t,i,u,f){var m=this;f===void 0&&(f=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[x]=i);var E=Mt(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:e,hasCallback:!!i,targetMapId:u,mustQueue:f,sourceMapId:this.mapId,data:ma(t,E)},E),{cancel:function(){i&&delete m.callbacks[x],m.target.postMessage({id:x,type:"<cancel>",targetMapId:u,sourceMapId:m.mapId})}}},bl.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var u=this.cancelCallbacks[i];delete this.cancelCallbacks[i],u&&u()}else st()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},bl.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},bl.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var u=this.callbacks[e];delete this.callbacks[e],u&&(t.error?u(jn(t.error)):u(null,jn(t.data)))}else{var f=!1,m=Mt(this.globalScope)?void 0:[],x=t.hasCallback?function(M,R){f=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:M?ma(M):null,data:ma(R,m)},m)}:function(M){f=!0},E=null,T=jn(t.data);if(this.parent[t.type])E=this.parent[t.type](t.sourceMapId,T,x);else if(this.parent.getWorkerSource){var A=t.type.split(".");E=this.parent.getWorkerSource(t.sourceMapId,A[0],T.source)[A[1]](T,x)}else x(new Error("Could not find function "+t.type));!f&&E&&E.cancel&&(this.cancelCallbacks[e]=E.cancel)}},bl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Fr=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Fr.prototype.setNorthEast=function(e){return this._ne=e instanceof Ji?new Ji(e.lng,e.lat):Ji.convert(e),this},Fr.prototype.setSouthWest=function(e){return this._sw=e instanceof Ji?new Ji(e.lng,e.lat):Ji.convert(e),this},Fr.prototype.extend=function(e){var t,i,u=this._sw,f=this._ne;if(e instanceof Ji)t=e,i=e;else{if(!(e instanceof Fr))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Fr.convert(e)):this.extend(Ji.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return u||f?(u.lng=Math.min(t.lng,u.lng),u.lat=Math.min(t.lat,u.lat),f.lng=Math.max(i.lng,f.lng),f.lat=Math.max(i.lat,f.lat)):(this._sw=new Ji(t.lng,t.lat),this._ne=new Ji(i.lng,i.lat)),this},Fr.prototype.getCenter=function(){return new Ji((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Fr.prototype.getSouthWest=function(){return this._sw},Fr.prototype.getNorthEast=function(){return this._ne},Fr.prototype.getNorthWest=function(){return new Ji(this.getWest(),this.getNorth())},Fr.prototype.getSouthEast=function(){return new Ji(this.getEast(),this.getSouth())},Fr.prototype.getWest=function(){return this._sw.lng},Fr.prototype.getSouth=function(){return this._sw.lat},Fr.prototype.getEast=function(){return this._ne.lng},Fr.prototype.getNorth=function(){return this._ne.lat},Fr.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Fr.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Fr.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Fr.prototype.contains=function(e){var t=Ji.convert(e),i=t.lng,u=t.lat,f=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&f},Fr.convert=function(e){return!e||e instanceof Fr?e:new Fr(e)};var Ji=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ji.prototype.wrap=function(){return new Ji(ve(this.lng,-180,180),this.lat)},Ji.prototype.toArray=function(){return[this.lng,this.lat]},Ji.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ji.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,u=e.lat*t,f=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(f,1))},Ji.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Fr(new Ji(this.lng-i,this.lat-t),new Ji(this.lng+i,this.lat+t))},Ji.convert=function(e){if(e instanceof Ji)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Ji(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Ji(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Nf=2*Math.PI*63710088e-1;function Uf(e){return Nf*Math.cos(e*Math.PI/180)}function Vf(e){return(180+e)/360}function jf(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function qf(e,t){return e/Uf(t)}function lh(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Cs=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};Cs.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Ji.convert(e);return new Cs(Vf(i.lng),jf(i.lat),qf(t,i.lat))},Cs.prototype.toLngLat=function(){return new Ji(360*this.x-180,lh(this.y))},Cs.prototype.toAltitude=function(){return this.z*Uf(lh(this.y))},Cs.prototype.meterInMercatorCoordinateUnits=function(){return 1/Nf*(e=lh(this.y),1/Math.cos(e*Math.PI/180));var e};var Ms=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=bu(0,e,e,t,i)};Ms.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Ms.prototype.url=function(e,t){var i,u,f,m,x,E=(u=this.y,f=this.z,m=Of(256*(i=this.x),256*(u=Math.pow(2,f)-u-1),f),x=Of(256*(i+1),256*(u+1),f),m[0]+","+m[1]+","+x[0]+","+x[1]),T=function(A,M,R){for(var U,G="",Q=A;Q>0;Q--)G+=(M&(U=1<<Q-1)?1:0)+(R&U?2:0);return G}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",T).replace("{bbox-epsg-3857}",E)},Ms.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new C(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Ms.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Gf=function(e,t){this.wrap=e,this.canonical=t,this.key=bu(e,t.z,t.z,t.x,t.y)},Or=function(e,t,i,u,f){this.overscaledZ=e,this.wrap=t,this.canonical=new Ms(i,+u,+f),this.key=bu(t,e,i,u,f)};function bu(e,t,i,u,f){(e*=2)<0&&(e=-1*e-1);var m=1<<i;return(m*m*e+m*f+u).toString(36)+i.toString(36)+t.toString(36)}Or.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Or.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Or(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Or(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Or.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?bu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):bu(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Or.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Or.prototype.children=function(e){if(this.overscaledZ>=e)return[new Or(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,u=2*this.canonical.y;return[new Or(t,this.wrap,t,i,u),new Or(t,this.wrap,t,i+1,u),new Or(t,this.wrap,t,i,u+1),new Or(t,this.wrap,t,i+1,u+1)]},Or.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Or.prototype.wrapped=function(){return new Or(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Or.prototype.unwrapTo=function(e){return new Or(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Or.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Or.prototype.toUnwrapped=function(){return new Gf(this.wrap,this.canonical)},Or.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Or.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Cs(e.x-this.wrap,e.y))},yt("CanonicalTileID",Ms),yt("OverscaledTileID",Or,{omit:["posMatrix"]});var Lo=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Ve('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var u=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var f=0;f<u;f++)this.data[this._idx(-1,f)]=this.data[this._idx(0,f)],this.data[this._idx(u,f)]=this.data[this._idx(u-1,f)],this.data[this._idx(f,-1)]=this.data[this._idx(f,0)],this.data[this._idx(f,u)]=this.data[this._idx(f,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};Lo.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),u=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[u],i[u+1],i[u+2])},Lo.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Lo.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Lo.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Lo.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Lo.prototype.getPixels=function(){return new Hn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Lo.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=t*this.dim,f=t*this.dim+this.dim,m=i*this.dim,x=i*this.dim+this.dim;switch(t){case-1:u=f-1;break;case 1:f=u+1}switch(i){case-1:m=x-1;break;case 1:x=m+1}for(var E=-t*this.dim,T=-i*this.dim,A=m;A<x;A++)for(var M=u;M<f;M++)this.data[this._idx(M,A)]=e.data[this._idx(M+E,A+T)]},yt("DEMData",Lo);var Zc=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Zc.prototype.encode=function(e){return this._stringToNumber[e]},Zc.prototype.decode=function(e){return this._numberToString[e]};var Kc=function(e,t,i,u,f){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=u,this.properties=e.properties,this.id=f},uh={geometry:{configurable:!0}};uh.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},uh.geometry.set=function(e){this._geometry=e},Kc.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Kc.prototype,uh);var xl=function(){this.state={},this.stateChanges={},this.deletedStates={}};xl.prototype.updateState=function(e,t,i){var u=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},xe(this.stateChanges[e][u],i),this.deletedStates[e]===null)for(var f in this.deletedStates[e]={},this.state[e])f!==u&&(this.deletedStates[e][f]=null);else if(this.deletedStates[e]&&this.deletedStates[e][u]===null)for(var m in this.deletedStates[e][u]={},this.state[e][u])i[m]||(this.deletedStates[e][u][m]=null);else for(var x in i)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][x]===null&&delete this.deletedStates[e][u][x]},xl.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var u=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(i in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][i]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},xl.prototype.getState=function(e,t){var i=String(t),u=xe({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var f=this.deletedStates[e][t];if(f===null)return{};for(var m in f)delete u[m]}return u},xl.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},xl.prototype.coalesceChanges=function(e,t){var i={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var f={};for(var m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),xe(this.state[u][m],this.stateChanges[u][m]),f[m]=this.state[u][m];i[u]=f}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var E={};if(this.deletedStates[x]===null)for(var T in this.state[x])E[T]={},this.state[x][T]={};else for(var A in this.deletedStates[x]){if(this.deletedStates[x][A]===null)this.state[x][A]={};else for(var M=0,R=Object.keys(this.deletedStates[x][A]);M<R.length;M+=1)delete this.state[x][A][R[M]];E[A]=this.state[x][A]}i[x]=i[x]||{},xe(i[x],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var U in e)e[U].setFeatureState(i,t)};var Ro=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ma(8192,16,0),this.grid3D=new Ma(8192,16,0),this.featureIndexArray=new O,this.promoteId=t};function Zf(e,t,i,u,f){return Ue(e,function(m,x){var E=t instanceof ws?t.get(x):null;return E&&E.evaluate?E.evaluate(i,u,f):E})}function Kf(e){for(var t=1/0,i=1/0,u=-1/0,f=-1/0,m=0,x=e;m<x.length;m+=1){var E=x[m];t=Math.min(t,E.x),i=Math.min(i,E.y),u=Math.max(u,E.x),f=Math.max(f,E.y)}return{minX:t,minY:i,maxX:u,maxY:f}}function Zy(e,t){return t-e}Ro.prototype.insert=function(e,t,i,u,f,m){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,u,f);for(var E=m?this.grid3D:this.grid,T=0;T<t.length;T++){for(var A=t[T],M=[1/0,1/0,-1/0,-1/0],R=0;R<A.length;R++){var U=A[R];M[0]=Math.min(M[0],U.x),M[1]=Math.min(M[1],U.y),M[2]=Math.max(M[2],U.x),M[3]=Math.max(M[3],U.y)}M[0]<8192&&M[1]<8192&&M[2]>=0&&M[3]>=0&&E.insert(x,M[0],M[1],M[2],M[3])}},Ro.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new pl.VectorTile(new Lc(this.rawTileData)).layers,this.sourceLayerCoder=new Zc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ro.prototype.query=function(e,t,i,u){var f=this;this.loadVTLayers();for(var m=e.params||{},x=8192/e.tileSize/e.scale,E=Ws(m.filter),T=e.queryGeometry,A=e.queryPadding*x,M=Kf(T),R=this.grid.query(M.minX-A,M.minY-A,M.maxX+A,M.maxY+A),U=Kf(e.cameraQueryGeometry),G=this.grid3D.query(U.minX-A,U.minY-A,U.maxX+A,U.maxY+A,function(we,Ee,Ce,je){return function($e,Et,ct,Tt,ht){for(var Qt=0,Lt=$e;Qt<Lt.length;Qt+=1){var bt=Lt[Qt];if(Et<=bt.x&&ct<=bt.y&&Tt>=bt.x&&ht>=bt.y)return!0}var ri=[new C(Et,ct),new C(Et,ht),new C(Tt,ht),new C(Tt,ct)];if($e.length>2){for(var Kt=0,yi=ri;Kt<yi.length;Kt+=1)if(Aa($e,yi[Kt]))return!0}for(var At=0;At<$e.length-1;At++)if(zs($e[At],$e[At+1],ri))return!0;return!1}(e.cameraQueryGeometry,we-A,Ee-A,Ce+A,je+A)}),Q=0,$=G;Q<$.length;Q+=1)R.push($[Q]);R.sort(Zy);for(var pe,ae={},me=function(we){var Ee=R[we];if(Ee!==pe){pe=Ee;var Ce=f.featureIndexArray.get(Ee),je=null;f.loadMatchingFeature(ae,Ce.bucketIndex,Ce.sourceLayerIndex,Ce.featureIndex,E,m.layers,m.availableImages,t,i,u,function($e,Et,ct){return je||(je=ir($e)),Et.queryIntersectsFeature(T,$e,ct,je,f.z,e.transform,x,e.pixelPosMatrix)})}},be=0;be<R.length;be++)me(be);return ae},Ro.prototype.loadMatchingFeature=function(e,t,i,u,f,m,x,E,T,A,M){var R=this.bucketLayerIDs[t];if(!m||function($e,Et){for(var ct=0;ct<$e.length;ct++)if(Et.indexOf($e[ct])>=0)return!0;return!1}(m,R)){var U=this.sourceLayerCoder.decode(i),G=this.vtLayers[U].feature(u);if(f.needGeometry){var Q=yr(G,!0);if(!f.filter(new ai(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!f.filter(new ai(this.tileID.overscaledZ),G))return;for(var $=this.getId(G,U),pe=0;pe<R.length;pe++){var ae=R[pe];if(!(m&&m.indexOf(ae)<0)){var me=E[ae];if(me){var be={};$!==void 0&&A&&(be=A.getState(me.sourceLayer||"_geojsonTileLayer",$));var we=xe({},T[ae]);we.paint=Zf(we.paint,me.paint,G,be,x),we.layout=Zf(we.layout,me.layout,G,be,x);var Ee=!M||M(G,me,be);if(Ee){var Ce=new Kc(G,this.z,this.x,this.y,$);Ce.layer=we;var je=e[ae];je===void 0&&(je=e[ae]=[]),je.push({featureIndex:u,feature:Ce,intersectionZ:Ee})}}}}}},Ro.prototype.lookupSymbolFeatures=function(e,t,i,u,f,m,x,E){var T={};this.loadVTLayers();for(var A=Ws(f),M=0,R=e;M<R.length;M+=1)this.loadMatchingFeature(T,i,u,R[M],A,m,x,E,t);return T},Ro.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var u=0,f=i[t];u<f.length;u+=1)if(e===f[u])return!0;return!1},Ro.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},yt("FeatureIndex",Ro,{omit:["rawTileData","sourceLayerCoder"]});var en=function(e,t){this.tileID=e,this.uid=Ge(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};en.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<ur.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},en.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},en.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(A,M){var R={};if(!M)return R;for(var U=function(){var $=Q[G],pe=$.layerIds.map(function(be){return M.getLayer(be)}).filter(Boolean);if(pe.length!==0){$.layers=pe,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(function(be){return pe.filter(function(we){return we.id===be})[0]}));for(var ae=0,me=pe;ae<me.length;ae+=1)R[me[ae].id]=$}},G=0,Q=A;G<Q.length;G+=1)U();return R}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var f=this.buckets[u];if(f instanceof Li){if(this.hasSymbolBuckets=!0,!i)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var m in this.buckets){var x=this.buckets[m];if(x instanceof Li&&x.hasRTLText){this.hasRTLText=!0,ia.isLoading()||ia.isLoaded()||ru()!=="deferred"||ga();break}}for(var E in this.queryPadding=0,this.buckets){var T=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(E).queryRadius(T))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},en.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},en.prototype.getBucket=function(e){return this.buckets[e.id]},en.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ps(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ps(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},en.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},en.prototype.queryRenderedFeatures=function(e,t,i,u,f,m,x,E,T,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:f,scale:m,tileSize:this.tileSize,pixelPosMatrix:A,transform:E,params:x,queryPadding:this.queryPadding*T},e,t,i):{}},en.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var u=i.loadVTLayers(),f=t?t.sourceLayer:"",m=u._geojsonTileLayer||u[f];if(m)for(var x=Ws(t&&t.filter),E=this.tileID.canonical,T=E.z,A=E.x,M=E.y,R={z:T,x:A,y:M},U=0;U<m.length;U++){var G=m.feature(U);if(x.needGeometry){var Q=yr(G,!0);if(!x.filter(new ai(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!x.filter(new ai(this.tileID.overscaledZ),G))continue;var $=i.getId(G,f),pe=new Kc(G,T,A,M,$);pe.tile=R,e.push(pe)}}},en.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},en.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},en.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=ft(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),f=!1;if(this.expirationTime>u)f=!1;else if(t)if(this.expirationTime<t)f=!0;else{var m=this.expirationTime-t;m?this.expirationTime=u+Math.max(m,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},en.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},en.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(t.style.hasLayer(u)){var f=this.buckets[u],m=f.layers[0].sourceLayer||"_geojsonTileLayer",x=i[m],E=e[m];if(x&&E&&Object.keys(E).length!==0){f.update(E,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var T=t&&t.style&&t.style.getLayer(u);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(f)))}}}},en.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},en.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ur.now()},en.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},en.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=ur.now()+e},en.prototype.setDependencies=function(e,t){for(var i={},u=0,f=t;u<f.length;u+=1)i[f[u]]=!0;this.dependencies[e]=i},en.prototype.hasDependency=function(e,t){for(var i=0,u=e;i<u.length;i+=1){var f=this.dependencies[u[i]];if(f){for(var m=0,x=t;m<x.length;m+=1)if(f[x[m]])return!0}}return!1};var ts=D.performance,Hf=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},ts.mark(this._marks.start)};Hf.prototype.finish=function(){ts.mark(this._marks.end);var e=ts.getEntriesByName(this._marks.measure);return e.length===0&&(ts.measure(this._marks.measure,this._marks.start,this._marks.end),e=ts.getEntriesByName(this._marks.measure),ts.clearMarks(this._marks.start),ts.clearMarks(this._marks.end),ts.clearMeasures(this._marks.measure)),e},a.Actor=bl,a.AlphaImage=As,a.CanonicalTileID=Ms,a.CollisionBoxArray=s,a.Color=ci,a.DEMData=Lo,a.DataConstantProperty=It,a.DictionaryCoder=Zc,a.EXTENT=8192,a.ErrorEvent=ue,a.EvaluationParameters=ai,a.Event=Y,a.Evented=fe,a.FeatureIndex=Ro,a.FillBucket=Ba,a.FillExtrusionBucket=Fa,a.ImageAtlas=_u,a.ImagePosition=Bc,a.LineBucket=Ln,a.LngLat=Ji,a.LngLatBounds=Fr,a.MercatorCoordinate=Cs,a.ONE_EM=24,a.OverscaledTileID=Or,a.Point=C,a.Point$1=C,a.Properties=ln,a.Protobuf=Lc,a.RGBAImage=Hn,a.RequestManager=Gi,a.RequestPerformance=Hf,a.ResourceType=Pr,a.SegmentVector=K,a.SourceFeatureState=xl,a.StructArrayLayout1ui2=uu,a.StructArrayLayout2f1f2i16=Po,a.StructArrayLayout2i4=Ao,a.StructArrayLayout3ui6=Ja,a.StructArrayLayout4i8=au,a.SymbolBucket=Li,a.Texture=Ps,a.Tile=en,a.Transitionable=sn,a.Uniform1f=We,a.Uniform1i=Re,a.Uniform2f=Ke,a.Uniform3f=dt,a.Uniform4f=zt,a.UniformColor=Ct,a.UniformMatrix4f=_i,a.UnwrappedTileID=Gf,a.ValidationError=re,a.WritingMode=ua,a.ZoomHistory=$l,a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},a.addDynamicAttributes=ah,a.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var u=e.length,f=new Array(e.length),m=null;e.forEach(function(x,E){t(x,function(T,A){T&&(m=T),f[E]=A,--u==0&&i(m,f)})})},a.bezier=te,a.bindAll=ni,a.browser=ur,a.cacheEntryPossiblyAdded=function(e){++$n>Ar&&(e.getActor().send("enforceCacheSizeLimit",wn),$n=0)},a.clamp=he,a.clearTileCache=function(e){var t=D.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},a.clipLine=Tf,a.clone=function(e){var t=new Ii(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.clone$1=xt,a.clone$2=function(e){var t=new Ii(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.collisionCircleLayout=py,a.config=qt,a.create=function(){var e=new Ii(16);return Ii!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},a.create$1=function(){var e=new Ii(9);return Ii!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},a.create$2=function(){var e=new Ii(4);return Ii!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},a.createCommonjsModule=k,a.createExpression=Ks,a.createLayout=Qr,a.createStyleLayer=function(e){return e.type==="custom"?new qy(e):new Gy[e.type](e)},a.cross=function(e,t,i){var u=t[0],f=t[1],m=t[2],x=i[0],E=i[1],T=i[2];return e[0]=f*T-m*E,e[1]=m*x-u*T,e[2]=u*E-f*x,e},a.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],i[u]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var f in t)if(!e(t[f],i[f]))return!1;return!0}return t===i},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.ease=oe,a.emitValidationErrors=vs,a.endsWith=Ot,a.enforceCacheSizeLimit=function(e){Jn(),fr&&fr.then(function(t){t.keys().then(function(i){for(var u=0;u<i.length-e;u++)t.delete(i[u])})})},a.evaluateSizeForFeature=wf,a.evaluateSizeForZoom=Sf,a.evaluateVariableOffset=Cf,a.evented=iu,a.extend=xe,a.featureFilter=Ws,a.filterObject=Xe,a.fromRotation=function(e,t){var i=Math.sin(t),u=Math.cos(t);return e[0]=u,e[1]=i,e[2]=0,e[3]=-i,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.getAnchorAlignment=th,a.getAnchorJustification=nh,a.getArrayBuffer=Sr,a.getImage=N,a.getJSON=function(e,t){return jr(xe(e,{type:"json"}),t)},a.getRTLTextPluginStatus=ru,a.getReferrer=pt,a.getVideo=function(e,t){var i,u,f=D.document.createElement("video");f.muted=!0,f.onloadstart=function(){t(null,f)};for(var m=0;m<e.length;m++){var x=D.document.createElement("source");i=e[m],u=void 0,(u=D.document.createElement("a")).href=i,(u.protocol!==D.document.location.protocol||u.host!==D.document.location.host)&&(f.crossOrigin="Anonymous"),x.src=e[m],f.appendChild(x)}return{cancel:function(){}}},a.identity=ra,a.invert=function(e,t){var i=t[0],u=t[1],f=t[2],m=t[3],x=t[4],E=t[5],T=t[6],A=t[7],M=t[8],R=t[9],U=t[10],G=t[11],Q=t[12],$=t[13],pe=t[14],ae=t[15],me=i*E-u*x,be=i*T-f*x,we=i*A-m*x,Ee=u*T-f*E,Ce=u*A-m*E,je=f*A-m*T,$e=M*$-R*Q,Et=M*pe-U*Q,ct=M*ae-G*Q,Tt=R*pe-U*$,ht=R*ae-G*$,Qt=U*ae-G*pe,Lt=me*Qt-be*ht+we*Tt+Ee*ct-Ce*Et+je*$e;return Lt?(e[0]=(E*Qt-T*ht+A*Tt)*(Lt=1/Lt),e[1]=(f*ht-u*Qt-m*Tt)*Lt,e[2]=($*je-pe*Ce+ae*Ee)*Lt,e[3]=(U*Ce-R*je-G*Ee)*Lt,e[4]=(T*ct-x*Qt-A*Et)*Lt,e[5]=(i*Qt-f*ct+m*Et)*Lt,e[6]=(pe*we-Q*je-ae*be)*Lt,e[7]=(M*je-U*we+G*be)*Lt,e[8]=(x*ht-E*ct+A*$e)*Lt,e[9]=(u*ct-i*ht-m*$e)*Lt,e[10]=(Q*Ce-$*we+ae*me)*Lt,e[11]=(R*we-M*Ce-G*me)*Lt,e[12]=(E*Et-x*Tt-T*$e)*Lt,e[13]=(i*Tt-u*Et+f*$e)*Lt,e[14]=($*be-Q*Ee-pe*me)*Lt,e[15]=(M*Ee-R*be+U*me)*Lt,e):null},a.isChar=it,a.isMapboxURL=cr,a.keysDifference=function(e,t){var i=[];for(var u in e)u in t||i.push(u);return i},a.makeRequest=jr,a.mapObject=Ue,a.mercatorXfromLng=Vf,a.mercatorYfromLat=jf,a.mercatorZfromAltitude=qf,a.mul=qp,a.multiply=Dn,a.mvt=pl,a.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},a.normalize=function(e,t){var i=t[0],u=t[1],f=t[2],m=i*i+u*u+f*f;return m>0&&(m=1/Math.sqrt(m)),e[0]=t[0]*m,e[1]=t[1]*m,e[2]=t[2]*m,e},a.number=kr,a.offscreenCanvasSupported=Cn,a.ortho=function(e,t,i,u,f,m,x){var E=1/(t-i),T=1/(u-f),A=1/(m-x);return e[0]=-2*E,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*A,e[11]=0,e[12]=(t+i)*E,e[13]=(f+u)*T,e[14]=(x+m)*A,e[15]=1,e},a.parseGlyphPBF=function(e){return new Lc(e).readFields(wy,[])},a.pbf=Lc,a.performSymbolLayout=function(e,t,i,u,f,m,x){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var E=e.layers[0].layout,T=e.layers[0]._unevaluatedLayout._values,A={};if(e.textSizeData.kind==="composite"){var M=e.textSizeData,R=M.maxZoom;A.compositeTextSizes=[T["text-size"].possiblyEvaluate(new ai(M.minZoom),x),T["text-size"].possiblyEvaluate(new ai(R),x)]}if(e.iconSizeData.kind==="composite"){var U=e.iconSizeData,G=U.maxZoom;A.compositeIconSizes=[T["icon-size"].possiblyEvaluate(new ai(U.minZoom),x),T["icon-size"].possiblyEvaluate(new ai(G),x)]}A.layoutTextSize=T["text-size"].possiblyEvaluate(new ai(e.zoom+1),x),A.layoutIconSize=T["icon-size"].possiblyEvaluate(new ai(e.zoom+1),x),A.textMaxSize=T["text-size"].possiblyEvaluate(new ai(18));for(var Q=24*E.get("text-line-height"),$=E.get("text-rotation-alignment")==="map"&&E.get("symbol-placement")!=="point",pe=E.get("text-keep-upright"),ae=E.get("text-size"),me=function(){var Ee=we[be],Ce=E.get("text-font").evaluate(Ee,{},x).join(","),je=ae.evaluate(Ee,{},x),$e=A.layoutTextSize.evaluate(Ee,{},x),Et=A.layoutIconSize.evaluate(Ee,{},x),ct={horizontal:{},vertical:void 0},Tt=Ee.text,ht=[0,0];if(Tt){var Qt=Tt.toString(),Lt=24*E.get("text-letter-spacing").evaluate(Ee,{},x),bt=function(si){for(var Bi=0,Mi=si;Bi<Mi.length;Bi+=1)if(vi=Mi[Bi].charCodeAt(0),it.Arabic(vi)||it["Arabic Supplement"](vi)||it["Arabic Extended-A"](vi)||it["Arabic Presentation Forms-A"](vi)||it["Arabic Presentation Forms-B"](vi))return!1;var vi;return!0}(Qt)?Lt:0,ri=E.get("text-anchor").evaluate(Ee,{},x),Kt=E.get("text-variable-anchor");if(!Kt){var yi=E.get("text-radial-offset").evaluate(Ee,{},x);ht=yi?Cf(ri,[24*yi,rh]):E.get("text-offset").evaluate(Ee,{},x).map(function(si){return 24*si})}var At=$?"center":E.get("text-justify").evaluate(Ee,{},x),Si=E.get("symbol-placement"),Qi=Si==="point"?24*E.get("text-max-width").evaluate(Ee,{},x):0,sr=function(){e.allowVerticalPlacement&&eu(Qt)&&(ct.vertical=Fc(Tt,t,i,f,Ce,Qi,Q,ri,"left",bt,ht,ua.vertical,!0,Si,$e,je))};if(!$&&Kt){for(var rr=At==="auto"?Kt.map(function(si){return nh(si)}):[At],$i=!1,lr=0;lr<rr.length;lr++){var Kr=rr[lr];if(!ct.horizontal[Kr])if($i)ct.horizontal[Kr]=ct.horizontal[0];else{var Hr=Fc(Tt,t,i,f,Ce,Qi,Q,"center",Kr,bt,ht,ua.horizontal,!1,Si,$e,je);Hr&&(ct.horizontal[Kr]=Hr,$i=Hr.positionedLines.length===1)}}sr()}else{At==="auto"&&(At=nh(ri));var Tn=Fc(Tt,t,i,f,Ce,Qi,Q,ri,At,bt,ht,ua.horizontal,!1,Si,$e,je);Tn&&(ct.horizontal[At]=Tn),sr(),eu(Qt)&&$&&pe&&(ct.vertical=Fc(Tt,t,i,f,Ce,Qi,Q,ri,At,bt,ht,ua.vertical,!1,Si,$e,je))}}var tn=void 0,An=!1;if(Ee.icon&&Ee.icon.name){var _r=u[Ee.icon.name];_r&&(tn=function(si,Bi,Mi){var vi=th(Mi),Rn=Bi[0]-si.displaySize[0]*vi.horizontalAlign,bn=Bi[1]-si.displaySize[1]*vi.verticalAlign;return{image:si,top:bn,bottom:bn+si.displaySize[1],left:Rn,right:Rn+si.displaySize[0]}}(f[Ee.icon.name],E.get("icon-offset").evaluate(Ee,{},x),E.get("icon-anchor").evaluate(Ee,{},x)),An=_r.sdf,e.sdfIcons===void 0?e.sdfIcons=_r.sdf:e.sdfIcons!==_r.sdf&&Ve("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(_r.pixelRatio!==e.pixelRatio||E.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var rn=Df(ct.horizontal)||ct.vertical;e.iconsInText=!!rn&&rn.iconsInText,(rn||tn)&&function(si,Bi,Mi,vi,Rn,bn,Wi,zr,xn,Ei,ro){var ca=bn.textMaxSize.evaluate(Bi,{});ca===void 0&&(ca=Wi);var no,vr=si.layers[0].layout,ao=vr.get("icon-offset").evaluate(Bi,{},ro),Ca=Df(Mi.horizontal),wl=Wi/24,Ds=si.tilePixelRatio*wl,Sl=si.tilePixelRatio*ca/24,Bo=si.tilePixelRatio*zr,El=si.tilePixelRatio*vr.get("symbol-spacing"),Hc=vr.get("text-padding")*si.tilePixelRatio,kl=vr.get("icon-padding")*si.tilePixelRatio,xu=vr.get("text-max-angle")/180*Math.PI,Wc=vr.get("text-rotation-alignment")==="map"&&vr.get("symbol-placement")!=="point",Xc=vr.get("icon-rotation-alignment")==="map"&&vr.get("symbol-placement")!=="point",Fo=vr.get("symbol-placement"),wu=El/2,Il=vr.get("icon-text-fit");vi&&Il!=="none"&&(si.allowVerticalPlacement&&Mi.vertical&&(no=xf(vi,Mi.vertical,Il,vr.get("icon-text-fit-padding"),ao,wl)),Ca&&(vi=xf(vi,Ca,Il,vr.get("icon-text-fit-padding"),ao,wl)));var is=function(Ky,Pu){Pu.x<0||Pu.x>=8192||Pu.y<0||Pu.y>=8192||function(br,Oa,Hy,rs,fh,Yf,tp,oo,ip,Cu,rp,np,dh,Jf,Mu,Qf,$f,ed,td,id,pa,ap,rd,so,Wy){var nd,Rs,Cl,Ml,Dl,Ll=br.addToLineVertexArray(Oa,Hy),ad=0,od=0,sd=0,ld=0,mh=-1,gh=-1,Oo={},ud=J(""),yh=0,_h=0;if(oo._unevaluatedLayout.getValue("text-radial-offset")===void 0?(yh=(nd=oo.layout.get("text-offset").evaluate(pa,{},so).map(function(Lu){return 24*Lu}))[0],_h=nd[1]):(yh=24*oo.layout.get("text-radial-offset").evaluate(pa,{},so),_h=rh),br.allowVerticalPlacement&&rs.vertical){var cd=oo.layout.get("text-rotate").evaluate(pa,{},so)+90;Ml=new jc(ip,Oa,Cu,rp,np,rs.vertical,dh,Jf,Mu,cd),tp&&(Dl=new jc(ip,Oa,Cu,rp,np,tp,$f,ed,Mu,cd))}if(fh){var vh=oo.layout.get("icon-rotate").evaluate(pa,{}),pd=oo.layout.get("icon-text-fit")!=="none",hd=Af(fh,vh,rd,pd),bh=tp?Af(tp,vh,rd,pd):void 0;Cl=new jc(ip,Oa,Cu,rp,np,fh,$f,ed,!1,vh),ad=4*hd.length;var fd=br.iconSizeData,Du=null;fd.kind==="source"?(Du=[128*oo.layout.get("icon-size").evaluate(pa,{})])[0]>32640&&Ve(br.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):fd.kind==="composite"&&((Du=[128*ap.compositeIconSizes[0].evaluate(pa,{},so),128*ap.compositeIconSizes[1].evaluate(pa,{},so)])[0]>32640||Du[1]>32640)&&Ve(br.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),br.addSymbols(br.icon,hd,Du,id,td,pa,!1,Oa,Ll.lineStartIndex,Ll.lineLength,-1,so),mh=br.icon.placedSymbolArray.length-1,bh&&(od=4*bh.length,br.addSymbols(br.icon,bh,Du,id,td,pa,ua.vertical,Oa,Ll.lineStartIndex,Ll.lineLength,-1,so),gh=br.icon.placedSymbolArray.length-1)}for(var dd in rs.horizontal){var op=rs.horizontal[dd];if(!Rs){ud=J(op.text);var Xy=oo.layout.get("text-rotate").evaluate(pa,{},so);Rs=new jc(ip,Oa,Cu,rp,np,op,dh,Jf,Mu,Xy)}var md=op.positionedLines.length===1;if(sd+=Mf(br,Oa,op,Yf,oo,Mu,pa,Qf,Ll,rs.vertical?ua.horizontal:ua.horizontalOnly,md?Object.keys(rs.horizontal):[dd],Oo,mh,ap,so),md)break}rs.vertical&&(ld+=Mf(br,Oa,rs.vertical,Yf,oo,Mu,pa,Qf,Ll,ua.vertical,["vertical"],Oo,gh,ap,so));var Yy=Rs?Rs.boxStartIndex:br.collisionBoxArray.length,Jy=Rs?Rs.boxEndIndex:br.collisionBoxArray.length,Qy=Ml?Ml.boxStartIndex:br.collisionBoxArray.length,$y=Ml?Ml.boxEndIndex:br.collisionBoxArray.length,e_=Cl?Cl.boxStartIndex:br.collisionBoxArray.length,t_=Cl?Cl.boxEndIndex:br.collisionBoxArray.length,i_=Dl?Dl.boxStartIndex:br.collisionBoxArray.length,r_=Dl?Dl.boxEndIndex:br.collisionBoxArray.length,lo=-1,sp=function(Lu,yd){return Lu&&Lu.circleDiameter?Math.max(Lu.circleDiameter,yd):yd};lo=sp(Rs,lo),lo=sp(Ml,lo),lo=sp(Cl,lo);var gd=(lo=sp(Dl,lo))>-1?1:0;gd&&(lo*=Wy/24),br.glyphOffsetArray.length>=Li.MAX_GLYPHS&&Ve("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pa.sortKey!==void 0&&br.addToSortKeyRanges(br.symbolInstances.length,pa.sortKey),br.symbolInstances.emplaceBack(Oa.x,Oa.y,Oo.right>=0?Oo.right:-1,Oo.center>=0?Oo.center:-1,Oo.left>=0?Oo.left:-1,Oo.vertical||-1,mh,gh,ud,Yy,Jy,Qy,$y,e_,t_,i_,r_,Cu,sd,ld,ad,od,gd,0,dh,yh,_h,lo)}(si,Pu,Ky,Mi,vi,Rn,no,si.layers[0],si.collisionBoxArray,Bi.index,Bi.sourceLayerIndex,si.index,Ds,Hc,Wc,xn,Bo,kl,Xc,ao,Bi,bn,Ei,ro,Wi)};if(Fo==="line")for(var zl=0,Yc=Tf(Bi.geometry,0,0,8192,8192);zl<Yc.length;zl+=1)for(var Jc=Yc[zl],Su=0,Eu=Ay(Jc,El,xu,Mi.vertical||Ca,vi,24,Sl,si.overscaling,8192);Su<Eu.length;Su+=1){var Qc=Eu[Su];Ca&&Dy(si,Ca.text,wu,Qc)||is(Jc,Qc)}else if(Fo==="line-center")for(var ku=0,Iu=Bi.geometry;ku<Iu.length;ku+=1){var zu=Iu[ku];if(zu.length>1){var $c=Ty(zu,xu,Mi.vertical||Ca,vi,24,Sl);$c&&is(zu,$c)}}else if(Bi.type==="Polygon")for(var Tl=0,ep=Yp(Bi.geometry,0);Tl<ep.length;Tl+=1){var Al=ep[Tl],Tu=Cy(Al,16);is(Al[0],new ml(Tu.x,Tu.y,0))}else if(Bi.type==="LineString")for(var Ls=0,Au=Bi.geometry;Ls<Au.length;Ls+=1){var Pl=Au[Ls];is(Pl,new ml(Pl[0].x,Pl[0].y,0))}else if(Bi.type==="Point")for(var ch=0,Wf=Bi.geometry;ch<Wf.length;ch+=1)for(var ph=0,Xf=Wf[ch];ph<Xf.length;ph+=1){var hh=Xf[ph];is([hh],new ml(hh.x,hh.y,0))}}(e,Ee,ct,tn,u,A,$e,Et,ht,An,x)},be=0,we=e.features;be<we.length;be+=1)me();m&&e.generateCollisionDebugBuffers()},a.perspective=function(e,t,i,u,f){var m,x=1/Math.tan(t/2);return e[0]=x/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,f!=null&&f!==1/0?(e[10]=(f+u)*(m=1/(u-f)),e[14]=2*f*u*m):(e[10]=-1,e[14]=-2*u),e},a.pick=function(e,t){for(var i={},u=0;u<t.length;u++){var f=t[u];f in e&&(i[f]=e[f])}return i},a.plugin=ia,a.polygonIntersectsPolygon=eo,a.postMapLoadEvent=Yn,a.postTurnstileEvent=an,a.potpack=yf,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=yt,a.registerForPluginStateChange=function(e){return e({pluginStatus:Gn,pluginURL:Da}),iu.on("pluginStateChange",e),e},a.renderColorRamp=Jh,a.rotate=function(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3],E=Math.sin(i),T=Math.cos(i);return e[0]=u*T+m*E,e[1]=f*T+x*E,e[2]=u*-E+m*T,e[3]=f*-E+x*T,e},a.rotateX=function(e,t,i){var u=Math.sin(i),f=Math.cos(i),m=t[4],x=t[5],E=t[6],T=t[7],A=t[8],M=t[9],R=t[10],U=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=m*f+A*u,e[5]=x*f+M*u,e[6]=E*f+R*u,e[7]=T*f+U*u,e[8]=A*f-m*u,e[9]=M*f-x*u,e[10]=R*f-E*u,e[11]=U*f-T*u,e},a.rotateZ=function(e,t,i){var u=Math.sin(i),f=Math.cos(i),m=t[0],x=t[1],E=t[2],T=t[3],A=t[4],M=t[5],R=t[6],U=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=m*f+A*u,e[1]=x*f+M*u,e[2]=E*f+R*u,e[3]=T*f+U*u,e[4]=A*f-m*u,e[5]=M*f-x*u,e[6]=R*f-E*u,e[7]=U*f-T*u,e},a.scale=function(e,t,i){var u=i[0],f=i[1],m=i[2];return e[0]=t[0]*u,e[1]=t[1]*u,e[2]=t[2]*u,e[3]=t[3]*u,e[4]=t[4]*f,e[5]=t[5]*f,e[6]=t[6]*f,e[7]=t[7]*f,e[8]=t[8]*m,e[9]=t[9]*m,e[10]=t[10]*m,e[11]=t[11]*m,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},a.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},a.setCacheLimits=function(e,t){wn=e,Ar=t},a.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),Gn==="deferred"||Gn==="loading"||Gn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Da=ur.resolveURL(e),Gn="deferred",tl=t,xs(),i||ga()},a.sphericalToCartesian=function(e){var t=e[0],i=e[1],u=e[2];return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(u),y:t*Math.sin(i)*Math.sin(u),z:t*Math.cos(u)}},a.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},a.styleSpec=V,a.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},a.symbolSize=zy,a.transformMat3=function(e,t,i){var u=t[0],f=t[1],m=t[2];return e[0]=u*i[0]+f*i[3]+m*i[6],e[1]=u*i[1]+f*i[4]+m*i[7],e[2]=u*i[2]+f*i[5]+m*i[8],e},a.transformMat4=sl,a.translate=function(e,t,i){var u,f,m,x,E,T,A,M,R,U,G,Q,$=i[0],pe=i[1],ae=i[2];return t===e?(e[12]=t[0]*$+t[4]*pe+t[8]*ae+t[12],e[13]=t[1]*$+t[5]*pe+t[9]*ae+t[13],e[14]=t[2]*$+t[6]*pe+t[10]*ae+t[14],e[15]=t[3]*$+t[7]*pe+t[11]*ae+t[15]):(f=t[1],m=t[2],x=t[3],E=t[4],T=t[5],A=t[6],M=t[7],R=t[8],U=t[9],G=t[10],Q=t[11],e[0]=u=t[0],e[1]=f,e[2]=m,e[3]=x,e[4]=E,e[5]=T,e[6]=A,e[7]=M,e[8]=R,e[9]=U,e[10]=G,e[11]=Q,e[12]=u*$+E*pe+R*ae+t[12],e[13]=f*$+T*pe+U*ae+t[13],e[14]=m*$+A*pe+G*ae+t[14],e[15]=x*$+M*pe+Q*ae+t[15]),e},a.triggerPluginCompletionEvent=zc,a.uniqueId=Ge,a.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},a.validateLight=Vp,a.validateStyle=ys,a.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},a.vectorTile=pl,a.version="1.13.2",a.warnOnce=Ve,a.webpSupported=fn,a.window=D,a.wrap=ve}),v(["./shared"],function(a){function k(L){var N=typeof L;if(N==="number"||N==="boolean"||N==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var j="[",H=0,Y=L;H<Y.length;H+=1)j+=k(Y[H])+",";return j+"]"}for(var ue=Object.keys(L).sort(),fe="{",V=0;V<ue.length;V++)fe+=JSON.stringify(ue[V])+":"+k(L[ue[V]])+",";return fe+"}"}function I(L){for(var N="",j=0,H=a.refProperties;j<H.length;j+=1)N+="/"+k(L[H[j]]);return N}var B=function(L){this.keyCache={},L&&this.replace(L)};B.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},B.prototype.update=function(L,N){for(var j=this,H=0,Y=L;H<Y.length;H+=1){var ue=Y[H];this._layerConfigs[ue.id]=ue;var fe=this._layers[ue.id]=a.createStyleLayer(ue);fe._featureFilter=a.featureFilter(fe.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(var V=0,re=N;V<re.length;V+=1){var ye=re[V];delete this.keyCache[ye],delete this._layerConfigs[ye],delete this._layers[ye]}this.familiesBySource={};for(var Le=0,Fe=function(Ye,et){for(var Gt={},at=0;at<Ye.length;at++){var ei=et&&et[Ye[at].id]||I(Ye[at]);et&&(et[Ye[at].id]=ei);var wi=Gt[ei];wi||(wi=Gt[ei]=[]),wi.push(Ye[at])}var Wt=[];for(var ui in Gt)Wt.push(Gt[ui]);return Wt}(a.values(this._layerConfigs),this.keyCache);Le<Fe.length;Le+=1){var ke=Fe[Le].map(function(Ye){return j._layers[Ye.id]}),Be=ke[0];if(Be.visibility!=="none"){var gt=Be.source||"",ut=this.familiesBySource[gt];ut||(ut=this.familiesBySource[gt]={});var ze=Be.sourceLayer||"_geojsonTileLayer",nt=ut[ze];nt||(nt=ut[ze]=[]),nt.push(ke)}}};var C=function(L){var N={},j=[];for(var H in L){var Y=L[H],ue=N[H]={};for(var fe in Y){var V=Y[+fe];if(V&&V.bitmap.width!==0&&V.bitmap.height!==0){var re={x:0,y:0,w:V.bitmap.width+2,h:V.bitmap.height+2};j.push(re),ue[fe]={rect:re,metrics:V.metrics}}}}var ye=a.potpack(j),Le=new a.AlphaImage({width:ye.w||1,height:ye.h||1});for(var Fe in L){var ke=L[Fe];for(var Be in ke){var gt=ke[+Be];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var ut=N[Fe][Be].rect;a.AlphaImage.copy(gt.bitmap,Le,{x:0,y:0},{x:ut.x+1,y:ut.y+1},gt.bitmap)}}}this.image=Le,this.positions=N};a.register("GlyphAtlas",C);var F=function(L){this.tileID=new a.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function D(L,N,j){for(var H=new a.EvaluationParameters(N),Y=0,ue=L;Y<ue.length;Y+=1)ue[Y].recalculate(H,j)}function X(L,N){var j=a.getArrayBuffer(L.request,function(H,Y,ue,fe){H?N(H):Y&&N(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Y)),rawData:Y,cacheControl:ue,expires:fe})});return function(){j.cancel(),N()}}F.prototype.parse=function(L,N,j,H,Y){var ue=this;this.status="parsing",this.data=L,this.collisionBoxArray=new a.CollisionBoxArray;var fe=new a.DictionaryCoder(Object.keys(L.layers).sort()),V=new a.FeatureIndex(this.tileID,this.promoteId);V.bucketLayerIDs=[];var re,ye,Le,Fe,ke={},Be={featureIndex:V,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:j},gt=N.familiesBySource[this.source];for(var ut in gt){var ze=L.layers[ut];if(ze){ze.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+ut+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var nt=fe.encode(ut),Ye=[],et=0;et<ze.length;et++){var Gt=ze.feature(et),at=V.getId(Gt,ut);Ye.push({feature:Gt,id:at,index:et,sourceLayerIndex:nt})}for(var ei=0,wi=gt[ut];ei<wi.length;ei+=1){var Wt=wi[ei],ui=Wt[0];ui.minzoom&&this.zoom<Math.floor(ui.minzoom)||ui.maxzoom&&this.zoom>=ui.maxzoom||ui.visibility!=="none"&&(D(Wt,this.zoom,j),(ke[ui.id]=ui.createBucket({index:V.bucketLayerIDs.length,layers:Wt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nt,sourceID:this.source})).populate(Ye,Be,this.tileID.canonical),V.bucketLayerIDs.push(Wt.map(function(bi){return bi.id})))}}}var ti=a.mapObject(Be.glyphDependencies,function(bi){return Object.keys(bi).map(Number)});Object.keys(ti).length?H.send("getGlyphs",{uid:this.uid,stacks:ti},function(bi,Jt){re||(re=bi,ye=Jt,Ni.call(ue))}):ye={};var Er=Object.keys(Be.iconDependencies);Er.length?H.send("getImages",{icons:Er,source:this.source,tileID:this.tileID,type:"icons"},function(bi,Jt){re||(re=bi,Le=Jt,Ni.call(ue))}):Le={};var gi=Object.keys(Be.patternDependencies);function Ni(){if(re)return Y(re);if(ye&&Le&&Fe){var bi=new C(ye),Jt=new a.ImageAtlas(Le,Fe);for(var ci in ke){var Cr=ke[ci];Cr instanceof a.SymbolBucket?(D(Cr.layers,this.zoom,j),a.performSymbolLayout(Cr,ye,bi.positions,Le,Jt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Cr.hasPattern&&(Cr instanceof a.LineBucket||Cr instanceof a.FillBucket||Cr instanceof a.FillExtrusionBucket)&&(D(Cr.layers,this.zoom,j),Cr.addFeatures(Be,this.tileID.canonical,Jt.patternPositions))}this.status="done",Y(null,{buckets:a.values(ke).filter(function(fa){return!fa.isEmpty()}),featureIndex:V,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:bi.image,imageAtlas:Jt,glyphMap:this.returnDependencies?ye:null,iconMap:this.returnDependencies?Le:null,glyphPositions:this.returnDependencies?bi.positions:null})}}gi.length?H.send("getImages",{icons:gi,source:this.source,tileID:this.tileID,type:"patterns"},function(bi,Jt){re||(re=bi,Fe=Jt,Ni.call(ue))}):Fe={},Ni.call(this)};var te=function(L,N,j,H){this.actor=L,this.layerIndex=N,this.availableImages=j,this.loadVectorData=H||X,this.loading={},this.loaded={}};te.prototype.loadTile=function(L,N){var j=this,H=L.uid;this.loading||(this.loading={});var Y=!!(L&&L.request&&L.request.collectResourceTiming)&&new a.RequestPerformance(L.request),ue=this.loading[H]=new F(L);ue.abort=this.loadVectorData(L,function(fe,V){if(delete j.loading[H],fe||!V)return ue.status="done",j.loaded[H]=ue,N(fe);var re=V.rawData,ye={};V.expires&&(ye.expires=V.expires),V.cacheControl&&(ye.cacheControl=V.cacheControl);var Le={};if(Y){var Fe=Y.finish();Fe&&(Le.resourceTiming=JSON.parse(JSON.stringify(Fe)))}ue.vectorTile=V.vectorTile,ue.parse(V.vectorTile,j.layerIndex,j.availableImages,j.actor,function(ke,Be){if(ke||!Be)return N(ke);N(null,a.extend({rawTileData:re.slice(0)},Be,ye,Le))}),j.loaded=j.loaded||{},j.loaded[H]=ue})},te.prototype.reloadTile=function(L,N){var j=this,H=this.loaded,Y=L.uid,ue=this;if(H&&H[Y]){var fe=H[Y];fe.showCollisionBoxes=L.showCollisionBoxes;var V=function(re,ye){var Le=fe.reloadCallback;Le&&(delete fe.reloadCallback,fe.parse(fe.vectorTile,ue.layerIndex,j.availableImages,ue.actor,Le)),N(re,ye)};fe.status==="parsing"?fe.reloadCallback=V:fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,V):V())}},te.prototype.abortTile=function(L,N){var j=this.loading,H=L.uid;j&&j[H]&&j[H].abort&&(j[H].abort(),delete j[H]),N()},te.prototype.removeTile=function(L,N){var j=this.loaded,H=L.uid;j&&j[H]&&delete j[H],N()};var oe=a.window.ImageBitmap,he=function(){this.loaded={}};function ve(L,N){if(L.length!==0){xe(L[0],N);for(var j=1;j<L.length;j++)xe(L[j],!N)}}function xe(L,N){for(var j=0,H=0,Y=L.length,ue=Y-1;H<Y;ue=H++)j+=(L[H][0]-L[ue][0])*(L[ue][1]+L[H][1]);j>=0!=!!N&&L.reverse()}he.prototype.loadTile=function(L,N){var j=L.uid,H=L.encoding,Y=L.rawImageData,ue=oe&&Y instanceof oe?this.getImageData(Y):Y,fe=new a.DEMData(j,ue,H);this.loaded=this.loaded||{},this.loaded[j]=fe,N(null,fe)},he.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var N=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:N.width,height:N.height},N.data)},he.prototype.removeTile=function(L){var N=this.loaded,j=L.uid;N&&N[j]&&delete N[j]};var tt=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ge=function(L){this._feature=L,this.extent=a.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};Ge.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],N=0,j=this._feature.geometry;N<j.length;N+=1){var H=j[N];L.push([new a.Point$1(H[0],H[1])])}return L}for(var Y=[],ue=0,fe=this._feature.geometry;ue<fe.length;ue+=1){for(var V=[],re=0,ye=fe[ue];re<ye.length;re+=1){var Le=ye[re];V.push(new a.Point$1(Le[0],Le[1]))}Y.push(V)}return Y},Ge.prototype.toGeoJSON=function(L,N,j){return tt.call(this,L,N,j)};var qe=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=L.length,this._features=L};qe.prototype.feature=function(L){return new Ge(this._features[L])};var He=a.vectorTile.VectorTileFeature,ni=Ot;function Ot(L,N){this.options=N||{},this.features=L,this.length=L.length}function Ue(L,N){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=N||4096}Ot.prototype.feature=function(L){return new Ue(this.features[L],this.options.extent)},Ue.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var N=0;N<L.length;N++){for(var j=L[N],H=[],Y=0;Y<j.length;Y++)H.push(new a.Point$1(j[Y][0],j[Y][1]));this.geometry.push(H)}return this.geometry},Ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,N=1/0,j=-1/0,H=1/0,Y=-1/0,ue=0;ue<L.length;ue++)for(var fe=L[ue],V=0;V<fe.length;V++){var re=fe[V];N=Math.min(N,re.x),j=Math.max(j,re.x),H=Math.min(H,re.y),Y=Math.max(Y,re.y)}return[N,H,j,Y]},Ue.prototype.toGeoJSON=He.prototype.toGeoJSON;var Xe=ii,xt=ni;function ii(L){var N=new a.pbf;return function(j,H){for(var Y in j.layers)H.writeMessage(3,Ve,j.layers[Y])}(L,N),N.finish()}function Ve(L,N){var j;N.writeVarintField(15,L.version||1),N.writeStringField(1,L.name||""),N.writeVarintField(5,L.extent||4096);var H={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<L.length;j++)H.feature=L.feature(j),N.writeMessage(2,lt,H);var Y=H.keys;for(j=0;j<Y.length;j++)N.writeStringField(3,Y[j]);var ue=H.values;for(j=0;j<ue.length;j++)N.writeMessage(4,Mt,ue[j])}function lt(L,N){var j=L.feature;j.id!==void 0&&N.writeVarintField(1,j.id),N.writeMessage(2,Me,L),N.writeVarintField(3,j.type),N.writeMessage(4,Ut,j)}function Me(L,N){var j=L.feature,H=L.keys,Y=L.values,ue=L.keycache,fe=L.valuecache;for(var V in j.properties){var re=ue[V];re===void 0&&(H.push(V),ue[V]=re=H.length-1),N.writeVarint(re);var ye=j.properties[V],Le=typeof ye;Le!=="string"&&Le!=="boolean"&&Le!=="number"&&(ye=JSON.stringify(ye));var Fe=Le+":"+ye,ke=fe[Fe];ke===void 0&&(Y.push(ye),fe[Fe]=ke=Y.length-1),N.writeVarint(ke)}}function st(L,N){return(N<<3)+(7&L)}function ft(L){return L<<1^L>>31}function Ut(L,N){for(var j=L.loadGeometry(),H=L.type,Y=0,ue=0,fe=j.length,V=0;V<fe;V++){var re=j[V],ye=1;H===1&&(ye=re.length),N.writeVarint(st(1,ye));for(var Le=H===3?re.length-1:re.length,Fe=0;Fe<Le;Fe++){Fe===1&&H!==1&&N.writeVarint(st(2,Le-1));var ke=re[Fe].x-Y,Be=re[Fe].y-ue;N.writeVarint(ft(ke)),N.writeVarint(ft(Be)),Y+=ke,ue+=Be}H===3&&N.writeVarint(st(7,1))}}function Mt(L,N){var j=typeof L;j==="string"?N.writeStringField(1,L):j==="boolean"?N.writeBooleanField(7,L):j==="number"&&(L%1!=0?N.writeDoubleField(3,L):L<0?N.writeSVarintField(6,L):N.writeVarintField(5,L))}function kt(L,N,j,H){Pe(L,j,H),Pe(N,2*j,2*H),Pe(N,2*j+1,2*H+1)}function Pe(L,N,j){var H=L[N];L[N]=L[j],L[j]=H}function rt(L,N,j,H){var Y=L-j,ue=N-H;return Y*Y+ue*ue}Xe.fromVectorTileJs=ii,Xe.fromGeojsonVt=function(L,N){N=N||{};var j={};for(var H in L)j[H]=new ni(L[H].features,N),j[H].name=H,j[H].version=N.version,j[H].extent=N.extent;return ii({layers:j})},Xe.GeoJSONWrapper=xt;var zi=function(L){return L[0]},xr=function(L){return L[1]},qi=function(L,N,j,H,Y){N===void 0&&(N=zi),j===void 0&&(j=xr),H===void 0&&(H=64),Y===void 0&&(Y=Float64Array),this.nodeSize=H,this.points=L;for(var ue=L.length<65536?Uint16Array:Uint32Array,fe=this.ids=new ue(L.length),V=this.coords=new Y(2*L.length),re=0;re<L.length;re++)fe[re]=re,V[2*re]=N(L[re]),V[2*re+1]=j(L[re]);(function ye(Le,Fe,ke,Be,gt,ut){if(!(gt-Be<=ke)){var ze=Be+gt>>1;(function nt(Ye,et,Gt,at,ei,wi){for(;ei>at;){if(ei-at>600){var Wt=ei-at+1,ui=Gt-at+1,ti=Math.log(Wt),Er=.5*Math.exp(2*ti/3),gi=.5*Math.sqrt(ti*Er*(Wt-Er)/Wt)*(ui-Wt/2<0?-1:1);nt(Ye,et,Gt,Math.max(at,Math.floor(Gt-ui*Er/Wt+gi)),Math.min(ei,Math.floor(Gt+(Wt-ui)*Er/Wt+gi)),wi)}var Ni=et[2*Gt+wi],bi=at,Jt=ei;for(kt(Ye,et,at,Gt),et[2*ei+wi]>Ni&&kt(Ye,et,at,ei);bi<Jt;){for(kt(Ye,et,bi,Jt),bi++,Jt--;et[2*bi+wi]<Ni;)bi++;for(;et[2*Jt+wi]>Ni;)Jt--}et[2*at+wi]===Ni?kt(Ye,et,at,Jt):kt(Ye,et,++Jt,ei),Jt<=Gt&&(at=Jt+1),Gt<=Jt&&(ei=Jt-1)}})(Le,Fe,ze,Be,gt,ut%2),ye(Le,Fe,ke,Be,ze-1,ut+1),ye(Le,Fe,ke,ze+1,gt,ut+1)}})(fe,V,H,0,fe.length-1,0)};qi.prototype.range=function(L,N,j,H){return function(Y,ue,fe,V,re,ye,Le){for(var Fe,ke,Be=[0,Y.length-1,0],gt=[];Be.length;){var ut=Be.pop(),ze=Be.pop(),nt=Be.pop();if(ze-nt<=Le)for(var Ye=nt;Ye<=ze;Ye++)ke=ue[2*Ye+1],(Fe=ue[2*Ye])>=fe&&Fe<=re&&ke>=V&&ke<=ye&&gt.push(Y[Ye]);else{var et=Math.floor((nt+ze)/2);ke=ue[2*et+1],(Fe=ue[2*et])>=fe&&Fe<=re&&ke>=V&&ke<=ye&&gt.push(Y[et]);var Gt=(ut+1)%2;(ut===0?fe<=Fe:V<=ke)&&(Be.push(nt),Be.push(et-1),Be.push(Gt)),(ut===0?re>=Fe:ye>=ke)&&(Be.push(et+1),Be.push(ze),Be.push(Gt))}}return gt}(this.ids,this.coords,L,N,j,H,this.nodeSize)},qi.prototype.within=function(L,N,j){return function(H,Y,ue,fe,V,re){for(var ye=[0,H.length-1,0],Le=[],Fe=V*V;ye.length;){var ke=ye.pop(),Be=ye.pop(),gt=ye.pop();if(Be-gt<=re)for(var ut=gt;ut<=Be;ut++)rt(Y[2*ut],Y[2*ut+1],ue,fe)<=Fe&&Le.push(H[ut]);else{var ze=Math.floor((gt+Be)/2),nt=Y[2*ze],Ye=Y[2*ze+1];rt(nt,Ye,ue,fe)<=Fe&&Le.push(H[ze]);var et=(ke+1)%2;(ke===0?ue-V<=nt:fe-V<=Ye)&&(ye.push(gt),ye.push(ze-1),ye.push(et)),(ke===0?ue+V>=nt:fe+V>=Ye)&&(ye.push(ze+1),ye.push(Be),ye.push(et))}}return Le}(this.ids,this.coords,L,N,j,this.nodeSize)};var Fi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},li=function(L){this.options=Ci(Object.create(Fi),L),this.trees=new Array(this.options.maxZoom+1)};function ur(L,N,j,H,Y){return{x:L,y:N,zoom:1/0,id:j,parentId:-1,numPoints:H,properties:Y}}function qt(L,N){var j=L.geometry.coordinates,H=j[1];return{x:mn(j[0]),y:Zt(H),zoom:1/0,index:N,parentId:-1}}function fn(L){return{type:"Feature",id:L.id,properties:dn(L),geometry:{type:"Point",coordinates:[(H=L.x,360*(H-.5)),(N=L.y,j=(180-360*N)*Math.PI/180,360*Math.atan(Math.exp(j))/Math.PI-90)]}};var N,j,H}function dn(L){var N=L.numPoints,j=N>=1e4?Math.round(N/1e3)+"k":N>=1e3?Math.round(N/100)/10+"k":N;return Ci(Ci({},L.properties),{cluster:!0,cluster_id:L.id,point_count:N,point_count_abbreviated:j})}function mn(L){return L/360+.5}function Zt(L){var N=Math.sin(L*Math.PI/180),j=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return j<0?0:j>1?1:j}function Ci(L,N){for(var j in N)L[j]=N[j];return L}function Gi(L){return L.x}function cr(L){return L.y}function Wr(L,N,j,H,Y,ue){var fe=Y-j,V=ue-H;if(fe!==0||V!==0){var re=((L-j)*fe+(N-H)*V)/(fe*fe+V*V);re>1?(j=Y,H=ue):re>0&&(j+=fe*re,H+=V*re)}return(fe=L-j)*fe+(V=N-H)*V}function Ur(L,N,j,H){var Y={id:L===void 0?null:L,type:N,geometry:j,tags:H,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ue){var fe=ue.geometry,V=ue.type;if(V==="Point"||V==="MultiPoint"||V==="LineString")Tr(ue,fe);else if(V==="Polygon"||V==="MultiLineString")for(var re=0;re<fe.length;re++)Tr(ue,fe[re]);else if(V==="MultiPolygon")for(re=0;re<fe.length;re++)for(var ye=0;ye<fe[re].length;ye++)Tr(ue,fe[re][ye])}(Y),Y}function Tr(L,N){for(var j=0;j<N.length;j+=3)L.minX=Math.min(L.minX,N[j]),L.minY=Math.min(L.minY,N[j+1]),L.maxX=Math.max(L.maxX,N[j]),L.maxY=Math.max(L.maxY,N[j+1])}function pr(L,N,j,H){if(N.geometry){var Y=N.geometry.coordinates,ue=N.geometry.type,fe=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2),V=[],re=N.id;if(j.promoteId?re=N.properties[j.promoteId]:j.generateId&&(re=H||0),ue==="Point")hr(Y,V);else if(ue==="MultiPoint")for(var ye=0;ye<Y.length;ye++)hr(Y[ye],V);else if(ue==="LineString")gn(Y,V,fe,!1);else if(ue==="MultiLineString"){if(j.lineMetrics){for(ye=0;ye<Y.length;ye++)gn(Y[ye],V=[],fe,!1),L.push(Ur(re,"LineString",V,N.properties));return}Zi(Y,V,fe,!1)}else if(ue==="Polygon")Zi(Y,V,fe,!0);else{if(ue!=="MultiPolygon"){if(ue==="GeometryCollection"){for(ye=0;ye<N.geometry.geometries.length;ye++)pr(L,{id:re,geometry:N.geometry.geometries[ye],properties:N.properties},j,H);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<Y.length;ye++){var Le=[];Zi(Y[ye],Le,fe,!0),V.push(Le)}}L.push(Ur(re,ue,V,N.properties))}}function hr(L,N){N.push(fr(L[0])),N.push(dr(L[1])),N.push(0)}function gn(L,N,j,H){for(var Y,ue,fe=0,V=0;V<L.length;V++){var re=fr(L[V][0]),ye=dr(L[V][1]);N.push(re),N.push(ye),N.push(0),V>0&&(fe+=H?(Y*ye-re*ue)/2:Math.sqrt(Math.pow(re-Y,2)+Math.pow(ye-ue,2))),Y=re,ue=ye}var Le=N.length-3;N[2]=1,function Fe(ke,Be,gt,ut){for(var ze,nt=ut,Ye=gt-Be>>1,et=gt-Be,Gt=ke[Be],at=ke[Be+1],ei=ke[gt],wi=ke[gt+1],Wt=Be+3;Wt<gt;Wt+=3){var ui=Wr(ke[Wt],ke[Wt+1],Gt,at,ei,wi);if(ui>nt)ze=Wt,nt=ui;else if(ui===nt){var ti=Math.abs(Wt-Ye);ti<et&&(ze=Wt,et=ti)}}nt>ut&&(ze-Be>3&&Fe(ke,Be,ze,ut),ke[ze+2]=nt,gt-ze>3&&Fe(ke,ze,gt,ut))}(N,0,Le,j),N[Le+2]=1,N.size=Math.abs(fe),N.start=0,N.end=N.size}function Zi(L,N,j,H){for(var Y=0;Y<L.length;Y++){var ue=[];gn(L[Y],ue,j,H),N.push(ue)}}function fr(L){return L/360+.5}function dr(L){var N=Math.sin(L*Math.PI/180),j=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return j<0?0:j>1?1:j}function wr(L,N,j,H,Y,ue,fe,V){if(H/=N,ue>=(j/=N)&&fe<H)return L;if(fe<j||ue>=H)return null;for(var re=[],ye=0;ye<L.length;ye++){var Le=L[ye],Fe=Le.geometry,ke=Le.type,Be=Y===0?Le.minX:Le.minY,gt=Y===0?Le.maxX:Le.maxY;if(Be>=j&&gt<H)re.push(Le);else if(!(gt<j||Be>=H)){var ut=[];if(ke==="Point"||ke==="MultiPoint")Vr(Fe,ut,j,H,Y);else if(ke==="LineString")an(Fe,ut,j,H,Y,!1,V.lineMetrics);else if(ke==="MultiLineString")Yn(Fe,ut,j,H,Y,!1);else if(ke==="Polygon")Yn(Fe,ut,j,H,Y,!0);else if(ke==="MultiPolygon")for(var ze=0;ze<Fe.length;ze++){var nt=[];Yn(Fe[ze],nt,j,H,Y,!0),nt.length&&ut.push(nt)}if(ut.length){if(V.lineMetrics&&ke==="LineString"){for(ze=0;ze<ut.length;ze++)re.push(Ur(Le.id,ke,ut[ze],Le.tags));continue}ke!=="LineString"&&ke!=="MultiLineString"||(ut.length===1?(ke="LineString",ut=ut[0]):ke="MultiLineString"),ke!=="Point"&&ke!=="MultiPoint"||(ke=ut.length===3?"Point":"MultiPoint"),re.push(Ur(Le.id,ke,ut,Le.tags))}}}return re.length?re:null}function Vr(L,N,j,H,Y){for(var ue=0;ue<L.length;ue+=3){var fe=L[ue+Y];fe>=j&&fe<=H&&(N.push(L[ue]),N.push(L[ue+1]),N.push(L[ue+2]))}}function an(L,N,j,H,Y,ue,fe){for(var V,re,ye=Xi(L),Le=Y===0?Ar:Jn,Fe=L.start,ke=0;ke<L.length-3;ke+=3){var Be=L[ke],gt=L[ke+1],ut=L[ke+2],ze=L[ke+3],nt=L[ke+4],Ye=Y===0?Be:gt,et=Y===0?ze:nt,Gt=!1;fe&&(V=Math.sqrt(Math.pow(Be-ze,2)+Math.pow(gt-nt,2))),Ye<j?et>j&&(re=Le(ye,Be,gt,ze,nt,j),fe&&(ye.start=Fe+V*re)):Ye>H?et<H&&(re=Le(ye,Be,gt,ze,nt,H),fe&&(ye.start=Fe+V*re)):wn(ye,Be,gt,ut),et<j&&Ye>=j&&(re=Le(ye,Be,gt,ze,nt,j),Gt=!0),et>H&&Ye<=H&&(re=Le(ye,Be,gt,ze,nt,H),Gt=!0),!ue&&Gt&&(fe&&(ye.end=Fe+V*re),N.push(ye),ye=Xi(L)),fe&&(Fe+=V)}var at=L.length-3;Be=L[at],gt=L[at+1],ut=L[at+2],(Ye=Y===0?Be:gt)>=j&&Ye<=H&&wn(ye,Be,gt,ut),at=ye.length-3,ue&&at>=3&&(ye[at]!==ye[0]||ye[at+1]!==ye[1])&&wn(ye,ye[0],ye[1],ye[2]),ye.length&&N.push(ye)}function Xi(L){var N=[];return N.size=L.size,N.start=L.start,N.end=L.end,N}function Yn(L,N,j,H,Y,ue){for(var fe=0;fe<L.length;fe++)an(L[fe],N,j,H,Y,ue,!1)}function wn(L,N,j,H){L.push(N),L.push(j),L.push(H)}function Ar(L,N,j,H,Y,ue){var fe=(ue-N)/(H-N);return L.push(ue),L.push(j+(Y-j)*fe),L.push(1),fe}function Jn(L,N,j,H,Y,ue){var fe=(ue-j)/(Y-j);return L.push(N+(H-N)*fe),L.push(ue),L.push(1),fe}function Qn(L,N){for(var j=[],H=0;H<L.length;H++){var Y,ue=L[H],fe=ue.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")Y=Oi(ue.geometry,N);else if(fe==="MultiLineString"||fe==="Polygon"){Y=[];for(var V=0;V<ue.geometry.length;V++)Y.push(Oi(ue.geometry[V],N))}else if(fe==="MultiPolygon")for(Y=[],V=0;V<ue.geometry.length;V++){for(var re=[],ye=0;ye<ue.geometry[V].length;ye++)re.push(Oi(ue.geometry[V][ye],N));Y.push(re)}j.push(Ur(ue.id,fe,Y,ue.tags))}return j}function Oi(L,N){var j=[];j.size=L.size,L.start!==void 0&&(j.start=L.start,j.end=L.end);for(var H=0;H<L.length;H+=3)j.push(L[H]+N,L[H+1],L[H+2]);return j}function $n(L,N){if(L.transformed)return L;var j,H,Y,ue=1<<L.z,fe=L.x,V=L.y;for(j=0;j<L.features.length;j++){var re=L.features[j],ye=re.geometry,Le=re.type;if(re.geometry=[],Le===1)for(H=0;H<ye.length;H+=2)re.geometry.push(Cn(ye[H],ye[H+1],N,ue,fe,V));else for(H=0;H<ye.length;H++){var Fe=[];for(Y=0;Y<ye[H].length;Y+=2)Fe.push(Cn(ye[H][Y],ye[H][Y+1],N,ue,fe,V));re.geometry.push(Fe)}}return L.transformed=!0,L}function Cn(L,N,j,H,Y,ue){return[Math.round(j*(L*H-Y)),Math.round(j*(N*H-ue))]}function Pr(L,N,j,H,Y){for(var ue=N===Y.maxZoom?0:Y.tolerance/((1<<N)*Y.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:j,y:H,z:N,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},V=0;V<L.length;V++){fe.numFeatures++,q(fe,L[V],ue,Y);var re=L[V].minX,ye=L[V].minY,Le=L[V].maxX,Fe=L[V].maxY;re<fe.minX&&(fe.minX=re),ye<fe.minY&&(fe.minY=ye),Le>fe.maxX&&(fe.maxX=Le),Fe>fe.maxY&&(fe.maxY=Fe)}return fe}function q(L,N,j,H){var Y=N.geometry,ue=N.type,fe=[];if(ue==="Point"||ue==="MultiPoint")for(var V=0;V<Y.length;V+=3)fe.push(Y[V]),fe.push(Y[V+1]),L.numPoints++,L.numSimplified++;else if(ue==="LineString")pt(fe,Y,L,j,!1,!1);else if(ue==="MultiLineString"||ue==="Polygon")for(V=0;V<Y.length;V++)pt(fe,Y[V],L,j,ue==="Polygon",V===0);else if(ue==="MultiPolygon")for(var re=0;re<Y.length;re++){var ye=Y[re];for(V=0;V<ye.length;V++)pt(fe,ye[V],L,j,!0,V===0)}if(fe.length){var Le=N.tags||null;if(ue==="LineString"&&H.lineMetrics){for(var Fe in Le={},N.tags)Le[Fe]=N.tags[Fe];Le.mapbox_clip_start=Y.start/Y.size,Le.mapbox_clip_end=Y.end/Y.size}var ke={geometry:fe,type:ue==="Polygon"||ue==="MultiPolygon"?3:ue==="LineString"||ue==="MultiLineString"?2:1,tags:Le};N.id!==null&&(ke.id=N.id),L.features.push(ke)}}function pt(L,N,j,H,Y,ue){var fe=H*H;if(H>0&&N.size<(Y?fe:H))j.numPoints+=N.length/3;else{for(var V=[],re=0;re<N.length;re+=3)(H===0||N[re+2]>fe)&&(j.numSimplified++,V.push(N[re]),V.push(N[re+1])),j.numPoints++;Y&&function(ye,Le){for(var Fe=0,ke=0,Be=ye.length,gt=Be-2;ke<Be;gt=ke,ke+=2)Fe+=(ye[ke]-ye[gt])*(ye[ke+1]+ye[gt+1]);if(Fe>0===Le)for(ke=0,Be=ye.length;ke<Be/2;ke+=2){var ut=ye[ke],ze=ye[ke+1];ye[ke]=ye[Be-2-ke],ye[ke+1]=ye[Be-1-ke],ye[Be-2-ke]=ut,ye[Be-1-ke]=ze}}(V,ue),L.push(V)}}function mr(L,N){var j=(N=this.options=function(Y,ue){for(var fe in ue)Y[fe]=ue[fe];return Y}(Object.create(this.options),N)).debug;if(j&&console.time("preprocess data"),N.maxZoom<0||N.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(N.promoteId&&N.generateId)throw new Error("promoteId and generateId cannot be used together.");var H=function(Y,ue){var fe=[];if(Y.type==="FeatureCollection")for(var V=0;V<Y.features.length;V++)pr(fe,Y.features[V],ue,V);else pr(fe,Y.type==="Feature"?Y:{geometry:Y},ue);return fe}(L,N);this.tiles={},this.tileCoords=[],j&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",N.indexMaxZoom,N.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(H=function(Y,ue){var fe=ue.buffer/ue.extent,V=Y,re=wr(Y,1,-1-fe,fe,0,-1,2,ue),ye=wr(Y,1,1-fe,2+fe,0,-1,2,ue);return(re||ye)&&(V=wr(Y,1,-fe,1+fe,0,-1,2,ue)||[],re&&(V=Qn(re,1).concat(V)),ye&&(V=V.concat(Qn(ye,-1)))),V}(H,N)).length&&this.splitTile(H,0,0,0),j&&(H.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gr(L,N,j){return 32*((1<<L)*j+N)+L}function jr(L,N){var j=L.tileID.canonical;if(!this._geoJSONIndex)return N(null,null);var H=this._geoJSONIndex.getTile(j.z,j.x,j.y);if(!H)return N(null,null);var Y=new qe(H.features),ue=Xe(Y);ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),N(null,{vectorTile:Y,rawData:ue.buffer})}li.prototype.load=function(L){var N=this.options,j=N.log,H=N.minZoom,Y=N.maxZoom,ue=N.nodeSize;j&&console.time("total time");var fe="prepare "+L.length+" points";j&&console.time(fe),this.points=L;for(var V=[],re=0;re<L.length;re++)L[re].geometry&&V.push(qt(L[re],re));this.trees[Y+1]=new qi(V,Gi,cr,ue,Float32Array),j&&console.timeEnd(fe);for(var ye=Y;ye>=H;ye--){var Le=+Date.now();V=this._cluster(V,ye),this.trees[ye]=new qi(V,Gi,cr,ue,Float32Array),j&&console.log("z%d: %d clusters in %dms",ye,V.length,+Date.now()-Le)}return j&&console.timeEnd("total time"),this},li.prototype.getClusters=function(L,N){var j=((L[0]+180)%360+360)%360-180,H=Math.max(-90,Math.min(90,L[1])),Y=L[2]===180?180:((L[2]+180)%360+360)%360-180,ue=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)j=-180,Y=180;else if(j>Y){var fe=this.getClusters([j,H,180,ue],N),V=this.getClusters([-180,H,Y,ue],N);return fe.concat(V)}for(var re=this.trees[this._limitZoom(N)],ye=[],Le=0,Fe=re.range(mn(j),Zt(ue),mn(Y),Zt(H));Le<Fe.length;Le+=1){var ke=re.points[Fe[Le]];ye.push(ke.numPoints?fn(ke):this.points[ke.index])}return ye},li.prototype.getChildren=function(L){var N=this._getOriginId(L),j=this._getOriginZoom(L),H="No cluster with the specified id.",Y=this.trees[j];if(!Y)throw new Error(H);var ue=Y.points[N];if(!ue)throw new Error(H);for(var fe=this.options.radius/(this.options.extent*Math.pow(2,j-1)),V=[],re=0,ye=Y.within(ue.x,ue.y,fe);re<ye.length;re+=1){var Le=Y.points[ye[re]];Le.parentId===L&&V.push(Le.numPoints?fn(Le):this.points[Le.index])}if(V.length===0)throw new Error(H);return V},li.prototype.getLeaves=function(L,N,j){var H=[];return this._appendLeaves(H,L,N=N||10,j=j||0,0),H},li.prototype.getTile=function(L,N,j){var H=this.trees[this._limitZoom(L)],Y=Math.pow(2,L),ue=this.options,fe=ue.radius/ue.extent,V=(j-fe)/Y,re=(j+1+fe)/Y,ye={features:[]};return this._addTileFeatures(H.range((N-fe)/Y,V,(N+1+fe)/Y,re),H.points,N,j,Y,ye),N===0&&this._addTileFeatures(H.range(1-fe/Y,V,1,re),H.points,Y,j,Y,ye),N===Y-1&&this._addTileFeatures(H.range(0,V,fe/Y,re),H.points,-1,j,Y,ye),ye.features.length?ye:null},li.prototype.getClusterExpansionZoom=function(L){for(var N=this._getOriginZoom(L)-1;N<=this.options.maxZoom;){var j=this.getChildren(L);if(N++,j.length!==1)break;L=j[0].properties.cluster_id}return N},li.prototype._appendLeaves=function(L,N,j,H,Y){for(var ue=0,fe=this.getChildren(N);ue<fe.length;ue+=1){var V=fe[ue],re=V.properties;if(re&&re.cluster?Y+re.point_count<=H?Y+=re.point_count:Y=this._appendLeaves(L,re.cluster_id,j,H,Y):Y<H?Y++:L.push(V),L.length===j)break}return Y},li.prototype._addTileFeatures=function(L,N,j,H,Y,ue){for(var fe=0,V=L;fe<V.length;fe+=1){var re=N[V[fe]],ye=re.numPoints,Le={type:1,geometry:[[Math.round(this.options.extent*(re.x*Y-j)),Math.round(this.options.extent*(re.y*Y-H))]],tags:ye?dn(re):this.points[re.index].properties},Fe=void 0;ye?Fe=re.id:this.options.generateId?Fe=re.index:this.points[re.index].id&&(Fe=this.points[re.index].id),Fe!==void 0&&(Le.id=Fe),ue.features.push(Le)}},li.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},li.prototype._cluster=function(L,N){for(var j=[],H=this.options,Y=H.reduce,ue=H.minPoints,fe=H.radius/(H.extent*Math.pow(2,N)),V=0;V<L.length;V++){var re=L[V];if(!(re.zoom<=N)){re.zoom=N;for(var ye=this.trees[N+1],Le=ye.within(re.x,re.y,fe),Fe=re.numPoints||1,ke=Fe,Be=0,gt=Le;Be<gt.length;Be+=1){var ut=ye.points[gt[Be]];ut.zoom>N&&(ke+=ut.numPoints||1)}if(ke>=ue){for(var ze=re.x*Fe,nt=re.y*Fe,Ye=Y&&Fe>1?this._map(re,!0):null,et=(V<<5)+(N+1)+this.points.length,Gt=0,at=Le;Gt<at.length;Gt+=1){var ei=ye.points[at[Gt]];if(!(ei.zoom<=N)){ei.zoom=N;var wi=ei.numPoints||1;ze+=ei.x*wi,nt+=ei.y*wi,ei.parentId=et,Y&&(Ye||(Ye=this._map(re,!0)),Y(Ye,this._map(ei)))}}re.parentId=et,j.push(ur(ze/ke,nt/ke,et,ke,Ye))}else if(j.push(re),ke>1)for(var Wt=0,ui=Le;Wt<ui.length;Wt+=1){var ti=ye.points[ui[Wt]];ti.zoom<=N||(ti.zoom=N,j.push(ti))}}}return j},li.prototype._getOriginId=function(L){return L-this.points.length>>5},li.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},li.prototype._map=function(L,N){if(L.numPoints)return N?Ci({},L.properties):L.properties;var j=this.points[L.index].properties,H=this.options.map(j);return N&&H===j?Ci({},H):H},mr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},mr.prototype.splitTile=function(L,N,j,H,Y,ue,fe){for(var V=[L,N,j,H],re=this.options,ye=re.debug;V.length;){H=V.pop(),j=V.pop(),N=V.pop(),L=V.pop();var Le=1<<N,Fe=gr(N,j,H),ke=this.tiles[Fe];if(!ke&&(ye>1&&console.time("creation"),ke=this.tiles[Fe]=Pr(L,N,j,H,re),this.tileCoords.push({z:N,x:j,y:H}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",N,j,H,ke.numFeatures,ke.numPoints,ke.numSimplified),console.timeEnd("creation"));var Be="z"+N;this.stats[Be]=(this.stats[Be]||0)+1,this.total++}if(ke.source=L,Y){if(N===re.maxZoom||N===Y)continue;var gt=1<<Y-N;if(j!==Math.floor(ue/gt)||H!==Math.floor(fe/gt))continue}else if(N===re.indexMaxZoom||ke.numPoints<=re.indexMaxPoints)continue;if(ke.source=null,L.length!==0){ye>1&&console.time("clipping");var ut,ze,nt,Ye,et,Gt,at=.5*re.buffer/re.extent,ei=.5-at,wi=.5+at,Wt=1+at;ut=ze=nt=Ye=null,et=wr(L,Le,j-at,j+wi,0,ke.minX,ke.maxX,re),Gt=wr(L,Le,j+ei,j+Wt,0,ke.minX,ke.maxX,re),L=null,et&&(ut=wr(et,Le,H-at,H+wi,1,ke.minY,ke.maxY,re),ze=wr(et,Le,H+ei,H+Wt,1,ke.minY,ke.maxY,re),et=null),Gt&&(nt=wr(Gt,Le,H-at,H+wi,1,ke.minY,ke.maxY,re),Ye=wr(Gt,Le,H+ei,H+Wt,1,ke.minY,ke.maxY,re),Gt=null),ye>1&&console.timeEnd("clipping"),V.push(ut||[],N+1,2*j,2*H),V.push(ze||[],N+1,2*j,2*H+1),V.push(nt||[],N+1,2*j+1,2*H),V.push(Ye||[],N+1,2*j+1,2*H+1)}}},mr.prototype.getTile=function(L,N,j){var H=this.options,Y=H.extent,ue=H.debug;if(L<0||L>24)return null;var fe=1<<L,V=gr(L,N=(N%fe+fe)%fe,j);if(this.tiles[V])return $n(this.tiles[V],Y);ue>1&&console.log("drilling down to z%d-%d-%d",L,N,j);for(var re,ye=L,Le=N,Fe=j;!re&&ye>0;)ye--,Le=Math.floor(Le/2),Fe=Math.floor(Fe/2),re=this.tiles[gr(ye,Le,Fe)];return re&&re.source?(ue>1&&console.log("found parent tile z%d-%d-%d",ye,Le,Fe),ue>1&&console.time("drilling down"),this.splitTile(re.source,ye,Le,Fe,L,N,j),ue>1&&console.timeEnd("drilling down"),this.tiles[V]?$n(this.tiles[V],Y):null):null};var Sr=function(L){function N(j,H,Y,ue){L.call(this,j,H,Y,jr),ue&&(this.loadGeoJSON=ue)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.loadData=function(j,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=H,this._pendingLoadDataParams=j,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},N.prototype._loadData=function(){var j=this;if(this._pendingCallback&&this._pendingLoadDataParams){var H=this._pendingCallback,Y=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ue=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.RequestPerformance(Y.request);this.loadGeoJSON(Y,function(fe,V){if(fe||!V)return H(fe);if(typeof V!="object")return H(new Error("Input data given to '"+Y.source+"' is not a valid GeoJSON object."));(function ke(Be,gt){var ut,ze=Be&&Be.type;if(ze==="FeatureCollection")for(ut=0;ut<Be.features.length;ut++)ke(Be.features[ut],gt);else if(ze==="GeometryCollection")for(ut=0;ut<Be.geometries.length;ut++)ke(Be.geometries[ut],gt);else if(ze==="Feature")ke(Be.geometry,gt);else if(ze==="Polygon")ve(Be.coordinates,gt);else if(ze==="MultiPolygon")for(ut=0;ut<Be.coordinates.length;ut++)ve(Be.coordinates[ut],gt);return Be})(V,!0);try{if(Y.filter){var re=a.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(re.result==="error")throw new Error(re.value.map(function(ke){return ke.key+": "+ke.message}).join(", "));var ye=V.features.filter(function(ke){return re.value.evaluate({zoom:0},ke)});V={type:"FeatureCollection",features:ye}}j._geoJSONIndex=Y.cluster?new li(function(ke){var Be=ke.superclusterOptions,gt=ke.clusterProperties;if(!gt||!Be)return Be;for(var ut={},ze={},nt={accumulated:null,zoom:0},Ye={properties:null},et=Object.keys(gt),Gt=0,at=et;Gt<at.length;Gt+=1){var ei=at[Gt],wi=gt[ei],Wt=wi[0],ui=a.createExpression(wi[1]),ti=a.createExpression(typeof Wt=="string"?[Wt,["accumulated"],["get",ei]]:Wt);ut[ei]=ui.value,ze[ei]=ti.value}return Be.map=function(Er){Ye.properties=Er;for(var gi={},Ni=0,bi=et;Ni<bi.length;Ni+=1){var Jt=bi[Ni];gi[Jt]=ut[Jt].evaluate(nt,Ye)}return gi},Be.reduce=function(Er,gi){Ye.properties=gi;for(var Ni=0,bi=et;Ni<bi.length;Ni+=1){var Jt=bi[Ni];nt.accumulated=Er[Jt],Er[Jt]=ze[Jt].evaluate(nt,Ye)}},Be}(Y)).load(V.features):function(ke,Be){return new mr(ke,Be)}(V,Y.geojsonVtOptions)}catch(ke){return H(ke)}j.loaded={};var Le={};if(ue){var Fe=ue.finish();Fe&&(Le.resourceTiming={},Le.resourceTiming[Y.source]=JSON.parse(JSON.stringify(Fe)))}H(null,Le)})}},N.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},N.prototype.reloadTile=function(j,H){var Y=this.loaded;return Y&&Y[j.uid]?L.prototype.reloadTile.call(this,j,H):this.loadTile(j,H)},N.prototype.loadGeoJSON=function(j,H){if(j.request)a.getJSON(j.request,H);else{if(typeof j.data!="string")return H(new Error("Input data given to '"+j.source+"' is not a valid GeoJSON object."));try{return H(null,JSON.parse(j.data))}catch{return H(new Error("Input data given to '"+j.source+"' is not a valid GeoJSON object."))}}},N.prototype.removeSource=function(j,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),H()},N.prototype.getClusterExpansionZoom=function(j,H){try{H(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(Y){H(Y)}},N.prototype.getClusterChildren=function(j,H){try{H(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(Y){H(Y)}},N.prototype.getClusterLeaves=function(j,H){try{H(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(Y){H(Y)}},N}(te),$t=function(L){var N=this;this.self=L,this.actor=new a.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:te,geojson:Sr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(j,H){if(N.workerSourceTypes[j])throw new Error('Worker source with name "'+j+'" already registered.');N.workerSourceTypes[j]=H},this.self.registerRTLTextPlugin=function(j){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=j.applyArabicShaping,a.plugin.processBidirectionalText=j.processBidirectionalText,a.plugin.processStyledBidirectionalText=j.processStyledBidirectionalText}};return $t.prototype.setReferrer=function(L,N){this.referrer=N},$t.prototype.setImages=function(L,N,j){for(var H in this.availableImages[L]=N,this.workerSources[L]){var Y=this.workerSources[L][H];for(var ue in Y)Y[ue].availableImages=N}j()},$t.prototype.setLayers=function(L,N,j){this.getLayerIndex(L).replace(N),j()},$t.prototype.updateLayers=function(L,N,j){this.getLayerIndex(L).update(N.layers,N.removedIds),j()},$t.prototype.loadTile=function(L,N,j){this.getWorkerSource(L,N.type,N.source).loadTile(N,j)},$t.prototype.loadDEMTile=function(L,N,j){this.getDEMWorkerSource(L,N.source).loadTile(N,j)},$t.prototype.reloadTile=function(L,N,j){this.getWorkerSource(L,N.type,N.source).reloadTile(N,j)},$t.prototype.abortTile=function(L,N,j){this.getWorkerSource(L,N.type,N.source).abortTile(N,j)},$t.prototype.removeTile=function(L,N,j){this.getWorkerSource(L,N.type,N.source).removeTile(N,j)},$t.prototype.removeDEMTile=function(L,N){this.getDEMWorkerSource(L,N.source).removeTile(N)},$t.prototype.removeSource=function(L,N,j){if(this.workerSources[L]&&this.workerSources[L][N.type]&&this.workerSources[L][N.type][N.source]){var H=this.workerSources[L][N.type][N.source];delete this.workerSources[L][N.type][N.source],H.removeSource!==void 0?H.removeSource(N,j):j()}},$t.prototype.loadWorkerSource=function(L,N,j){try{this.self.importScripts(N.url),j()}catch(H){j(H.toString())}},$t.prototype.syncRTLPluginState=function(L,N,j){try{a.plugin.setState(N);var H=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&H!=null){this.self.importScripts(H);var Y=a.plugin.isParsed();j(Y?void 0:new Error("RTL Text Plugin failed to import scripts from "+H),Y)}}catch(ue){j(ue.toString())}},$t.prototype.getAvailableImages=function(L){var N=this.availableImages[L];return N||(N=[]),N},$t.prototype.getLayerIndex=function(L){var N=this.layerIndexes[L];return N||(N=this.layerIndexes[L]=new B),N},$t.prototype.getWorkerSource=function(L,N,j){var H=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][N]||(this.workerSources[L][N]={}),this.workerSources[L][N][j]||(this.workerSources[L][N][j]=new this.workerSourceTypes[N]({send:function(Y,ue,fe){H.actor.send(Y,ue,fe,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][N][j]},$t.prototype.getDEMWorkerSource=function(L,N){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][N]||(this.demWorkerSources[L][N]=new he),this.demWorkerSources[L][N]},$t.prototype.enforceCacheSizeLimit=function(L,N){a.enforceCacheSizeLimit(N)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new $t(self)),$t}),v(["./shared"],function(a){var k=a.createCommonjsModule(function(n){function s(_){return!o(_)}function o(_){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,z,P=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(P);try{z=new Worker(O),S=!0}catch{S=!1}return z&&z.terminate(),URL.revokeObjectURL(O),S}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var S=document.createElement("canvas");S.width=S.height=1;var z=S.getContext("2d");if(!z)return!1;var P=z.getImageData(0,0,1,1);return P&&P.width===S.width}()?(c[w=_&&_.failIfMajorPerformanceCaveat]===void 0&&(c[w]=function(S){var z=function(O){var Z=document.createElement("canvas"),K=Object.create(s.webGLContextAttributes);return K.failIfMajorPerformanceCaveat=O,Z.probablySupportsContext?Z.probablySupportsContext("webgl",K)||Z.probablySupportsContext("experimental-webgl",K):Z.supportsContext?Z.supportsContext("webgl",K)||Z.supportsContext("experimental-webgl",K):Z.getContext("webgl",K)||Z.getContext("experimental-webgl",K)}(S);if(!z)return!1;var P=z.createShader(z.VERTEX_SHADER);return!(!P||z.isContextLost())&&(z.shaderSource(P,"void main() {}"),z.compileShader(P),z.getShaderParameter(P,z.COMPILE_STATUS)===!0)}(w)),c[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),I={create:function(n,s,o){var c=a.window.document.createElement(n);return s!==void 0&&(c.className=s),o&&o.appendChild(c),c},createNS:function(n,s){return a.window.document.createElementNS(n,s)}},B=a.window.document&&a.window.document.documentElement.style;function C(n){if(!B)return n[0];for(var s=0;s<n.length;s++)if(n[s]in B)return n[s];return n[0]}var F,D=C(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);I.disableDrag=function(){B&&D&&(F=B[D],B[D]="none")},I.enableDrag=function(){B&&D&&(B[D]=F)};var X=C(["transform","WebkitTransform"]);I.setTransform=function(n,s){n.style[X]=s};var te=!1;try{var oe=Object.defineProperty({},"passive",{get:function(){te=!0}});a.window.addEventListener("test",oe,oe),a.window.removeEventListener("test",oe,oe)}catch{te=!1}I.addEventListener=function(n,s,o,c){c===void 0&&(c={}),n.addEventListener(s,o,"passive"in c&&te?c:c.capture)},I.removeEventListener=function(n,s,o,c){c===void 0&&(c={}),n.removeEventListener(s,o,"passive"in c&&te?c:c.capture)};var he=function(n){n.preventDefault(),n.stopPropagation(),a.window.removeEventListener("click",he,!0)};function ve(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}I.suppressClick=function(){a.window.addEventListener("click",he,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",he,!0)},0)},I.mousePos=function(n,s){var o=n.getBoundingClientRect();return new a.Point(s.clientX-o.left-n.clientLeft,s.clientY-o.top-n.clientTop)},I.touchPos=function(n,s){for(var o=n.getBoundingClientRect(),c=[],_=0;_<s.length;_++)c.push(new a.Point(s[_].clientX-o.left-n.clientLeft,s[_].clientY-o.top-n.clientTop));return c},I.mouseButton=function(n){return a.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},I.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var xe=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var c=0,_=this.requestors;c<_.length;c+=1){var w=_[c];this._notify(w.ids,w.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,c){this._validate(o,c)&&(this.images[o]=c)},s.prototype._validate=function(o,c){var _=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),_=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),_=!1),this._validateContent(c.content,c)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),_=!1),_},s.prototype._validateStretch=function(o,c){if(!o)return!0;for(var _=0,w=0,S=o;w<S.length;w+=1){var z=S[w];if(z[0]<_||z[1]<z[0]||c<z[1])return!1;_=z[1]}return!0},s.prototype._validateContent=function(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,c){c.version=this.images[o].version+1,this.images[o]=c,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,c){var _=!0;if(!this.isLoaded())for(var w=0,S=o;w<S.length;w+=1)this.images[S[w]]||(_=!1);this.isLoaded()||_?this._notify(o,c):this.requestors.push({ids:o,callback:c})},s.prototype._notify=function(o,c){for(var _={},w=0,S=o;w<S.length;w+=1){var z=S[w];this.images[z]||this.fire(new a.Event("styleimagemissing",{id:z}));var P=this.images[z];P?_[z]={data:P.data.clone(),pixelRatio:P.pixelRatio,sdf:P.sdf,version:P.version,stretchX:P.stretchX,stretchY:P.stretchY,content:P.content,hasRenderCallback:!!(P.userImage&&P.userImage.render)}:a.warnOnce('Image "'+z+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,_)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var c=this.patterns[o],_=this.getImage(o);if(!_)return null;if(c&&c.position.version===_.version)return c.position;if(c)c.position.version=_.version;else{var w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},S=new a.ImagePosition(w,_);this.patterns[o]={bin:w,position:S}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var c in this.patterns)o.push(this.patterns[c].bin);var _=a.potpack(o),w=_.w,S=_.h,z=this.atlasImage;for(var P in z.resize({width:w||1,height:S||1}),this.patterns){var O=this.patterns[P].bin,Z=O.x+1,K=O.y+1,W=this.images[P].data,ie=W.width,ee=W.height;a.RGBAImage.copy(W,z,{x:0,y:0},{x:Z,y:K},{width:ie,height:ee}),a.RGBAImage.copy(W,z,{x:0,y:ee-1},{x:Z,y:K-1},{width:ie,height:1}),a.RGBAImage.copy(W,z,{x:0,y:0},{x:Z,y:K+ee},{width:ie,height:1}),a.RGBAImage.copy(W,z,{x:ie-1,y:0},{x:Z-1,y:K},{width:1,height:ee}),a.RGBAImage.copy(W,z,{x:0,y:0},{x:Z+ie,y:K},{width:1,height:ee})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var c=0,_=o;c<_.length;c+=1){var w=_[c];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var S=this.images[w];ve(S)&&this.updateImage(w,S)}}},s}(a.Evented),tt=He,Ge=He,qe=1e20;function He(n,s,o,c,_,w){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=_||"sans-serif",this.fontWeight=w||"normal",this.radius=o||8;var S=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=S,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.d=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Int16Array(S),this.middle=Math.round(S/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ni(n,s,o,c,_,w,S){for(var z=0;z<s;z++){for(var P=0;P<o;P++)c[P]=n[P*s+z];for(Ot(c,_,w,S,o),P=0;P<o;P++)n[P*s+z]=_[P]}for(P=0;P<o;P++){for(z=0;z<s;z++)c[z]=n[P*s+z];for(Ot(c,_,w,S,s),z=0;z<s;z++)n[P*s+z]=Math.sqrt(_[z])}}function Ot(n,s,o,c,_){o[0]=0,c[0]=-qe,c[1]=+qe;for(var w=1,S=0;w<_;w++){for(var z=(n[w]+w*w-(n[o[S]]+o[S]*o[S]))/(2*w-2*o[S]);z<=c[S];)S--,z=(n[w]+w*w-(n[o[S]]+o[S]*o[S]))/(2*w-2*o[S]);o[++S]=w,c[S]=z,c[S+1]=+qe}for(w=0,S=0;w<_;w++){for(;c[S+1]<w;)S++;s[w]=(w-o[S])*(w-o[S])+n[o[S]]}}He.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var _=s.data[4*c+3]/255;this.gridOuter[c]=_===1?0:_===0?qe:Math.pow(Math.max(0,.5-_),2),this.gridInner[c]=_===1?qe:_===0?0:Math.pow(Math.max(0,_-.5),2)}for(ni(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),ni(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)o[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return o},tt.default=Ge;var Ue=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};Ue.prototype.setURL=function(n){this.url=n},Ue.prototype.getGlyphs=function(n,s){var o=this,c=[];for(var _ in n)for(var w=0,S=n[_];w<S.length;w+=1)c.push({stack:_,id:S[w]});a.asyncAll(c,function(z,P){var O=z.stack,Z=z.id,K=o.entries[O];K||(K=o.entries[O]={glyphs:{},requests:{},ranges:{}});var W=K.glyphs[Z];if(W===void 0){if(W=o._tinySDF(K,O,Z))return K.glyphs[Z]=W,void P(null,{stack:O,id:Z,glyph:W});var ie=Math.floor(Z/256);if(256*ie>65535)P(new Error("glyphs > 65535 not supported"));else if(K.ranges[ie])P(null,{stack:O,id:Z,glyph:W});else{var ee=K.requests[ie];ee||(ee=K.requests[ie]=[],Ue.loadGlyphRange(O,ie,o.url,o.requestManager,function(ce,J){if(J){for(var le in J)o._doesCharSupportLocalGlyph(+le)||(K.glyphs[+le]=J[+le]);K.ranges[ie]=!0}for(var de=0,_e=ee;de<_e.length;de+=1)(0,_e[de])(ce,J);delete K.requests[ie]})),ee.push(function(ce,J){ce?P(ce):J&&P(null,{stack:O,id:Z,glyph:J[Z]||null})})}}else P(null,{stack:O,id:Z,glyph:W})},function(z,P){if(z)s(z);else if(P){for(var O={},Z=0,K=P;Z<K.length;Z+=1){var W=K[Z],ie=W.stack,ee=W.id,ce=W.glyph;(O[ie]||(O[ie]={}))[ee]=ce&&{id:ce.id,bitmap:ce.bitmap.clone(),metrics:ce.metrics}}s(null,O)}})},Ue.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](n)||a.isChar["Hangul Syllables"](n)||a.isChar.Hiragana(n)||a.isChar.Katakana(n))},Ue.prototype._tinySDF=function(n,s,o){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(o)){var _=n.tinySDF;if(!_){var w="400";/bold/i.test(s)?w="900":/medium/i.test(s)?w="500":/light/i.test(s)&&(w="200"),_=n.tinySDF=new Ue.TinySDF(24,3,8,.25,c,w)}return{id:o,bitmap:new a.AlphaImage({width:30,height:30},_.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ue.loadGlyphRange=function(n,s,o,c,_){var w=256*s,S=w+255,z=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",w+"-"+S),a.ResourceType.Glyphs);a.getArrayBuffer(z,function(P,O){if(P)_(P);else if(O){for(var Z={},K=0,W=a.parseGlyphPBF(O);K<W.length;K+=1){var ie=W[K];Z[ie.id]=ie}_(null,Z)}})},Ue.TinySDF=tt;var Xe=function(){this.specification=a.styleSpec.light.position};Xe.prototype.possiblyEvaluate=function(n,s){return a.sphericalToCartesian(n.expression.evaluate(s))},Xe.prototype.interpolate=function(n,s,o){return{x:a.number(n.x,s.x,o),y:a.number(n.y,s.y,o),z:a.number(n.z,s.z,o)}};var xt=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Xe,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),ii=function(n){function s(o){n.call(this),this._transitionable=new a.Transitionable(xt),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,c){if(c===void 0&&(c={}),!this._validate(a.validateLight,o,c))for(var _ in o){var w=o[_];a.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,c,_){return(!_||_.validate!==!1)&&a.emitValidationErrors(this,o.call(a.validateStyle,a.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},s}(a.Evented),Ve=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ve.prototype.getDash=function(n,s){var o=n.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(n,s)),this.dashEntry[o]},Ve.prototype.getDashRanges=function(n,s,o){var c=[],_=n.length%2==1?-n[n.length-1]*o:0,w=n[0]*o,S=!0;c.push({left:_,right:w,isDash:S,zeroLength:n[0]===0});for(var z=n[0],P=1;P<n.length;P++){var O=n[P];c.push({left:_=z*o,right:w=(z+=O)*o,isDash:S=!S,zeroLength:O===0})}return c},Ve.prototype.addRoundDash=function(n,s,o){for(var c=s/2,_=-o;_<=o;_++)for(var w=this.width*(this.nextRow+o+_),S=0,z=n[S],P=0;P<this.width;P++){P/z.right>1&&(z=n[++S]);var O=Math.abs(P-z.left),Z=Math.abs(P-z.right),K=Math.min(O,Z),W=void 0,ie=_/o*(c+1);if(z.isDash){var ee=c-Math.abs(ie);W=Math.sqrt(K*K+ee*ee)}else W=c-Math.sqrt(K*K+ie*ie);this.data[w+P]=Math.max(0,Math.min(255,W+128))}},Ve.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var o=n[s],c=n[s+1];o.zeroLength?n.splice(s,1):c&&c.isDash===o.isDash&&(c.left=o.left,n.splice(s,1))}var _=n[0],w=n[n.length-1];_.isDash===w.isDash&&(_.left=w.left-this.width,w.right=_.right+this.width);for(var S=this.width*this.nextRow,z=0,P=n[z],O=0;O<this.width;O++){O/P.right>1&&(P=n[++z]);var Z=Math.abs(O-P.left),K=Math.abs(O-P.right),W=Math.min(Z,K);this.data[S+O]=Math.max(0,Math.min(255,(P.isDash?W:-W)+128))}},Ve.prototype.addDash=function(n,s){var o=s?7:0,c=2*o+1;if(this.nextRow+c>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var _=0,w=0;w<n.length;w++)_+=n[w];if(_!==0){var S=this.width/_,z=this.getDashRanges(n,this.width,S);s?this.addRoundDash(z,S,o):this.addRegularDash(z)}var P={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:_};return this.nextRow+=c,this.dirty=!0,P},Ve.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var lt=function n(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var c=this.workerPool.acquire(this.id),_=0;_<c.length;_++){var w=new n.Actor(c[_],o,this.id);w.name="Worker "+_,this.actors.push(w)}};function Me(n,s,o){var c=function(_,w){if(_)return o(_);if(w){var S=a.pick(a.extend(w,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(S.vectorLayers=w.vector_layers,S.vectorLayerIds=S.vectorLayers.map(function(z){return z.id})),S.tiles=s.canonicalizeTileset(S,n.url),o(null,S)}};return n.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),a.ResourceType.Source),c):a.browser.frame(function(){return c(null,n)})}lt.prototype.broadcast=function(n,s,o){a.asyncAll(this.actors,function(c,_){c.send(n,s,_)},o=o||function(){})},lt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},lt.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},lt.Actor=a.Actor;var st=function(n,s,o){this.bounds=a.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=o||24};st.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},st.prototype.contains=function(n){var s=Math.pow(2,n.z),o=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*s),_=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*s),w=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=o&&n.x<_&&n.y>=c&&n.y<w};var ft=function(n){function s(o,c,_,w){if(n.call(this),this.id=o,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(c,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Me(this._options,this.map._requestManager,function(c,_){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):_&&(a.extend(o,_),_.bounds&&(o.tileBounds=new st(_.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(_.tiles,o.map._requestManager._customAccessToken),a.postMapLoadEvent(_.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var c=this;return this.setSourceProperty(function(){c._options.tiles=o}),this},s.prototype.setUrl=function(o){var c=this;return this.setSourceProperty(function(){c.url=o,c._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.loadTile=function(o,c){var _=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(_,a.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(z,P){return delete o.request,o.aborted?c(null):z&&z.status!==404?c(z):(P&&P.resourceTiming&&(o.resourceTiming=P.resourceTiming),this.map._refreshExpiredTiles&&P&&o.setExpiryData(P),o.loadVectorData(P,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",w,S.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",w,S.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Ut=function(n){function s(o,c,_,w){n.call(this),this.id=o,this.dispatcher=_,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},c),a.extend(this,a.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Me(this._options,this.map._requestManager,function(c,_){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):_&&(a.extend(o,_),_.bounds&&(o.tileBounds=new st(_.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(_.tiles),a.postMapLoadEvent(_.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,c){var _=this,w=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=a.getImage(this.map._requestManager.transformRequest(w,a.ResourceType.Tile),function(S,z){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(S)o.state="errored",c(S);else if(z){_.map._refreshExpiredTiles&&o.setExpiryData(z),delete z.cacheControl,delete z.expires;var P=_.map.painter.context,O=P.gl;o.texture=_.map.painter.getTileTexture(z.width),o.texture?o.texture.update(z,{useMipmap:!0}):(o.texture=new a.Texture(P,z,O.RGBA,{useMipmap:!0}),o.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),o.state="loaded",a.cacheEntryPossiblyAdded(_.dispatcher),c(null)}})},s.prototype.abortTile=function(o,c){o.request&&(o.request.cancel(),delete o.request),c()},s.prototype.unloadTile=function(o,c){o.texture&&this.map.painter.saveTileTexture(o.texture),c()},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Mt=function(n){function s(o,c,_,w){n.call(this,o,c,_,w),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,c){var _=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(S,z){S&&(o.state="errored",c(S)),z&&(o.dem=z,o.needsHillshadePrepare=!0,o.state="loaded",c(null))}o.request=a.getImage(this.map._requestManager.transformRequest(_,a.ResourceType.Tile),(function(S,z){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(S)o.state="errored",c(S);else if(z){this.map._refreshExpiredTiles&&o.setExpiryData(z),delete z.cacheControl,delete z.expires;var P=a.window.ImageBitmap&&z instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?z:a.browser.getImageData(z,1),O={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:P,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",O,w.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var c=o.canonical,_=Math.pow(2,c.z),w=(c.x-1+_)%_,S=c.x===0?o.wrap-1:o.wrap,z=(c.x+1+_)%_,P=c.x+1===_?o.wrap+1:o.wrap,O={};return O[new a.OverscaledTileID(o.overscaledZ,S,c.z,w,c.y).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,P,c.z,z,c.y).key]={backfilled:!1},c.y>0&&(O[new a.OverscaledTileID(o.overscaledZ,S,c.z,w,c.y-1).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,P,c.z,z,c.y-1).key]={backfilled:!1}),c.y+1<_&&(O[new a.OverscaledTileID(o.overscaledZ,S,c.z,w,c.y+1).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},O[new a.OverscaledTileID(o.overscaledZ,P,c.z,z,c.y+1).key]={backfilled:!1}),O},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(Ut),kt=function(n){function s(o,c,_,w){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=_.getActor(),this.setEventedParent(w),this._data=c.data,this._options=a.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var S=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*S,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*S,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.EXTENT,radius:(c.clusterRadius||50)*S,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)o.fire(new a.ErrorEvent(c));else{var _={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(_.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new a.Event("data",_))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var c=this;return this._data=o,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(_){if(_)c.fire(new a.ErrorEvent(_));else{var w={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(w.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new a.Event("data",w))}}),this},s.prototype.getClusterExpansionZoom=function(o,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},c),this},s.prototype.getClusterChildren=function(o,c){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},c),this},s.prototype.getClusterLeaves=function(o,c,_,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:c,offset:_},w),this},s.prototype._updateWorkerData=function(o){var c=this;this._loaded=!1;var _=a.extend({},this.workerOptions),w=this._data;typeof w=="string"?(_.request=this.map._requestManager.transformRequest(a.browser.resolveURL(w),a.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(w),this.actor.send(this.type+".loadData",_,function(S,z){c._removed||z&&z.abandoned||(c._loaded=!0,z&&z.resourceTiming&&z.resourceTiming[c.id]&&(c._resourceTiming=z.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:_.source},null),o(S))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,c){var _=this,w=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(w,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(S,z){return delete o.request,o.unloadVectorData(),o.aborted?c(null):S?c(S):(o.loadVectorData(z,_.map.painter,w==="reloadTile"),c(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Pe=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),rt=function(n){function s(o,c,_,w){n.call(this),this.id=o,this.dispatcher=_,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(o,c){var _=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(w,S){_._loaded=!0,w?_.fire(new a.ErrorEvent(w)):S&&(_.image=S,o&&(_.coordinates=o),c&&c(),_._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var c=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var c=this;this.coordinates=o;var _=o.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(S){for(var z=1/0,P=1/0,O=-1/0,Z=-1/0,K=0,W=S;K<W.length;K+=1){var ie=W[K];z=Math.min(z,ie.x),P=Math.min(P,ie.y),O=Math.max(O,ie.x),Z=Math.max(Z,ie.y)}var ee=Math.max(O-z,Z-P),ce=Math.max(0,Math.floor(-Math.log(ee)/Math.LN2)),J=Math.pow(2,ce);return new a.CanonicalTileID(ce,Math.floor((z+O)/2*J),Math.floor((P+Z)/2*J))}(_),this.minzoom=this.maxzoom=this.tileID.z;var w=_.map(function(S){return c.tileID.getTilePoint(S)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,c=o.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.loadTile=function(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(a.Evented),zi=function(n){function s(o,c,_,w){n.call(this,o,c,_,w),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var c=this.options;this.urls=[];for(var _=0,w=c.urls;_<w.length;_+=1)this.urls.push(this.map._requestManager.transformRequest(w[_],a.ResourceType.Source).url);a.getVideo(this.urls,function(S,z){o._loaded=!0,S?o.fire(new a.ErrorEvent(S)):z&&(o.video=z,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,c=o.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(rt),xr=function(n){function s(o,c,_,w){n.call(this,o,c,_,w),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(S){return!Array.isArray(S)||S.length!==2||S.some(function(z){return typeof z!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,_=c.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(c,this.canvas,_.RGBA,{premultiply:!0}),this.tiles){var S=this.tiles[w];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,c=[this.canvas.width,this.canvas.height];o<c.length;o+=1){var _=c[o];if(isNaN(_)||_<=0)return!0}return!1},s}(rt),qi={vector:ft,raster:Ut,"raster-dem":Mt,geojson:kt,video:zi,image:rt,canvas:xr};function Fi(n,s){var o=a.identity([]);return a.translate(o,o,[1,1,0]),a.scale(o,o,[.5*n.width,.5*n.height,1]),a.multiply(o,o,n.calculatePosMatrix(s.toUnwrapped()))}function li(n,s,o,c,_,w){var S=function(ce,J,le){if(ce)for(var de=0,_e=ce;de<_e.length;de+=1){var Ie=J[_e[de]];if(Ie&&Ie.source===le&&Ie.type==="fill-extrusion")return!0}else for(var Se in J){var Te=J[Se];if(Te.source===le&&Te.type==="fill-extrusion")return!0}return!1}(_&&_.layers,s,n.id),z=w.maxPitchScaleFactor(),P=n.tilesIn(c,z,S);P.sort(ur);for(var O=[],Z=0,K=P;Z<K.length;Z+=1){var W=K[Z];O.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(s,o,n._state,W.queryGeometry,W.cameraQueryGeometry,W.scale,_,w,z,Fi(n.transform,W.tileID))})}var ie=function(ce){for(var J={},le={},de=0,_e=ce;de<_e.length;de+=1){var Ie=_e[de],Se=Ie.queryResults,Te=Ie.wrappedTileID,Re=le[Te]=le[Te]||{};for(var We in Se)for(var Ke=Se[We],dt=Re[We]=Re[We]||{},zt=J[We]=J[We]||[],Ct=0,Pt=Ke;Ct<Pt.length;Ct+=1){var _i=Pt[Ct];dt[_i.featureIndex]||(dt[_i.featureIndex]=!0,zt.push(_i))}}return J}(O);for(var ee in ie)ie[ee].forEach(function(ce){var J=ce.feature,le=n.getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=le});return ie}function ur(n,s){var o=n.tileID,c=s.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}var qt=function(n,s){this.max=n,this.onRemove=s,this.reset()};qt.prototype.reset=function(){for(var n in this.data)for(var s=0,o=this.data[n];s<o.length;s+=1){var c=o[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},qt.prototype.add=function(n,s,o){var c=this,_=n.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);var w={value:s,timeout:void 0};if(o!==void 0&&(w.timeout=setTimeout(function(){c.remove(n,w)},o)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){var S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this},qt.prototype.has=function(n){return n.wrapped().key in this.data},qt.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},qt.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},qt.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},qt.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},qt.prototype.remove=function(n,s){if(!this.has(n))return this;var o=n.wrapped().key,c=s===void 0?0:this.data[o].indexOf(s),_=this.data[o][c];return this.data[o].splice(c,1),_.timeout&&clearTimeout(_.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(_.value),this.order.splice(this.order.indexOf(o),1),this},qt.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},qt.prototype.filter=function(n){var s=[];for(var o in this.data)for(var c=0,_=this.data[o];c<_.length;c+=1){var w=_[c];n(w.value)||s.push(w)}for(var S=0,z=s;S<z.length;S+=1){var P=z[S];this.remove(P.value.tileID,P)}};var fn=function(n,s,o){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=!!o,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};fn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},fn.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},fn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var dn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},mn=function(n,s,o,c){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var _=n.gl;this.buffer=_.createBuffer(),n.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};mn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},mn.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},mn.prototype.enableAttributes=function(n,s){for(var o=0;o<this.attributes.length;o++){var c=s.attributes[this.attributes[o].name];c!==void 0&&n.enableVertexAttribArray(c)}},mn.prototype.setVertexAttribPointers=function(n,s,o){for(var c=0;c<this.attributes.length;c++){var _=this.attributes[c],w=s.attributes[_.name];w!==void 0&&n.vertexAttribPointer(w,_.components,n[dn[_.type]],!1,this.itemSize,_.offset+this.itemSize*(o||0))}},mn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Zt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Zt.prototype.get=function(){return this.current},Zt.prototype.set=function(n){},Zt.prototype.getDefault=function(){return this.default},Zt.prototype.setDefault=function(){this.set(this.default)};var Ci=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Zt),Gi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(Zt),cr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(Zt),Wr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Zt),Ur=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(Zt),Tr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(Zt),pr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(Zt),hr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(Zt),gn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(Zt),Zi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Zt),fr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(Zt),dr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(Zt),wr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}},s}(Zt),Vr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Zt),an=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Zt),Xi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(Zt),Yn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}},s}(Zt),wn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(Zt),Ar=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(Zt),Jn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(Zt),Qn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(Zt),Oi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Zt),$n=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(Zt),Cn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Zt),Pr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(Zt),q=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(Zt),pt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(Zt),mr=function(n){function s(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(Zt),gr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(Zt),jr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(Zt),Sr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(Zt),$t=function(n){function s(o,c){n.call(this,o),this.context=o,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Zt),L=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}($t),N=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}($t),j=function(n,s,o,c){this.context=n,this.width=s,this.height=o;var _=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new L(n,_),c&&(this.depthAttachment=new N(n,_))};j.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}n.deleteFramebuffer(this.framebuffer)};var H=function(n,s,o){this.func=n,this.mask=s,this.range=o};H.ReadOnly=!1,H.ReadWrite=!0,H.disabled=new H(519,H.ReadOnly,[0,1]);var Y=function(n,s,o,c,_,w){this.test=n,this.ref=s,this.mask=o,this.fail=c,this.depthFail=_,this.pass=w};Y.disabled=new Y({func:519,mask:0},0,0,7680,7680,7680);var ue=function(n,s,o){this.blendFunction=n,this.blendColor=s,this.mask=o};ue.disabled=new ue(ue.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),ue.unblended=new ue(ue.Replace,a.Color.transparent,[!0,!0,!0,!0]),ue.alphaBlended=new ue([1,771],a.Color.transparent,[!0,!0,!0,!0]);var fe=function(n,s,o){this.enable=n,this.mode=s,this.frontFace=o};fe.disabled=new fe(!1,1029,2305),fe.backCCW=new fe(!0,1029,2305);var V=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ci(this),this.clearDepth=new Gi(this),this.clearStencil=new cr(this),this.colorMask=new Wr(this),this.depthMask=new Ur(this),this.stencilMask=new Tr(this),this.stencilFunc=new pr(this),this.stencilOp=new hr(this),this.stencilTest=new gn(this),this.depthRange=new Zi(this),this.depthTest=new fr(this),this.depthFunc=new dr(this),this.blend=new wr(this),this.blendFunc=new Vr(this),this.blendColor=new an(this),this.blendEquation=new Xi(this),this.cullFace=new Yn(this),this.cullFaceSide=new wn(this),this.frontFace=new Ar(this),this.program=new Jn(this),this.activeTexture=new Qn(this),this.viewport=new Oi(this),this.bindFramebuffer=new $n(this),this.bindRenderbuffer=new Cn(this),this.bindTexture=new Pr(this),this.bindVertexBuffer=new q(this),this.bindElementBuffer=new pt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new mr(this),this.pixelStoreUnpack=new gr(this),this.pixelStoreUnpackPremultiplyAlpha=new jr(this),this.pixelStoreUnpackFlipY=new Sr(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};V.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},V.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},V.prototype.createIndexBuffer=function(n,s){return new fn(this,n,s)},V.prototype.createVertexBuffer=function(n,s,o){return new mn(this,n,s,o)},V.prototype.createRenderbuffer=function(n,s,o){var c=this.gl,_=c.createRenderbuffer();return this.bindRenderbuffer.set(_),c.renderbufferStorage(c.RENDERBUFFER,n,s,o),this.bindRenderbuffer.set(null),_},V.prototype.createFramebuffer=function(n,s,o){return new j(this,n,s,o)},V.prototype.clear=function(n){var s=n.color,o=n.depth,c=this.gl,_=0;s&&(_|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(_|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c.clear(_)},V.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},V.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},V.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},V.prototype.setColorMode=function(n){a.deepEqual(n.blendFunction,ue.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},V.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var re=function(n){function s(o,c,_){var w=this;n.call(this),this.id=o,this.dispatcher=_,this.on("data",function(S){S.dataType==="source"&&S.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(S,z,P,O){var Z=new qi[z.type](S,z,P,O);if(Z.id!==S)throw new Error("Expected Source id to be "+S+" instead of "+Z.id);return a.bindAll(["load","abort","unload","serialize","prepare"],Z),Z}(o,c,_,this),this._tiles={},this._cache=new qt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,c){return this._source.loadTile(o,c)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var _=this._tiles[c];_.upload(o),_.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return a.values(this._tiles).map(function(o){return o.tileID}).sort(ye).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var c=this,_=[];for(var w in this._tiles)this._isIdRenderable(w,o)&&_.push(this._tiles[w]);return o?_.sort(function(S,z){var P=S.tileID,O=z.tileID,Z=new a.Point(P.canonical.x,P.canonical.y)._rotate(c.transform.angle),K=new a.Point(O.canonical.x,O.canonical.y)._rotate(c.transform.angle);return P.overscaledZ-O.overscaledZ||K.y-Z.y||K.x-Z.x}).map(function(S){return S.tileID.key}):_.map(function(S){return S.tileID}).sort(ye).map(function(S){return S.key})},s.prototype.hasRenderableParent=function(o){var c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,c){var _=this._tiles[o];_&&(_.state!=="loading"&&(_.state=c),this._loadTile(_,this._tileLoaded.bind(this,_,o,c)))},s.prototype._tileLoaded=function(o,c,_,w){if(w)return o.state="errored",void(w.status!==404?this._source.fire(new a.ErrorEvent(w,{tile:o})):this.update(this.transform));o.timeAdded=a.browser.now(),_==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var c=this.getRenderableIds(),_=0;_<c.length;_++){var w=c[_];if(o.neighboringTiles&&o.neighboringTiles[w]){var S=this.getTileByID(w);z(o,S),z(S,o)}}function z(P,O){P.needsHillshadePrepare=!0;var Z=O.tileID.canonical.x-P.tileID.canonical.x,K=O.tileID.canonical.y-P.tileID.canonical.y,W=Math.pow(2,P.tileID.canonical.z),ie=O.tileID.key;Z===0&&K===0||Math.abs(K)>1||(Math.abs(Z)>1&&(Math.abs(Z+W)===1?Z+=W:Math.abs(Z-W)===1&&(Z-=W)),O.dem&&P.dem&&(P.dem.backfillBorder(O.dem,Z,K),P.neighboringTiles&&P.neighboringTiles[ie]&&(P.neighboringTiles[ie].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,c,_,w){for(var S in this._tiles){var z=this._tiles[S];if(!(w[S]||!z.hasData()||z.tileID.overscaledZ<=c||z.tileID.overscaledZ>_)){for(var P=z.tileID;z&&z.tileID.overscaledZ>c+1;){var O=z.tileID.scaledTo(z.tileID.overscaledZ-1);(z=this._tiles[O.key])&&z.hasData()&&(P=O)}for(var Z=P;Z.overscaledZ>c;)if(o[(Z=Z.scaledTo(Z.overscaledZ-1)).key]){w[P.key]=P;break}}}},s.prototype.findLoadedParent=function(o,c){if(o.key in this._loadedParentTiles){var _=this._loadedParentTiles[o.key];return _&&_.tileID.overscaledZ>=c?_:null}for(var w=o.overscaledZ-1;w>=c;w--){var S=o.scaledTo(w),z=this._getLoadedTile(S);if(z)return z}},s.prototype._getLoadedTile=function(o){var c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var c=Math.ceil(o.width/this._source.tileSize)+1,_=Math.ceil(o.height/this._source.tileSize)+1,w=Math.floor(c*_*5),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(S)},s.prototype.handleWrapJump=function(o){var c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){var _={};for(var w in this._tiles){var S=this._tiles[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+c),_[S.tileID.key]=S}for(var z in this._tiles=_,this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(var P in this._tiles)this._setTileReloadTimer(P,this._tiles[P])}},s.prototype.update=function(o){var c=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var _;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?_=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Re){return new a.OverscaledTileID(Re.canonical.z,Re.wrap,Re.canonical.z,Re.canonical.x,Re.canonical.y)}):(_=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(_=_.filter(function(Re){return c._source.hasTile(Re)}))):_=[];var w=o.coveringZoomLevel(this._source),S=Math.max(w-s.maxOverzooming,this._source.minzoom),z=Math.max(w+s.maxUnderzooming,this._source.minzoom),P=this._updateRetainedTiles(_,w);if(Le(this._source.type)){for(var O={},Z={},K=0,W=Object.keys(P);K<W.length;K+=1){var ie=W[K],ee=P[ie],ce=this._tiles[ie];if(ce&&!(ce.fadeEndTime&&ce.fadeEndTime<=a.browser.now())){var J=this.findLoadedParent(ee,S);J&&(this._addTile(J.tileID),O[J.tileID.key]=J.tileID),Z[ie]=ee}}for(var le in this._retainLoadedChildren(Z,w,z,P),O)P[le]||(this._coveredTiles[le]=!0,P[le]=O[le])}for(var de in P)this._tiles[de].clearFadeHold();for(var _e=0,Ie=a.keysDifference(this._tiles,P);_e<Ie.length;_e+=1){var Se=Ie[_e],Te=this._tiles[Se];Te.hasSymbolBuckets&&!Te.holdingForFade()?Te.setHoldDuration(this.map._fadeDuration):Te.hasSymbolBuckets&&!Te.symbolFadeFinished()||this._removeTile(Se)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,c){for(var _={},w={},S=Math.max(c-s.maxOverzooming,this._source.minzoom),z=Math.max(c+s.maxUnderzooming,this._source.minzoom),P={},O=0,Z=o;O<Z.length;O+=1){var K=Z[O],W=this._addTile(K);_[K.key]=K,W.hasData()||c<this._source.maxzoom&&(P[K.key]=K)}this._retainLoadedChildren(P,c,z,_);for(var ie=0,ee=o;ie<ee.length;ie+=1){var ce=ee[ie],J=this._tiles[ce.key];if(!J.hasData()){if(c+1>this._source.maxzoom){var le=ce.children(this._source.maxzoom)[0],de=this.getTile(le);if(de&&de.hasData()){_[le.key]=le;continue}}else{var _e=ce.children(this._source.maxzoom);if(_[_e[0].key]&&_[_e[1].key]&&_[_e[2].key]&&_[_e[3].key])continue}for(var Ie=J.wasRequested(),Se=ce.overscaledZ-1;Se>=S;--Se){var Te=ce.scaledTo(Se);if(w[Te.key]||(w[Te.key]=!0,!(J=this.getTile(Te))&&Ie&&(J=this._addTile(Te)),J&&(_[Te.key]=Te,Ie=J.wasRequested(),J.hasData())))break}}}return _},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var c=[],_=void 0,w=this._tiles[o].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){_=this._loadedParentTiles[w.key];break}c.push(w.key);var S=w.scaledTo(w.overscaledZ-1);if(_=this._getLoadedTile(S))break;w=S}for(var z=0,P=c;z<P.length;z+=1)this._loadedParentTiles[P[z]]=_}},s.prototype._addTile=function(o){var c=this._tiles[o.key];if(c)return c;(c=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));var _=!!c;return _||(c=new a.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))),c?(c.uses++,this._tiles[o.key]=c,_||this._source.fire(new a.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(o,c){var _=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var w=c.getExpiryTimeout();w&&(this._timers[o]=setTimeout(function(){_._reloadTile(o,"expired"),delete _._timers[o]},w))},s.prototype._removeTile=function(o){var c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,c,_){var w=this,S=[],z=this.transform;if(!z)return S;for(var P=_?z.getCameraQueryGeometry(o):o,O=o.map(function(Se){return z.pointCoordinate(Se)}),Z=P.map(function(Se){return z.pointCoordinate(Se)}),K=this.getIds(),W=1/0,ie=1/0,ee=-1/0,ce=-1/0,J=0,le=Z;J<le.length;J+=1){var de=le[J];W=Math.min(W,de.x),ie=Math.min(ie,de.y),ee=Math.max(ee,de.x),ce=Math.max(ce,de.y)}for(var _e=function(Se){var Te=w._tiles[K[Se]];if(!Te.holdingForFade()){var Re=Te.tileID,We=Math.pow(2,z.zoom-Te.tileID.overscaledZ),Ke=c*Te.queryPadding*a.EXTENT/Te.tileSize/We,dt=[Re.getTilePoint(new a.MercatorCoordinate(W,ie)),Re.getTilePoint(new a.MercatorCoordinate(ee,ce))];if(dt[0].x-Ke<a.EXTENT&&dt[0].y-Ke<a.EXTENT&&dt[1].x+Ke>=0&&dt[1].y+Ke>=0){var zt=O.map(function(Pt){return Re.getTilePoint(Pt)}),Ct=Z.map(function(Pt){return Re.getTilePoint(Pt)});S.push({tile:Te,tileID:Re,queryGeometry:zt,cameraQueryGeometry:Ct,scale:We})}}},Ie=0;Ie<K.length;Ie++)_e(Ie);return S},s.prototype.getVisibleCoordinates=function(o){for(var c=this,_=this.getRenderableIds(o).map(function(P){return c._tiles[P].tileID}),w=0,S=_;w<S.length;w+=1){var z=S[w];z.posMatrix=this.transform.calculatePosMatrix(z.toUnwrapped())}return _},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Le(this._source.type))for(var o in this._tiles){var c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=a.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,c,_){this._state.updateState(o=o||"_geojsonTileLayer",c,_)},s.prototype.removeFeatureState=function(o,c,_){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,_)},s.prototype.getFeatureState=function(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(o,c,_){var w=this._tiles[o];w&&w.setDependencies(c,_)},s.prototype.reloadTilesForDependencies=function(o,c){for(var _ in this._tiles)this._tiles[_].hasDependency(o,c)&&this._reloadTile(_,"reloading");this._cache.filter(function(w){return!w.hasDependency(o,c)})},s}(a.Evented);function ye(n,s){var o=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-o||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Le(n){return n==="raster"||n==="image"||n==="video"}function Fe(){return new a.window.Worker(ol.workerUrl)}re.maxOverzooming=10,re.maxUnderzooming=3;var ke="mapboxgl_preloaded_worker_pool",Be=function(){this.active={}};Be.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<Be.workerCount;)this.workers.push(new Fe);return this.active[n]=!0,this.workers.slice()},Be.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Be.prototype.isPreloaded=function(){return!!this.active[ke]},Be.prototype.numActive=function(){return Object.keys(this.active).length};var gt,ut=Math.floor(a.browser.hardwareConcurrency/2);function ze(){return gt||(gt=new Be),gt}function nt(n,s){var o={};for(var c in n)c!=="ref"&&(o[c]=n[c]);return a.refProperties.forEach(function(_){_ in s&&(o[_]=s[_])}),o}function Ye(n){n=n.slice();for(var s=Object.create(null),o=0;o<n.length;o++)s[n[o].id]=n[o];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=nt(n[c],s[n[c].ref]));return n}Be.workerCount=Math.max(Math.min(ut,6),1);var et={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Gt(n,s,o){o.push({command:et.addSource,args:[n,s[n]]})}function at(n,s,o){s.push({command:et.removeSource,args:[n]}),o[n]=!0}function ei(n,s,o,c){at(n,o,c),Gt(n,s,o)}function wi(n,s,o){var c;for(c in n[o])if(n[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;for(c in s[o])if(s[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;return!0}function Wt(n,s,o,c,_,w){var S;for(S in s=s||{},n=n||{})n.hasOwnProperty(S)&&(a.deepEqual(n[S],s[S])||o.push({command:w,args:[c,S,s[S],_]}));for(S in s)s.hasOwnProperty(S)&&!n.hasOwnProperty(S)&&(a.deepEqual(n[S],s[S])||o.push({command:w,args:[c,S,s[S],_]}))}function ui(n){return n.id}function ti(n,s){return n[s.id]=s,n}var Er=function(n,s){this.reset(n,s)};Er.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Er.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=a.clamp(n,0,1);for(var s=1,o=this._distances[s],c=n*this.paddedLength+this.padding;o<c&&s<this._distances.length;)o=this._distances[++s];var _=s-1,w=this._distances[_],S=o-w,z=S>0?(c-w)/S:0;return this.points[_].mult(1-z).add(this.points[s].mult(z))};var gi=function(n,s,o){var c=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(s/o);for(var w=0;w<this.xCellCount*this.yCellCount;w++)c.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Ni(n,s,o,c,_){var w=a.create();return s?(a.scale(w,w,[1/_,1/_,1]),o||a.rotateZ(w,w,c.angle)):a.multiply(w,c.labelPlaneMatrix,n),w}function bi(n,s,o,c,_){if(s){var w=a.clone(n);return a.scale(w,w,[_,_,1]),o||a.rotateZ(w,w,-c.angle),w}return c.glCoordMatrix}function Jt(n,s){var o=[n.x,n.y,0,1];ar(o,o,s);var c=o[3];return{point:new a.Point(o[0]/c,o[1]/c),signedDistanceFromCamera:c}}function ci(n,s){return .5+n/s*.5}function Cr(n,s){var o=n[0]/n[3],c=n[1]/n[3];return o>=-s[0]&&o<=s[0]&&c>=-s[1]&&c<=s[1]}function fa(n,s,o,c,_,w,S,z){var P=c?n.textSizeData:n.iconSizeData,O=a.evaluateSizeForZoom(P,o.transform.zoom),Z=[256/o.width*2+1,256/o.height*2+1],K=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;K.clear();for(var W=n.lineVertexArray,ie=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,ee=o.transform.width/o.transform.height,ce=!1,J=0;J<ie.length;J++){var le=ie.get(J);if(le.hidden||le.writingMode===a.WritingMode.vertical&&!ce)Mr(le.numGlyphs,K);else{ce=!1;var de=[le.anchorX,le.anchorY,0,1];if(a.transformMat4(de,de,s),Cr(de,Z)){var _e=ci(o.transform.cameraToCenterDistance,de[3]),Ie=a.evaluateSizeForFeature(P,O,le),Se=S?Ie/_e:Ie*_e,Te=new a.Point(le.anchorX,le.anchorY),Re=Jt(Te,_).point,We={},Ke=Va(le,Se,!1,z,s,_,w,n.glyphOffsetArray,W,K,Re,Te,We,ee);ce=Ke.useVertical,(Ke.notEnoughRoom||ce||Ke.needsFlipping&&Va(le,Se,!0,z,s,_,w,n.glyphOffsetArray,W,K,Re,Te,We,ee).notEnoughRoom)&&Mr(le.numGlyphs,K)}else Mr(le.numGlyphs,K)}}c?n.text.dynamicLayoutVertexBuffer.updateData(K):n.icon.dynamicLayoutVertexBuffer.updateData(K)}function nr(n,s,o,c,_,w,S,z,P,O,Z){var K=z.glyphStartIndex+z.numGlyphs,W=z.lineStartIndex,ie=z.lineStartIndex+z.lineLength,ee=s.getoffsetX(z.glyphStartIndex),ce=s.getoffsetX(K-1),J=Ki(n*ee,o,c,_,w,S,z.segment,W,ie,P,O,Z);if(!J)return null;var le=Ki(n*ce,o,c,_,w,S,z.segment,W,ie,P,O,Z);return le?{first:J,last:le}:null}function qr(n,s,o,c){return n===a.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*c?{useVertical:!0}:(n===a.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function Va(n,s,o,c,_,w,S,z,P,O,Z,K,W,ie){var ee,ce=s/24,J=n.lineOffsetX*ce,le=n.lineOffsetY*ce;if(n.numGlyphs>1){var de=n.glyphStartIndex+n.numGlyphs,_e=n.lineStartIndex,Ie=n.lineStartIndex+n.lineLength,Se=nr(ce,z,J,le,o,Z,K,n,P,w,W);if(!Se)return{notEnoughRoom:!0};var Te=Jt(Se.first.point,S).point,Re=Jt(Se.last.point,S).point;if(c&&!o){var We=qr(n.writingMode,Te,Re,ie);if(We)return We}ee=[Se.first];for(var Ke=n.glyphStartIndex+1;Ke<de-1;Ke++)ee.push(Ki(ce*z.getoffsetX(Ke),J,le,o,Z,K,n.segment,_e,Ie,P,w,W));ee.push(Se.last)}else{if(c&&!o){var dt=Jt(K,_).point,zt=n.lineStartIndex+n.segment+1,Ct=new a.Point(P.getx(zt),P.gety(zt)),Pt=Jt(Ct,_),_i=Pt.signedDistanceFromCamera>0?Pt.point:ba(K,Ct,dt,1,_),mt=qr(n.writingMode,dt,_i,ie);if(mt)return mt}var Nt=Ki(ce*z.getoffsetX(n.glyphStartIndex),J,le,o,Z,K,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,P,w,W);if(!Nt)return{notEnoughRoom:!0};ee=[Nt]}for(var Yt=0,Ft=ee;Yt<Ft.length;Yt+=1){var Bt=Ft[Yt];a.addDynamicAttributes(O,Bt.point,Bt.angle)}return{}}function ba(n,s,o,c,_){var w=Jt(n.add(n.sub(s)._unit()),_).point,S=o.sub(w);return o.add(S._mult(c/S.mag()))}function Ki(n,s,o,c,_,w,S,z,P,O,Z,K){var W=c?n-s:n+s,ie=W>0?1:-1,ee=0;c&&(ie*=-1,ee=Math.PI),ie<0&&(ee+=Math.PI);for(var ce=ie>0?z+S:z+S+1,J=_,le=_,de=0,_e=0,Ie=Math.abs(W),Se=[];de+_e<=Ie;){if((ce+=ie)<z||ce>=P)return null;if(le=J,Se.push(J),(J=K[ce])===void 0){var Te=new a.Point(O.getx(ce),O.gety(ce)),Re=Jt(Te,Z);if(Re.signedDistanceFromCamera>0)J=K[ce]=Re.point;else{var We=ce-ie;J=ba(de===0?w:new a.Point(O.getx(We),O.gety(We)),Te,le,Ie-de+1,Z)}}de+=_e,_e=le.dist(J)}var Ke=(Ie-de)/_e,dt=J.sub(le),zt=dt.mult(Ke)._add(le);zt._add(dt._unit()._perp()._mult(o*ie));var Ct=ee+Math.atan2(J.y-le.y,J.x-le.x);return Se.push(zt),{point:zt,angle:Ct,path:Se}}gi.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},gi.prototype.insert=function(n,s,o,c,_){this._forEachCell(s,o,c,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(_)},gi.prototype.insertCircle=function(n,s,o,c){this._forEachCell(s-c,o-c,s+c,o+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(o),this.circles.push(c)},gi.prototype._insertBoxCell=function(n,s,o,c,_,w){this.boxCells[_].push(w)},gi.prototype._insertCircleCell=function(n,s,o,c,_,w){this.circleCells[_].push(w)},gi.prototype._query=function(n,s,o,c,_,w){if(o<0||n>this.width||c<0||s>this.height)return!_&&[];var S=[];if(n<=0&&s<=0&&this.width<=o&&this.height<=c){if(_)return!0;for(var z=0;z<this.boxKeys.length;z++)S.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(var P=0;P<this.circleKeys.length;P++){var O=this.circles[3*P],Z=this.circles[3*P+1],K=this.circles[3*P+2];S.push({key:this.circleKeys[P],x1:O-K,y1:Z-K,x2:O+K,y2:Z+K})}return w?S.filter(w):S}return this._forEachCell(n,s,o,c,this._queryCell,S,{hitTest:_,seenUids:{box:{},circle:{}}},w),_?S.length>0:S},gi.prototype._queryCircle=function(n,s,o,c,_){var w=n-o,S=n+o,z=s-o,P=s+o;if(S<0||w>this.width||P<0||z>this.height)return!c&&[];var O=[];return this._forEachCell(w,z,S,P,this._queryCellCircle,O,{hitTest:c,circle:{x:n,y:s,radius:o},seenUids:{box:{},circle:{}}},_),c?O.length>0:O},gi.prototype.query=function(n,s,o,c,_){return this._query(n,s,o,c,!1,_)},gi.prototype.hitTest=function(n,s,o,c,_){return this._query(n,s,o,c,!0,_)},gi.prototype.hitTestCircle=function(n,s,o,c){return this._queryCircle(n,s,o,!0,c)},gi.prototype._queryCell=function(n,s,o,c,_,w,S,z){var P=S.seenUids,O=this.boxCells[_];if(O!==null)for(var Z=this.bboxes,K=0,W=O;K<W.length;K+=1){var ie=W[K];if(!P.box[ie]){P.box[ie]=!0;var ee=4*ie;if(n<=Z[ee+2]&&s<=Z[ee+3]&&o>=Z[ee+0]&&c>=Z[ee+1]&&(!z||z(this.boxKeys[ie]))){if(S.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[ie],x1:Z[ee],y1:Z[ee+1],x2:Z[ee+2],y2:Z[ee+3]})}}}var ce=this.circleCells[_];if(ce!==null)for(var J=this.circles,le=0,de=ce;le<de.length;le+=1){var _e=de[le];if(!P.circle[_e]){P.circle[_e]=!0;var Ie=3*_e;if(this._circleAndRectCollide(J[Ie],J[Ie+1],J[Ie+2],n,s,o,c)&&(!z||z(this.circleKeys[_e]))){if(S.hitTest)return w.push(!0),!0;var Se=J[Ie],Te=J[Ie+1],Re=J[Ie+2];w.push({key:this.circleKeys[_e],x1:Se-Re,y1:Te-Re,x2:Se+Re,y2:Te+Re})}}}},gi.prototype._queryCellCircle=function(n,s,o,c,_,w,S,z){var P=S.circle,O=S.seenUids,Z=this.boxCells[_];if(Z!==null)for(var K=this.bboxes,W=0,ie=Z;W<ie.length;W+=1){var ee=ie[W];if(!O.box[ee]){O.box[ee]=!0;var ce=4*ee;if(this._circleAndRectCollide(P.x,P.y,P.radius,K[ce+0],K[ce+1],K[ce+2],K[ce+3])&&(!z||z(this.boxKeys[ee])))return w.push(!0),!0}}var J=this.circleCells[_];if(J!==null)for(var le=this.circles,de=0,_e=J;de<_e.length;de+=1){var Ie=_e[de];if(!O.circle[Ie]){O.circle[Ie]=!0;var Se=3*Ie;if(this._circlesCollide(le[Se],le[Se+1],le[Se+2],P.x,P.y,P.radius)&&(!z||z(this.circleKeys[Ie])))return w.push(!0),!0}}},gi.prototype._forEachCell=function(n,s,o,c,_,w,S,z){for(var P=this._convertToXCellCoord(n),O=this._convertToYCellCoord(s),Z=this._convertToXCellCoord(o),K=this._convertToYCellCoord(c),W=P;W<=Z;W++)for(var ie=O;ie<=K;ie++)if(_.call(this,n,s,o,c,this.xCellCount*ie+W,w,S,z))return},gi.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},gi.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},gi.prototype._circlesCollide=function(n,s,o,c,_,w){var S=c-n,z=_-s,P=o+w;return P*P>S*S+z*z},gi.prototype._circleAndRectCollide=function(n,s,o,c,_,w,S){var z=(w-c)/2,P=Math.abs(n-(c+z));if(P>z+o)return!1;var O=(S-_)/2,Z=Math.abs(s-(_+O));if(Z>O+o)return!1;if(P<=z||Z<=O)return!0;var K=P-z,W=Z-O;return K*K+W*W<=o*o};var xa=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Mr(n,s){for(var o=0;o<n;o++){var c=s.length;s.resize(c+4),s.float32.set(xa,3*c)}}function ar(n,s,o){var c=s[0],_=s[1];return n[0]=o[0]*c+o[4]*_+o[12],n[1]=o[1]*c+o[5]*_+o[13],n[3]=o[3]*c+o[7]*_+o[15],n}var yn=function(n,s,o){s===void 0&&(s=new gi(n.width+200,n.height+200,25)),o===void 0&&(o=new gi(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function Di(n,s,o){return s*(a.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}yn.prototype.placeCollisionBox=function(n,s,o,c,_){var w=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),S=o*w.perspectiveRatio,z=n.x1*S+w.point.x,P=n.y1*S+w.point.y,O=n.x2*S+w.point.x,Z=n.y2*S+w.point.y;return!this.isInsideGrid(z,P,O,Z)||!s&&this.grid.hitTest(z,P,O,Z,_)?{box:[],offscreen:!1}:{box:[z,P,O,Z],offscreen:this.isOffscreen(z,P,O,Z)}},yn.prototype.placeCollisionCircles=function(n,s,o,c,_,w,S,z,P,O,Z,K,W){var ie=[],ee=new a.Point(s.anchorX,s.anchorY),ce=Jt(ee,w),J=ci(this.transform.cameraToCenterDistance,ce.signedDistanceFromCamera),le=(O?_/J:_*J)/a.ONE_EM,de=Jt(ee,S).point,_e=nr(le,c,s.lineOffsetX*le,s.lineOffsetY*le,!1,de,ee,s,o,S,{}),Ie=!1,Se=!1,Te=!0;if(_e){for(var Re=.5*K*J+W,We=new a.Point(-100,-100),Ke=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),dt=new Er,zt=_e.first,Ct=_e.last,Pt=[],_i=zt.path.length-1;_i>=1;_i--)Pt.push(zt.path[_i]);for(var mt=1;mt<Ct.path.length;mt++)Pt.push(Ct.path[mt]);var Nt=2.5*Re;if(z){var Yt=Pt.map(function(la){return Jt(la,z)});Pt=Yt.some(function(la){return la.signedDistanceFromCamera<=0})?[]:Yt.map(function(la){return la.point})}var Ft=[];if(Pt.length>0){for(var Bt=Pt[0].clone(),Xt=Pt[0].clone(),Rt=1;Rt<Pt.length;Rt++)Bt.x=Math.min(Bt.x,Pt[Rt].x),Bt.y=Math.min(Bt.y,Pt[Rt].y),Xt.x=Math.max(Xt.x,Pt[Rt].x),Xt.y=Math.max(Xt.y,Pt[Rt].y);Ft=Bt.x>=We.x&&Xt.x<=Ke.x&&Bt.y>=We.y&&Xt.y<=Ke.y?[Pt]:Xt.x<We.x||Bt.x>Ke.x||Xt.y<We.y||Bt.y>Ke.y?[]:a.clipLine([Pt],We.x,We.y,Ke.x,Ke.y)}for(var Dt=0,Gr=Ft;Dt<Gr.length;Dt+=1){var or;dt.reset(Gr[Dt],.25*Re),or=dt.length<=.5*Re?1:Math.ceil(dt.paddedLength/Nt)+1;for(var vn=0;vn<or;vn++){var $r=vn/Math.max(or-1,1),ir=dt.lerp($r),yr=ir.x+100,Kn=ir.y+100;ie.push(yr,Kn,Re,0);var In=yr-Re,eo=Kn-Re,Mn=yr+Re,va=Kn+Re;if(Te=Te&&this.isOffscreen(In,eo,Mn,va),Se=Se||this.isInsideGrid(In,eo,Mn,va),!n&&this.grid.hitTestCircle(yr,Kn,Re,Z)&&(Ie=!0,!P))return{circles:[],offscreen:!1,collisionDetected:Ie}}}}return{circles:!P&&Ie||!Se?[]:ie,offscreen:Te,collisionDetected:Ie}},yn.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,c=1/0,_=-1/0,w=-1/0,S=0,z=n;S<z.length;S+=1){var P=z[S],O=new a.Point(P.x+100,P.y+100);o=Math.min(o,O.x),c=Math.min(c,O.y),_=Math.max(_,O.x),w=Math.max(w,O.y),s.push(O)}for(var Z={},K={},W=0,ie=this.grid.query(o,c,_,w).concat(this.ignoredGrid.query(o,c,_,w));W<ie.length;W+=1){var ee=ie[W],ce=ee.key;if(Z[ce.bucketInstanceId]===void 0&&(Z[ce.bucketInstanceId]={}),!Z[ce.bucketInstanceId][ce.featureIndex]){var J=[new a.Point(ee.x1,ee.y1),new a.Point(ee.x2,ee.y1),new a.Point(ee.x2,ee.y2),new a.Point(ee.x1,ee.y2)];a.polygonIntersectsPolygon(s,J)&&(Z[ce.bucketInstanceId][ce.featureIndex]=!0,K[ce.bucketInstanceId]===void 0&&(K[ce.bucketInstanceId]=[]),K[ce.bucketInstanceId].push(ce.featureIndex))}}return K},yn.prototype.insertCollisionBox=function(n,s,o,c,_){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:c,collisionGroupID:_},n[0],n[1],n[2],n[3])},yn.prototype.insertCollisionCircles=function(n,s,o,c,_){for(var w=s?this.ignoredGrid:this.grid,S={bucketInstanceId:o,featureIndex:c,collisionGroupID:_},z=0;z<n.length;z+=4)w.insertCircle(S,n[z],n[z+1],n[z+2])},yn.prototype.projectAndGetPerspectiveRatio=function(n,s,o){var c=[s,o,0,1];return ar(c,c,n),{point:new a.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},yn.prototype.isOffscreen=function(n,s,o,c){return o<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},yn.prototype.isInsideGrid=function(n,s,o,c){return o>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},yn.prototype.getViewportMatrix=function(){var n=a.identity([]);return a.translate(n,n,[-100,-100,0]),n};var On=function(n,s,o,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&o?1:0,this.placed=o};On.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Sn=function(n,s,o,c,_){this.text=new On(n?n.text:null,s,o,_),this.icon=new On(n?n.icon:null,s,c,_)};Sn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var os=function(n,s,o){this.text=n,this.icon=s,this.skipFade=o},Dr=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},wa=function(n,s,o,c,_){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=c,this.tileID=_},Xr=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Lr(n,s,o,c,_){var w=a.getAnchorAlignment(n),S=-(w.horizontalAlign-.5)*s,z=-(w.verticalAlign-.5)*o,P=a.evaluateVariableOffset(n,c);return new a.Point(S+P[0]*_,z+P[1]*_)}function ea(n,s,o,c,_,w){var S=n.x1,z=n.x2,P=n.y1,O=n.y2,Z=n.anchorPointX,K=n.anchorPointY,W=new a.Point(s,o);return c&&W._rotate(_?w:-w),{x1:S+W.x,y1:P+W.y,x2:z+W.x,y2:O+W.y,anchorPointX:Z,anchorPointY:K}}Xr.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[n]};var Yr=function(n,s,o,c){this.transform=n.clone(),this.collisionIndex=new yn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Xr(o),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function Sa(n,s,o,c,_){n.emplaceBack(s?1:0,o?1:0,c||0,_||0),n.emplaceBack(s?1:0,o?1:0,c||0,_||0),n.emplaceBack(s?1:0,o?1:0,c||0,_||0),n.emplaceBack(s?1:0,o?1:0,c||0,_||0)}Yr.prototype.getBucketParts=function(n,s,o,c){var _=o.getBucket(s),w=o.latestFeatureIndex;if(_&&w&&s.id===_.layerIds[0]){var S=o.collisionBoxArray,z=_.layers[0].layout,P=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),O=o.tileSize/a.EXTENT,Z=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),K=z.get("text-pitch-alignment")==="map",W=z.get("text-rotation-alignment")==="map",ie=Di(o,1,this.transform.zoom),ee=Ni(Z,K,W,this.transform,ie),ce=null;if(K){var J=bi(Z,K,W,this.transform,ie);ce=a.multiply([],this.transform.labelPlaneMatrix,J)}this.retainedQueryData[_.bucketInstanceId]=new wa(_.bucketInstanceId,w,_.sourceLayerIndex,_.index,o.tileID);var le={bucket:_,layout:z,posMatrix:Z,textLabelPlaneMatrix:ee,labelToScreenMatrix:ce,scale:P,textPixelRatio:O,holdingForFade:o.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(c)for(var de=0,_e=_.sortKeyRanges;de<_e.length;de+=1){var Ie=_e[de];n.push({sortKey:Ie.sortKey,symbolInstanceStart:Ie.symbolInstanceStart,symbolInstanceEnd:Ie.symbolInstanceEnd,parameters:le})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:le})}},Yr.prototype.attemptAnchorPlacement=function(n,s,o,c,_,w,S,z,P,O,Z,K,W,ie,ee){var ce,J=[K.textOffset0,K.textOffset1],le=Lr(n,o,c,J,_),de=this.collisionIndex.placeCollisionBox(ea(s,le.x,le.y,w,S,this.transform.angle),Z,z,P,O.predicate);if(!ee||this.collisionIndex.placeCollisionBox(ea(ee,le.x,le.y,w,S,this.transform.angle),Z,z,P,O.predicate).box.length!==0)return de.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(ce=this.prevPlacement.variableOffsets[K.crossTileID].anchor),this.variableOffsets[K.crossTileID]={textOffset:J,width:o,height:c,anchor:n,textBoxScale:_,prevAnchor:ce},this.markUsedJustification(W,n,K,ie),W.allowVerticalPlacement&&(this.markUsedOrientation(W,ie,K),this.placedOrientations[K.crossTileID]=ie),{shift:le,placedGlyphBoxes:de}):void 0},Yr.prototype.placeLayerBucketPart=function(n,s,o){var c=this,_=n.parameters,w=_.bucket,S=_.layout,z=_.posMatrix,P=_.textLabelPlaneMatrix,O=_.labelToScreenMatrix,Z=_.textPixelRatio,K=_.holdingForFade,W=_.collisionBoxArray,ie=_.partiallyEvaluatedTextSize,ee=_.collisionGroup,ce=S.get("text-optional"),J=S.get("icon-optional"),le=S.get("text-allow-overlap"),de=S.get("icon-allow-overlap"),_e=S.get("text-rotation-alignment")==="map",Ie=S.get("text-pitch-alignment")==="map",Se=S.get("icon-text-fit")!=="none",Te=S.get("symbol-z-order")==="viewport-y",Re=le&&(de||!w.hasIconData()||J),We=de&&(le||!w.hasTextData()||ce);!w.collisionArrays&&W&&w.deserializeCollisionBoxes(W);var Ke=function(mt,Nt){if(!s[mt.crossTileID])if(K)c.placements[mt.crossTileID]=new os(!1,!1,!1);else{var Yt,Ft=!1,Bt=!1,Xt=!0,Rt=null,Dt={box:null,offscreen:null},Gr={box:null,offscreen:null},or=null,vn=null,$r=0,ir=0,yr=0;Nt.textFeatureIndex?$r=Nt.textFeatureIndex:mt.useRuntimeCollisionCircles&&($r=mt.featureIndex),Nt.verticalTextFeatureIndex&&(ir=Nt.verticalTextFeatureIndex);var Kn=Nt.textBox;if(Kn){var In=function(Ii){var ra=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Ii&&c.prevPlacement){var Dn=c.prevPlacement.placedOrientations[mt.crossTileID];Dn&&(c.placedOrientations[mt.crossTileID]=Dn,c.markUsedOrientation(w,ra=Dn,mt))}return ra},eo=function(Ii,ra){if(w.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Nt.verticalTextBox)for(var Dn=0,Mo=w.writingModes;Dn<Mo.length&&(Mo[Dn]===a.WritingMode.vertical?(Dt=ra(),Gr=Dt):Dt=Ii(),!(Dt&&Dt.box&&Dt.box.length));Dn+=1);else Dt=Ii()};if(S.get("text-variable-anchor")){var Mn=S.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[mt.crossTileID]){var va=c.prevPlacement.variableOffsets[mt.crossTileID];Mn.indexOf(va.anchor)>0&&(Mn=Mn.filter(function(Ii){return Ii!==va.anchor})).unshift(va.anchor)}var la=function(Ii,ra,Dn){for(var Mo=Ii.x2-Ii.x1,qp=Ii.y2-Ii.y1,sl=mt.textBoxScale,Gp=Se&&!de?ra:null,Ts={box:[],offscreen:!1},Ac=le?2*Mn.length:Mn.length,$o=0;$o<Ac;++$o){var ll=c.attemptAnchorPlacement(Mn[$o%Mn.length],Ii,Mo,qp,sl,_e,Ie,Z,z,ee,$o>=Mn.length,mt,w,Dn,Gp);if(ll&&(Ts=ll.placedGlyphBoxes)&&Ts.box&&Ts.box.length){Ft=!0,Rt=ll.shift;break}}return Ts};eo(function(){return la(Kn,Nt.iconBox,a.WritingMode.horizontal)},function(){var Ii=Nt.verticalTextBox;return w.allowVerticalPlacement&&!(Dt&&Dt.box&&Dt.box.length)&&mt.numVerticalGlyphVertices>0&&Ii?la(Ii,Nt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Dt&&(Ft=Dt.box,Xt=Dt.offscreen);var ks=In(Dt&&Dt.box);if(!Ft&&c.prevPlacement){var Jo=c.prevPlacement.variableOffsets[mt.crossTileID];Jo&&(c.variableOffsets[mt.crossTileID]=Jo,c.markUsedJustification(w,Jo.anchor,mt,ks))}}else{var to=function(Ii,ra){var Dn=c.collisionIndex.placeCollisionBox(Ii,le,Z,z,ee.predicate);return Dn&&Dn.box&&Dn.box.length&&(c.markUsedOrientation(w,ra,mt),c.placedOrientations[mt.crossTileID]=ra),Dn};eo(function(){return to(Kn,a.WritingMode.horizontal)},function(){var Ii=Nt.verticalTextBox;return w.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Ii?to(Ii,a.WritingMode.vertical):{box:null,offscreen:null}}),In(Dt&&Dt.box&&Dt.box.length)}}if(Ft=(Yt=Dt)&&Yt.box&&Yt.box.length>0,Xt=Yt&&Yt.offscreen,mt.useRuntimeCollisionCircles){var Qo=w.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex),Is=a.evaluateSizeForFeature(w.textSizeData,ie,Qo),Aa=S.get("text-padding");or=c.collisionIndex.placeCollisionCircles(le,Qo,w.lineVertexArray,w.glyphOffsetArray,Is,z,P,O,o,Ie,ee.predicate,mt.collisionCircleDiameter,Aa),Ft=le||or.circles.length>0&&!or.collisionDetected,Xt=Xt&&or.offscreen}if(Nt.iconFeatureIndex&&(yr=Nt.iconFeatureIndex),Nt.iconBox){var zs=function(Ii){var ra=Se&&Rt?ea(Ii,Rt.x,Rt.y,_e,Ie,c.transform.angle):Ii;return c.collisionIndex.placeCollisionBox(ra,de,Z,z,ee.predicate)};Bt=Gr&&Gr.box&&Gr.box.length&&Nt.verticalIconBox?(vn=zs(Nt.verticalIconBox)).box.length>0:(vn=zs(Nt.iconBox)).box.length>0,Xt=Xt&&vn.offscreen}var Pa=ce||mt.numHorizontalGlyphVertices===0&&mt.numVerticalGlyphVertices===0,Zr=J||mt.numIconVertices===0;if(Pa||Zr?Zr?Pa||(Bt=Bt&&Ft):Ft=Bt&&Ft:Bt=Ft=Bt&&Ft,Ft&&Yt&&Yt.box&&c.collisionIndex.insertCollisionBox(Yt.box,S.get("text-ignore-placement"),w.bucketInstanceId,Gr&&Gr.box&&ir?ir:$r,ee.ID),Bt&&vn&&c.collisionIndex.insertCollisionBox(vn.box,S.get("icon-ignore-placement"),w.bucketInstanceId,yr,ee.ID),or&&(Ft&&c.collisionIndex.insertCollisionCircles(or.circles,S.get("text-ignore-placement"),w.bucketInstanceId,$r,ee.ID),o)){var Ra=w.bucketInstanceId,io=c.collisionCircleArrays[Ra];io===void 0&&(io=c.collisionCircleArrays[Ra]=new Dr);for(var Co=0;Co<or.circles.length;Co+=4)io.circles.push(or.circles[Co+0]),io.circles.push(or.circles[Co+1]),io.circles.push(or.circles[Co+2]),io.circles.push(or.collisionDetected?1:0)}c.placements[mt.crossTileID]=new os(Ft||Re,Bt||We,Xt||w.justReloaded),s[mt.crossTileID]=!0}};if(Te)for(var dt=w.getSortedSymbolIndexes(this.transform.angle),zt=dt.length-1;zt>=0;--zt){var Ct=dt[zt];Ke(w.symbolInstances.get(Ct),w.collisionArrays[Ct])}else for(var Pt=n.symbolInstanceStart;Pt<n.symbolInstanceEnd;Pt++)Ke(w.symbolInstances.get(Pt),w.collisionArrays[Pt]);if(o&&w.bucketInstanceId in this.collisionCircleArrays){var _i=this.collisionCircleArrays[w.bucketInstanceId];a.invert(_i.invProjMatrix,z),_i.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Yr.prototype.markUsedJustification=function(n,s,o,c){var _;_=c===a.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(s)];for(var w=0,S=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];w<S.length;w+=1){var z=S[w];z>=0&&(n.text.placedSymbolArray.get(z).crossTileID=_>=0&&z!==_?0:o.crossTileID)}},Yr.prototype.markUsedOrientation=function(n,s,o){for(var c=s===a.WritingMode.horizontal||s===a.WritingMode.horizontalOnly?s:0,_=s===a.WritingMode.vertical?s:0,w=0,S=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];w<S.length;w+=1)n.text.placedSymbolArray.get(S[w]).placedOrientation=c;o.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=_)},Yr.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,_=s?s.opacities:{},w=s?s.variableOffsets:{},S=s?s.placedOrientations:{};for(var z in this.placements){var P=this.placements[z],O=_[z];O?(this.opacities[z]=new Sn(O,c,P.text,P.icon),o=o||P.text!==O.text.placed||P.icon!==O.icon.placed):(this.opacities[z]=new Sn(null,c,P.text,P.icon,P.skipFade),o=o||P.text||P.icon)}for(var Z in _){var K=_[Z];if(!this.opacities[Z]){var W=new Sn(K,c,!1,!1);W.isHidden()||(this.opacities[Z]=W,o=o||K.text.placed||K.icon.placed)}}for(var ie in w)this.variableOffsets[ie]||!this.opacities[ie]||this.opacities[ie].isHidden()||(this.variableOffsets[ie]=w[ie]);for(var ee in S)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=S[ee]);o?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},Yr.prototype.updateLayerOpacities=function(n,s){for(var o={},c=0,_=s;c<_.length;c+=1){var w=_[c],S=w.getBucket(n);S&&w.latestFeatureIndex&&n.id===S.layerIds[0]&&this.updateBucketOpacities(S,o,w.collisionBoxArray)}},Yr.prototype.updateBucketOpacities=function(n,s,o){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var _=n.layers[0].layout,w=new Sn(null,0,!1,!1,!0),S=_.get("text-allow-overlap"),z=_.get("icon-allow-overlap"),P=_.get("text-variable-anchor"),O=_.get("text-rotation-alignment")==="map",Z=_.get("text-pitch-alignment")==="map",K=_.get("icon-text-fit")!=="none",W=new Sn(null,0,S&&(z||!n.hasIconData()||_.get("icon-optional")),z&&(S||!n.hasTextData()||_.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);for(var ie=function(le,de,_e){for(var Ie=0;Ie<de/4;Ie++)le.opacityVertexArray.emplaceBack(_e)},ee=function(le){var de=n.symbolInstances.get(le),_e=de.numHorizontalGlyphVertices,Ie=de.numVerticalGlyphVertices,Se=de.crossTileID,Te=c.opacities[Se];s[Se]?Te=w:Te||(c.opacities[Se]=Te=W),s[Se]=!0;var Re=de.numIconVertices>0,We=c.placedOrientations[de.crossTileID],Ke=We===a.WritingMode.vertical,dt=We===a.WritingMode.horizontal||We===a.WritingMode.horizontalOnly;if(_e>0||Ie>0){var zt=Vs(Te.text);ie(n.text,_e,Ke?ja:zt),ie(n.text,Ie,dt?ja:zt);var Ct=Te.text.isHidden();[de.rightJustifiedTextSymbolIndex,de.centerJustifiedTextSymbolIndex,de.leftJustifiedTextSymbolIndex].forEach(function(Dt){Dt>=0&&(n.text.placedSymbolArray.get(Dt).hidden=Ct||Ke?1:0)}),de.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(de.verticalPlacedTextSymbolIndex).hidden=Ct||dt?1:0);var Pt=c.variableOffsets[de.crossTileID];Pt&&c.markUsedJustification(n,Pt.anchor,de,We);var _i=c.placedOrientations[de.crossTileID];_i&&(c.markUsedJustification(n,"left",de,_i),c.markUsedOrientation(n,_i,de))}if(Re){var mt=Vs(Te.icon),Nt=!(K&&de.verticalPlacedIconSymbolIndex&&Ke);de.placedIconSymbolIndex>=0&&(ie(n.icon,de.numIconVertices,Nt?mt:ja),n.icon.placedSymbolArray.get(de.placedIconSymbolIndex).hidden=Te.icon.isHidden()),de.verticalPlacedIconSymbolIndex>=0&&(ie(n.icon,de.numVerticalIconVertices,Nt?ja:mt),n.icon.placedSymbolArray.get(de.verticalPlacedIconSymbolIndex).hidden=Te.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Yt=n.collisionArrays[le];if(Yt){var Ft=new a.Point(0,0);if(Yt.textBox||Yt.verticalTextBox){var Bt=!0;if(P){var Xt=c.variableOffsets[Se];Xt?(Ft=Lr(Xt.anchor,Xt.width,Xt.height,Xt.textOffset,Xt.textBoxScale),O&&Ft._rotate(Z?c.transform.angle:-c.transform.angle)):Bt=!1}Yt.textBox&&Sa(n.textCollisionBox.collisionVertexArray,Te.text.placed,!Bt||Ke,Ft.x,Ft.y),Yt.verticalTextBox&&Sa(n.textCollisionBox.collisionVertexArray,Te.text.placed,!Bt||dt,Ft.x,Ft.y)}var Rt=!!(!dt&&Yt.verticalIconBox);Yt.iconBox&&Sa(n.iconCollisionBox.collisionVertexArray,Te.icon.placed,Rt,K?Ft.x:0,K?Ft.y:0),Yt.verticalIconBox&&Sa(n.iconCollisionBox.collisionVertexArray,Te.icon.placed,!Rt,K?Ft.x:0,K?Ft.y:0)}}},ce=0;ce<n.symbolInstances.length;ce++)ee(ce);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var J=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=J.invProjMatrix,n.placementViewportMatrix=J.viewportMatrix,n.collisionCircleArray=J.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},Yr.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yr.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},Yr.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},Yr.prototype.stillRecent=function(n,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>n},Yr.prototype.setStale=function(){this.stale=!0};var ss=Math.pow(2,25),Nl=Math.pow(2,24),fo=Math.pow(2,17),Ul=Math.pow(2,16),No=Math.pow(2,9),Vl=Math.pow(2,8),Uo=Math.pow(2,1);function Vs(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,o=Math.floor(127*n.opacity);return o*ss+s*Nl+o*fo+s*Ul+o*No+s*Vl+o*Uo+s}var ja=0,ls=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ls.prototype.continuePlacement=function(n,s,o,c,_){for(var w=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(w,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(S,z){return S.sortKey-z.sortKey}));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,_())return!0;return!1};var mo=function(n,s,o,c,_,w,S){this.placement=new Yr(n,_,w,S),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=c,this._done=!1};mo.prototype.isDone=function(){return this._done},mo.prototype.continuePlacement=function(n,s,o){for(var c=this,_=a.browser.now(),w=function(){var P=a.browser.now()-_;return!c._forceFullPlacement&&P>2};this._currentPlacementIndex>=0;){var S=s[n[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=z)&&(!S.maxzoom||S.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new ls(S)),this._inProgressLayer.continuePlacement(o[S.source],this.placement,this._showCollisionBoxes,S,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},mo.prototype.commit=function(n){return this.placement.commit(n),this.placement};var js=512/a.EXTENT/2,qa=function(n,s,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var c=0;c<s.length;c++){var _=s.get(c),w=_.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:_.crossTileID,coord:this.getScaledCoordinates(_,n)})}};qa.prototype.getScaledCoordinates=function(n,s){var o=js/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*a.EXTENT+n.anchorX)*o),y:Math.floor((s.canonical.y*a.EXTENT+n.anchorY)*o)}},qa.prototype.findMatches=function(n,s,o){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),_=0;_<n.length;_++){var w=n.get(_);if(!w.crossTileID){var S=this.indexedSymbolInstances[w.key];if(S)for(var z=this.getScaledCoordinates(w,s),P=0,O=S;P<O.length;P+=1){var Z=O[P];if(Math.abs(Z.coord.x-z.x)<=c&&Math.abs(Z.coord.y-z.y)<=c&&!o[Z.crossTileID]){o[Z.crossTileID]=!0,w.crossTileID=Z.crossTileID;break}}}}};var Nn=function(){this.maxCrossTileID=0};Nn.prototype.generate=function(){return++this.maxCrossTileID};var Ea=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ea.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var o in this.indexes){var c=this.indexes[o],_={};for(var w in c){var S=c[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+s),_[S.tileID.key]=S}this.indexes[o]=_}this.lng=n},Ea.prototype.addBucket=function(n,s,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var _=this.usedCrossTileIDs[n.overscaledZ];for(var w in this.indexes){var S=this.indexes[w];if(Number(w)>n.overscaledZ)for(var z in S){var P=S[z];P.tileID.isChildOf(n)&&P.findMatches(s.symbolInstances,n,_)}else{var O=S[n.scaledTo(Number(w)).key];O&&O.findMatches(s.symbolInstances,n,_)}}for(var Z=0;Z<s.symbolInstances.length;Z++){var K=s.symbolInstances.get(Z);K.crossTileID||(K.crossTileID=o.generate(),_[K.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new qa(n,s.symbolInstances,s.bucketInstanceId),!0},Ea.prototype.removeBucketCrossTileIDs=function(n,s){for(var o in s.indexedSymbolInstances)for(var c=0,_=s.indexedSymbolInstances[o];c<_.length;c+=1)delete this.usedCrossTileIDs[n][_[c].crossTileID]},Ea.prototype.removeStaleBuckets=function(n){var s=!1;for(var o in this.indexes){var c=this.indexes[o];for(var _ in c)n[c[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,c[_]),delete c[_],s=!0)}return s};var ge=function(){this.layerIndexes={},this.crossTileIDs=new Nn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ge.prototype.addLayer=function(n,s,o){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new Ea);var _=!1,w={};c.handleWrapJump(o);for(var S=0,z=s;S<z.length;S+=1){var P=z[S],O=P.getBucket(n);O&&n.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(P.tileID,O,this.crossTileIDs)&&(_=!0),w[O.bucketInstanceId]=!0)}return c.removeStaleBuckets(w)&&(_=!0),_},ge.prototype.pruneUnusedLayers=function(n){var s={};for(var o in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var _n=function(n,s){return a.emitValidationErrors(n,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},Jr=a.pick(et,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hi=a.pick(et,["setCenter","setZoom","setBearing","setPitch"]),ka=function(){var n={},s=a.styleSpec.$version;for(var o in a.styleSpec.$root){var c,_=a.styleSpec.$root[o];_.required&&(c=o==="version"?s:_.type==="array"?[]:{})!=null&&(n[o]=c)}return n}(),Un=function(n){function s(o,c){var _=this;c===void 0&&(c={}),n.call(this),this.map=o,this.dispatcher=new lt(ze(),this),this.imageManager=new xe,this.imageManager.setEventedParent(this),this.glyphManager=new Ue(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ve(256,512),this.crossTileSymbolIndex=new ge,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var w=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(S){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},function(z,P){if(a.triggerPluginCompletionEvent(z),P&&P.every(function(Z){return Z}))for(var O in w.sourceCaches)w.sourceCaches[O].reload()})}),this.on("data",function(S){if(S.dataType==="source"&&S.sourceDataType==="metadata"){var z=_.sourceCaches[S.sourceId];if(z){var P=z.getSource();if(P&&P.vectorLayerIds)for(var O in _._layers){var Z=_._layers[O];Z.source===P.id&&_._validateLayer(Z)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(o,c){var _=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var w=typeof c.validate=="boolean"?c.validate:!a.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,c.accessToken);var S=this.map._requestManager.transformRequest(o,a.ResourceType.Style);this._request=a.getJSON(S,function(z,P){_._request=null,z?_.fire(new a.ErrorEvent(z)):P&&_._load(P,w)})},s.prototype.loadJSON=function(o,c){var _=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){_._request=null,_._load(o,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ka,!1)},s.prototype._load=function(o,c){if(!c||!_n(this,a.validateStyle(o))){for(var _ in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(_,o.sources[_],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var w=Ye(this.stylesheet.layers);this._order=w.map(function(O){return O.id}),this._layers={},this._serializedLayers={};for(var S=0,z=w;S<z.length;S+=1){var P=z[S];(P=a.createStyleLayer(P)).setEventedParent(this,{layer:{id:P.id}}),this._layers[P.id]=P,this._serializedLayers[P.id]=P.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ii(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},s.prototype._loadSprite=function(o){var c=this;this._spriteRequest=function(_,w,S){var z,P,O,Z=a.browser.devicePixelRatio>1?"@2x":"",K=a.getJSON(w.transformRequest(w.normalizeSpriteURL(_,Z,".json"),a.ResourceType.SpriteJSON),function(ee,ce){K=null,O||(O=ee,z=ce,ie())}),W=a.getImage(w.transformRequest(w.normalizeSpriteURL(_,Z,".png"),a.ResourceType.SpriteImage),function(ee,ce){W=null,O||(O=ee,P=ce,ie())});function ie(){if(O)S(O);else if(z&&P){var ee=a.browser.getImageData(P),ce={};for(var J in z){var le=z[J],de=le.width,_e=le.height,Ie=le.x,Se=le.y,Te=le.sdf,Re=le.pixelRatio,We=le.stretchX,Ke=le.stretchY,dt=le.content,zt=new a.RGBAImage({width:de,height:_e});a.RGBAImage.copy(ee,zt,{x:Ie,y:Se},{x:0,y:0},{width:de,height:_e}),ce[J]={data:zt,pixelRatio:Re,sdf:Te,stretchX:We,stretchY:Ke,content:dt}}S(null,ce)}}return{cancel:function(){K&&(K.cancel(),K=null),W&&(W.cancel(),W=null)}}}(o,this.map._requestManager,function(_,w){if(c._spriteRequest=null,_)c.fire(new a.ErrorEvent(_));else if(w)for(var S in w)c.imageManager.addImage(S,w[S]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new a.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var c=this.sourceCaches[o.source];if(c){var _=o.sourceLayer;if(_){var w=c.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(_)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+_+'" does not exist on source "'+w.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var c=[],_=0,w=o;_<w.length;_+=1){var S=this._layers[w[_]];S.type!=="custom"&&c.push(S.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var c=this._changed;if(this._changed){var _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var S in(_.length||w.length)&&this._updateWorkerLayers(_,w),this._updatedSources){var z=this._updatedSources[S];z==="reload"?this._reloadSource(S):z==="clear"&&this._clearSource(S)}for(var P in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[P].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var O={};for(var Z in this.sourceCaches){var K=this.sourceCaches[Z];O[Z]=K.used,K.used=!1}for(var W=0,ie=this._order;W<ie.length;W+=1){var ee=this._layers[ie[W]];ee.recalculate(o,this._availableImages),!ee.isHidden(o.zoom)&&ee.source&&(this.sourceCaches[ee.source].used=!0)}for(var ce in O){var J=this.sourceCaches[ce];O[ce]!==J.used&&J.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ce}))}this.light.recalculate(o),this.z=o.zoom,c&&this.fire(new a.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var c=this;if(this._checkLoaded(),_n(this,a.validateStyle(o)))return!1;(o=a.clone$1(o)).layers=Ye(o.layers);var _=function(S,z){if(!S)return[{command:et.setStyle,args:[z]}];var P=[];try{if(!a.deepEqual(S.version,z.version))return[{command:et.setStyle,args:[z]}];a.deepEqual(S.center,z.center)||P.push({command:et.setCenter,args:[z.center]}),a.deepEqual(S.zoom,z.zoom)||P.push({command:et.setZoom,args:[z.zoom]}),a.deepEqual(S.bearing,z.bearing)||P.push({command:et.setBearing,args:[z.bearing]}),a.deepEqual(S.pitch,z.pitch)||P.push({command:et.setPitch,args:[z.pitch]}),a.deepEqual(S.sprite,z.sprite)||P.push({command:et.setSprite,args:[z.sprite]}),a.deepEqual(S.glyphs,z.glyphs)||P.push({command:et.setGlyphs,args:[z.glyphs]}),a.deepEqual(S.transition,z.transition)||P.push({command:et.setTransition,args:[z.transition]}),a.deepEqual(S.light,z.light)||P.push({command:et.setLight,args:[z.light]});var O={},Z=[];(function(W,ie,ee,ce){var J;for(J in ie=ie||{},W=W||{})W.hasOwnProperty(J)&&(ie.hasOwnProperty(J)||at(J,ee,ce));for(J in ie)ie.hasOwnProperty(J)&&(W.hasOwnProperty(J)?a.deepEqual(W[J],ie[J])||(W[J].type==="geojson"&&ie[J].type==="geojson"&&wi(W,ie,J)?ee.push({command:et.setGeoJSONSourceData,args:[J,ie[J].data]}):ei(J,ie,ee,ce)):Gt(J,ie,ee))})(S.sources,z.sources,Z,O);var K=[];S.layers&&S.layers.forEach(function(W){O[W.source]?P.push({command:et.removeLayer,args:[W.id]}):K.push(W)}),P=P.concat(Z),function(W,ie,ee){ie=ie||[];var ce,J,le,de,_e,Ie,Se,Te=(W=W||[]).map(ui),Re=ie.map(ui),We=W.reduce(ti,{}),Ke=ie.reduce(ti,{}),dt=Te.slice(),zt=Object.create(null);for(ce=0,J=0;ce<Te.length;ce++)Ke.hasOwnProperty(le=Te[ce])?J++:(ee.push({command:et.removeLayer,args:[le]}),dt.splice(dt.indexOf(le,J),1));for(ce=0,J=0;ce<Re.length;ce++)dt[dt.length-1-ce]!==(le=Re[Re.length-1-ce])&&(We.hasOwnProperty(le)?(ee.push({command:et.removeLayer,args:[le]}),dt.splice(dt.lastIndexOf(le,dt.length-J),1)):J++,ee.push({command:et.addLayer,args:[Ke[le],Ie=dt[dt.length-ce]]}),dt.splice(dt.length-ce,0,le),zt[le]=!0);for(ce=0;ce<Re.length;ce++)if(de=We[le=Re[ce]],_e=Ke[le],!zt[le]&&!a.deepEqual(de,_e))if(a.deepEqual(de.source,_e.source)&&a.deepEqual(de["source-layer"],_e["source-layer"])&&a.deepEqual(de.type,_e.type)){for(Se in Wt(de.layout,_e.layout,ee,le,null,et.setLayoutProperty),Wt(de.paint,_e.paint,ee,le,null,et.setPaintProperty),a.deepEqual(de.filter,_e.filter)||ee.push({command:et.setFilter,args:[le,_e.filter]}),a.deepEqual(de.minzoom,_e.minzoom)&&a.deepEqual(de.maxzoom,_e.maxzoom)||ee.push({command:et.setLayerZoomRange,args:[le,_e.minzoom,_e.maxzoom]}),de)de.hasOwnProperty(Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?Wt(de[Se],_e[Se],ee,le,Se.slice(6),et.setPaintProperty):a.deepEqual(de[Se],_e[Se])||ee.push({command:et.setLayerProperty,args:[le,Se,_e[Se]]}));for(Se in _e)_e.hasOwnProperty(Se)&&!de.hasOwnProperty(Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?Wt(de[Se],_e[Se],ee,le,Se.slice(6),et.setPaintProperty):a.deepEqual(de[Se],_e[Se])||ee.push({command:et.setLayerProperty,args:[le,Se,_e[Se]]}))}else ee.push({command:et.removeLayer,args:[le]}),Ie=dt[dt.lastIndexOf(le)+1],ee.push({command:et.addLayer,args:[_e,Ie]})}(K,z.layers,P)}catch(W){console.warn("Unable to compute style diff:",W),P=[{command:et.setStyle,args:[z]}]}return P}(this.serialize(),o).filter(function(S){return!(S.command in Hi)});if(_.length===0)return!1;var w=_.filter(function(S){return!(S.command in Jr)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(S){return S.command}).join(", ")+".");return _.forEach(function(S){S.command!=="setTransition"&&c[S.command].apply(c,S.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,c){if(this.getImage(o))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,c),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,c){this.imageManager.updateImage(o,c)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,c,_){var w=this;if(_===void 0&&(_={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.validateStyle.source,"sources."+o,c,null,_))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var S=this.sourceCaches[o]=new re(o,c,this.dispatcher);S.style=this,S.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:S.serialize(),sourceId:o}}),S.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===o)return this.fire(new a.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+c+'" is using it.')));var _=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],_.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),_.setEventedParent(null),_.clearTiles(),_.onRemove&&_.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,c){this._checkLoaded(),this.sourceCaches[o].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,c,_){_===void 0&&(_={}),this._checkLoaded();var w=o.id;if(this.getLayer(w))this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var S;if(o.type==="custom"){if(_n(this,a.validateCustomStyleLayer(o)))return;S=a.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(w,o.source),o=a.clone$1(o),o=a.extend(o,{source:w})),this._validate(a.validateStyle.layer,"layers."+w,o,{arrayIndex:-1},_))return;S=a.createStyleLayer(o),this._validateLayer(S),S.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[S.id]=S.serialize()}var z=c?this._order.indexOf(c):this._order.length;if(c&&z===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(z,0,w),this._layerOrderChanged=!0,this._layers[w]=S,this._removedLayers[w]&&S.source&&S.type!=="custom"){var P=this._removedLayers[w];delete this._removedLayers[w],P.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}},s.prototype.moveLayer=function(o,c){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==c){var _=this._order.indexOf(o);this._order.splice(_,1);var w=c?this._order.indexOf(c):this._order.length;c&&w===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(w,0,o),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var c=this._layers[o];if(c){c.setEventedParent(null);var _=this._order.indexOf(o);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,c,_){this._checkLoaded();var w=this.getLayer(o);w?w.minzoom===c&&w.maxzoom===_||(c!=null&&(w.minzoom=c),_!=null&&(w.maxzoom=_),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,c,_){_===void 0&&(_={}),this._checkLoaded();var w=this.getLayer(o);if(w){if(!a.deepEqual(w.filter,c))return c==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(a.validateStyle.filter,"layers."+w.id+".filter",c,null,_)||(w.filter=a.clone$1(c),this._updateLayer(w)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return a.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,c,_,w){w===void 0&&(w={}),this._checkLoaded();var S=this.getLayer(o);S?a.deepEqual(S.getLayoutProperty(c),_)||(S.setLayoutProperty(c,_,w),this._updateLayer(S)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,c){var _=this.getLayer(o);if(_)return _.getLayoutProperty(c);this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,c,_,w){w===void 0&&(w={}),this._checkLoaded();var S=this.getLayer(o);S?a.deepEqual(S.getPaintProperty(c),_)||(S.setPaintProperty(c,_,w)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,c){return this.getLayer(o).getPaintProperty(c)},s.prototype.setFeatureState=function(o,c){this._checkLoaded();var _=o.source,w=o.sourceLayer,S=this.sourceCaches[_];if(S!==void 0){var z=S.getSource().type;z==="geojson"&&w?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||w?(o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),S.setFeatureState(w,o.id,c)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+_+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,c){this._checkLoaded();var _=o.source,w=this.sourceCaches[_];if(w!==void 0){var S=w.getSource().type,z=S==="vector"?o.sourceLayer:void 0;S!=="vector"||z?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(z,o.id,c):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+_+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var c=o.source,_=o.sourceLayer,w=this.sourceCaches[c];if(w!==void 0){if(w.getSource().type!=="vector"||_)return o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(_,o.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var c=this,_=function(We){return c._layers[We].type==="fill-extrusion"},w={},S=[],z=this._order.length-1;z>=0;z--){var P=this._order[z];if(_(P)){w[P]=z;for(var O=0,Z=o;O<Z.length;O+=1){var K=Z[O][P];if(K)for(var W=0,ie=K;W<ie.length;W+=1)S.push(ie[W])}}}S.sort(function(We,Ke){return Ke.intersectionZ-We.intersectionZ});for(var ee=[],ce=this._order.length-1;ce>=0;ce--){var J=this._order[ce];if(_(J))for(var le=S.length-1;le>=0;le--){var de=S[le].feature;if(w[de.layer.id]<ce)break;ee.push(de),S.pop()}else for(var _e=0,Ie=o;_e<Ie.length;_e+=1){var Se=Ie[_e][J];if(Se)for(var Te=0,Re=Se;Te<Re.length;Te+=1)ee.push(Re[Te].feature)}}return ee},s.prototype.queryRenderedFeatures=function(o,c,_){c&&c.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var w={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var S=0,z=c.layers;S<z.length;S+=1){var P=z[S],O=this._layers[P];if(!O)return this.fire(new a.ErrorEvent(new Error("The layer '"+P+"' does not exist in the map's style and cannot be queried for features."))),[];w[O.source]=!0}}var Z=[];for(var K in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!w[K]||Z.push(li(this.sourceCaches[K],this._layers,this._serializedLayers,o,c,_));return this.placement&&Z.push(function(W,ie,ee,ce,J,le,de){for(var _e={},Ie=le.queryRenderedSymbols(ce),Se=[],Te=0,Re=Object.keys(Ie).map(Number);Te<Re.length;Te+=1)Se.push(de[Re[Te]]);Se.sort(ur);for(var We=function(){var Pt=dt[Ke],_i=Pt.featureIndex.lookupSymbolFeatures(Ie[Pt.bucketInstanceId],ie,Pt.bucketIndex,Pt.sourceLayerIndex,J.filter,J.layers,J.availableImages,W);for(var mt in _i){var Nt=_e[mt]=_e[mt]||[],Yt=_i[mt];Yt.sort(function(Xt,Rt){var Dt=Pt.featureSortOrder;if(Dt){var Gr=Dt.indexOf(Xt.featureIndex);return Dt.indexOf(Rt.featureIndex)-Gr}return Rt.featureIndex-Xt.featureIndex});for(var Ft=0,Bt=Yt;Ft<Bt.length;Ft+=1)Nt.push(Bt[Ft])}},Ke=0,dt=Se;Ke<dt.length;Ke+=1)We();var zt=function(Pt){_e[Pt].forEach(function(_i){var mt=_i.feature,Nt=ee[W[Pt].source].getFeatureState(mt.layer["source-layer"],mt.id);mt.source=mt.layer.source,mt.layer["source-layer"]&&(mt.sourceLayer=mt.layer["source-layer"]),mt.state=Nt})};for(var Ct in _e)zt(Ct);return _e}(this._layers,this._serializedLayers,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Z)},s.prototype.querySourceFeatures=function(o,c){c&&c.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var _=this.sourceCaches[o];return _?function(w,S){for(var z=w.getRenderableIds().map(function(ie){return w.getTileByID(ie)}),P=[],O={},Z=0;Z<z.length;Z++){var K=z[Z],W=K.tileID.canonical.key;O[W]||(O[W]=!0,K.querySourceFeatures(P,S))}return P}(_,c):[]},s.prototype.addSourceType=function(o,c,_){return s.getSourceType(o)?_(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},_):_(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,c){c===void 0&&(c={}),this._checkLoaded();var _=this.light.getLight(),w=!1;for(var S in o)if(!a.deepEqual(o[S],_[S])){w=!0;break}if(w){var z={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(z)}},s.prototype._validate=function(o,c,_,w,S){return S===void 0&&(S={}),(!S||S.validate!==!1)&&_n(this,o.call(a.validateStyle,a.extend({key:c,style:this.serialize(),value:_,styleSpec:a.styleSpec},w)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var c in this.sourceCaches)this.sourceCaches[c].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,c,_,w,S){S===void 0&&(S=!1);for(var z=!1,P=!1,O={},Z=0,K=this._order;Z<K.length;Z+=1){var W=this._layers[K[Z]];if(W.type==="symbol"){if(!O[W.source]){var ie=this.sourceCaches[W.source];O[W.source]=ie.getRenderableIds(!0).map(function(de){return ie.getTileByID(de)}).sort(function(de,_e){return _e.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(_e.tileID)?-1:1)})}var ee=this.crossTileSymbolIndex.addLayer(W,O[W.source],o.center.lng);z=z||ee}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),o.zoom))&&(this.pauseablePlacement=new mo(o,this._order,S,c,_,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),P=!0),z&&this.pauseablePlacement.placement.setStale()),P||z)for(var ce=0,J=this._order;ce<J.length;ce+=1){var le=this._layers[J[ce]];le.type==="symbol"&&this.placement.updateLayerOpacities(le,O[le.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,c,_){this.imageManager.getImages(c.icons,_),this._updateTilesForChangedImages();var w=this.sourceCaches[c.source];w&&w.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(o,c,_){this.glyphManager.getGlyphs(c.stacks,_)},s.prototype.getResource=function(o,c,_){return a.makeRequest(c,_)},s}(a.Evented);Un.getSourceType=function(n){return qi[n]},Un.setSourceType=function(n,s){qi[n]=s},Un.registerForPluginStateChange=a.registerForPluginStateChange;var kr=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Vo=Ri(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),rc=Ri(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Lp=Ri(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Rp=Ri(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),jl=Ri("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ql=Ri(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Gl=Ri(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Zl=Ri("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),nc=Ri("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ac=Ri("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Bp=Ri(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),us=Ri(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),cs=Ri(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),oc=Ri(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),on=Ri(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Kl=Ri(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Ga=Ri(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Za=Ri(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),go=Ri(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),yo=Ri(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ka=Ri(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),_o=Ri(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),vo=Ri(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ha=Ri(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),sc=Ri(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),lc=Ri(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ri(n,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),_=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=w?w.concat(_):_,z={};return{fragmentSource:n=n.replace(o,function(P,O,Z,K,W){return z[W]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_`+W+`
varying `+Z+" "+K+" "+W+`;
#else
uniform `+Z+" "+K+" u_"+W+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+W+`
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`}),vertexSource:s=s.replace(o,function(P,O,Z,K,W){var ie=K==="float"?"vec2":"vec4",ee=W.match(/color/)?"color":ie;return z[W]?O==="define"?`
#ifndef HAS_UNIFORM_u_`+W+`
uniform lowp float u_`+W+`_t;
attribute `+Z+" "+ie+" a_"+W+`;
varying `+Z+" "+K+" "+W+`;
#else
uniform `+Z+" "+K+" u_"+W+`;
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_`+W+`
    `+W+" = a_"+W+`;
#else
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+W+`
    `+W+" = unpack_mix_"+ee+"(a_"+W+", u_"+W+`_t);
#else
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_`+W+`
uniform lowp float u_`+W+`_t;
attribute `+Z+" "+ie+" a_"+W+`;
#else
uniform `+Z+" "+K+" u_"+W+`;
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_`+W+`
    `+Z+" "+K+" "+W+" = a_"+W+`;
#else
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+W+`
    `+Z+" "+K+" "+W+" = unpack_mix_"+ee+"(a_"+W+", u_"+W+`_t);
#else
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`}),staticAttributes:c,staticUniforms:S}}var Fp=Object.freeze({__proto__:null,prelude:Vo,background:rc,backgroundPattern:Lp,circle:Rp,clippingMask:jl,heatmap:ql,heatmapTexture:Gl,collisionBox:Zl,collisionCircle:nc,debug:ac,fill:Bp,fillOutline:us,fillOutlinePattern:cs,fillPattern:oc,fillExtrusion:on,fillExtrusionPattern:Kl,hillshadePrepare:Ga,hillshade:Za,line:go,lineGradient:yo,linePattern:Ka,lineSDF:_o,raster:vo,symbolIcon:Ha,symbolSDF:sc,symbolTextAndIcon:lc}),qs=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function uc(n){for(var s=[],o=0;o<n.length;o++)if(n[o]!==null){var c=n[o].split(" ");s.push(c.pop())}return s}qs.prototype.bind=function(n,s,o,c,_,w,S,z){this.context=n;for(var P=this.boundPaintVertexBuffers.length!==c.length,O=0;!P&&O<c.length;O++)this.boundPaintVertexBuffers[O]!==c[O]&&(P=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!P&&this.boundIndexBuffer===_&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===z?(n.bindVertexArrayOES.set(this.vao),S&&S.bind(),_&&_.dynamicDraw&&_.bind(),z&&z.bind()):this.freshBind(s,o,c,_,w,S,z)},qs.prototype.freshBind=function(n,s,o,c,_,w,S){var z,P=n.numAttributes,O=this.context,Z=O.gl;if(O.extVertexArrayObject)this.vao&&this.destroy(),this.vao=O.extVertexArrayObject.createVertexArrayOES(),O.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=c,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=S;else{z=O.currentNumAttributes||0;for(var K=P;K<z;K++)Z.disableVertexAttribArray(K)}s.enableAttributes(Z,n);for(var W=0,ie=o;W<ie.length;W+=1)ie[W].enableAttributes(Z,n);w&&w.enableAttributes(Z,n),S&&S.enableAttributes(Z,n),s.bind(),s.setVertexAttribPointers(Z,n,_);for(var ee=0,ce=o;ee<ce.length;ee+=1){var J=ce[ee];J.bind(),J.setVertexAttribPointers(Z,n,_)}w&&(w.bind(),w.setVertexAttribPointers(Z,n,_)),c&&c.bind(),S&&(S.bind(),S.setVertexAttribPointers(Z,n,_)),O.currentNumAttributes=P},qs.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var cc=function(n,s,o,c,_,w){var S=n.gl;this.program=S.createProgram();for(var z=uc(o.staticAttributes),P=c?c.getBinderAttributes():[],O=z.concat(P),Z=o.staticUniforms?uc(o.staticUniforms):[],K=c?c.getBinderUniforms():[],W=[],ie=0,ee=Z.concat(K);ie<ee.length;ie+=1){var ce=ee[ie];W.indexOf(ce)<0&&W.push(ce)}var J=c?c.defines():[];w&&J.push("#define OVERDRAW_INSPECTOR;");var le=J.concat(Vo.fragmentSource,o.fragmentSource).join(`
`),de=J.concat(Vo.vertexSource,o.vertexSource).join(`
`),_e=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(_e,le),S.compileShader(_e),S.attachShader(this.program,_e);var Ie=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(Ie,de),S.compileShader(Ie),S.attachShader(this.program,Ie),this.attributes={};var Se={};this.numAttributes=O.length;for(var Te=0;Te<this.numAttributes;Te++)O[Te]&&(S.bindAttribLocation(this.program,Te,O[Te]),this.attributes[O[Te]]=Te);S.linkProgram(this.program),S.deleteShader(Ie),S.deleteShader(_e);for(var Re=0;Re<W.length;Re++){var We=W[Re];if(We&&!Se[We]){var Ke=S.getUniformLocation(this.program,We);Ke&&(Se[We]=Ke)}}this.fixedUniforms=_(n,Se),this.binderUniforms=c?c.getUniforms(n,Se):[]}}};function pc(n,s,o){var c=1/Di(o,1,s.transform.tileZoom),_=Math.pow(2,o.tileID.overscaledZ),w=o.tileSize*Math.pow(2,s.transform.tileZoom)/_,S=w*(o.tileID.canonical.x+o.tileID.wrap*_),z=w*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[S>>16,z>>16],u_pixel_coord_lower:[65535&S,65535&z]}}cc.prototype.draw=function(n,s,o,c,_,w,S,z,P,O,Z,K,W,ie,ee,ce){var J,le=n.gl;if(!this.failedToCreate){for(var de in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(c),n.setColorMode(_),n.setCullFace(w),this.fixedUniforms)this.fixedUniforms[de].set(S[de]);ie&&ie.setUniforms(n,this.binderUniforms,K,{zoom:W});for(var _e=(J={},J[le.LINES]=2,J[le.TRIANGLES]=3,J[le.LINE_STRIP]=1,J)[s],Ie=0,Se=Z.get();Ie<Se.length;Ie+=1){var Te=Se[Ie],Re=Te.vaos||(Te.vaos={});(Re[z]||(Re[z]=new qs)).bind(n,this,P,ie?ie.getPaintVertexBuffers():[],O,Te.vertexOffset,ee,ce),le.drawElements(s,Te.primitiveLength*_e,le.UNSIGNED_SHORT,Te.primitiveOffset*_e*2)}}};var hc=function(n,s,o,c){var _=s.style.light,w=_.properties.get("position"),S=[w.x,w.y,w.z],z=a.create$1();_.properties.get("anchor")==="viewport"&&a.fromRotation(z,-s.transform.angle),a.transformMat3(S,S,z);var P=_.properties.get("color");return{u_matrix:n,u_lightpos:S,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+o,u_opacity:c}},bo=function(n,s,o,c,_,w,S){return a.extend(hc(n,s,o,c),pc(w,s,S),{u_height_factor:-Math.pow(2,_.overscaledZ)/S.tileSize/8})},Wa=function(n){return{u_matrix:n}},xo=function(n,s,o,c){return a.extend(Wa(n),pc(o,s,c))},fc=function(n,s){return{u_matrix:n,u_world:s}},dc=function(n,s,o,c,_){return a.extend(xo(n,s,o,c),{u_world:_})},Hl=function(n,s,o,c){var _,w,S=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var z=Di(o,1,S.zoom);_=!0,w=[z,z]}else _=!1,w=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:w}},wo=function(n,s,o){var c=Di(o,1,s.zoom),_=Math.pow(2,s.zoom-o.tileID.overscaledZ),w=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*_),s.pixelsToGLUnits[1]/(c*_)],u_overscale_factor:w}},mc=function(n,s,o){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},So=function(n,s,o){return o===void 0&&(o=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:o}},Eo=function(n){return{u_matrix:n}},gc=function(n,s,o,c){return{u_matrix:n,u_extrude_scale:Di(s,1,o),u_intensity:c}},ps=function(n,s,o){var c=n.transform;return{u_matrix:yc(n,s,o),u_ratio:1/Di(s,1,c.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Ui=function(n,s,o,c){return a.extend(ps(n,s,o),{u_image:0,u_image_height:c})},Gs=function(n,s,o,c){var _=n.transform,w=jo(s,_);return{u_matrix:yc(n,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Di(s,1,_.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Op=function(n,s,o,c,_){var w=n.lineAtlas,S=jo(s,n.transform),z=o.layout.get("line-cap")==="round",P=w.getDash(c.from,z),O=w.getDash(c.to,z),Z=P.width*_.fromScale,K=O.width*_.toScale;return a.extend(ps(n,s,o),{u_patternscale_a:[S/Z,-P.height/2],u_patternscale_b:[S/K,-O.height/2],u_sdfgamma:w.width/(256*Math.min(Z,K)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:O.y,u_mix:_.t})};function jo(n,s){return 1/Di(n,1,s.tileZoom)}function yc(n,s,o){return n.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Np=function(n,s,o,c,_){return{u_matrix:n,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(S=_.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(w=_.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:_c(_.paint.get("raster-hue-rotate"))};var w,S};function _c(n){n*=Math.PI/180;var s=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var Zs,qo=function(n,s,o,c,_,w,S,z,P,O){var Z=_.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:Z.width/Z.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:S,u_coord_matrix:z,u_is_text:+P,u_pitch_with_map:+c,u_texsize:O,u_texture:0}},hs=function(n,s,o,c,_,w,S,z,P,O,Z){var K=_.transform;return a.extend(qo(n,s,o,c,_,w,S,z,P,O),{u_gamma_scale:c?Math.cos(K._pitch)*K.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+Z})},Ks=function(n,s,o,c,_,w,S,z,P,O){return a.extend(hs(n,s,o,c,_,w,S,z,!0,P,!0),{u_texsize_icon:O,u_texture_icon:1})},fs=function(n,s,o){return{u_matrix:n,u_opacity:s,u_color:o}},Go=function(n,s,o,c,_,w){return a.extend(function(S,z,P,O){var Z=P.imageManager.getPattern(S.from.toString()),K=P.imageManager.getPattern(S.to.toString()),W=P.imageManager.getPixelSize(),ie=W.width,ee=W.height,ce=Math.pow(2,O.tileID.overscaledZ),J=O.tileSize*Math.pow(2,P.transform.tileZoom)/ce,le=J*(O.tileID.canonical.x+O.tileID.wrap*ce),de=J*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Z.tl,u_pattern_br_a:Z.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[ie,ee],u_mix:z.t,u_pattern_size_a:Z.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/Di(O,1,P.transform.tileZoom),u_pixel_coord_upper:[le>>16,de>>16],u_pixel_coord_lower:[65535&le,65535&de]}}(c,w,o,_),{u_matrix:n,u_opacity:s})},vc={fillExtrusion:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new a.Uniform1f(n,s.u_height_factor),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new a.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new a.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new a.UniformColor(n,s.u_color),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_overlay:new a.Uniform1i(n,s.u_overlay),u_overlay_scale:new a.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new a.Uniform1f(n,s.u_extrude_scale),u_intensity:new a.Uniform1f(n,s.u_intensity),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_color_ramp:new a.Uniform1i(n,s.u_color_ramp),u_opacity:new a.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_latrange:new a.Uniform2f(n,s.u_latrange),u_light:new a.Uniform2f(n,s.u_light),u_shadow:new a.UniformColor(n,s.u_shadow),u_highlight:new a.UniformColor(n,s.u_highlight),u_accent:new a.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_dimension:new a.Uniform2f(n,s.u_dimension),u_zoom:new a.Uniform1f(n,s.u_zoom),u_unpack:new a.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_image:new a.Uniform1i(n,s.u_image),u_image_height:new a.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_texsize:new a.Uniform2f(n,s.u_texsize),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_image:new a.Uniform1i(n,s.u_image),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new a.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new a.Uniform1f(n,s.u_sdfgamma),u_image:new a.Uniform1i(n,s.u_image),u_tex_y_a:new a.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new a.Uniform1f(n,s.u_tex_y_b),u_mix:new a.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new a.Uniform2f(n,s.u_tl_parent),u_scale_parent:new a.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new a.Uniform1f(n,s.u_buffer_scale),u_fade_t:new a.Uniform1f(n,s.u_fade_t),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image0:new a.Uniform1i(n,s.u_image0),u_image1:new a.Uniform1i(n,s.u_image1),u_brightness_low:new a.Uniform1f(n,s.u_brightness_low),u_brightness_high:new a.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new a.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new a.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new a.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texsize_icon:new a.Uniform2f(n,s.u_texsize_icon),u_texture:new a.Uniform1i(n,s.u_texture),u_texture_icon:new a.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_color:new a.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image:new a.Uniform1i(n,s.u_image),u_pattern_tl_a:new a.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(n,s.u_pattern_br_b),u_texsize:new a.Uniform2f(n,s.u_texsize),u_mix:new a.Uniform1f(n,s.u_mix),u_pattern_size_a:new a.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new a.Uniform1f(n,s.u_scale_a),u_scale_b:new a.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(n,s.u_tile_units_to_pixels)}}};function Zo(n,s,o,c,_,w,S){for(var z=n.context,P=z.gl,O=n.useProgram("collisionBox"),Z=[],K=0,W=0,ie=0;ie<c.length;ie++){var ee=c[ie],ce=s.getTile(ee),J=ce.getBucket(o);if(J){var le=ee.posMatrix;_[0]===0&&_[1]===0||(le=n.translatePosMatrix(ee.posMatrix,ce,_,w));var de=S?J.textCollisionBox:J.iconCollisionBox,_e=J.collisionCircleArray;if(_e.length>0){var Ie=a.create(),Se=le;a.mul(Ie,J.placementInvProjMatrix,n.transform.glCoordMatrix),a.mul(Ie,Ie,J.placementViewportMatrix),Z.push({circleArray:_e,circleOffset:W,transform:Se,invTransform:Ie}),W=K+=_e.length/4}de&&O.draw(z,P.LINES,H.disabled,Y.disabled,n.colorModeForRenderPass(),fe.disabled,wo(le,n.transform,ce),o.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,null,n.transform.zoom,null,null,de.collisionVertexBuffer)}}if(S&&Z.length){var Te=n.useProgram("collisionCircle"),Re=new a.StructArrayLayout2f1f2i16;Re.resize(4*K),Re._trim();for(var We=0,Ke=0,dt=Z;Ke<dt.length;Ke+=1)for(var zt=dt[Ke],Ct=0;Ct<zt.circleArray.length/4;Ct++){var Pt=4*Ct,_i=zt.circleArray[Pt+0],mt=zt.circleArray[Pt+1],Nt=zt.circleArray[Pt+2],Yt=zt.circleArray[Pt+3];Re.emplace(We++,_i,mt,Nt,Yt,0),Re.emplace(We++,_i,mt,Nt,Yt,1),Re.emplace(We++,_i,mt,Nt,Yt,2),Re.emplace(We++,_i,mt,Nt,Yt,3)}(!Zs||Zs.length<2*K)&&(Zs=function(or){var vn=2*or,$r=new a.StructArrayLayout3ui6;$r.resize(vn),$r._trim();for(var ir=0;ir<vn;ir++){var yr=6*ir;$r.uint16[yr+0]=4*ir+0,$r.uint16[yr+1]=4*ir+1,$r.uint16[yr+2]=4*ir+2,$r.uint16[yr+3]=4*ir+2,$r.uint16[yr+4]=4*ir+3,$r.uint16[yr+5]=4*ir+0}return $r}(K));for(var Ft=z.createIndexBuffer(Zs,!0),Bt=z.createVertexBuffer(Re,a.collisionCircleLayout.members,!0),Xt=0,Rt=Z;Xt<Rt.length;Xt+=1){var Dt=Rt[Xt],Gr=mc(Dt.transform,Dt.invTransform,n.transform);Te.draw(z,P.TRIANGLES,H.disabled,Y.disabled,n.colorModeForRenderPass(),fe.disabled,Gr,o.id,Bt,Ft,a.SegmentVector.simpleSegment(0,2*Dt.circleOffset,Dt.circleArray.length,Dt.circleArray.length/2),null,n.transform.zoom,null,null,null)}Bt.destroy(),Ft.destroy()}}var da=a.identity(new Float32Array(16));function bc(n,s,o,c,_,w){var S=a.getAnchorAlignment(n),z=-(S.horizontalAlign-.5)*s,P=-(S.verticalAlign-.5)*o,O=a.evaluateVariableOffset(n,c);return new a.Point((z/_+O[0])*w,(P/_+O[1])*w)}function xc(n,s,o,c,_,w,S,z,P,O,Z){var K=n.text.placedSymbolArray,W=n.text.dynamicLayoutVertexArray,ie=n.icon.dynamicLayoutVertexArray,ee={};W.clear();for(var ce=0;ce<K.length;ce++){var J=K.get(ce),le=J.hidden||!J.crossTileID||n.allowVerticalPlacement&&!J.placedOrientation?null:c[J.crossTileID];if(le){var de=new a.Point(J.anchorX,J.anchorY),_e=Jt(de,o?z:S),Ie=ci(w.cameraToCenterDistance,_e.signedDistanceFromCamera),Se=_.evaluateSizeForFeature(n.textSizeData,O,J)*Ie/a.ONE_EM;o&&(Se*=n.tilePixelRatio/P);for(var Te=bc(le.anchor,le.width,le.height,le.textOffset,le.textBoxScale,Se),Re=o?Jt(de.add(Te),S).point:_e.point.add(s?Te.rotate(-w.angle):Te),We=n.allowVerticalPlacement&&J.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,Ke=0;Ke<J.numGlyphs;Ke++)a.addDynamicAttributes(W,Re,We);Z&&J.associatedIconIndex>=0&&(ee[J.associatedIconIndex]={shiftedAnchor:Re,angle:We})}else Mr(J.numGlyphs,W)}if(Z){ie.clear();for(var dt=n.icon.placedSymbolArray,zt=0;zt<dt.length;zt++){var Ct=dt.get(zt);if(Ct.hidden)Mr(Ct.numGlyphs,ie);else{var Pt=ee[zt];if(Pt)for(var _i=0;_i<Ct.numGlyphs;_i++)a.addDynamicAttributes(ie,Pt.shiftedAnchor,Pt.angle);else Mr(Ct.numGlyphs,ie)}}n.icon.dynamicLayoutVertexBuffer.updateData(ie)}n.text.dynamicLayoutVertexBuffer.updateData(W)}function wc(n,s,o){return o.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function ko(n,s,o,c,_,w,S,z,P,O,Z,K){for(var W=n.context,ie=W.gl,ee=n.transform,ce=z==="map",J=P==="map",le=ce&&o.layout.get("symbol-placement")!=="point",de=ce&&!J&&!le,_e=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ie=!1,Se=n.depthModeForSublayer(0,H.ReadOnly),Te=o.layout.get("text-variable-anchor"),Re=[],We=0,Ke=c;We<Ke.length;We+=1){var dt=Ke[We],zt=s.getTile(dt),Ct=zt.getBucket(o);if(Ct){var Pt=_?Ct.text:Ct.icon;if(Pt&&Pt.segments.get().length){var _i=Pt.programConfigurations.get(o.id),mt=_||Ct.sdfIcons,Nt=_?Ct.textSizeData:Ct.iconSizeData,Yt=J||ee.pitch!==0,Ft=n.useProgram(wc(mt,_,Ct),_i),Bt=a.evaluateSizeForZoom(Nt,ee.zoom),Xt=void 0,Rt=[0,0],Dt=void 0,Gr=void 0,or=null,vn=void 0;if(_)Dt=zt.glyphAtlasTexture,Gr=ie.LINEAR,Xt=zt.glyphAtlasTexture.size,Ct.iconsInText&&(Rt=zt.imageAtlasTexture.size,or=zt.imageAtlasTexture,vn=Yt||n.options.rotating||n.options.zooming||Nt.kind==="composite"||Nt.kind==="camera"?ie.LINEAR:ie.NEAREST);else{var $r=o.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;Dt=zt.imageAtlasTexture,Gr=mt||n.options.rotating||n.options.zooming||$r||Yt?ie.LINEAR:ie.NEAREST,Xt=zt.imageAtlasTexture.size}var ir=Di(zt,1,n.transform.zoom),yr=Ni(dt.posMatrix,J,ce,n.transform,ir),Kn=bi(dt.posMatrix,J,ce,n.transform,ir),In=Te&&Ct.hasTextData(),eo=o.layout.get("icon-text-fit")!=="none"&&In&&Ct.hasIconData();le&&fa(Ct,dt.posMatrix,n,_,yr,Kn,J,O);var Mn=n.translatePosMatrix(dt.posMatrix,zt,w,S),va=le||_&&Te||eo?da:yr,la=n.translatePosMatrix(Kn,zt,w,S,!0),ks=mt&&o.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Jo={program:Ft,buffers:Pt,uniformValues:mt?Ct.iconsInText?Ks(Nt.kind,Bt,de,J,n,Mn,va,la,Xt,Rt):hs(Nt.kind,Bt,de,J,n,Mn,va,la,_,Xt,!0):qo(Nt.kind,Bt,de,J,n,Mn,va,la,_,Xt),atlasTexture:Dt,atlasTextureIcon:or,atlasInterpolation:Gr,atlasInterpolationIcon:vn,isSDF:mt,hasHalo:ks};if(_e&&Ct.canOverlap){Ie=!0;for(var to=0,Qo=Pt.segments.get();to<Qo.length;to+=1){var Is=Qo[to];Re.push({segments:new a.SegmentVector([Is]),sortKey:Is.sortKey,state:Jo})}}else Re.push({segments:Pt.segments,sortKey:0,state:Jo})}}}Ie&&Re.sort(function(io,Co){return io.sortKey-Co.sortKey});for(var Aa=0,zs=Re;Aa<zs.length;Aa+=1){var Pa=zs[Aa],Zr=Pa.state;if(W.activeTexture.set(ie.TEXTURE0),Zr.atlasTexture.bind(Zr.atlasInterpolation,ie.CLAMP_TO_EDGE),Zr.atlasTextureIcon&&(W.activeTexture.set(ie.TEXTURE1),Zr.atlasTextureIcon&&Zr.atlasTextureIcon.bind(Zr.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),Zr.isSDF){var Ra=Zr.uniformValues;Zr.hasHalo&&(Ra.u_is_halo=1,ds(Zr.buffers,Pa.segments,o,n,Zr.program,Se,Z,K,Ra)),Ra.u_is_halo=0}ds(Zr.buffers,Pa.segments,o,n,Zr.program,Se,Z,K,Zr.uniformValues)}}function ds(n,s,o,c,_,w,S,z,P){var O=c.context;_.draw(O,O.gl.TRIANGLES,w,S,z,fe.disabled,P,o.id,n.layoutVertexBuffer,n.indexBuffer,s,o.paint,c.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Hs(n,s,o,c,_,w,S){var z,P,O,Z,K,W=n.context.gl,ie=o.paint.get("fill-pattern"),ee=ie&&ie.constantOr(1),ce=o.getCrossfadeParameters();S?(P=ee&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",z=W.LINES):(P=ee?"fillPattern":"fill",z=W.TRIANGLES);for(var J=0,le=c;J<le.length;J+=1){var de=le[J],_e=s.getTile(de);if(!ee||_e.patternsLoaded()){var Ie=_e.getBucket(o);if(Ie){var Se=Ie.programConfigurations.get(o.id),Te=n.useProgram(P,Se);ee&&(n.context.activeTexture.set(W.TEXTURE0),_e.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),Se.updatePaintBuffers(ce));var Re=ie.constantOr(null);if(Re&&_e.imageAtlas){var We=_e.imageAtlas,Ke=We.patternPositions[Re.to.toString()],dt=We.patternPositions[Re.from.toString()];Ke&&dt&&Se.setConstantPatternPositions(Ke,dt)}var zt=n.translatePosMatrix(de.posMatrix,_e,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(S){Z=Ie.indexBuffer2,K=Ie.segments2;var Ct=[W.drawingBufferWidth,W.drawingBufferHeight];O=P==="fillOutlinePattern"&&ee?dc(zt,n,ce,_e,Ct):fc(zt,Ct)}else Z=Ie.indexBuffer,K=Ie.segments,O=ee?xo(zt,n,ce,_e):Wa(zt);Te.draw(n.context,z,_,n.stencilModeForClipping(de),w,fe.disabled,O,o.id,Ie.layoutVertexBuffer,Z,K,o.paint,n.transform.zoom,Se)}}}}function Wl(n,s,o,c,_,w,S){for(var z=n.context,P=z.gl,O=o.paint.get("fill-extrusion-pattern"),Z=O.constantOr(1),K=o.getCrossfadeParameters(),W=o.paint.get("fill-extrusion-opacity"),ie=0,ee=c;ie<ee.length;ie+=1){var ce=ee[ie],J=s.getTile(ce),le=J.getBucket(o);if(le){var de=le.programConfigurations.get(o.id),_e=n.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",de);Z&&(n.context.activeTexture.set(P.TEXTURE0),J.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),de.updatePaintBuffers(K));var Ie=O.constantOr(null);if(Ie&&J.imageAtlas){var Se=J.imageAtlas,Te=Se.patternPositions[Ie.to.toString()],Re=Se.patternPositions[Ie.from.toString()];Te&&Re&&de.setConstantPatternPositions(Te,Re)}var We=n.translatePosMatrix(ce.posMatrix,J,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Ke=o.paint.get("fill-extrusion-vertical-gradient"),dt=Z?bo(We,n,Ke,W,ce,K,J):hc(We,n,Ke,W);_e.draw(z,z.gl.TRIANGLES,_,w,S,fe.backCCW,dt,o.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,o.paint,n.transform.zoom,de)}}}function Ws(n,s,o,c,_,w){var S=n.context,z=S.gl,P=s.fbo;if(P){var O=n.useProgram("hillshade");S.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,P.colorAttachment.get());var Z=function(K,W,ie){var ee=ie.paint.get("hillshade-shadow-color"),ce=ie.paint.get("hillshade-highlight-color"),J=ie.paint.get("hillshade-accent-color"),le=ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(le-=K.transform.angle);var de,_e,Ie,Se=!K.options.moving;return{u_matrix:K.transform.calculatePosMatrix(W.tileID.toUnwrapped(),Se),u_image:0,u_latrange:(de=W.tileID,_e=Math.pow(2,de.canonical.z),Ie=de.canonical.y,[new a.MercatorCoordinate(0,Ie/_e).toLngLat().lat,new a.MercatorCoordinate(0,(Ie+1)/_e).toLngLat().lat]),u_light:[ie.paint.get("hillshade-exaggeration"),le],u_shadow:ee,u_highlight:ce,u_accent:J}}(n,s,o);O.draw(S,z.TRIANGLES,c,_,w,fe.disabled,Z,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function Up(n,s,o,c,_,w){var S=n.context,z=S.gl,P=s.dem;if(P&&P.data){var O=P.dim,Z=P.stride,K=P.getPixels();if(S.activeTexture.set(z.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(Z),s.demTexture){var W=s.demTexture;W.update(K,{premultiply:!1}),W.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else s.demTexture=new a.Texture(S,K,z.RGBA,{premultiply:!1}),s.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);S.activeTexture.set(z.TEXTURE0);var ie=s.fbo;if(!ie){var ee=new a.Texture(S,{width:O,height:O,data:null},z.RGBA);ee.bind(z.LINEAR,z.CLAMP_TO_EDGE),(ie=s.fbo=S.createFramebuffer(O,O,!0)).colorAttachment.set(ee.texture)}S.bindFramebuffer.set(ie.framebuffer),S.viewport.set([0,0,O,O]),n.useProgram("hillshadePrepare").draw(S,z.TRIANGLES,c,_,w,fe.disabled,function(ce,J){var le=J.stride,de=a.create();return a.ortho(de,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(de,de,[0,-a.EXTENT,0]),{u_matrix:de,u_image:1,u_dimension:[le,le],u_zoom:ce.overscaledZ,u_unpack:J.getUnpackVector()}}(s.tileID,P),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Xs(n,s,o,c,_){var w=c.paint.get("raster-fade-duration");if(w>0){var S=a.browser.now(),z=(S-n.timeAdded)/w,P=s?(S-s.timeAdded)/w:-1,O=o.getSource(),Z=_.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),K=!s||Math.abs(s.tileID.overscaledZ-Z)>Math.abs(n.tileID.overscaledZ-Z),W=K&&n.refreshedUponExpiration?1:a.clamp(K?z:1-P,0,1);return n.refreshedUponExpiration&&z>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}var Xl=new a.Color(1,0,0,1),Sc=new a.Color(0,1,0,1),Ec=new a.Color(0,0,1,1),Ys=new a.Color(1,0,1,1),Yl=new a.Color(0,1,1,1);function Jl(n,s,o,c){ms(n,0,s+o/2,n.transform.width,o,c)}function Ql(n,s,o,c){ms(n,s-o/2,0,o,n.transform.height,c)}function ms(n,s,o,c,_,w){var S=n.context,z=S.gl;z.enable(z.SCISSOR_TEST),z.scissor(s*a.browser.devicePixelRatio,o*a.browser.devicePixelRatio,c*a.browser.devicePixelRatio,_*a.browser.devicePixelRatio),S.clear({color:w}),z.disable(z.SCISSOR_TEST)}function kc(n,s,o){var c=n.context,_=c.gl,w=o.posMatrix,S=n.useProgram("debug"),z=H.disabled,P=Y.disabled,O=n.colorModeForRenderPass();c.activeTexture.set(_.TEXTURE0),n.emptyTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),S.draw(c,_.LINE_STRIP,z,P,O,fe.disabled,So(w,a.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var Z=s.getTileByID(o.key).latestRawTileData,K=Math.floor((Z&&Z.byteLength||0)/1024),W=s.getTile(o).tileSize,ie=512/Math.min(W,512)*(o.overscaledZ/n.transform.zoom)*.5,ee=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ee+=" => "+o.overscaledZ),function(ce,J){ce.initDebugOverlayCanvas();var le=ce.debugOverlayCanvas,de=ce.context.gl,_e=ce.debugOverlayCanvas.getContext("2d");_e.clearRect(0,0,le.width,le.height),_e.shadowColor="white",_e.shadowBlur=2,_e.lineWidth=1.5,_e.strokeStyle="white",_e.textBaseline="top",_e.font="bold 36px Open Sans, sans-serif",_e.fillText(J,5,5),_e.strokeText(J,5,5),ce.debugOverlayTexture.update(le),ce.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)}(n,ee+" "+K+"kb"),S.draw(c,_.TRIANGLES,z,P,ue.alphaBlended,fe.disabled,So(w,a.Color.transparent,ie),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var Io={symbol:function(n,s,o,c,_){if(n.renderPass==="translucent"){var w=Y.disabled,S=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(z,P,O,Z,K,W,ie){for(var ee=P.transform,ce=K==="map",J=W==="map",le=0,de=z;le<de.length;le+=1){var _e=de[le],Ie=Z.getTile(_e),Se=Ie.getBucket(O);if(Se&&Se.text&&Se.text.segments.get().length){var Te=a.evaluateSizeForZoom(Se.textSizeData,ee.zoom),Re=Di(Ie,1,P.transform.zoom),We=Ni(_e.posMatrix,J,ce,P.transform,Re),Ke=O.layout.get("icon-text-fit")!=="none"&&Se.hasIconData();if(Te){var dt=Math.pow(2,ee.zoom-Ie.tileID.overscaledZ);xc(Se,ce,J,ie,a.symbolSize,ee,We,_e.posMatrix,dt,Te,Ke)}}}}(c,n,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),_),o.paint.get("icon-opacity").constantOr(1)!==0&&ko(n,s,o,c,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),w,S),o.paint.get("text-opacity").constantOr(1)!==0&&ko(n,s,o,c,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),w,S),s.map.showCollisionBoxes&&(Zo(n,s,o,c,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Zo(n,s,o,c,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,o,c){if(n.renderPass==="translucent"){var _=o.paint.get("circle-opacity"),w=o.paint.get("circle-stroke-width"),S=o.paint.get("circle-stroke-opacity"),z=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)!==0||w.constantOr(1)!==0&&S.constantOr(1)!==0){for(var P=n.context,O=P.gl,Z=n.depthModeForSublayer(0,H.ReadOnly),K=Y.disabled,W=n.colorModeForRenderPass(),ie=[],ee=0;ee<c.length;ee++){var ce=c[ee],J=s.getTile(ce),le=J.getBucket(o);if(le){var de=le.programConfigurations.get(o.id),_e={programConfiguration:de,program:n.useProgram("circle",de),layoutVertexBuffer:le.layoutVertexBuffer,indexBuffer:le.indexBuffer,uniformValues:Hl(n,ce,J,o)};if(z)for(var Ie=0,Se=le.segments.get();Ie<Se.length;Ie+=1){var Te=Se[Ie];ie.push({segments:new a.SegmentVector([Te]),sortKey:Te.sortKey,state:_e})}else ie.push({segments:le.segments,sortKey:0,state:_e})}}z&&ie.sort(function(zt,Ct){return zt.sortKey-Ct.sortKey});for(var Re=0,We=ie;Re<We.length;Re+=1){var Ke=We[Re],dt=Ke.state;dt.program.draw(P,O.TRIANGLES,Z,K,W,fe.disabled,dt.uniformValues,o.id,dt.layoutVertexBuffer,dt.indexBuffer,Ke.segments,o.paint,n.transform.zoom,dt.programConfiguration)}}}},heatmap:function(n,s,o,c){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var _=n.context,w=_.gl,S=Y.disabled,z=new ue([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ie,ee,ce){var J=ie.gl;ie.activeTexture.set(J.TEXTURE1),ie.viewport.set([0,0,ee.width/4,ee.height/4]);var le=ce.heatmapFbo;if(le)J.bindTexture(J.TEXTURE_2D,le.colorAttachment.get()),ie.bindFramebuffer.set(le.framebuffer);else{var de=J.createTexture();J.bindTexture(J.TEXTURE_2D,de),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),le=ce.heatmapFbo=ie.createFramebuffer(ee.width/4,ee.height/4,!1),function(_e,Ie,Se,Te){var Re=_e.gl;Re.texImage2D(Re.TEXTURE_2D,0,Re.RGBA,Ie.width/4,Ie.height/4,0,Re.RGBA,_e.extRenderToTextureHalfFloat?_e.extTextureHalfFloat.HALF_FLOAT_OES:Re.UNSIGNED_BYTE,null),Te.colorAttachment.set(Se)}(ie,ee,de,le)}})(_,n,o),_.clear({color:a.Color.transparent});for(var P=0;P<c.length;P++){var O=c[P];if(!s.hasRenderableParent(O)){var Z=s.getTile(O),K=Z.getBucket(o);if(K){var W=K.programConfigurations.get(o.id);n.useProgram("heatmap",W).draw(_,w.TRIANGLES,H.disabled,S,z,fe.disabled,gc(O.posMatrix,Z,n.transform.zoom,o.paint.get("heatmap-intensity")),o.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,o.paint,n.transform.zoom,W)}}}_.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(ie,ee){var ce=ie.context,J=ce.gl,le=ee.heatmapFbo;if(le){ce.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,le.colorAttachment.get()),ce.activeTexture.set(J.TEXTURE1);var de=ee.colorRampTexture;de||(de=ee.colorRampTexture=new a.Texture(ce,ee.colorRamp,J.RGBA)),de.bind(J.LINEAR,J.CLAMP_TO_EDGE),ie.useProgram("heatmapTexture").draw(ce,J.TRIANGLES,H.disabled,Y.disabled,ie.colorModeForRenderPass(),fe.disabled,function(_e,Ie,Se,Te){var Re=a.create();a.ortho(Re,0,_e.width,_e.height,0,0,1);var We=_e.context.gl;return{u_matrix:Re,u_world:[We.drawingBufferWidth,We.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ie.paint.get("heatmap-opacity")}}(ie,ee),ee.id,ie.viewportBuffer,ie.quadTriangleIndexBuffer,ie.viewportSegments,ee.paint,ie.transform.zoom)}}(n,o))},line:function(n,s,o,c){if(n.renderPass==="translucent"){var _=o.paint.get("line-opacity"),w=o.paint.get("line-width");if(_.constantOr(1)!==0&&w.constantOr(1)!==0)for(var S=n.depthModeForSublayer(0,H.ReadOnly),z=n.colorModeForRenderPass(),P=o.paint.get("line-dasharray"),O=o.paint.get("line-pattern"),Z=O.constantOr(1),K=o.paint.get("line-gradient"),W=o.getCrossfadeParameters(),ie=Z?"linePattern":P?"lineSDF":K?"lineGradient":"line",ee=n.context,ce=ee.gl,J=!0,le=0,de=c;le<de.length;le+=1){var _e=de[le],Ie=s.getTile(_e);if(!Z||Ie.patternsLoaded()){var Se=Ie.getBucket(o);if(Se){var Te=Se.programConfigurations.get(o.id),Re=n.context.program.get(),We=n.useProgram(ie,Te),Ke=J||We.program!==Re,dt=O.constantOr(null);if(dt&&Ie.imageAtlas){var zt=Ie.imageAtlas,Ct=zt.patternPositions[dt.to.toString()],Pt=zt.patternPositions[dt.from.toString()];Ct&&Pt&&Te.setConstantPatternPositions(Ct,Pt)}var _i=Z?Gs(n,Ie,o,W):P?Op(n,Ie,o,P,W):K?Ui(n,Ie,o,Se.lineClipsArray.length):ps(n,Ie,o);if(Z)ee.activeTexture.set(ce.TEXTURE0),Ie.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Te.updatePaintBuffers(W);else if(P&&(Ke||n.lineAtlas.dirty))ee.activeTexture.set(ce.TEXTURE0),n.lineAtlas.bind(ee);else if(K){var mt=Se.gradients[o.id],Nt=mt.texture;if(o.gradientVersion!==mt.version){var Yt=256;if(o.stepInterpolant){var Ft=s.getSource().maxzoom,Bt=_e.canonical.z===Ft?Math.ceil(1<<n.transform.maxZoom-_e.canonical.z):1;Yt=a.clamp(a.nextPowerOfTwo(Se.maxLineLength/a.EXTENT*1024*Bt),256,ee.maxTextureSize)}mt.gradient=a.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Yt,image:mt.gradient||void 0,clips:Se.lineClipsArray}),mt.texture?mt.texture.update(mt.gradient):mt.texture=new a.Texture(ee,mt.gradient,ce.RGBA),mt.version=o.gradientVersion,Nt=mt.texture}ee.activeTexture.set(ce.TEXTURE0),Nt.bind(o.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}We.draw(ee,ce.TRIANGLES,S,n.stencilModeForClipping(_e),z,fe.disabled,_i,o.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,o.paint,n.transform.zoom,Te,Se.layoutVertexBuffer2),J=!1}}}}},fill:function(n,s,o,c){var _=o.paint.get("fill-color"),w=o.paint.get("fill-opacity");if(w.constantOr(1)!==0){var S=n.colorModeForRenderPass(),z=o.paint.get("fill-pattern"),P=n.opaquePassEnabledForLayer()&&!z.constantOr(1)&&_.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===P){var O=n.depthModeForSublayer(1,n.renderPass==="opaque"?H.ReadWrite:H.ReadOnly);Hs(n,s,o,c,O,S,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var Z=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,H.ReadOnly);Hs(n,s,o,c,Z,S,!0)}}},"fill-extrusion":function(n,s,o,c){var _=o.paint.get("fill-extrusion-opacity");if(_!==0&&n.renderPass==="translucent"){var w=new H(n.context.gl.LEQUAL,H.ReadWrite,n.depthRangeFor3D);if(_!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))Wl(n,s,o,c,w,Y.disabled,ue.disabled),Wl(n,s,o,c,w,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var S=n.colorModeForRenderPass();Wl(n,s,o,c,w,Y.disabled,S)}}},hillshade:function(n,s,o,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var _=n.context,w=n.depthModeForSublayer(0,H.ReadOnly),S=n.colorModeForRenderPass(),z=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],P=z[0],O=0,Z=z[1];O<Z.length;O+=1){var K=Z[O],W=s.getTile(K);W.needsHillshadePrepare&&n.renderPass==="offscreen"?Up(n,W,o,w,Y.disabled,S):n.renderPass==="translucent"&&Ws(n,W,o,w,P[K.overscaledZ],S)}_.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,o,c){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&c.length)for(var _=n.context,w=_.gl,S=s.getSource(),z=n.useProgram("raster"),P=n.colorModeForRenderPass(),O=S instanceof rt?[{},c]:n.stencilConfigForOverlap(c),Z=O[0],K=O[1],W=K[K.length-1].overscaledZ,ie=!n.options.moving,ee=0,ce=K;ee<ce.length;ee+=1){var J=ce[ee],le=n.depthModeForSublayer(J.overscaledZ-W,o.paint.get("raster-opacity")===1?H.ReadWrite:H.ReadOnly,w.LESS),de=s.getTile(J),_e=n.transform.calculatePosMatrix(J.toUnwrapped(),ie);de.registerFadeDuration(o.paint.get("raster-fade-duration"));var Ie=s.findLoadedParent(J,0),Se=Xs(de,Ie,s,o,n.transform),Te=void 0,Re=void 0,We=o.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;_.activeTexture.set(w.TEXTURE0),de.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),_.activeTexture.set(w.TEXTURE1),Ie?(Ie.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),Te=Math.pow(2,Ie.tileID.overscaledZ-de.tileID.overscaledZ),Re=[de.tileID.canonical.x*Te%1,de.tileID.canonical.y*Te%1]):de.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var Ke=Np(_e,Re||[0,0],Te||1,Se,o);S instanceof rt?z.draw(_,w.TRIANGLES,le,Y.disabled,P,fe.disabled,Ke,o.id,S.boundsBuffer,n.quadTriangleIndexBuffer,S.boundsSegments):z.draw(_,w.TRIANGLES,le,Z[J.overscaledZ],P,fe.disabled,Ke,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,o){var c=o.paint.get("background-color"),_=o.paint.get("background-opacity");if(_!==0){var w=n.context,S=w.gl,z=n.transform,P=z.tileSize,O=o.paint.get("background-pattern");if(!n.isPatternMissing(O)){var Z=!O&&c.a===1&&_===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===Z){var K=Y.disabled,W=n.depthModeForSublayer(0,Z==="opaque"?H.ReadWrite:H.ReadOnly),ie=n.colorModeForRenderPass(),ee=n.useProgram(O?"backgroundPattern":"background"),ce=z.coveringTiles({tileSize:P});O&&(w.activeTexture.set(S.TEXTURE0),n.imageManager.bind(n.context));for(var J=o.getCrossfadeParameters(),le=0,de=ce;le<de.length;le+=1){var _e=de[le],Ie=n.transform.calculatePosMatrix(_e.toUnwrapped()),Se=O?Go(Ie,_,n,O,{tileID:_e,tileSize:P},J):fs(Ie,_,c);ee.draw(w,S.TRIANGLES,W,K,ie,fe.disabled,Se,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,o){for(var c=0;c<o.length;c++)kc(n,s,o[c])},custom:function(n,s,o){var c=n.context,_=o.implementation;if(n.renderPass==="offscreen"){var w=_.prerender;w&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),w.call(_,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(Y.disabled);var S=_.renderingMode==="3d"?new H(n.context.gl.LEQUAL,H.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,H.ReadOnly);c.setDepthMode(S),_.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},Yi=function(n,s){this.context=new V(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=re.maxUnderzooming+re.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ge,this.gpuTimers={}};Yi.prototype.resize=function(n,s){if(this.width=n*a.browser.devicePixelRatio,this.height=s*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,c=this.style._order;o<c.length;o+=1)this.style._layers[c[o]].resize()},Yi.prototype.setup=function(){var n=this.context,s=new a.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(a.EXTENT,0),s.emplaceBack(0,a.EXTENT),s.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,kr.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var o=new a.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(a.EXTENT,0),o.emplaceBack(0,a.EXTENT),o.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=n.createVertexBuffer(o,kr.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var c=new a.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(a.EXTENT,0,a.EXTENT,0),c.emplaceBack(0,a.EXTENT,0,a.EXTENT),c.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,Pe.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var _=new a.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(_,kr.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var w=new a.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);var S=new a.StructArrayLayout3ui6;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(S),this.emptyTexture=new a.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var z=this.context.gl;this.stencilClearMode=new Y({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)},Yi.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=a.create();a.ortho(o,0,this.width,this.height,0,0,1),a.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,H.disabled,this.stencilClearMode,ue.disabled,fe.disabled,Eo(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Yi.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var o=this.context,c=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(ue.disabled),o.setDepthMode(H.disabled);var _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,S=s;w<S.length;w+=1){var z=S[w],P=this._tileClippingMaskIDs[z.key]=this.nextStencilID++;_.draw(o,c.TRIANGLES,H.disabled,new Y({func:c.ALWAYS,mask:0},P,255,c.KEEP,c.KEEP,c.REPLACE),ue.disabled,fe.disabled,Eo(z.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Yi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new Y({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Yi.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new Y({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Yi.prototype.stencilConfigForOverlap=function(n){var s,o=this.context.gl,c=n.sort(function(P,O){return O.overscaledZ-P.overscaledZ}),_=c[c.length-1].overscaledZ,w=c[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var S={},z=0;z<w;z++)S[z+_]=new Y({func:o.GEQUAL,mask:255},z+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=w,[S,c]}return[(s={},s[_]=Y.disabled,s),c]},Yi.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ue([n.CONSTANT_COLOR,n.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ue.unblended:ue.alphaBlended},Yi.prototype.depthModeForSublayer=function(n,s,o){if(!this.opaquePassEnabledForLayer())return H.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new H(o||this.context.gl.LEQUAL,s,[c,c])},Yi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Yi.prototype.render=function(n,s){var o=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var c=this.style._order,_=this.style.sourceCaches;for(var w in _){var S=_[w];S.used&&S.prepare(this.context)}var z,P,O={},Z={},K={};for(var W in _){var ie=_[W];O[W]=ie.getVisibleCoordinates(),Z[W]=O[W].slice().reverse(),K[W]=ie.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ee=0;ee<c.length;ee++)if(this.style._layers[c[ee]].is3D()){this.opaquePassCutoff=ee;break}this.renderPass="offscreen";for(var ce=0,J=c;ce<J.length;ce+=1){var le=this.style._layers[J[ce]];if(le.hasOffscreenPass()&&!le.isHidden(this.transform.zoom)){var de=Z[le.source];(le.type==="custom"||de.length)&&this.renderLayer(this,_[le.source],le,de)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var _e=this.style._layers[c[this.currentLayer]],Ie=_[_e.source],Se=O[_e.source];this._renderTileClippingMasks(_e,Se),this.renderLayer(this,Ie,_e,Se)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Te=this.style._layers[c[this.currentLayer]],Re=_[Te.source],We=(Te.type==="symbol"?K:Z)[Te.source];this._renderTileClippingMasks(Te,O[Te.source]),this.renderLayer(this,Re,Te,We)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(Ke){Ke.source&&!Ke.isHidden(o.transform.zoom)&&(Ke.source!==(P&&P.id)&&(P=o.style.sourceCaches[Ke.source]),(!z||z.getSource().maxzoom<P.getSource().maxzoom)&&(z=P))}),z&&Io.debug(this,z,z.getVisibleCoordinates())),this.options.showPadding&&function(Ke){var dt=Ke.transform.padding;Jl(Ke,Ke.transform.height-(dt.top||0),3,Xl),Jl(Ke,dt.bottom||0,3,Sc),Ql(Ke,dt.left||0,3,Ec),Ql(Ke,Ke.transform.width-(dt.right||0),3,Ys);var zt=Ke.transform.centerPoint;(function(Ct,Pt,_i,mt){ms(Ct,Pt-1,_i-10,2,20,mt),ms(Ct,Pt-10,_i-1,20,2,mt)})(Ke,zt.x,Ke.transform.height-zt.y,Yl)}(this),this.context.setDefault()},Yi.prototype.renderLayer=function(n,s,o,c){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||c.length)&&(this.id=o.id,this.gpuTimingStart(o),Io[o.type](n,s,o,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Yi.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[n.id];o||(o=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Yi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Yi.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Yi.prototype.queryGpuTimers=function(n){var s={};for(var o in n){var c=n[o],_=this.context.extTimerQuery,w=_.getQueryObjectEXT(c.query,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(c.query),s[o]=w}return s},Yi.prototype.translatePosMatrix=function(n,s,o,c,_){if(!o[0]&&!o[1])return n;var w=_?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(w){var S=Math.sin(w),z=Math.cos(w);o=[o[0]*z-o[1]*S,o[0]*S+o[1]*z]}var P=[_?o[0]:Di(s,o[0],this.transform.zoom),_?o[1]:Di(s,o[1],this.transform.zoom),0],O=new Float32Array(16);return a.translate(O,n,P),O},Yi.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Yi.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Yi.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),o=this.imageManager.getPattern(n.to.toString());return!s||!o},Yi.prototype.useProgram=function(n,s){this.cache=this.cache||{};var o=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new cc(this.context,n,Fp[n],s,vc[n],this._showOverdrawInspector)),this.cache[o]},Yi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Yi.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Yi.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Yi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Js=function(n,s){this.points=n,this.planes=s};Js.fromInvProjectionMatrix=function(n,s,o){var c=Math.pow(2,o),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(S){return a.transformMat4([],S,n)}).map(function(S){return a.scale$1([],S,1/S[3]/s*c)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(S){var z=a.sub([],_[S[0]],_[S[1]]),P=a.sub([],_[S[2]],_[S[1]]),O=a.normalize([],a.cross([],z,P)),Z=-a.dot(O,_[S[1]]);return O.concat(Z)});return new Js(_,w)};var zo=function(n,s){this.min=n,this.max=s,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};zo.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],o=a.clone$2(this.min),c=a.clone$2(this.max),_=0;_<s.length;_++)o[_]=s[_]?this.min[_]:this.center[_],c[_]=s[_]?this.center[_]:this.max[_];return c[2]=this.max[2],new zo(o,c)},zo.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},zo.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},zo.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,c=0;c<n.planes.length;c++){for(var _=n.planes[c],w=0,S=0;S<s.length;S++)w+=a.dot$1(_,s[S])>=0;if(w===0)return 0;w!==s.length&&(o=!1)}if(o)return 2;for(var z=0;z<3;z++){for(var P=Number.MAX_VALUE,O=-Number.MAX_VALUE,Z=0;Z<n.points.length;Z++){var K=n.points[Z][z]-this.min[z];P=Math.min(P,K),O=Math.max(O,K)}if(O<0||P>this.max[z]-this.min[z])return 0}return 1};var Xa=function(n,s,o,c){if(n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=o,this.right=c};Xa.prototype.interpolate=function(n,s,o){return s.top!=null&&n.top!=null&&(this.top=a.number(n.top,s.top,o)),s.bottom!=null&&n.bottom!=null&&(this.bottom=a.number(n.bottom,s.bottom,o)),s.left!=null&&n.left!=null&&(this.left=a.number(n.left,s.left,o)),s.right!=null&&n.right!=null&&(this.right=a.number(n.right,s.right,o)),this},Xa.prototype.getCenter=function(n,s){var o=a.clamp((this.left+n-this.right)/2,0,n),c=a.clamp((this.top+s-this.bottom)/2,0,s);return new a.Point(o,c)},Xa.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},Xa.prototype.clone=function(){return new Xa(this.top,this.bottom,this.left,this.right)},Xa.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var pi=function(n,s,o,c,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||_,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=o??0,this._maxPitch=c??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xa,this._posMatrixCache={},this._alignedPosMatrixCache={}},Vi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};pi.prototype.clone=function(){var n=new pi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},Vi.minZoom.get=function(){return this._minZoom},Vi.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},Vi.maxZoom.get=function(){return this._maxZoom},Vi.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},Vi.minPitch.get=function(){return this._minPitch},Vi.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},Vi.maxPitch.get=function(){return this._maxPitch},Vi.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},Vi.renderWorldCopies.get=function(){return this._renderWorldCopies},Vi.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},Vi.worldSize.get=function(){return this.tileSize*this.scale},Vi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Vi.size.get=function(){return new a.Point(this.width,this.height)},Vi.bearing.get=function(){return-this.angle/Math.PI*180},Vi.bearing.set=function(n){var s=-a.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Vi.pitch.get=function(){return this._pitch/Math.PI*180},Vi.pitch.set=function(n){var s=a.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Vi.fov.get=function(){return this._fov/Math.PI*180},Vi.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},Vi.zoom.get=function(){return this._zoom},Vi.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Vi.center.get=function(){return this._center},Vi.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},Vi.padding.get=function(){return this._edgeInsets.toJSON()},Vi.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},Vi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},pi.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},pi.prototype.interpolatePadding=function(n,s,o){this._unmodified=!1,this._edgeInsets.interpolate(n,s,o),this._constrain(),this._calcMatrices()},pi.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},pi.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new a.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new a.Point(0,0)),c=this.pointCoordinate(new a.Point(this.width,0)),_=this.pointCoordinate(new a.Point(this.width,this.height)),w=this.pointCoordinate(new a.Point(0,this.height)),S=Math.floor(Math.min(o.x,c.x,_.x,w.x)),z=Math.floor(Math.max(o.x,c.x,_.x,w.x)),P=S-1;P<=z+1;P++)P!==0&&s.push(new a.UnwrappedTileID(P,n));return s},pi.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),o=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=a.MercatorCoordinate.fromLngLat(this.center),_=Math.pow(2,s),w=[_*c.x,_*c.y,0],S=Js.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),z=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(z=s);var P=function(Ke){return{aabb:new zo([Ke*_,0,0],[(Ke+1)*_,_,0]),zoom:0,x:0,y:0,wrap:Ke,fullyVisible:!1}},O=[],Z=[],K=s,W=n.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var ie=1;ie<=3;ie++)O.push(P(-ie)),O.push(P(ie));for(O.push(P(0));O.length>0;){var ee=O.pop(),ce=ee.x,J=ee.y,le=ee.fullyVisible;if(!le){var de=ee.aabb.intersects(S);if(de===0)continue;le=de===2}var _e=ee.aabb.distanceX(w),Ie=ee.aabb.distanceY(w),Se=Math.max(Math.abs(_e),Math.abs(Ie));if(ee.zoom===K||Se>3+(1<<K-ee.zoom)-2&&ee.zoom>=z)Z.push({tileID:new a.OverscaledTileID(ee.zoom===K?W:ee.zoom,ee.wrap,ee.zoom,ce,J),distanceSq:a.sqrLen([w[0]-.5-ce,w[1]-.5-J])});else for(var Te=0;Te<4;Te++){var Re=(ce<<1)+Te%2,We=(J<<1)+(Te>>1);O.push({aabb:ee.aabb.quadrant(Te),zoom:ee.zoom+1,x:Re,y:We,wrap:ee.wrap,fullyVisible:le})}}return Z.sort(function(Ke,dt){return Ke.distanceSq-dt.distanceSq}).map(function(Ke){return Ke.tileID})},pi.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},Vi.unmodified.get=function(){return this._unmodified},pi.prototype.zoomScale=function(n){return Math.pow(2,n)},pi.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},pi.prototype.project=function(n){var s=a.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(n.lng)*this.worldSize,a.mercatorYfromLat(s)*this.worldSize)},pi.prototype.unproject=function(n){return new a.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},Vi.point.get=function(){return this.project(this.center)},pi.prototype.setLocationAtPoint=function(n,s){var o=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(n),w=new a.MercatorCoordinate(_.x-(o.x-c.x),_.y-(o.y-c.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},pi.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},pi.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},pi.prototype.locationCoordinate=function(n){return a.MercatorCoordinate.fromLngLat(n)},pi.prototype.coordinateLocation=function(n){return n.toLngLat()},pi.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],o=[n.x,n.y,1,1];a.transformMat4(s,s,this.pixelMatrixInverse),a.transformMat4(o,o,this.pixelMatrixInverse);var c=s[3],_=o[3],w=s[1]/c,S=o[1]/_,z=s[2]/c,P=o[2]/_,O=z===P?0:(0-z)/(P-z);return new a.MercatorCoordinate(a.number(s[0]/c,o[0]/_,O)/this.worldSize,a.number(w,S,O)/this.worldSize)},pi.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix),new a.Point(s[0]/s[3],s[1]/s[3])},pi.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},pi.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},pi.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},pi.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var o=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[o])return c[o];var _=n.canonical,w=this.worldSize/this.zoomScale(_.z),S=_.x+Math.pow(2,_.z)*n.wrap,z=a.identity(new Float64Array(16));return a.translate(z,z,[S*w,_.y*w,0]),a.scale(z,z,[w/a.EXTENT,w/a.EXTENT,1]),a.multiply(z,s?this.alignedProjMatrix:this.projMatrix,z),c[o]=new Float32Array(z),c[o]},pi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},pi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,o,c,_=-90,w=90,S=-180,z=180,P=this.size,O=this._unmodified;if(this.latRange){var Z=this.latRange;_=a.mercatorYfromLat(Z[1])*this.worldSize,n=(w=a.mercatorYfromLat(Z[0])*this.worldSize)-_<P.y?P.y/(w-_):0}if(this.lngRange){var K=this.lngRange;S=a.mercatorXfromLng(K[0])*this.worldSize,s=(z=a.mercatorXfromLng(K[1])*this.worldSize)-S<P.x?P.x/(z-S):0}var W=this.point,ie=Math.max(s||0,n||0);if(ie)return this.center=this.unproject(new a.Point(s?(z+S)/2:W.x,n?(w+_)/2:W.y)),this.zoom+=this.scaleZoom(ie),this._unmodified=O,void(this._constraining=!1);if(this.latRange){var ee=W.y,ce=P.y/2;ee-ce<_&&(c=_+ce),ee+ce>w&&(c=w-ce)}if(this.lngRange){var J=W.x,le=P.x/2;J-le<S&&(o=S+le),J+le>z&&(o=z-le)}o===void 0&&c===void 0||(this.center=this.unproject(new a.Point(o!==void 0?o:W.x,c!==void 0?c:W.y))),this._unmodified=O,this._constraining=!1}},pi.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+n.y/this.height),c=Math.sin(o)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-s-o,.01,Math.PI-.01)),_=this.point,w=_.x,S=_.y,z=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),P=this.height/50,O=new Float64Array(16);a.perspective(O,this._fov,this.width/this.height,P,z),O[8]=2*-n.x/this.width,O[9]=2*n.y/this.height,a.scale(O,O,[1,-1,1]),a.translate(O,O,[0,0,-this.cameraToCenterDistance]),a.rotateX(O,O,this._pitch),a.rotateZ(O,O,this.angle),a.translate(O,O,[-w,-S,0]),this.mercatorMatrix=a.scale([],O,[this.worldSize,this.worldSize,this.worldSize]),a.scale(O,O,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=O,this.invProjMatrix=a.invert([],this.projMatrix);var Z=this.width%2/2,K=this.height%2/2,W=Math.cos(this.angle),ie=Math.sin(this.angle),ee=w-Math.round(w)+W*Z+ie*K,ce=S-Math.round(S)+W*K+ie*Z,J=new Float64Array(O);if(a.translate(J,J,[ee>.5?ee-1:ee,ce>.5?ce-1:ce,0]),this.alignedProjMatrix=J,O=a.create(),a.scale(O,O,[this.width/2,-this.height/2,1]),a.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=a.create(),a.scale(O,O,[1,-1,1]),a.translate(O,O,[-1,-1,0]),a.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(O=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=O,this._posMatrixCache={},this._alignedPosMatrixCache={}}},pi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new a.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},pi.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,n))},pi.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var o=s.x,c=s.y,_=s.x,w=s.y,S=0,z=n;S<z.length;S+=1){var P=z[S];o=Math.min(o,P.x),c=Math.min(c,P.y),_=Math.max(_,P.x),w=Math.max(w,P.y)}return[new a.Point(o,c),new a.Point(_,c),new a.Point(_,w),new a.Point(o,w),new a.Point(o,c)]},Object.defineProperties(pi.prototype,Vi);var ta=function(n){var s,o,c,_;this._hashName=n&&encodeURIComponent(n),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,c=null,_=function(){c=null,o&&(s(),c=setTimeout(_,300),o=!1)},function(){return o=!0,c||_(),c})};ta.prototype.addTo=function(n){return this._map=n,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ta.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ta.prototype.getHashString=function(n){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,c=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,c),w=Math.round(s.lng*_)/_,S=Math.round(s.lat*_)/_,z=this._map.getBearing(),P=this._map.getPitch(),O="";if(O+=n?"/"+w+"/"+S+"/"+o:o+"/"+S+"/"+w,(z||P)&&(O+="/"+Math.round(10*z)/10),P&&(O+="/"+Math.round(P)),this._hashName){var Z=this._hashName,K=!1,W=a.window.location.hash.slice(1).split("&").map(function(ie){var ee=ie.split("=")[0];return ee===Z?(K=!0,ee+"="+O):ie}).filter(function(ie){return ie});return K||W.push(Z+"="+O),"#"+W.join("&")}return"#"+O},ta.prototype._getCurrentHash=function(){var n,s=this,o=a.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):o.split("/")},ta.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},ta.prototype._updateHashUnthrottled=function(){var n=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,n)}catch{}};var gs={linearity:.3,easing:a.bezier(0,0,.3,1)},Ko=a.extend({deceleration:2500,maxSpeed:1400},gs),ys=a.extend({deceleration:20,maxSpeed:1400},gs),Vp=a.extend({deceleration:1e3,maxSpeed:360},gs),jp=a.extend({deceleration:1e3,maxSpeed:90},gs),_s=function(n){this._map=n,this.clear()};function vs(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function Ma(n,s,o){var c=o.maxSpeed,_=o.linearity,w=o.deceleration,S=a.clamp(n*_/(s/1e3),-c,c),z=Math.abs(S)/(w*_);return{easing:o.easing,duration:1e3*z,amount:S*(z/2)}}_s.prototype.clear=function(){this._inertiaBuffer=[]},_s.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:n})},_s.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=a.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},_s.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},o=0,c=this._inertiaBuffer;o<c.length;o+=1){var _=c[o].settings;s.zoom+=_.zoomDelta||0,s.bearing+=_.bearingDelta||0,s.pitch+=_.pitchDelta||0,_.panDelta&&s.pan._add(_.panDelta),_.around&&(s.around=_.around),_.pinchAround&&(s.pinchAround=_.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(s.pan.mag()){var z=Ma(s.pan.mag(),w,a.extend({},Ko,n||{}));S.offset=s.pan.mult(z.amount/s.pan.mag()),S.center=this._map.transform.center,vs(S,z)}if(s.zoom){var P=Ma(s.zoom,w,ys);S.zoom=this._map.transform.zoom+P.amount,vs(S,P)}if(s.bearing){var O=Ma(s.bearing,w,Vp);S.bearing=this._map.transform.bearing+a.clamp(O.amount,-179,179),vs(S,O)}if(s.pitch){var Z=Ma(s.pitch,w,jp);S.pitch=this._map.transform.pitch+Z.amount,vs(S,Z)}if(S.zoom||S.bearing){var K=s.pinchAround===void 0?s.around:s.pinchAround;S.around=K?this._map.unproject(K):this._map.getCenter()}return this.clear(),a.extend(S,{noMoveStart:!0})}};var Rr=function(n){function s(c,_,w,S){S===void 0&&(S={});var z=I.mousePos(_.getCanvasContainer(),w),P=_.unproject(z);n.call(this,c,a.extend({point:z,lngLat:P,originalEvent:w},S)),this._defaultPrevented=!1,this.target=_}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),bs=function(n){function s(c,_,w){var S=c==="touchend"?w.changedTouches:w.touches,z=I.touchPos(_.getCanvasContainer(),S),P=z.map(function(K){return _.unproject(K)}),O=z.reduce(function(K,W,ie,ee){return K.add(W.div(ee.length))},new a.Point(0,0)),Z=_.unproject(O);n.call(this,c,{points:z,point:O,lngLats:P,lngLat:Z,originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),Ic=function(n){function s(c,_,w){n.call(this,c,{originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),Ir=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};Ir.prototype.reset=function(){delete this._mousedownPos},Ir.prototype.wheel=function(n){return this._firePreventable(new Ic(n.type,this._map,n))},Ir.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new Rr(n.type,this._map,n))},Ir.prototype.mouseup=function(n){this._map.fire(new Rr(n.type,this._map,n))},Ir.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Rr(n.type,this._map,n))},Ir.prototype.dblclick=function(n){return this._firePreventable(new Rr(n.type,this._map,n))},Ir.prototype.mouseover=function(n){this._map.fire(new Rr(n.type,this._map,n))},Ir.prototype.mouseout=function(n){this._map.fire(new Rr(n.type,this._map,n))},Ir.prototype.touchstart=function(n){return this._firePreventable(new bs(n.type,this._map,n))},Ir.prototype.touchmove=function(n){this._map.fire(new bs(n.type,this._map,n))},Ir.prototype.touchend=function(n){this._map.fire(new bs(n.type,this._map,n))},Ir.prototype.touchcancel=function(n){this._map.fire(new bs(n.type,this._map,n))},Ir.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},Ir.prototype.isEnabled=function(){return!0},Ir.prototype.isActive=function(){return!1},Ir.prototype.enable=function(){},Ir.prototype.disable=function(){};var yt=function(n){this._map=n};yt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},yt.prototype.mousemove=function(n){this._map.fire(new Rr(n.type,this._map,n))},yt.prototype.mousedown=function(){this._delayContextMenu=!0},yt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},yt.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Rr(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},yt.prototype.isEnabled=function(){return!0},yt.prototype.isActive=function(){return!1},yt.prototype.enable=function(){},yt.prototype.disable=function(){};var Vn=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Qs(n,s){for(var o={},c=0;c<n.length;c++)o[n[c].identifier]=s[c];return o}Vn.prototype.isEnabled=function(){return!!this._enabled},Vn.prototype.isActive=function(){return!!this._active},Vn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vn.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(I.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},Vn.prototype.mousemoveWindow=function(n,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=o,this._box||(this._box=I.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var _=Math.min(c.x,o.x),w=Math.max(c.x,o.x),S=Math.min(c.y,o.y),z=Math.max(c.y,o.y);I.setTransform(this._box,"translate("+_+"px,"+S+"px)"),this._box.style.width=w-_+"px",this._box.style.height=z-S+"px"}}},Vn.prototype.mouseupWindow=function(n,s){var o=this;if(this._active&&n.button===0){var c=this._startPos,_=s;if(this.reset(),I.suppressClick(),c.x!==_.x||c.y!==_.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(w){return w.fitScreenCoordinates(c,_,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},Vn.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},Vn.prototype.blur=function(){this.reset()},Vn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos},Vn.prototype._fireEvent=function(n,s){return this._map.fire(new a.Event(n,{originalEvent:s}))};var Ho=function(n){this.reset(),this.numTouches=n.numTouches};Ho.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ho.prototype.touchstart=function(n,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(c){for(var _=new a.Point(0,0),w=0,S=c;w<S.length;w+=1)_._add(S[w]);return _.div(c.length)}(s),this.touches=Qs(o,s)))},Ho.prototype.touchmove=function(n,s,o){if(!this.aborted&&this.centroid){var c=Qs(o,s);for(var _ in this.touches){var w=c[_];(!w||w.dist(this.touches[_])>30)&&(this.aborted=!0)}}},Ho.prototype.touchend=function(n,s,o){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var ma=function(n){this.singleTap=new Ho(n),this.numTaps=n.numTaps,this.reset()};ma.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ma.prototype.touchstart=function(n,s,o){this.singleTap.touchstart(n,s,o)},ma.prototype.touchmove=function(n,s,o){this.singleTap.touchmove(n,s,o)},ma.prototype.touchend=function(n,s,o){var c=this.singleTap.touchend(n,s,o);if(c){var _=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(c)<30;if(_&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var jn=function(){this._zoomIn=new ma({numTouches:1,numTaps:2}),this._zoomOut=new ma({numTouches:2,numTaps:1}),this.reset()};jn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},jn.prototype.touchstart=function(n,s,o){this._zoomIn.touchstart(n,s,o),this._zoomOut.touchstart(n,s,o)},jn.prototype.touchmove=function(n,s,o){this._zoomIn.touchmove(n,s,o),this._zoomOut.touchmove(n,s,o)},jn.prototype.touchend=function(n,s,o){var c=this,_=this._zoomIn.touchend(n,s,o),w=this._zoomOut.touchend(n,s,o);return _?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(_)},{originalEvent:n})}}):w?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(S){return S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(w)},{originalEvent:n})}}):void 0},jn.prototype.touchcancel=function(){this.reset()},jn.prototype.enable=function(){this._enabled=!0},jn.prototype.disable=function(){this._enabled=!1,this.reset()},jn.prototype.isEnabled=function(){return this._enabled},jn.prototype.isActive=function(){return this._active};var $l={0:1,2:2},it=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};it.prototype.blur=function(){this.reset()},it.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},it.prototype._correctButton=function(n,s){return!1},it.prototype._move=function(n,s){return{}},it.prototype.mousedown=function(n,s){if(!this._lastPoint){var o=I.mouseButton(n);this._correctButton(n,o)&&(this._lastPoint=s,this._eventButton=o)}},it.prototype.mousemoveWindow=function(n,s){var o=this._lastPoint;if(o){if(n.preventDefault(),function(c,_){var w=$l[_];return c.buttons===void 0||(c.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},it.prototype.mouseupWindow=function(n){this._lastPoint&&I.mouseButton(n)===this._eventButton&&(this._moved&&I.suppressClick(),this.reset())},it.prototype.enable=function(){this._enabled=!0},it.prototype.disable=function(){this._enabled=!1,this.reset()},it.prototype.isEnabled=function(){return this._enabled},it.prototype.isActive=function(){return this._active};var eu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(o,c){n.prototype.mousedown.call(this,o,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,c){return c===0&&!o.ctrlKey},s.prototype._move=function(o,c){return{around:c,panDelta:c.sub(o)}},s}(it),$s=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var _=.8*(c.x-o.x);if(_)return this._active=!0,{bearingDelta:_}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(it),tu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var _=-.5*(c.y-o.y);if(_)return this._active=!0,{pitchDelta:_}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(it),aa=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};aa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},aa.prototype.touchstart=function(n,s,o){return this._calculateTransform(n,s,o)},aa.prototype.touchmove=function(n,s,o){if(this._active&&!(o.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,o)},aa.prototype.touchend=function(n,s,o){this._calculateTransform(n,s,o),this._active&&o.length<this._minTouches&&this.reset()},aa.prototype.touchcancel=function(){this.reset()},aa.prototype._calculateTransform=function(n,s,o){o.length>0&&(this._active=!0);var c=Qs(o,s),_=new a.Point(0,0),w=new a.Point(0,0),S=0;for(var z in c){var P=c[z],O=this._touches[z];O&&(_._add(P),w._add(P.sub(O)),S++,c[z]=P)}if(this._touches=c,!(S<this._minTouches)&&w.mag()){var Z=w.div(S);if(this._sum._add(Z),!(this._sum.mag()<this._clickTolerance))return{around:_.div(S),panDelta:Z}}},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var qn=function(){this.reset()};function el(n,s,o){for(var c=0;c<n.length;c++)if(n[c].identifier===o)return s[c]}function tl(n,s){return Math.log(n/s)/Math.LN2}qn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qn.prototype._start=function(n){},qn.prototype._move=function(n,s,o){return{}},qn.prototype.touchstart=function(n,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},qn.prototype.touchmove=function(n,s,o){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,_=c[1],w=el(o,s,c[0]),S=el(o,s,_);if(w&&S){var z=this._aroundCenter?null:w.add(S).div(2);return this._move([w,S],z,n)}}},qn.prototype.touchend=function(n,s,o){if(this._firstTwoTouches){var c=this._firstTwoTouches,_=c[1],w=el(o,s,c[0]),S=el(o,s,_);w&&S||(this._active&&I.suppressClick(),this.reset())}},qn.prototype.touchcancel=function(){this.reset()},qn.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},qn.prototype.disable=function(){this._enabled=!1,this.reset()},qn.prototype.isEnabled=function(){return this._enabled},qn.prototype.isActive=function(){return this._active};var Gn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,c){var _=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(tl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tl(this._distance,_),pinchAround:c}},s}(qn);function Da(n,s){return 180*n.angleWith(s)/Math.PI}var zc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,c){var _=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Da(this._vector,_),pinchAround:c}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var c=25/(Math.PI*this._minDiameter)*360,_=Da(o,this._startVector);return Math.abs(_)<c},s}(qn);function xs(n){return Math.abs(n.y)>Math.abs(n.x)}var iu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,xs(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,c,_){var w=o[0].sub(this._lastPoints[0]),S=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,S,_.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(w.y+S.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,c,_){if(this._valid!==void 0)return this._valid;var w=o.mag()>=2,S=c.mag()>=2;if(w||S){if(!w||!S)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;var z=o.y>0==c.y>0;return xs(o)&&xs(c)&&z}},s}(qn),ru={panStep:100,bearingStep:15,pitchStep:10},ga=function(){var n=ru;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function ia(n){return n*(2-n)}ga.prototype.blur=function(){this.reset()},ga.prototype.reset=function(){this._active=!1},ga.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=0,c=0,_=0,w=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?_=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?_=-1:(n.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(c=0,_=0),{cameraAnimation:function(z){var P=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:ia,zoom:o?Math.round(P)+o*(n.shiftKey?2:1):P,bearing:z.getBearing()+c*s._bearingStep,pitch:z.getPitch()+_*s._pitchStep,offset:[-w*s._panStep,-S*s._panStep],center:z.getCenter()},{originalEvent:n})}}}},ga.prototype.enable=function(){this._enabled=!0},ga.prototype.disable=function(){this._enabled=!1,this.reset()},ga.prototype.isEnabled=function(){return this._enabled},ga.prototype.isActive=function(){return this._active},ga.prototype.disableRotation=function(){this._rotationDisabled=!0},ga.prototype.enableRotation=function(){this._rotationDisabled=!1};var ai=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};ai.prototype.setZoomRate=function(n){this._defaultZoomRate=n},ai.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},ai.prototype.isEnabled=function(){return!!this._enabled},ai.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ai.prototype.isZooming=function(){return!!this._zooming},ai.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},ai.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ai.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=a.browser.now(),c=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},ai.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},ai.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=I.mousePos(this._el,n);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ai.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&c!==0&&(c=1/c);var _=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(_*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,S=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,z=this._startZoom,P=this._easing,O=!1;if(this._type==="wheel"&&z&&P){var Z=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),K=P(Z);w=a.number(z,S,K),Z<1?this._frameId||(this._frameId=!0):O=!0}else w=S,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ai.prototype._smoothOutEasing=function(n){var s=a.ease;if(this._prevEase){var o=this._prevEase,c=(a.browser.now()-o.start)/o.duration,_=o.easing(c+.01)-o.easing(c),w=.27/Math.sqrt(_*_+1e-4)*.01,S=Math.sqrt(.0729-w*w);s=a.bezier(w,S,.25,1)}return this._prevEase={start:a.browser.now(),duration:n,easing:s},s},ai.prototype.blur=function(){this.reset()},ai.prototype.reset=function(){this._active=!1};var Ia=function(n,s){this._clickZoom=n,this._tapZoom=s};Ia.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ia.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ia.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ia.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var oa=function(){this.reset()};oa.prototype.reset=function(){this._active=!1},oa.prototype.blur=function(){this.reset()},oa.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:n})}}},oa.prototype.enable=function(){this._enabled=!0},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active};var sn=function(){this._tap=new ma({numTouches:1,numTaps:1}),this.reset()};sn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},sn.prototype.touchstart=function(n,s,o){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(n,s,o))},sn.prototype.touchmove=function(n,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var c=s[0],_=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(n,s,o)},sn.prototype.touchend=function(n,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(n,s,o)&&(this._tapTime=n.timeStamp)},sn.prototype.touchcancel=function(){this.reset()},sn.prototype.enable=function(){this._enabled=!0},sn.prototype.disable=function(){this._enabled=!1,this.reset()},sn.prototype.isEnabled=function(){return this._enabled},sn.prototype.isActive=function(){return this._active};var To=function(n,s,o){this._el=n,this._mousePan=s,this._touchPan=o};To.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},To.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},To.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},To.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ya=function(n,s,o){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};Ya.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ya.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ya.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ya.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ya=function(n,s,o,c){this._el=n,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};ya.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ya.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ya.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ya.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ya.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ya.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var En=function(n){return n.zoom||n.drag||n.pitch||n.rotate},ws=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(a.Event);function It(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var vt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _s(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),a.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[a.window,"blur",void 0]];for(var c=0,_=this._listeners;c<_.length;c+=1){var w=_[c],S=w[0];I.addEventListener(S,w[1],S===a.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};vt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var o=s[n],c=o[0];I.removeEventListener(c,o[1],c===a.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},vt.prototype._addDefaultHandlers=function(n){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new Ir(s,n));var c=s.boxZoom=new Vn(s,n);this._add("boxZoom",c);var _=new jn,w=new oa;s.doubleClickZoom=new Ia(w,_),this._add("tapZoom",_),this._add("clickZoom",w);var S=new sn;this._add("tapDragZoom",S);var z=s.touchPitch=new iu;this._add("touchPitch",z);var P=new $s(n),O=new tu(n);s.dragRotate=new Ya(n,P,O),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]);var Z=new eu(n),K=new aa(n);s.dragPan=new To(o,Z,K),this._add("mousePan",Z),this._add("touchPan",K,["touchZoom","touchRotate"]);var W=new zc,ie=new Gn;s.touchZoomRotate=new ya(o,ie,W,S),this._add("touchRotate",W,["touchPan","touchZoom"]),this._add("touchZoom",ie,["touchPan","touchRotate"]);var ee=s.scrollZoom=new ai(s,this);this._add("scrollZoom",ee,["mousePan"]);var ce=s.keyboard=new ga;this._add("keyboard",ce),this._add("blockableMapEvent",new yt(s));for(var J=0,le=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];J<le.length;J+=1){var de=le[J];n.interactive&&n[de]&&s[de].enable(n[de])}},vt.prototype._add=function(n,s,o){this._handlers.push({handlerName:n,handler:s,allowed:o}),this._handlersById[n]=s},vt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},vt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},vt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},vt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},vt.prototype.isMoving=function(){return!!En(this._eventsInProgress)||this.isZooming()},vt.prototype._blockedByActive=function(n,s,o){for(var c in n)if(c!==o&&(!s||s.indexOf(c)<0))return!0;return!1},vt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},vt.prototype._getMapTouches=function(n){for(var s=[],o=0,c=n;o<c.length;o+=1){var _=c[o];this._el.contains(_.target)&&s.push(_)}return s},vt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var o=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},_={},w={},S=n.touches?this._getMapTouches(n.touches):void 0,z=S?I.touchPos(this._el,S):I.mousePos(this._el,n),P=0,O=this._handlers;P<O.length;P+=1){var Z=O[P],K=Z.handlerName,W=Z.handler,ie=Z.allowed;if(W.isEnabled()){var ee=void 0;this._blockedByActive(w,ie,K)?W.reset():W[s||n.type]&&(ee=W[s||n.type](n,z,S),this.mergeHandlerResult(c,_,ee,K,o),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()),(ee||W.isActive())&&(w[K]=W)}}var ce={};for(var J in this._previousActiveHandlers)w[J]||(ce[J]=o);this._previousActiveHandlers=w,(Object.keys(ce).length||It(c))&&(this._changes.push([c,_,ce]),this._triggerRenderFrame()),(Object.keys(w).length||It(c))&&this._map._stop(!0),this._updatingCamera=!1;var le=c.cameraAnimation;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},vt.prototype.mergeHandlerResult=function(n,s,o,c,_){if(o){a.extend(n,o);var w={handlerName:c,originalEvent:o.originalEvent||_};o.zoomDelta!==void 0&&(s.zoom=w),o.panDelta!==void 0&&(s.drag=w),o.pitchDelta!==void 0&&(s.pitch=w),o.bearingDelta!==void 0&&(s.rotate=w)}},vt.prototype._applyChanges=function(){for(var n={},s={},o={},c=0,_=this._changes;c<_.length;c+=1){var w=_[c],S=w[0],z=w[1],P=w[2];S.panDelta&&(n.panDelta=(n.panDelta||new a.Point(0,0))._add(S.panDelta)),S.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(n.around=S.around),S.pinchAround!==void 0&&(n.pinchAround=S.pinchAround),S.noInertia&&(n.noInertia=S.noInertia),a.extend(s,z),a.extend(o,P)}this._updateMapTransform(n,s,o),this._changes=[]},vt.prototype._updateMapTransform=function(n,s,o){var c=this._map,_=c.transform;if(!It(n))return this._fireEvents(s,o,!0);var w=n.panDelta,S=n.zoomDelta,z=n.bearingDelta,P=n.pitchDelta,O=n.around,Z=n.pinchAround;Z!==void 0&&(O=Z),c._stop(!0),O=O||c.transform.centerPoint;var K=_.pointLocation(w?O.sub(w):O);z&&(_.bearing+=z),P&&(_.pitch+=P),S&&(_.zoom+=S),_.setLocationAtPoint(K,O),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,o,!0)},vt.prototype._fireEvents=function(n,s,o){var c=this,_=En(this._eventsInProgress),w=En(n),S={};for(var z in n)this._eventsInProgress[z]||(S[z+"start"]=n[z].originalEvent),this._eventsInProgress[z]=n[z];for(var P in!_&&w&&this._fireEvent("movestart",w.originalEvent),S)this._fireEvent(P,S[P]);for(var O in w&&this._fireEvent("move",w.originalEvent),n)this._fireEvent(O,n[O].originalEvent);var Z,K={};for(var W in this._eventsInProgress){var ie=this._eventsInProgress[W],ee=ie.handlerName,ce=ie.originalEvent;this._handlersById[ee].isActive()||(delete this._eventsInProgress[W],K[W+"end"]=Z=s[ee]||ce)}for(var J in K)this._fireEvent(J,K[J]);var le=En(this._eventsInProgress);if(o&&(_||w)&&!le){this._updatingCamera=!0;var de=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_e=function(Ie){return Ie!==0&&-c._bearingSnap<Ie&&Ie<c._bearingSnap};de?(_e(de.bearing||this._map.getBearing())&&(de.bearing=0),this._map.easeTo(de,{originalEvent:Z})):(this._map.fire(new a.Event("moveend",{originalEvent:Z})),_e(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},vt.prototype._fireEvent=function(n,s){this._map.fire(new a.Event(n,s?{originalEvent:s}:{}))},vt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new ws("renderFrame",{timeStamp:s})),n._applyChanges()})},vt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var il=function(n){function s(o,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,c){return this.jumpTo({center:o},c)},s.prototype.panBy=function(o,c,_){return o=a.Point.convert(o).mult(-1),this.panTo(this.transform.center,a.extend({offset:o},c),_)},s.prototype.panTo=function(o,c,_){return this.easeTo(a.extend({center:o},c),_)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,c){return this.jumpTo({zoom:o},c),this},s.prototype.zoomTo=function(o,c,_){return this.easeTo(a.extend({zoom:o},c),_)},s.prototype.zoomIn=function(o,c){return this.zoomTo(this.getZoom()+1,o,c),this},s.prototype.zoomOut=function(o,c){return this.zoomTo(this.getZoom()-1,o,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,c){return this.jumpTo({bearing:o},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,c){return this.jumpTo({padding:o},c),this},s.prototype.rotateTo=function(o,c,_){return this.easeTo(a.extend({bearing:o},c),_)},s.prototype.resetNorth=function(o,c){return this.rotateTo(0,a.extend({duration:1e3},o),c),this},s.prototype.resetNorthPitch=function(o,c){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},o),c),this},s.prototype.snapToNorth=function(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,c){return this.jumpTo({pitch:o},c),this},s.prototype.cameraForBounds=function(o,c){o=a.LngLatBounds.convert(o);var _=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),_,c)},s.prototype._cameraForBoxAndBearing=function(o,c,_,w){var S={top:0,bottom:0,right:0,left:0};if(typeof(w=a.extend({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var z=w.padding;w.padding={top:z,bottom:z,right:z,left:z}}w.padding=a.extend(S,w.padding);var P=this.transform,O=P.padding,Z=P.project(a.LngLat.convert(o)),K=P.project(a.LngLat.convert(c)),W=Z.rotate(-_*Math.PI/180),ie=K.rotate(-_*Math.PI/180),ee=new a.Point(Math.max(W.x,ie.x),Math.max(W.y,ie.y)),ce=new a.Point(Math.min(W.x,ie.x),Math.min(W.y,ie.y)),J=ee.sub(ce),le=(P.width-(O.left+O.right+w.padding.left+w.padding.right))/J.x,de=(P.height-(O.top+O.bottom+w.padding.top+w.padding.bottom))/J.y;if(!(de<0||le<0)){var _e=Math.min(P.scaleZoom(P.scale*Math.min(le,de)),w.maxZoom),Ie=typeof w.offset.x=="number"?new a.Point(w.offset.x,w.offset.y):a.Point.convert(w.offset),Se=new a.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(_*Math.PI/180),Te=Ie.add(Se).mult(P.scale/P.zoomScale(_e));return{center:P.unproject(Z.add(K).div(2).sub(Te)),zoom:_e,bearing:_}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,c,_){return this._fitInternal(this.cameraForBounds(o,c),c,_)},s.prototype.fitScreenCoordinates=function(o,c,_,w,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(o)),this.transform.pointLocation(a.Point.convert(c)),_,w),w,S)},s.prototype._fitInternal=function(o,c,_){return o?(delete(c=a.extend(o,c)).padding,c.linear?this.easeTo(c,_):this.flyTo(c,_)):this},s.prototype.jumpTo=function(o,c){this.stop();var _=this.transform,w=!1,S=!1,z=!1;return"zoom"in o&&_.zoom!==+o.zoom&&(w=!0,_.zoom=+o.zoom),o.center!==void 0&&(_.center=a.LngLat.convert(o.center)),"bearing"in o&&_.bearing!==+o.bearing&&(S=!0,_.bearing=+o.bearing),"pitch"in o&&_.pitch!==+o.pitch&&(z=!0,_.pitch=+o.pitch),o.padding==null||_.isPaddingEqual(o.padding)||(_.padding=o.padding),this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),w&&this.fire(new a.Event("zoomstart",c)).fire(new a.Event("zoom",c)).fire(new a.Event("zoomend",c)),S&&this.fire(new a.Event("rotatestart",c)).fire(new a.Event("rotate",c)).fire(new a.Event("rotateend",c)),z&&this.fire(new a.Event("pitchstart",c)).fire(new a.Event("pitch",c)).fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))},s.prototype.easeTo=function(o,c){var _=this;this._stop(!1,o.easeId),((o=a.extend({offset:[0,0],duration:500,easing:a.ease},o)).animate===!1||!o.essential&&a.browser.prefersReducedMotion)&&(o.duration=0);var w=this.transform,S=this.getZoom(),z=this.getBearing(),P=this.getPitch(),O=this.getPadding(),Z="zoom"in o?+o.zoom:S,K="bearing"in o?this._normalizeBearing(o.bearing,z):z,W="pitch"in o?+o.pitch:P,ie="padding"in o?o.padding:w.padding,ee=a.Point.convert(o.offset),ce=w.centerPoint.add(ee),J=w.pointLocation(ce),le=a.LngLat.convert(o.center||J);this._normalizeCenter(le);var de,_e,Ie=w.project(J),Se=w.project(le).sub(Ie),Te=w.zoomScale(Z-S);o.around&&(de=a.LngLat.convert(o.around),_e=w.locationPoint(de));var Re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Z!==S,this._rotating=this._rotating||z!==K,this._pitching=this._pitching||W!==P,this._padding=!w.isPaddingEqual(ie),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,Re),this._ease(function(We){if(_._zooming&&(w.zoom=a.number(S,Z,We)),_._rotating&&(w.bearing=a.number(z,K,We)),_._pitching&&(w.pitch=a.number(P,W,We)),_._padding&&(w.interpolatePadding(O,ie,We),ce=w.centerPoint.add(ee)),de)w.setLocationAtPoint(de,_e);else{var Ke=w.zoomScale(w.zoom-S),dt=Z>S?Math.min(2,Te):Math.max(.5,Te),zt=Math.pow(dt,1-We),Ct=w.unproject(Ie.add(Se.mult(We*zt)).mult(Ke));w.setLocationAtPoint(w.renderWorldCopies?Ct.wrap():Ct,ce)}_._fireMoveEvents(c)},function(We){_._afterEase(c,We)},o),this},s.prototype._prepareEase=function(o,c,_){_===void 0&&(_={}),this._moving=!0,c||_.moving||this.fire(new a.Event("movestart",o)),this._zooming&&!_.zooming&&this.fire(new a.Event("zoomstart",o)),this._rotating&&!_.rotating&&this.fire(new a.Event("rotatestart",o)),this._pitching&&!_.pitching&&this.fire(new a.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new a.Event("move",o)),this._zooming&&this.fire(new a.Event("zoom",o)),this._rotating&&this.fire(new a.Event("rotate",o)),this._pitching&&this.fire(new a.Event("pitch",o))},s.prototype._afterEase=function(o,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var _=this._zooming,w=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new a.Event("zoomend",o)),w&&this.fire(new a.Event("rotateend",o)),S&&this.fire(new a.Event("pitchend",o)),this.fire(new a.Event("moveend",o))}},s.prototype.flyTo=function(o,c){var _=this;if(!o.essential&&a.browser.prefersReducedMotion){var w=a.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,c)}this.stop(),o=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},o);var S=this.transform,z=this.getZoom(),P=this.getBearing(),O=this.getPitch(),Z=this.getPadding(),K="zoom"in o?a.clamp(+o.zoom,S.minZoom,S.maxZoom):z,W="bearing"in o?this._normalizeBearing(o.bearing,P):P,ie="pitch"in o?+o.pitch:O,ee="padding"in o?o.padding:S.padding,ce=S.zoomScale(K-z),J=a.Point.convert(o.offset),le=S.centerPoint.add(J),de=S.pointLocation(le),_e=a.LngLat.convert(o.center||de);this._normalizeCenter(_e);var Ie=S.project(de),Se=S.project(_e).sub(Ie),Te=o.curve,Re=Math.max(S.width,S.height),We=Re/ce,Ke=Se.mag();if("minZoom"in o){var dt=a.clamp(Math.min(o.minZoom,z,K),S.minZoom,S.maxZoom),zt=Re/S.zoomScale(dt-z);Te=Math.sqrt(zt/Ke*2)}var Ct=Te*Te;function Pt(Rt){var Dt=(We*We-Re*Re+(Rt?-1:1)*Ct*Ct*Ke*Ke)/(2*(Rt?We:Re)*Ct*Ke);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function _i(Rt){return(Math.exp(Rt)-Math.exp(-Rt))/2}function mt(Rt){return(Math.exp(Rt)+Math.exp(-Rt))/2}var Nt=Pt(0),Yt=function(Rt){return mt(Nt)/mt(Nt+Te*Rt)},Ft=function(Rt){return Re*((mt(Nt)*(_i(Dt=Nt+Te*Rt)/mt(Dt))-_i(Nt))/Ct)/Ke;var Dt},Bt=(Pt(1)-Nt)/Te;if(Math.abs(Ke)<1e-6||!isFinite(Bt)){if(Math.abs(Re-We)<1e-6)return this.easeTo(o,c);var Xt=We<Re?-1:1;Bt=Math.abs(Math.log(We/Re))/Te,Ft=function(){return 0},Yt=function(Rt){return Math.exp(Xt*Te*Rt)}}return o.duration="duration"in o?+o.duration:1e3*Bt/("screenSpeed"in o?+o.screenSpeed/Te:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=P!==W,this._pitching=ie!==O,this._padding=!S.isPaddingEqual(ee),this._prepareEase(c,!1),this._ease(function(Rt){var Dt=Rt*Bt,Gr=1/Yt(Dt);S.zoom=Rt===1?K:z+S.scaleZoom(Gr),_._rotating&&(S.bearing=a.number(P,W,Rt)),_._pitching&&(S.pitch=a.number(O,ie,Rt)),_._padding&&(S.interpolatePadding(Z,ee,Rt),le=S.centerPoint.add(J));var or=Rt===1?_e:S.unproject(Ie.add(Se.mult(Ft(Dt))).mult(Gr));S.setLocationAtPoint(S.renderWorldCopies?or.wrap():or,le),_._fireMoveEvents(c)},function(){return _._afterEase(c)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,c)}if(!o){var w=this.handlers;w&&w.stop(!1)}return this},s.prototype._ease=function(o,c,_){_.animate===!1||_.duration===0?(o(1),c()):(this._easeStart=a.browser.now(),this._easeOptions=_,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,c){o=a.wrap(o,-180,180);var _=Math.abs(o-c);return Math.abs(o-360-c)<_&&(o-=360),Math.abs(o+360-c)<_&&(o+=360),o},s.prototype._normalizeCenter=function(o){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var _=o.lng-c.center.lng;o.lng+=_>180?-360:_<-180?360:0}},s}(a.Evented),kn=function(n){n===void 0&&(n={}),this.options=n,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};kn.prototype.getDefaultPosition=function(){return"bottom-right"},kn.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=I.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},kn.prototype.onRemove=function(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},kn.prototype._setElementTitle=function(n,s){var o=this._map._getUIString("AttributionControl."+s);n.title=o,n.setAttribute("aria-label",o)},kn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},kn.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(n){var o=s.reduce(function(c,_,w){return _.value&&(c+=_.key+"="+_.value+(w<s.length-1?"&":"")),c},"?");n.href=a.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},kn.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},kn.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(z){return typeof z!="string"?"":z})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var c in o){var _=o[c];if(_.used){var w=_.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort(function(z,P){return z.length-P.length});var S=(n=n.filter(function(z,P){for(var O=P+1;O<n.length;O++)if(n[O].indexOf(z)>=0)return!1;return!0})).join(" | ");S!==this._attribHTML&&(this._attribHTML=S,n.length?(this._innerContainer.innerHTML=S,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},kn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var _a=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};_a.prototype.onAdd=function(n){this._map=n,this._container=I.create("div","mapboxgl-ctrl");var s=I.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},_a.prototype.onRemove=function(){I.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},_a.prototype.getDefaultPosition=function(){return"bottom-left"},_a.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},_a.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},_a.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var ln=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ln.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},ln.prototype.remove=function(n){for(var s=this._currentlyRunning,o=0,c=s?this._queue.concat(s):this._queue;o<c.length;o+=1){var _=c[o];if(_.id===n)return void(_.cancelled=!0)}},ln.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,c=s;o<c.length;o+=1){var _=c[o];if(!_.cancelled&&(_.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ln.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var za={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},nu=a.window.HTMLImageElement,rl=a.window.HTMLElement,Pi=a.window.ImageBitmap,Qr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Tc=function(n){function s(c){var _=this;if((c=a.extend({},Qr,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new pi(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,w,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new ln,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},za,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new a.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=a.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof rl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return _._update(!1)}),this.on("moveend",function(){return _._update(!1)}),this.on("zoom",function(){return _._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new vt(this,c),this._hash=c.hash&&new ta(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,a.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new kn({customAttribution:c.customAttribution})),this.addControl(new _a,c.logoPosition),this.on("style.load",function(){_.transform.unmodified&&_.jumpTo(_.style.stylesheet)}),this.on("data",function(S){_._update(S.dataType==="style"),_.fire(new a.Event(S.dataType+"data",S))}),this.on("dataloading",function(S){_.fire(new a.Event(S.dataType+"dataloading",S))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,_){if(_===void 0&&(_=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=c.onAdd(this);this._controls.push(c);var S=this._controlPositions[_];return _.indexOf("bottom")!==-1?S.insertBefore(w,S.firstChild):S.appendChild(w),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var _=this._controls.indexOf(c);return _>-1&&this._controls.splice(_,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var _=this._containerDimensions(),w=_[0],S=_[1];if(w===this.transform.width&&S===this.transform.height)return this;this._resizeCanvas(w,S),this.transform.resize(w,S),this.painter.resize(w,S);var z=!this._moving;return z&&this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),this.fire(new a.Event("resize",c)),z&&this.fire(new a.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(a.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(a.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(a.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,_,w){var S,z=this;if(c==="mouseenter"||c==="mouseover"){var P=!1;return{layer:_,listener:w,delegates:{mousemove:function(Z){var K=z.getLayer(_)?z.queryRenderedFeatures(Z.point,{layers:[_]}):[];K.length?P||(P=!0,w.call(z,new Rr(c,z,Z.originalEvent,{features:K}))):P=!1},mouseout:function(){P=!1}}}}if(c==="mouseleave"||c==="mouseout"){var O=!1;return{layer:_,listener:w,delegates:{mousemove:function(Z){(z.getLayer(_)?z.queryRenderedFeatures(Z.point,{layers:[_]}):[]).length?O=!0:O&&(O=!1,w.call(z,new Rr(c,z,Z.originalEvent)))},mouseout:function(Z){O&&(O=!1,w.call(z,new Rr(c,z,Z.originalEvent)))}}}}return{layer:_,listener:w,delegates:(S={},S[c]=function(Z){var K=z.getLayer(_)?z.queryRenderedFeatures(Z.point,{layers:[_]}):[];K.length&&(Z.features=K,w.call(z,Z),delete Z.features)},S)}},s.prototype.on=function(c,_,w){if(w===void 0)return n.prototype.on.call(this,c,_);var S=this._createDelegatedListener(c,_,w);for(var z in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(S),S.delegates)this.on(z,S.delegates[z]);return this},s.prototype.once=function(c,_,w){if(w===void 0)return n.prototype.once.call(this,c,_);var S=this._createDelegatedListener(c,_,w);for(var z in S.delegates)this.once(z,S.delegates[z]);return this},s.prototype.off=function(c,_,w){var S=this;return w===void 0?n.prototype.off.call(this,c,_):(this._delegatedListeners&&this._delegatedListeners[c]&&function(z){for(var P=z[c],O=0;O<P.length;O++){var Z=P[O];if(Z.layer===_&&Z.listener===w){for(var K in Z.delegates)S.off(K,Z.delegates[K]);return P.splice(O,1),S}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,_){if(!this.style)return[];var w;if(_!==void 0||c===void 0||c instanceof a.Point||Array.isArray(c)||(_=c,c=void 0),_=_||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof c[0]=="number")w=[a.Point.convert(c)];else{var S=a.Point.convert(c[0]),z=a.Point.convert(c[1]);w=[S,new a.Point(z.x,S.y),z,new a.Point(S.x,z.y),S]}return this.style.queryRenderedFeatures(w,_,this.transform)},s.prototype.querySourceFeatures=function(c,_){return this.style.querySourceFeatures(c,_)},s.prototype.setStyle=function(c,_){return(_=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},_)).diff!==!1&&_.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,_),this):(this._localIdeographFontFamily=_.localIdeographFontFamily,this._updateStyle(c,_))},s.prototype._getUIString=function(c){var _=this._locale[c];if(_==null)throw new Error("Missing UI string '"+c+"'");return _},s.prototype._updateStyle=function(c,_){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new Un(this,_||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Un(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,_){var w=this;if(typeof c=="string"){var S=this._requestManager.normalizeStyleURL(c),z=this._requestManager.transformRequest(S,a.ResourceType.Style);a.getJSON(z,function(P,O){P?w.fire(new a.ErrorEvent(P)):O&&w._updateDiff(O,_)})}else typeof c=="object"&&this._updateDiff(c,_)},s.prototype._updateDiff=function(c,_){try{this.style.setState(c)&&this._update(!0)}catch(w){a.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(c,_)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,_){return this._lazyInitEmptyStyle(),this.style.addSource(c,_),this._update(!0)},s.prototype.isSourceLoaded=function(c){var _=this.style&&this.style.sourceCaches[c];if(_!==void 0)return _.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var _ in c){var w=c[_]._tiles;for(var S in w){var z=w[S];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,_,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,_,w)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,_,w){w===void 0&&(w={});var S=w.pixelRatio;S===void 0&&(S=1);var z=w.sdf;z===void 0&&(z=!1);var P=w.stretchX,O=w.stretchY,Z=w.content;if(this._lazyInitEmptyStyle(),_ instanceof nu||Pi&&_ instanceof Pi){var K=a.browser.getImageData(_);this.style.addImage(c,{data:new a.RGBAImage({width:K.width,height:K.height},K.data),pixelRatio:S,stretchX:P,stretchY:O,content:Z,sdf:z,version:0})}else{if(_.width===void 0||_.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var W=_;this.style.addImage(c,{data:new a.RGBAImage({width:_.width,height:_.height},new Uint8Array(_.data)),pixelRatio:S,stretchX:P,stretchY:O,content:Z,sdf:z,version:0,userImage:W}),W.onAdd&&W.onAdd(this,c)}},s.prototype.updateImage=function(c,_){var w=this.style.getImage(c);if(!w)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var S=_ instanceof nu||Pi&&_ instanceof Pi?a.browser.getImageData(_):_,z=S.width,P=S.height,O=S.data;return z===void 0||P===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):z!==w.data.width||P!==w.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(O,!(_ instanceof nu||Pi&&_ instanceof Pi)),void this.style.updateImage(c,w))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,_){a.getImage(this._requestManager.transformRequest(c,a.ResourceType.Image),_)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,_){return this._lazyInitEmptyStyle(),this.style.addLayer(c,_),this._update(!0)},s.prototype.moveLayer=function(c,_){return this.style.moveLayer(c,_),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,_,w){return this.style.setLayerZoomRange(c,_,w),this._update(!0)},s.prototype.setFilter=function(c,_,w){return w===void 0&&(w={}),this.style.setFilter(c,_,w),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,_,w,S){return S===void 0&&(S={}),this.style.setPaintProperty(c,_,w,S),this._update(!0)},s.prototype.getPaintProperty=function(c,_){return this.style.getPaintProperty(c,_)},s.prototype.setLayoutProperty=function(c,_,w,S){return S===void 0&&(S={}),this.style.setLayoutProperty(c,_,w,S),this._update(!0)},s.prototype.getLayoutProperty=function(c,_){return this.style.getLayoutProperty(c,_)},s.prototype.setLight=function(c,_){return _===void 0&&(_={}),this._lazyInitEmptyStyle(),this.style.setLight(c,_),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,_){return this.style.setFeatureState(c,_),this._update()},s.prototype.removeFeatureState=function(c,_){return this.style.removeFeatureState(c,_),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,_=0;return this._container&&(c=this._container.clientWidth||400,_=this._container.clientHeight||300),[c,_]},s.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=I.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var _=this._canvasContainer=I.create("div","mapboxgl-canvas-container",c);this._interactive&&_.classList.add("mapboxgl-interactive"),this._canvas=I.create("canvas","mapboxgl-canvas",_),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var S=this._controlContainer=I.create("div","mapboxgl-control-container",c),z=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(P){z[P]=I.create("div","mapboxgl-ctrl-"+P,S)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,_){var w=a.browser.devicePixelRatio||1;this._canvas.width=w*c,this._canvas.height=w*_,this._canvas.style.width=c+"px",this._canvas.style.height=_+"px"},s.prototype._setupPainter=function(){var c=a.extend({},k.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),_=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);_?(this.painter=new Yi(_,this.transform),a.webpSupported.testSupport(_)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var _,w=this,S=0,z=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(_=z.createQueryEXT(),z.beginQueryEXT(z.TIME_ELAPSED_EXT,_),S=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var P=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var O=this.transform.zoom,Z=a.browser.now();this.style.zoomHistory.update(O,Z);var K=new a.EvaluationParameters(O,{now:Z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),W=K.crossFadingFactor();W===1&&W===this._crossFadingFactor||(P=!0,this._crossFadingFactor=W),this.style.update(K)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||P)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ie=a.browser.now()-S;z.endQueryEXT(z.TIME_ELAPSED_EXT,_),setTimeout(function(){var J=z.getQueryObjectEXT(_,z.QUERY_RESULT_EXT)/1e6;z.deleteQueryEXT(_),w.fire(new a.Event("gpu-timing-frame",{cpuTime:ie,gpuTime:J}))},50)}if(this.listens("gpu-timing-layer")){var ee=this.painter.collectGpuTimers();setTimeout(function(){var J=w.painter.queryGpuTimers(ee);w.fire(new a.Event("gpu-timing-layer",{layerTimes:J}))},50)}var ce=this._sourcesDirty||this._styleDirty||this._placementDirty;return ce||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||ce||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,_=this._controls;c<_.length;c+=1)_[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),Ao(this._canvasContainer),Ao(this._controlContainer),Ao(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(_){c._frame=null,c._render(_)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,_){a.setCacheLimits(c,_)},o.version.get=function(){return a.version},Object.defineProperties(s.prototype,o),s}(il);function Ao(n){n.parentNode&&n.parentNode.removeChild(n)}var au={showCompass:!0,showZoom:!0,visualizePitch:!1},La=function(n){var s=this;this.options=a.extend({},au,n),this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),I.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),I.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=I.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};La.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),o=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},La.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},La.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Zn(this._map,this._compass,this.options.visualizePitch)),this._container},La.prototype.onRemove=function(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},La.prototype._createButton=function(n,s){var o=I.create("button",n,this._container);return o.type="button",o.addEventListener("click",s),o},La.prototype._setButtonTitle=function(n,s){var o=this._map._getUIString("NavigationControl."+s);n.title=o,n.setAttribute("aria-label",o)};var Zn=function(n,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new $s({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new tu({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),I.addEventListener(s,"mousedown",this.mousedown),I.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(s,"touchmove",this.touchmove),I.addEventListener(s,"touchend",this.touchend),I.addEventListener(s,"touchcancel",this.reset)};function Wo(n,s,o){if(n=new a.LngLat(n.lng,n.lat),s){var c=new a.LngLat(n.lng-360,n.lat),_=new a.LngLat(n.lng+360,n.lat),w=o.locationPoint(n).distSqr(s);o.locationPoint(c).distSqr(s)<w?n=c:o.locationPoint(_).distSqr(s)<w&&(n=_)}for(;Math.abs(n.lng-o.center.lng)>180;){var S=o.locationPoint(n);if(S.x>=0&&S.y>=0&&S.x<=o.width&&S.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}Zn.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),I.disableDrag()},Zn.prototype.move=function(n,s){var o=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&o.setBearing(o.getBearing()+c.bearingDelta),this.mousePitch){var _=this.mousePitch.mousemoveWindow(n,s);_&&_.pitchDelta&&o.setPitch(o.getPitch()+_.pitchDelta)}},Zn.prototype.off=function(){var n=this.element;I.removeEventListener(n,"mousedown",this.mousedown),I.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(n,"touchmove",this.touchmove),I.removeEventListener(n,"touchend",this.touchend),I.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},Zn.prototype.offTemp=function(){I.enableDrag(),I.removeEventListener(a.window,"mousemove",this.mousemove),I.removeEventListener(a.window,"mouseup",this.mouseup)},Zn.prototype.mousedown=function(n){this.down(a.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),I.mousePos(this.element,n)),I.addEventListener(a.window,"mousemove",this.mousemove),I.addEventListener(a.window,"mouseup",this.mouseup)},Zn.prototype.mousemove=function(n){this.move(n,I.mousePos(this.element,n))},Zn.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},Zn.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},Zn.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},Zn.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Zn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ta={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nl(n,s,o){var c=n.classList;for(var _ in Ta)c.remove("mapboxgl-"+o+"-anchor-"+_);c.add("mapboxgl-"+o+"-anchor-"+s)}var Xo,Ss=function(n){function s(o,c){if(n.call(this),(o instanceof a.window.HTMLElement||c)&&(o=a.extend({element:o},c)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=a.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div"),this._element.setAttribute("aria-label","Map marker");var _=I.createNS("http://www.w3.org/2000/svg","svg");_.setAttributeNS(null,"display","block"),_.setAttributeNS(null,"height","41px"),_.setAttributeNS(null,"width","27px"),_.setAttributeNS(null,"viewBox","0 0 27 41");var w=I.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var S=I.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");var z=I.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");for(var P=0,O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];P<O.length;P+=1){var Z=O[P],K=I.createNS("http://www.w3.org/2000/svg","ellipse");K.setAttributeNS(null,"opacity","0.04"),K.setAttributeNS(null,"cx","10.5"),K.setAttributeNS(null,"cy","5.80029008"),K.setAttributeNS(null,"rx",Z.rx),K.setAttributeNS(null,"ry",Z.ry),z.appendChild(K)}var W=I.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);var ie=I.createNS("http://www.w3.org/2000/svg","path");ie.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(ie);var ee=I.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"opacity","0.25"),ee.setAttributeNS(null,"fill","#000000");var ce=I.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ee.appendChild(ce);var J=I.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");var le=I.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");var de=I.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");var _e=I.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#FFFFFF"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962"),le.appendChild(de),le.appendChild(_e),S.appendChild(z),S.appendChild(W),S.appendChild(ee),S.appendChild(J),S.appendChild(le),_.appendChild(S),_.setAttributeNS(null,"height",41*this._scale+"px"),_.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(_),this._offset=a.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ie){Ie.preventDefault()}),this._element.addEventListener("mousedown",function(Ie){Ie.preventDefault()}),nl(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var c=o.code,_=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&_!==32&&_!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var c=o.originalEvent.target,_=this._element;this._popup&&(c===_||_.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Wo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,Ta[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+_+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=a.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(a.Evented),ou={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Yo=0,Po=!1,su=function(n){function s(o){n.call(this),this.options=a.extend({},ou,o),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){var c;return this._map=o,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,Xo!==void 0?c(Xo):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(_){c(Xo=_.state!=="denied")}):c(Xo=!!a.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Yo=0,Po=!1},s.prototype._isOutOfMapMaxBounds=function(o){var c=this._map.getMaxBounds(),_=o.coords;return c&&(_.longitude<c.getWest()||_.longitude>c.getEast()||_.latitude<c.getSouth()||_.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude),_=o.coords.accuracy,w=this._map.getBearing(),S=a.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(_),S,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,c=this._map.unproject([0,o]),_=this._map.unproject([1,o]),w=c.distanceTo(_),S=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=S+"px",this._circleElement.style.height=S+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&Po)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var c=this;if(this._container.addEventListener("contextmenu",function(S){return S.preventDefault()}),this._geolocateButton=I.create("button","mapboxgl-ctrl-geolocate",this._container),I.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var _=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ss(this._dotElement),this._circleElement=I.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ss({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(S){S.geolocateSource||c._watchState!=="ACTIVE_LOCK"||S.originalEvent&&S.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new a.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Yo--,Po=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Yo>1?(o={maximumAge:6e5,timeout:0},Po=!0):(o=this.options.positionOptions,Po=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(a.Evented),Ja={maxWidth:100,unit:"metric"},Qa=function(n){this.options=a.extend({},Ja,n),a.bindAll(["_onMove","setUnit"],this)};function al(n,s,o){var c=o&&o.maxWidth||100,_=n._container.clientHeight/2,w=n.unproject([0,_]),S=n.unproject([c,_]),z=w.distanceTo(S);if(o&&o.unit==="imperial"){var P=3.2808*z;P>5280?$a(s,c,P/5280,n._getUIString("ScaleControl.Miles")):$a(s,c,P,n._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?$a(s,c,z/1852,n._getUIString("ScaleControl.NauticalMiles")):z>=1e3?$a(s,c,z/1e3,n._getUIString("ScaleControl.Kilometers")):$a(s,c,z,n._getUIString("ScaleControl.Meters"))}function $a(n,s,o,c){var _,w,S,z=(_=o,(w=Math.pow(10,(""+Math.floor(_)).length-1))*(S=(S=_/w)>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(P){var O=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*O)/O}(S)));n.style.width=s*(z/o)+"px",n.innerHTML=z+"&nbsp;"+c}Qa.prototype.getDefaultPosition=function(){return"bottom-left"},Qa.prototype._onMove=function(){al(this._map,this._container,this.options)},Qa.prototype.onAdd=function(n){return this._map=n,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Qa.prototype.onRemove=function(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Qa.prototype.setUnit=function(n){this.options.unit=n,al(this._map,this._container,this.options)};var sa=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof a.window.HTMLElement?this._container=n.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};sa.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},sa.prototype.onRemove=function(){I.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},sa.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},sa.prototype._setupUI=function(){var n=this._fullscreenButton=I.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);I.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},sa.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},sa.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},sa.prototype._isFullscreen=function(){return this._fullscreen},sa.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},sa.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var lu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Es=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),uu=function(n){function s(o){n.call(this),this.options=a.extend(Object.create(lu),o),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(a.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var c,_=a.window.document.createDocumentFragment(),w=a.window.document.createElement("body");for(w.innerHTML=o;c=w.firstChild;)_.appendChild(c);return this.setDOMContent(_)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=I.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=I.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=I.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(K){return c._container.classList.add(K)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wo(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var _=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),w=this.options.anchor,S=function K(W){if(W){if(typeof W=="number"){var ie=Math.round(Math.sqrt(.5*Math.pow(W,2)));return{center:new a.Point(0,0),top:new a.Point(0,W),"top-left":new a.Point(ie,ie),"top-right":new a.Point(-ie,ie),bottom:new a.Point(0,-W),"bottom-left":new a.Point(ie,-ie),"bottom-right":new a.Point(-ie,-ie),left:new a.Point(W,0),right:new a.Point(-W,0)}}if(W instanceof a.Point||Array.isArray(W)){var ee=a.Point.convert(W);return{center:ee,top:ee,"top-left":ee,"top-right":ee,bottom:ee,"bottom-left":ee,"bottom-right":ee,left:ee,right:ee}}return{center:a.Point.convert(W.center||[0,0]),top:a.Point.convert(W.top||[0,0]),"top-left":a.Point.convert(W["top-left"]||[0,0]),"top-right":a.Point.convert(W["top-right"]||[0,0]),bottom:a.Point.convert(W.bottom||[0,0]),"bottom-left":a.Point.convert(W["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(W["bottom-right"]||[0,0]),left:a.Point.convert(W.left||[0,0]),right:a.Point.convert(W.right||[0,0])}}return K(new a.Point(0,0))}(this.options.offset);if(!w){var z,P=this._container.offsetWidth,O=this._container.offsetHeight;z=_.y+S.bottom.y<O?["top"]:_.y>this._map.transform.height-O?["bottom"]:[],_.x<P/2?z.push("left"):_.x>this._map.transform.width-P/2&&z.push("right"),w=z.length===0?"bottom":z.join("-")}var Z=_.add(S[w]).round();I.setTransform(this._container,Ta[w]+" translate("+Z.x+"px,"+Z.y+"px)"),nl(this._container,w,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(Es);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(a.Evented),ol={version:a.version,supported:k,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Tc,NavigationControl:La,GeolocateControl:su,AttributionControl:kn,ScaleControl:Qa,FullscreenControl:sa,Popup:uu,Marker:Ss,Style:Un,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){ze().acquire(ke)},clearPrewarmedResources:function(){var n=gt;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(ke),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(n){a.config.ACCESS_TOKEN=n},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(n){a.config.API_URL=n},get workerCount(){return Be.workerCount},set workerCount(n){Be.workerCount=n},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){a.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){a.clearTileCache(n)},workerUrl:""};return ol}),y})})(cg);var vp=cg.exports;const X_=b_(vp);function Sd(l){let p;const d=l[15].default,h=Nu(d,l,l[14],null);return{c(){h&&h.c()},l(y){h&&h.l(y)},m(y,v){h&&h.m(y,v),p=!0},p(y,v){h&&h.p&&(!p||v&16384)&&Uu(h,d,y,y[14],p?ju(d,y[14],v,null):Vu(y[14]),null)},i(y){p||(ot(h,y),p=!0)},o(y){_t(h,y),p=!1},d(y){h&&h.d(y)}}}function Y_(l){let p,d,h,y=l[0]&&Sd(l);return{c(){p=Oe("div"),y&&y.c(),this.h()},l(v){p=Ne(v,"DIV",{class:!0,id:!0});var a=Ze(p);y&&y.l(a),a.forEach(se),this.h()},h(){ne(p,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),ne(p,"id",l[1]),Ku(()=>l[16].call(p))},m(v,a){De(v,p,a),y&&y.m(p,null),d=Hu(p,l[16].bind(p)),l[17](p),h=!0},p(v,[a]){v[0]?y?(y.p(v,a),a&1&&ot(y,1)):(y=Sd(v),y.c(),ot(y,1),y.m(p,null)):y&&(Bn(),_t(y,1,1,()=>{y=null}),Fn()),(!h||a&2)&&ne(p,"id",v[1])},i(v){h||(ot(y),h=!0)},o(v){_t(y),h=!1},d(v){v&&se(p),y&&y.d(),d(),l[17](null)}}}function J_(l,p,d){let{$$slots:h={},$$scope:y}=p,{map:v}=p,{id:a="map"}=p,{location:k={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=p,{style:I="https://raw.githubusercontent.com/NISRA-Tech-Lab/map_tiles/main/basemap_styles/style-omt.json"}=p,{interactive:B=!0}=p,{minzoom:C=0}=p,{maxzoom:F=20}=p,{zoom:D=null}=p,{scrollzoom:X=!0}=p,{geolocate:te=!0}=p,{zoomcontrol:oe=!0}=p,{options:he={}}=p,ve,xe;ag("map",{getMap:()=>v}),k.bounds?he={...he,bounds:k.bounds}:k.lon&&k.lat&&(he={...he,center:[k.lon,k.lat]},k.zoom&&(he.zoom=k.zoom)),Bh(()=>{const He=document.createElement("link");return He.rel="stylesheet",He.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",He.onload=()=>{d(0,v=new vp.Map({container:ve,style:I,minZoom:C,maxZoom:F,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:B,...he})),oe&&v.addControl(new vp.NavigationControl({showCompass:!1})),X||v.scrollZoom.disable(),te&&v.addControl(new vp.GeolocateControl),v.on("load",()=>{d(4,D=v.getZoom())}),v.on("zoom",()=>{d(4,D=v.getZoom())})},document.head.appendChild(He),()=>{v.remove(),He.parentNode.removeChild(He)}});function tt(){let He=document.getElementsByClassName("mapboxgl-canvas");He[0]&&(He[0].style.width="100%",v.resize())}function Ge(){xe=this.clientWidth,d(2,xe)}function qe(He){Ns[He?"unshift":"push"](()=>{ve=He,d(3,ve)})}return l.$$set=He=>{"map"in He&&d(0,v=He.map),"id"in He&&d(1,a=He.id),"location"in He&&d(6,k=He.location),"style"in He&&d(7,I=He.style),"interactive"in He&&d(8,B=He.interactive),"minzoom"in He&&d(9,C=He.minzoom),"maxzoom"in He&&d(10,F=He.maxzoom),"zoom"in He&&d(4,D=He.zoom),"scrollzoom"in He&&d(11,X=He.scrollzoom),"geolocate"in He&&d(12,te=He.geolocate),"zoomcontrol"in He&&d(13,oe=He.zoomcontrol),"options"in He&&d(5,he=He.options),"$$scope"in He&&d(14,y=He.$$scope)},l.$$.update=()=>{l.$$.dirty&4&&xe&&tt()},[v,a,xe,ve,D,he,k,I,B,C,F,X,te,oe,y,h,Ge,qe]}class Q_ extends pn{constructor(p){super(),hn(this,p,J_,Y_,cn,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function Ed(l){let p;const d=l[11].default,h=Nu(d,l,l[10],null);return{c(){h&&h.c()},l(y){h&&h.l(y)},m(y,v){h&&h.m(y,v),p=!0},p(y,v){h&&h.p&&(!p||v&1024)&&Uu(h,d,y,y[10],p?ju(d,y[10],v,null):Vu(y[10]),null)},i(y){p||(ot(h,y),p=!0)},o(y){_t(h,y),p=!1},d(y){h&&h.d(y)}}}function $_(l){let p,d,h=l[0]&&Ed(l);return{c(){h&&h.c(),p=oi()},l(y){h&&h.l(y),p=oi()},m(y,v){h&&h.m(y,v),De(y,p,v),d=!0},p(y,[v]){y[0]?h?(h.p(y,v),v&1&&ot(h,1)):(h=Ed(y),h.c(),ot(h,1),h.m(p.parentNode,p)):h&&(Bn(),_t(h,1,1,()=>{h=null}),Fn())},i(y){d||(ot(h),d=!0)},o(y){_t(h),d=!1},d(y){y&&se(p),h&&h.d(y)}}}function ev(l,p,d){let{$$slots:h={},$$scope:y}=p,{id:v}=p,{type:a}=p,{url:k=null}=p,{props:I={}}=p,{data:B=null}=p,{layer:C=null}=p,{promoteId:F=null}=p,{minzoom:D=null}=p,{maxzoom:X=null}=p,te=!1;const{getMap:oe}=Wu("map"),he=oe();he.getSource(v)&&he.removeSource(v);function ve(){he.isSourceLoaded(v)?(d(0,te=!0),console.log(v+" loaded!")):setTimeout(()=>{console.log("..."),ve()},500)}function xe(){he.isStyleLoaded(v)?(tt(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),xe()},500)}D&&(I.minzoom=D),X&&(I.maxzoom=X),C&&F?(I.promoteId={},I.promoteId[C]=F):F&&(I.promoteId=F);function tt(){console.log(v+" map source loading..."),a=="geojson"?B?(he.addSource(v,{type:a,data:B,...I}),ve()):k&&(he.addSource(v,{type:a,data:k,...I}),ve()):a=="vector"&&(he.addSource(v,{type:a,tiles:[k],...I}),ve())}xe();function Ge(){he.getSource(v).setData(B)}return l.$$set=qe=>{"id"in qe&&d(2,v=qe.id),"type"in qe&&d(3,a=qe.type),"url"in qe&&d(4,k=qe.url),"props"in qe&&d(1,I=qe.props),"data"in qe&&d(5,B=qe.data),"layer"in qe&&d(6,C=qe.layer),"promoteId"in qe&&d(7,F=qe.promoteId),"minzoom"in qe&&d(8,D=qe.minzoom),"maxzoom"in qe&&d(9,X=qe.maxzoom),"$$scope"in qe&&d(10,y=qe.$$scope)},l.$$.update=()=>{l.$$.dirty&33&&te&&B&&Ge()},[te,I,v,a,k,B,C,F,D,X,y,h]}class tv extends pn{constructor(p){super(),hn(this,p,ev,$_,cn,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function iv(l,p,d){const{Popup:h}=X_,y=p_(),v=new h({closeButton:!1,closeOnClick:!1});let{id:a}=p,{source:k}=p,{sourceLayer:I=null}=p,{type:B}=p,{filter:C=null}=p,{layout:F={}}=p,{paint:D={}}=p,{data:X=null}=p,{code:te=null}=p,{name:oe="name"}=p,{colorCode:he=null}=p,{click:ve=!1}=p,{ignoreClick:xe=!1}=p,{clickCenter:tt=!1}=p,{selected:Ge=null}=p,{hover:qe=!1}=p,{hovered:He=null}=p,{highlight:ni=!1}=p,{highlightKey:Ot="highlighted"}=p,{highlighted:Ue=[]}=p,{order:Xe=null}=p,{maxzoom:xt=null}=p,{minzoom:ii=null}=p,{isChild:Ve=!1}=p;const{getMap:lt}=Wu("map"),Me=lt();let st=null,ft=null,Ut=[];Me.getLayer(a)&&Me.removeLayer(a);let Mt={id:a,type:B,source:k,paint:D,layout:F};C&&(Mt.filter=C),I&&(Mt["source-layer"]=I),xt&&(Mt.maxzoom=xt),ii&&(Mt.minzoom=ii),Me.addLayer(Mt,Xe);function kt(){console.log("updating colors..."),X.forEach(Pe=>{Me.setFeatureState({source:k,sourceLayer:I,id:Pe[te]},{color:Pe[he]})})}return ve&&Me.on("click",a,Pe=>{if(Pe.features.length>0&&!xe){let rt=Pe.features[0].id;if(Ve&&Ue.includes(rt)||!Ve&&Ge!=rt){if(d(0,Ge=rt),y("select",{code:Ge}),st&&Me.setFeatureState({source:k,sourceLayer:I,id:st},{selected:!1}),Me.setFeatureState({source:k,sourceLayer:I,id:Ge},{selected:!0}),tt){let zi=centroid(Pe.features[0].toJSON().geometry);Me.flyTo({center:zi.geometry.coordinates})}d(24,st=Ge)}}}),qe&&(Me.on("mousemove",a,Pe=>{if(Pe.features.length>0){let rt=Pe.features[0].id;He&&Me.setFeatureState({source:k,sourceLayer:I,id:He},{hovered:!1}),Ve&&Ue.includes(rt)||!Ve&&Ge!=rt?(d(1,He=d(25,ft=rt)),Me.setFeatureState({source:k,sourceLayer:I,id:He},{hovered:!0}),Me.getCanvas().style.cursor="pointer",v.setLngLat(Pe.lngLat).setHTML(`<strong>${Pe.features[0].properties[oe]?Pe.features[0].properties[oe]:Pe.features[0].properties[te]}</strong>`).addTo(Me)):v.remove()}}),Me.on("mouseleave",a,Pe=>{He&&Me.setFeatureState({source:k,sourceLayer:I,id:He},{hovered:!1}),d(1,He=d(25,ft=null)),Me.getCanvas().style.cursor="",v.remove()})),l.$$set=Pe=>{"id"in Pe&&d(2,a=Pe.id),"source"in Pe&&d(3,k=Pe.source),"sourceLayer"in Pe&&d(4,I=Pe.sourceLayer),"type"in Pe&&d(5,B=Pe.type),"filter"in Pe&&d(6,C=Pe.filter),"layout"in Pe&&d(7,F=Pe.layout),"paint"in Pe&&d(8,D=Pe.paint),"data"in Pe&&d(9,X=Pe.data),"code"in Pe&&d(10,te=Pe.code),"name"in Pe&&d(11,oe=Pe.name),"colorCode"in Pe&&d(12,he=Pe.colorCode),"click"in Pe&&d(13,ve=Pe.click),"ignoreClick"in Pe&&d(14,xe=Pe.ignoreClick),"clickCenter"in Pe&&d(15,tt=Pe.clickCenter),"selected"in Pe&&d(0,Ge=Pe.selected),"hover"in Pe&&d(16,qe=Pe.hover),"hovered"in Pe&&d(1,He=Pe.hovered),"highlight"in Pe&&d(17,ni=Pe.highlight),"highlightKey"in Pe&&d(18,Ot=Pe.highlightKey),"highlighted"in Pe&&d(19,Ue=Pe.highlighted),"order"in Pe&&d(20,Xe=Pe.order),"maxzoom"in Pe&&d(21,xt=Pe.maxzoom),"minzoom"in Pe&&d(22,ii=Pe.minzoom),"isChild"in Pe&&d(23,Ve=Pe.isChild)},l.$$.update=()=>{l.$$.dirty[0]&4096&&he&&kt(),l.$$.dirty[0]&68026392&&ni&&Ue!=Ut&&(Ut[0]&&Ut.forEach(Pe=>{let rt={};rt[Ot]=!1,Me.setFeatureState({source:k,sourceLayer:I,id:Pe},rt)}),d(26,Ut=Ue),Ue[0]&&Ue.forEach(Pe=>{let rt={};rt[Ot]=!0,Me.setFeatureState({source:k,sourceLayer:I,id:Pe},rt)})),l.$$.dirty[0]&16777241&&Ge!=st&&(st&&Me.setFeatureState({source:k,sourceLayer:I,id:st},{selected:!1}),Ge&&Me.setFeatureState({source:k,sourceLayer:I,id:Ge},{selected:!0}),d(24,st=Ge)),l.$$.dirty[0]&33619994&&qe&&He!=ft&&(ft&&Me.setFeatureState({source:k,sourceLayer:I,id:ft},{hovered:!1}),He&&Me.setFeatureState({source:k,sourceLayer:I,id:He},{hovered:!0}),d(25,ft=He))},[Ge,He,a,k,I,B,C,F,D,X,te,oe,he,ve,xe,tt,qe,ni,Ot,Ue,Xe,xt,ii,Ve,st,ft,Ut]}class Eh extends pn{constructor(p){super(),hn(this,p,iv,null,cn,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function rv(l){return l===0?!0:l}function ns(l){return rv(l)?Array.isArray(l)?p=>l.map(d=>typeof d!="function"?p[d]:d(p)):typeof l!="function"?p=>p[l]:l:null}function nv(l){const p={};for(const d of l){if(Object(d)!==d)throw new TypeError("iterable for fromEntries should yield objects");const{"0":h,"1":y}=d;Object.defineProperty(p,h,{configurable:!0,enumerable:!0,writable:!0,value:y})}return p}function kh(l,p={}){return nv(Object.entries(l).filter(([d,h])=>h!==void 0&&p[d]===void 0))}function av(l,p){if(!Array.isArray(l))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof l}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(p)||p===void 0||p===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const d={},h=Object.keys(p),y=h.length;let v,a,k,I,B,C,F,D;const X=l.length;for(v=0;v<y;v+=1){for(I=h[v],F=p[I],B=null,C=null,a=0;a<X;a+=1)if(D=F(l[a]),Array.isArray(D)){const te=D.length;for(k=0;k<te;k+=1)D[k]!==void 0&&D[k]!==null&&Number.isNaN(D[k])===!1&&((B===null||D[k]<B)&&(B=D[k]),(C===null||D[k]>C)&&(C=D[k]))}else D!=null&&Number.isNaN(D)===!1&&((B===null||D<B)&&(B=D),(C===null||D>C)&&(C=D));d[I]=[B,C]}return d}function pg(l=[],p){return Array.isArray(p)===!0?p.map((d,h)=>d===null?l[h]:d):l}function lp(l){return function([d,h]){return d?pg(d[l],h):h}}function bp(l,p){return l==null||p==null?NaN:l<p?-1:l>p?1:l>=p?0:NaN}function ov(l,p){return l==null||p==null?NaN:p<l?-1:p>l?1:p>=l?0:NaN}function hg(l){let p,d,h;l.length!==2?(p=bp,d=(k,I)=>bp(l(k),I),h=(k,I)=>l(k)-I):(p=l===bp||l===ov?l:sv,d=l,h=l);function y(k,I,B=0,C=k.length){if(B<C){if(p(I,I)!==0)return C;do{const F=B+C>>>1;d(k[F],I)<0?B=F+1:C=F}while(B<C)}return B}function v(k,I,B=0,C=k.length){if(B<C){if(p(I,I)!==0)return C;do{const F=B+C>>>1;d(k[F],I)<=0?B=F+1:C=F}while(B<C)}return B}function a(k,I,B=0,C=k.length){const F=y(k,I,B,C-1);return F>B&&h(k[F-1],I)>-h(k[F],I)?F-1:F}return{left:y,center:a,right:v}}function sv(){return 0}function lv(l){return l===null?NaN:+l}const uv=hg(bp),cv=uv.right;hg(lv).center;const pv=cv;class kd extends Map{constructor(p,d=dv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:d}}),p!=null)for(const[h,y]of p)this.set(h,y)}get(p){return super.get(Id(this,p))}has(p){return super.has(Id(this,p))}set(p,d){return super.set(hv(this,p),d)}delete(p){return super.delete(fv(this,p))}}function Id({_intern:l,_key:p},d){const h=p(d);return l.has(h)?l.get(h):d}function hv({_intern:l,_key:p},d){const h=p(d);return l.has(h)?l.get(h):(l.set(h,d),d)}function fv({_intern:l,_key:p},d){const h=p(d);return l.has(h)&&(d=l.get(h),l.delete(h)),d}function dv(l){return l!==null&&typeof l=="object"?l.valueOf():l}var Ph=Math.sqrt(50),Ch=Math.sqrt(10),Mh=Math.sqrt(2);function mv(l,p,d){var h,y=-1,v,a,k;if(p=+p,l=+l,d=+d,l===p&&d>0)return[l];if((h=p<l)&&(v=l,l=p,p=v),(k=fg(l,p,d))===0||!isFinite(k))return[];if(k>0){let I=Math.round(l/k),B=Math.round(p/k);for(I*k<l&&++I,B*k>p&&--B,a=new Array(v=B-I+1);++y<v;)a[y]=(I+y)*k}else{k=-k;let I=Math.round(l*k),B=Math.round(p*k);for(I/k<l&&++I,B/k>p&&--B,a=new Array(v=B-I+1);++y<v;)a[y]=(I+y)/k}return h&&a.reverse(),a}function fg(l,p,d){var h=(p-l)/Math.max(0,d),y=Math.floor(Math.log(h)/Math.LN10),v=h/Math.pow(10,y);return y>=0?(v>=Ph?10:v>=Ch?5:v>=Mh?2:1)*Math.pow(10,y):-Math.pow(10,-y)/(v>=Ph?10:v>=Ch?5:v>=Mh?2:1)}function gv(l,p,d){var h=Math.abs(p-l)/Math.max(0,d),y=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),v=h/y;return v>=Ph?y*=10:v>=Ch?y*=5:v>=Mh&&(y*=2),p<l?-y:y}function yv(l,p,d){l=+l,p=+p,d=(y=arguments.length)<2?(p=l,l=0,1):y<3?1:+d;for(var h=-1,y=Math.max(0,Math.ceil((p-l)/d))|0,v=new Array(y);++h<y;)v[h]=l+h*d;return v}function Dp(l,p){switch(arguments.length){case 0:break;case 1:this.range(l);break;default:this.range(p).domain(l);break}return this}const zd=Symbol("implicit");function dg(){var l=new kd,p=[],d=[],h=zd;function y(v){let a=l.get(v);if(a===void 0){if(h!==zd)return h;l.set(v,a=p.push(v)-1)}return d[a%d.length]}return y.domain=function(v){if(!arguments.length)return p.slice();p=[],l=new kd;for(const a of v)l.has(a)||l.set(a,p.push(a)-1);return y},y.range=function(v){return arguments.length?(d=Array.from(v),y):d.slice()},y.unknown=function(v){return arguments.length?(h=v,y):h},y.copy=function(){return dg(p,d).unknown(h)},Dp.apply(y,arguments),y}function mg(){var l=dg().unknown(void 0),p=l.domain,d=l.range,h=0,y=1,v,a,k=!1,I=0,B=0,C=.5;delete l.unknown;function F(){var D=p().length,X=y<h,te=X?y:h,oe=X?h:y;v=(oe-te)/Math.max(1,D-I+B*2),k&&(v=Math.floor(v)),te+=(oe-te-v*(D-I))*C,a=v*(1-I),k&&(te=Math.round(te),a=Math.round(a));var he=yv(D).map(function(ve){return te+v*ve});return d(X?he.reverse():he)}return l.domain=function(D){return arguments.length?(p(D),F()):p()},l.range=function(D){return arguments.length?([h,y]=D,h=+h,y=+y,F()):[h,y]},l.rangeRound=function(D){return[h,y]=D,h=+h,y=+y,k=!0,F()},l.bandwidth=function(){return a},l.step=function(){return v},l.round=function(D){return arguments.length?(k=!!D,F()):k},l.padding=function(D){return arguments.length?(I=Math.min(1,B=+D),F()):I},l.paddingInner=function(D){return arguments.length?(I=Math.min(1,D),F()):I},l.paddingOuter=function(D){return arguments.length?(B=+D,F()):B},l.align=function(D){return arguments.length?(C=Math.max(0,Math.min(1,D)),F()):C},l.copy=function(){return mg(p(),[h,y]).round(k).paddingInner(I).paddingOuter(B).align(C)},Dp.apply(F(),arguments)}function jh(l,p,d){l.prototype=p.prototype=d,d.constructor=l}function gg(l,p){var d=Object.create(l.prototype);for(var h in p)d[h]=p[h];return d}function ic(){}var qu=.7,Ep=1/qu,Fl="\\s*([+-]?\\d+)\\s*",Gu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",co="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_v=/^#([0-9a-f]{3,8})$/,vv=new RegExp(`^rgb\\(${Fl},${Fl},${Fl}\\)$`),bv=new RegExp(`^rgb\\(${co},${co},${co}\\)$`),xv=new RegExp(`^rgba\\(${Fl},${Fl},${Fl},${Gu}\\)$`),wv=new RegExp(`^rgba\\(${co},${co},${co},${Gu}\\)$`),Sv=new RegExp(`^hsl\\(${Gu},${co},${co}\\)$`),Ev=new RegExp(`^hsla\\(${Gu},${co},${co},${Gu}\\)$`),Td={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jh(ic,Zu,{copy(l){return Object.assign(new this.constructor,this,l)},displayable(){return this.rgb().displayable()},hex:Ad,formatHex:Ad,formatHex8:kv,formatHsl:Iv,formatRgb:Pd,toString:Pd});function Ad(){return this.rgb().formatHex()}function kv(){return this.rgb().formatHex8()}function Iv(){return yg(this).formatHsl()}function Pd(){return this.rgb().formatRgb()}function Zu(l){var p,d;return l=(l+"").trim().toLowerCase(),(p=_v.exec(l))?(d=p[1].length,p=parseInt(p[1],16),d===6?Cd(p):d===3?new ha(p>>8&15|p>>4&240,p>>4&15|p&240,(p&15)<<4|p&15,1):d===8?up(p>>24&255,p>>16&255,p>>8&255,(p&255)/255):d===4?up(p>>12&15|p>>8&240,p>>8&15|p>>4&240,p>>4&15|p&240,((p&15)<<4|p&15)/255):null):(p=vv.exec(l))?new ha(p[1],p[2],p[3],1):(p=bv.exec(l))?new ha(p[1]*255/100,p[2]*255/100,p[3]*255/100,1):(p=xv.exec(l))?up(p[1],p[2],p[3],p[4]):(p=wv.exec(l))?up(p[1]*255/100,p[2]*255/100,p[3]*255/100,p[4]):(p=Sv.exec(l))?Ld(p[1],p[2]/100,p[3]/100,1):(p=Ev.exec(l))?Ld(p[1],p[2]/100,p[3]/100,p[4]):Td.hasOwnProperty(l)?Cd(Td[l]):l==="transparent"?new ha(NaN,NaN,NaN,0):null}function Cd(l){return new ha(l>>16&255,l>>8&255,l&255,1)}function up(l,p,d,h){return h<=0&&(l=p=d=NaN),new ha(l,p,d,h)}function zv(l){return l instanceof ic||(l=Zu(l)),l?(l=l.rgb(),new ha(l.r,l.g,l.b,l.opacity)):new ha}function Dh(l,p,d,h){return arguments.length===1?zv(l):new ha(l,p,d,h??1)}function ha(l,p,d,h){this.r=+l,this.g=+p,this.b=+d,this.opacity=+h}jh(ha,Dh,gg(ic,{brighter(l){return l=l==null?Ep:Math.pow(Ep,l),new ha(this.r*l,this.g*l,this.b*l,this.opacity)},darker(l){return l=l==null?qu:Math.pow(qu,l),new ha(this.r*l,this.g*l,this.b*l,this.opacity)},rgb(){return this},clamp(){return new ha(Os(this.r),Os(this.g),Os(this.b),kp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Md,formatHex:Md,formatHex8:Tv,formatRgb:Dd,toString:Dd}));function Md(){return`#${Fs(this.r)}${Fs(this.g)}${Fs(this.b)}`}function Tv(){return`#${Fs(this.r)}${Fs(this.g)}${Fs(this.b)}${Fs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dd(){const l=kp(this.opacity);return`${l===1?"rgb(":"rgba("}${Os(this.r)}, ${Os(this.g)}, ${Os(this.b)}${l===1?")":`, ${l})`}`}function kp(l){return isNaN(l)?1:Math.max(0,Math.min(1,l))}function Os(l){return Math.max(0,Math.min(255,Math.round(l)||0))}function Fs(l){return l=Os(l),(l<16?"0":"")+l.toString(16)}function Ld(l,p,d,h){return h<=0?l=p=d=NaN:d<=0||d>=1?l=p=NaN:p<=0&&(l=NaN),new Na(l,p,d,h)}function yg(l){if(l instanceof Na)return new Na(l.h,l.s,l.l,l.opacity);if(l instanceof ic||(l=Zu(l)),!l)return new Na;if(l instanceof Na)return l;l=l.rgb();var p=l.r/255,d=l.g/255,h=l.b/255,y=Math.min(p,d,h),v=Math.max(p,d,h),a=NaN,k=v-y,I=(v+y)/2;return k?(p===v?a=(d-h)/k+(d<h)*6:d===v?a=(h-p)/k+2:a=(p-d)/k+4,k/=I<.5?v+y:2-v-y,a*=60):k=I>0&&I<1?0:a,new Na(a,k,I,l.opacity)}function Av(l,p,d,h){return arguments.length===1?yg(l):new Na(l,p,d,h??1)}function Na(l,p,d,h){this.h=+l,this.s=+p,this.l=+d,this.opacity=+h}jh(Na,Av,gg(ic,{brighter(l){return l=l==null?Ep:Math.pow(Ep,l),new Na(this.h,this.s,this.l*l,this.opacity)},darker(l){return l=l==null?qu:Math.pow(qu,l),new Na(this.h,this.s,this.l*l,this.opacity)},rgb(){var l=this.h%360+(this.h<0)*360,p=isNaN(l)||isNaN(this.s)?0:this.s,d=this.l,h=d+(d<.5?d:1-d)*p,y=2*d-h;return new ha(Ih(l>=240?l-240:l+120,y,h),Ih(l,y,h),Ih(l<120?l+240:l-120,y,h),this.opacity)},clamp(){return new Na(Rd(this.h),cp(this.s),cp(this.l),kp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const l=kp(this.opacity);return`${l===1?"hsl(":"hsla("}${Rd(this.h)}, ${cp(this.s)*100}%, ${cp(this.l)*100}%${l===1?")":`, ${l})`}`}}));function Rd(l){return l=(l||0)%360,l<0?l+360:l}function cp(l){return Math.max(0,Math.min(1,l||0))}function Ih(l,p,d){return(l<60?p+(d-p)*l/60:l<180?d:l<240?p+(d-p)*(240-l)/60:p)*255}const qh=l=>()=>l;function Pv(l,p){return function(d){return l+d*p}}function Cv(l,p,d){return l=Math.pow(l,d),p=Math.pow(p,d)-l,d=1/d,function(h){return Math.pow(l+h*p,d)}}function Mv(l){return(l=+l)==1?_g:function(p,d){return d-p?Cv(p,d,l):qh(isNaN(p)?d:p)}}function _g(l,p){var d=p-l;return d?Pv(l,d):qh(isNaN(l)?p:l)}const Bd=function l(p){var d=Mv(p);function h(y,v){var a=d((y=Dh(y)).r,(v=Dh(v)).r),k=d(y.g,v.g),I=d(y.b,v.b),B=_g(y.opacity,v.opacity);return function(C){return y.r=a(C),y.g=k(C),y.b=I(C),y.opacity=B(C),y+""}}return h.gamma=l,h}(1);function Dv(l,p){p||(p=[]);var d=l?Math.min(p.length,l.length):0,h=p.slice(),y;return function(v){for(y=0;y<d;++y)h[y]=l[y]*(1-v)+p[y]*v;return h}}function Lv(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}function Rv(l,p){var d=p?p.length:0,h=l?Math.min(d,l.length):0,y=new Array(h),v=new Array(d),a;for(a=0;a<h;++a)y[a]=Gh(l[a],p[a]);for(;a<d;++a)v[a]=p[a];return function(k){for(a=0;a<h;++a)v[a]=y[a](k);return v}}function Bv(l,p){var d=new Date;return l=+l,p=+p,function(h){return d.setTime(l*(1-h)+p*h),d}}function Ip(l,p){return l=+l,p=+p,function(d){return l*(1-d)+p*d}}function Fv(l,p){var d={},h={},y;(l===null||typeof l!="object")&&(l={}),(p===null||typeof p!="object")&&(p={});for(y in p)y in l?d[y]=Gh(l[y],p[y]):h[y]=p[y];return function(v){for(y in d)h[y]=d[y](v);return h}}var Lh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zh=new RegExp(Lh.source,"g");function Ov(l){return function(){return l}}function Nv(l){return function(p){return l(p)+""}}function Uv(l,p){var d=Lh.lastIndex=zh.lastIndex=0,h,y,v,a=-1,k=[],I=[];for(l=l+"",p=p+"";(h=Lh.exec(l))&&(y=zh.exec(p));)(v=y.index)>d&&(v=p.slice(d,v),k[a]?k[a]+=v:k[++a]=v),(h=h[0])===(y=y[0])?k[a]?k[a]+=y:k[++a]=y:(k[++a]=null,I.push({i:a,x:Ip(h,y)})),d=zh.lastIndex;return d<p.length&&(v=p.slice(d),k[a]?k[a]+=v:k[++a]=v),k.length<2?I[0]?Nv(I[0].x):Ov(p):(p=I.length,function(B){for(var C=0,F;C<p;++C)k[(F=I[C]).i]=F.x(B);return k.join("")})}function Gh(l,p){var d=typeof p,h;return p==null||d==="boolean"?qh(p):(d==="number"?Ip:d==="string"?(h=Zu(p))?(p=h,Bd):Uv:p instanceof Zu?Bd:p instanceof Date?Bv:Lv(p)?Dv:Array.isArray(p)?Rv:typeof p.valueOf!="function"&&typeof p.toString!="function"||isNaN(p)?Fv:Ip)(l,p)}function Vv(l,p){return l=+l,p=+p,function(d){return Math.round(l*(1-d)+p*d)}}function jv(l){return function(){return l}}function qv(l){return+l}var Fd=[0,1];function uo(l){return l}function Rh(l,p){return(p-=l=+l)?function(d){return(d-l)/p}:jv(isNaN(p)?NaN:.5)}function Gv(l,p){var d;return l>p&&(d=l,l=p,p=d),function(h){return Math.max(l,Math.min(p,h))}}function Zv(l,p,d){var h=l[0],y=l[1],v=p[0],a=p[1];return y<h?(h=Rh(y,h),v=d(a,v)):(h=Rh(h,y),v=d(v,a)),function(k){return v(h(k))}}function Kv(l,p,d){var h=Math.min(l.length,p.length)-1,y=new Array(h),v=new Array(h),a=-1;for(l[h]<l[0]&&(l=l.slice().reverse(),p=p.slice().reverse());++a<h;)y[a]=Rh(l[a],l[a+1]),v[a]=d(p[a],p[a+1]);return function(k){var I=pv(l,k,1,h)-1;return v[I](y[I](k))}}function vg(l,p){return p.domain(l.domain()).range(l.range()).interpolate(l.interpolate()).clamp(l.clamp()).unknown(l.unknown())}function bg(){var l=Fd,p=Fd,d=Gh,h,y,v,a=uo,k,I,B;function C(){var D=Math.min(l.length,p.length);return a!==uo&&(a=Gv(l[0],l[D-1])),k=D>2?Kv:Zv,I=B=null,F}function F(D){return D==null||isNaN(D=+D)?v:(I||(I=k(l.map(h),p,d)))(h(a(D)))}return F.invert=function(D){return a(y((B||(B=k(p,l.map(h),Ip)))(D)))},F.domain=function(D){return arguments.length?(l=Array.from(D,qv),C()):l.slice()},F.range=function(D){return arguments.length?(p=Array.from(D),C()):p.slice()},F.rangeRound=function(D){return p=Array.from(D),d=Vv,C()},F.clamp=function(D){return arguments.length?(a=D?!0:uo,C()):a!==uo},F.interpolate=function(D){return arguments.length?(d=D,C()):d},F.unknown=function(D){return arguments.length?(v=D,F):v},function(D,X){return h=D,y=X,C()}}function Hv(){return bg()(uo,uo)}function Wv(l){return Math.abs(l=Math.round(l))>=1e21?l.toLocaleString("en").replace(/,/g,""):l.toString(10)}function zp(l,p){if((d=(l=p?l.toExponential(p-1):l.toExponential()).indexOf("e"))<0)return null;var d,h=l.slice(0,d);return[h.length>1?h[0]+h.slice(2):h,+l.slice(d+1)]}function Ol(l){return l=zp(Math.abs(l)),l?l[1]:NaN}function Xv(l,p){return function(d,h){for(var y=d.length,v=[],a=0,k=l[0],I=0;y>0&&k>0&&(I+k+1>h&&(k=Math.max(1,h-I)),v.push(d.substring(y-=k,y+k)),!((I+=k+1)>h));)k=l[a=(a+1)%l.length];return v.reverse().join(p)}}function Yv(l){return function(p){return p.replace(/[0-9]/g,function(d){return l[+d]})}}var Jv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tp(l){if(!(p=Jv.exec(l)))throw new Error("invalid format: "+l);var p;return new Zh({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}Tp.prototype=Zh.prototype;function Zh(l){this.fill=l.fill===void 0?" ":l.fill+"",this.align=l.align===void 0?">":l.align+"",this.sign=l.sign===void 0?"-":l.sign+"",this.symbol=l.symbol===void 0?"":l.symbol+"",this.zero=!!l.zero,this.width=l.width===void 0?void 0:+l.width,this.comma=!!l.comma,this.precision=l.precision===void 0?void 0:+l.precision,this.trim=!!l.trim,this.type=l.type===void 0?"":l.type+""}Zh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qv(l){e:for(var p=l.length,d=1,h=-1,y;d<p;++d)switch(l[d]){case".":h=y=d;break;case"0":h===0&&(h=d),y=d;break;default:if(!+l[d])break e;h>0&&(h=0);break}return h>0?l.slice(0,h)+l.slice(y+1):l}var xg;function $v(l,p){var d=zp(l,p);if(!d)return l+"";var h=d[0],y=d[1],v=y-(xg=Math.max(-8,Math.min(8,Math.floor(y/3)))*3)+1,a=h.length;return v===a?h:v>a?h+new Array(v-a+1).join("0"):v>0?h.slice(0,v)+"."+h.slice(v):"0."+new Array(1-v).join("0")+zp(l,Math.max(0,p+v-1))[0]}function Od(l,p){var d=zp(l,p);if(!d)return l+"";var h=d[0],y=d[1];return y<0?"0."+new Array(-y).join("0")+h:h.length>y+1?h.slice(0,y+1)+"."+h.slice(y+1):h+new Array(y-h.length+2).join("0")}const Nd={"%":(l,p)=>(l*100).toFixed(p),b:l=>Math.round(l).toString(2),c:l=>l+"",d:Wv,e:(l,p)=>l.toExponential(p),f:(l,p)=>l.toFixed(p),g:(l,p)=>l.toPrecision(p),o:l=>Math.round(l).toString(8),p:(l,p)=>Od(l*100,p),r:Od,s:$v,X:l=>Math.round(l).toString(16).toUpperCase(),x:l=>Math.round(l).toString(16)};function Ud(l){return l}var Vd=Array.prototype.map,jd=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function e0(l){var p=l.grouping===void 0||l.thousands===void 0?Ud:Xv(Vd.call(l.grouping,Number),l.thousands+""),d=l.currency===void 0?"":l.currency[0]+"",h=l.currency===void 0?"":l.currency[1]+"",y=l.decimal===void 0?".":l.decimal+"",v=l.numerals===void 0?Ud:Yv(Vd.call(l.numerals,String)),a=l.percent===void 0?"%":l.percent+"",k=l.minus===void 0?"":l.minus+"",I=l.nan===void 0?"NaN":l.nan+"";function B(F){F=Tp(F);var D=F.fill,X=F.align,te=F.sign,oe=F.symbol,he=F.zero,ve=F.width,xe=F.comma,tt=F.precision,Ge=F.trim,qe=F.type;qe==="n"?(xe=!0,qe="g"):Nd[qe]||(tt===void 0&&(tt=12),Ge=!0,qe="g"),(he||D==="0"&&X==="=")&&(he=!0,D="0",X="=");var He=oe==="$"?d:oe==="#"&&/[boxX]/.test(qe)?"0"+qe.toLowerCase():"",ni=oe==="$"?h:/[%p]/.test(qe)?a:"",Ot=Nd[qe],Ue=/[defgprs%]/.test(qe);tt=tt===void 0?6:/[gprs]/.test(qe)?Math.max(1,Math.min(21,tt)):Math.max(0,Math.min(20,tt));function Xe(xt){var ii=He,Ve=ni,lt,Me,st;if(qe==="c")Ve=Ot(xt)+Ve,xt="";else{xt=+xt;var ft=xt<0||1/xt<0;if(xt=isNaN(xt)?I:Ot(Math.abs(xt),tt),Ge&&(xt=Qv(xt)),ft&&+xt==0&&te!=="+"&&(ft=!1),ii=(ft?te==="("?te:k:te==="-"||te==="("?"":te)+ii,Ve=(qe==="s"?jd[8+xg/3]:"")+Ve+(ft&&te==="("?")":""),Ue){for(lt=-1,Me=xt.length;++lt<Me;)if(st=xt.charCodeAt(lt),48>st||st>57){Ve=(st===46?y+xt.slice(lt+1):xt.slice(lt))+Ve,xt=xt.slice(0,lt);break}}}xe&&!he&&(xt=p(xt,1/0));var Ut=ii.length+xt.length+Ve.length,Mt=Ut<ve?new Array(ve-Ut+1).join(D):"";switch(xe&&he&&(xt=p(Mt+xt,Mt.length?ve-Ve.length:1/0),Mt=""),X){case"<":xt=ii+xt+Ve+Mt;break;case"=":xt=ii+Mt+xt+Ve;break;case"^":xt=Mt.slice(0,Ut=Mt.length>>1)+ii+xt+Ve+Mt.slice(Ut);break;default:xt=Mt+ii+xt+Ve;break}return v(xt)}return Xe.toString=function(){return F+""},Xe}function C(F,D){var X=B((F=Tp(F),F.type="f",F)),te=Math.max(-8,Math.min(8,Math.floor(Ol(D)/3)))*3,oe=Math.pow(10,-te),he=jd[8+te/3];return function(ve){return X(oe*ve)+he}}return{format:B,formatPrefix:C}}var pp,wg,Sg;t0({thousands:",",grouping:[3],currency:["$",""]});function t0(l){return pp=e0(l),wg=pp.format,Sg=pp.formatPrefix,pp}function i0(l){return Math.max(0,-Ol(Math.abs(l)))}function r0(l,p){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ol(p)/3)))*3-Ol(Math.abs(l)))}function n0(l,p){return l=Math.abs(l),p=Math.abs(p)-l,Math.max(0,Ol(p)-Ol(l))+1}function a0(l,p,d,h){var y=gv(l,p,d),v;switch(h=Tp(h??",f"),h.type){case"s":{var a=Math.max(Math.abs(l),Math.abs(p));return h.precision==null&&!isNaN(v=r0(y,a))&&(h.precision=v),Sg(h,a)}case"":case"e":case"g":case"p":case"r":{h.precision==null&&!isNaN(v=n0(y,Math.max(Math.abs(l),Math.abs(p))))&&(h.precision=v-(h.type==="e"));break}case"f":case"%":{h.precision==null&&!isNaN(v=i0(y))&&(h.precision=v-(h.type==="%")*2);break}}return wg(h)}function Eg(l){var p=l.domain;return l.ticks=function(d){var h=p();return mv(h[0],h[h.length-1],d??10)},l.tickFormat=function(d,h){var y=p();return a0(y[0],y[y.length-1],d??10,h)},l.nice=function(d){d==null&&(d=10);var h=p(),y=0,v=h.length-1,a=h[y],k=h[v],I,B,C=10;for(k<a&&(B=a,a=k,k=B,B=y,y=v,v=B);C-- >0;){if(B=fg(a,k,d),B===I)return h[y]=a,h[v]=k,p(h);if(B>0)a=Math.floor(a/B)*B,k=Math.ceil(k/B)*B;else if(B<0)a=Math.ceil(a*B)/B,k=Math.floor(k*B)/B;else break;I=B}return l},l}function xp(){var l=Hv();return l.copy=function(){return vg(l,xp())},Dp.apply(l,arguments),Eg(l)}function qd(l){return function(p){return p<0?-Math.pow(-p,l):Math.pow(p,l)}}function o0(l){return l<0?-Math.sqrt(-l):Math.sqrt(l)}function s0(l){return l<0?-l*l:l*l}function l0(l){var p=l(uo,uo),d=1;function h(){return d===1?l(uo,uo):d===.5?l(o0,s0):l(qd(d),qd(1/d))}return p.exponent=function(y){return arguments.length?(d=+y,h()):d},Eg(p)}function kg(){var l=l0(bg());return l.copy=function(){return vg(l,kg()).exponent(l.exponent())},Dp.apply(l,arguments),l}function u0(){return kg.apply(null,arguments).exponent(.5)}const Bu={x:xp,y:xp,z:xp,r:u0};function c0(l){return l.constant?"symlog":l.base?"log":l.exponent?l.exponent()===.5?"sqrt":"pow":"other"}function Gd(l){return l}function p0(l){return p=>Math.log(l*p)}function h0(l){return p=>l*Math.exp(p)}function f0(l){return p=>Math.sign(p)*Math.log1p(Math.abs(p/l))}function d0(l){return p=>Math.sign(p)*Math.expm1(Math.abs(p))*l}function hp(l){return function(d){return d<0?-Math.pow(-d,l):Math.pow(d,l)}}function m0(l){const p=c0(l);if(p==="log"){const d=Math.sign(l.domain()[0]);return{lift:p0(d),ground:h0(d),scaleType:p}}return p==="pow"?{lift:hp(1),ground:hp(1/1),scaleType:p}:p==="sqrt"?{lift:hp(.5),ground:hp(1/.5),scaleType:p}:p==="symlog"?{lift:f0(1),ground:d0(1),scaleType:p}:{lift:Gd,ground:Gd,scaleType:p}}function g0(l,p){if(typeof l.range!="function")throw new Error("Scale method `range` must be a function");if(typeof l.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(p))return l.domain();l.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",l.domain()),l.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",l.range());const{lift:d,ground:h}=m0(l),y=l.domain()[0],v=Object.prototype.toString.call(y)==="[object Date]",[a,k]=l.domain().map(X=>d(v?X.getTime():X)),[I,B]=l.range(),C=p[0]||0,F=p[1]||0,D=(k-a)/(Math.abs(B-I)-C-F);return[a-C*D,F*D+k].map(X=>h(v?new Date(X):X))}function y0(l,p,d,h,y){let v,a;return y===!0?(v=0,a=100):(v=l==="r"?1:0,a=l==="y"?d:l==="r"?25:p),h===!0?[a,v]:[v,a]}function _0(l,p,d,h,y,v){return y?typeof y=="function"?y({width:p,height:d}):y:y0(l,p,d,h,v)}function fp(l){return function([d,h,y,v,a,k,I,B,C,F]){if(h===null)return null;const D=_0(l,I,B,k,C,F),X=d===Bu[l]?d():d.copy();return X.domain(pg(h[l],y)).range(D),v&&X.domain(g0(X,v)),a===!0&&(typeof X.nice=="function"?X.nice():console.error(`[Layer Cake] You set \`${l}Nice: true\` but the ${l}Scale does not have a \`.nice\` method. Ignoring...`)),X}}function dp([l,p]){return d=>{const h=l(d);return Array.isArray(h)?h.map(y=>p(y)):p(h)}}function mp([l]){if(typeof l=="function"){if(typeof l.range=="function")return l.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const gp={x:!1,y:!0,z:!1,r:!1};const v0=l=>({element:l[0]&4,width:l[0]&256,height:l[0]&512,aspectRatio:l[0]&1024,containerWidth:l[0]&128,containerHeight:l[0]&64}),Zd=l=>({element:l[2],width:l[8],height:l[9],aspectRatio:l[10],containerWidth:l[7],containerHeight:l[6]});function Kd(l){let p,d,h;const y=l[90].default,v=Nu(y,l,l[89],Zd);return{c(){p=Oe("div"),v&&v.c(),this.h()},l(a){p=Ne(a,"DIV",{class:!0});var k=Ze(p);v&&v.l(k),k.forEach(se),this.h()},h(){ne(p,"class","layercake-container svelte-vhzpsp"),Ku(()=>l[92].call(p)),Qe(p,"position",l[5]),Qe(p,"top",l[5]==="absolute"?"0":null),Qe(p,"right",l[5]==="absolute"?"0":null),Qe(p,"bottom",l[5]==="absolute"?"0":null),Qe(p,"left",l[5]==="absolute"?"0":null),Qe(p,"pointer-events",l[4]===!1?"none":null)},m(a,k){De(a,p,k),v&&v.m(p,null),l[91](p),d=Hu(p,l[92].bind(p)),h=!0},p(a,k){v&&v.p&&(!h||k[0]&1988|k[2]&134217728)&&Uu(v,y,a,a[89],h?ju(y,a[89],k,v0):Vu(a[89]),Zd),k[0]&32&&Qe(p,"position",a[5]),k[0]&32&&Qe(p,"top",a[5]==="absolute"?"0":null),k[0]&32&&Qe(p,"right",a[5]==="absolute"?"0":null),k[0]&32&&Qe(p,"bottom",a[5]==="absolute"?"0":null),k[0]&32&&Qe(p,"left",a[5]==="absolute"?"0":null),k[0]&16&&Qe(p,"pointer-events",a[4]===!1?"none":null)},i(a){h||(ot(v,a),h=!0)},o(a){_t(v,a),h=!1},d(a){a&&se(p),v&&v.d(a),l[91](null),d()}}}function b0(l){let p,d,h=(l[3]===!0||typeof window<"u")&&Kd(l);return{c(){h&&h.c(),p=oi()},l(y){h&&h.l(y),p=oi()},m(y,v){h&&h.m(y,v),De(y,p,v),d=!0},p(y,v){y[3]===!0||typeof window<"u"?h?(h.p(y,v),v[0]&8&&ot(h,1)):(h=Kd(y),h.c(),ot(h,1),h.m(p.parentNode,p)):h&&(Bn(),_t(h,1,1,()=>{h=null}),Fn())},i(y){d||(ot(h),d=!0)},o(y){_t(h),d=!1},d(y){y&&se(p),h&&h.d(y)}}}function x0(l,p,d){let h,y,v,a,k,I,B,C,F,D,X,te,oe,he,ve,xe,tt,Ge,qe,He,ni,Ot,Ue,Xe,xt,ii,Ve,lt,Me,st,ft,Ut,Mt,kt,Pe,rt,zi,xr,qi,Fi,li,{$$slots:ur={},$$scope:qt}=p,{ssr:fn=!1}=p,{pointerEvents:dn=!0}=p,{position:mn="relative"}=p,{percentRange:Zt=!1}=p,{width:Ci=void 0}=p,{height:Gi=void 0}=p,{containerWidth:cr=Ci||100}=p,{containerHeight:Wr=Gi||100}=p,{element:Ur=void 0}=p,{x:Tr=void 0}=p,{y:pr=void 0}=p,{z:hr=void 0}=p,{r:gn=void 0}=p,{data:Zi=[]}=p,{xDomain:fr=void 0}=p,{yDomain:dr=void 0}=p,{zDomain:wr=void 0}=p,{rDomain:Vr=void 0}=p,{xNice:an=!1}=p,{yNice:Xi=!1}=p,{zNice:Yn=!1}=p,{rNice:wn=!1}=p,{xReverse:Ar=gp.x}=p,{yReverse:Jn=gp.y}=p,{zReverse:Qn=gp.z}=p,{rReverse:Oi=gp.r}=p,{xPadding:$n=void 0}=p,{yPadding:Cn=void 0}=p,{zPadding:Pr=void 0}=p,{rPadding:q=void 0}=p,{xScale:pt=Bu.x}=p,{yScale:mr=Bu.y}=p,{zScale:gr=Bu.z}=p,{rScale:jr=Bu.r}=p,{xRange:Sr=void 0}=p,{yRange:$t=void 0}=p,{zRange:L=void 0}=p,{rRange:N=void 0}=p,{padding:j={}}=p,{extents:H={}}=p,{flatData:Y=void 0}=p,{custom:ue={}}=p,fe=!1;Bh(()=>{fe=!0});const V={},re=Ai(Zt);Ht(l,re,ge=>d(128,xr=ge));const ye=Ai(cr);Ht(l,ye,ge=>d(7,zi=ge));const Le=Ai(Wr);Ht(l,Le,ge=>d(6,rt=ge));const Fe=Ai(kh(H));Ht(l,Fe,ge=>d(127,Pe=ge));const ke=Ai(Zi);Ht(l,ke,ge=>d(126,kt=ge));const Be=Ai(Y||Zi);Ht(l,Be,ge=>d(125,Mt=ge));const gt=Ai(j);Ht(l,gt,ge=>d(124,Ut=ge));const ut=Ai(ns(Tr));Ht(l,ut,ge=>d(123,ft=ge));const ze=Ai(ns(pr));Ht(l,ze,ge=>d(122,st=ge));const nt=Ai(ns(hr));Ht(l,nt,ge=>d(121,Me=ge));const Ye=Ai(ns(gn));Ht(l,Ye,ge=>d(120,lt=ge));const et=Ai(fr);Ht(l,et,ge=>d(119,Ve=ge));const Gt=Ai(dr);Ht(l,Gt,ge=>d(118,ii=ge));const at=Ai(wr);Ht(l,at,ge=>d(117,xt=ge));const ei=Ai(Vr);Ht(l,ei,ge=>d(116,Xe=ge));const wi=Ai(an);Ht(l,wi,ge=>d(115,Ue=ge));const Wt=Ai(Xi);Ht(l,Wt,ge=>d(114,Ot=ge));const ui=Ai(Yn);Ht(l,ui,ge=>d(113,ni=ge));const ti=Ai(wn);Ht(l,ti,ge=>d(112,He=ge));const Er=Ai(Ar);Ht(l,Er,ge=>d(111,qe=ge));const gi=Ai(Jn);Ht(l,gi,ge=>d(110,Ge=ge));const Ni=Ai(Qn);Ht(l,Ni,ge=>d(109,tt=ge));const bi=Ai(Oi);Ht(l,bi,ge=>d(108,xe=ge));const Jt=Ai($n);Ht(l,Jt,ge=>d(107,ve=ge));const ci=Ai(Cn);Ht(l,ci,ge=>d(106,he=ge));const Cr=Ai(Pr);Ht(l,Cr,ge=>d(105,oe=ge));const fa=Ai(q);Ht(l,fa,ge=>d(104,te=ge));const nr=Ai(Sr);Ht(l,nr,ge=>d(103,X=ge));const qr=Ai($t);Ht(l,qr,ge=>d(102,D=ge));const Va=Ai(L);Ht(l,Va,ge=>d(101,F=ge));const ba=Ai(N);Ht(l,ba,ge=>d(100,C=ge));const Ki=Ai(pt);Ht(l,Ki,ge=>d(99,B=ge));const xa=Ai(mr);Ht(l,xa,ge=>d(98,I=ge));const Mr=Ai(gr);Ht(l,Mr,ge=>d(97,k=ge));const ar=Ai(jr);Ht(l,ar,ge=>d(96,a=ge));const yn=Ai(V);Ht(l,yn,ge=>d(94,y=ge));const Di=Ai(ue);Ht(l,Di,ge=>d(95,v=ge));const On=Nr([ut,ze,nt,Ye],([ge,_n,Jr,Hi])=>{const ka={};return ge&&(ka.x=ge),_n&&(ka.y=_n),Jr&&(ka.z=Jr),Hi&&(ka.r=Hi),ka}),Sn=Nr([gt,ye,Le],([ge])=>Object.assign({top:0,right:0,bottom:0,left:0},ge)),os=Nr([ye,Le,Sn],([ge,_n,Jr])=>{const Hi={};return Hi.top=Jr.top,Hi.right=ge-Jr.right,Hi.bottom=_n-Jr.bottom,Hi.left=Jr.left,Hi.width=Hi.right-Hi.left,Hi.height=Hi.bottom-Hi.top,Hi.width<=0&&fe===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Hi.height<=0&&fe===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Hi}),Dr=Nr([os],([ge])=>ge.width);Ht(l,Dr,ge=>d(8,qi=ge));const wa=Nr([os],([ge])=>ge.height);Ht(l,wa,ge=>d(9,Fi=ge));const Xr=Nr([Be,On,Fe],([ge,_n,Jr])=>{const Hi=kh(_n,Jr);return Object.keys(Hi).length>0?{...av(ge,Hi),...Jr}:{}}),Lr=Nr([Xr,et],lp("x")),ea=Nr([Xr,Gt],lp("y")),Yr=Nr([Xr,at],lp("z")),Sa=Nr([Xr,ei],lp("r")),ss=Nr([Ki,Xr,Lr,Jt,wi,Er,Dr,wa,nr,re],fp("x")),Nl=Nr([ut,ss],dp),fo=Nr([xa,Xr,ea,ci,Wt,gi,Dr,wa,qr,re],fp("y")),Ul=Nr([ze,fo],dp),No=Nr([Mr,Xr,Yr,Cr,ui,Ni,Dr,wa,Va,re],fp("z")),Vl=Nr([nt,No],dp),Uo=Nr([ar,Xr,Sa,fa,ti,bi,Dr,wa,ba,re],fp("r")),Vs=Nr([Ye,Uo],dp),ja=Nr([ss],mp),ls=Nr([fo],mp),mo=Nr([No],mp),js=Nr([Uo],mp),qa=Nr([Dr,wa],([ge,_n])=>ge/_n);Ht(l,qa,ge=>d(10,li=ge));function Nn(ge){Ns[ge?"unshift":"push"](()=>{Ur=ge,d(2,Ur)})}function Ea(){cr=this.clientWidth,Wr=this.clientHeight,d(0,cr),d(1,Wr)}return l.$$set=ge=>{"ssr"in ge&&d(3,fn=ge.ssr),"pointerEvents"in ge&&d(4,dn=ge.pointerEvents),"position"in ge&&d(5,mn=ge.position),"percentRange"in ge&&d(51,Zt=ge.percentRange),"width"in ge&&d(52,Ci=ge.width),"height"in ge&&d(53,Gi=ge.height),"containerWidth"in ge&&d(0,cr=ge.containerWidth),"containerHeight"in ge&&d(1,Wr=ge.containerHeight),"element"in ge&&d(2,Ur=ge.element),"x"in ge&&d(54,Tr=ge.x),"y"in ge&&d(55,pr=ge.y),"z"in ge&&d(56,hr=ge.z),"r"in ge&&d(57,gn=ge.r),"data"in ge&&d(58,Zi=ge.data),"xDomain"in ge&&d(59,fr=ge.xDomain),"yDomain"in ge&&d(60,dr=ge.yDomain),"zDomain"in ge&&d(61,wr=ge.zDomain),"rDomain"in ge&&d(62,Vr=ge.rDomain),"xNice"in ge&&d(63,an=ge.xNice),"yNice"in ge&&d(64,Xi=ge.yNice),"zNice"in ge&&d(65,Yn=ge.zNice),"rNice"in ge&&d(66,wn=ge.rNice),"xReverse"in ge&&d(67,Ar=ge.xReverse),"yReverse"in ge&&d(68,Jn=ge.yReverse),"zReverse"in ge&&d(69,Qn=ge.zReverse),"rReverse"in ge&&d(70,Oi=ge.rReverse),"xPadding"in ge&&d(71,$n=ge.xPadding),"yPadding"in ge&&d(72,Cn=ge.yPadding),"zPadding"in ge&&d(73,Pr=ge.zPadding),"rPadding"in ge&&d(74,q=ge.rPadding),"xScale"in ge&&d(75,pt=ge.xScale),"yScale"in ge&&d(76,mr=ge.yScale),"zScale"in ge&&d(77,gr=ge.zScale),"rScale"in ge&&d(78,jr=ge.rScale),"xRange"in ge&&d(79,Sr=ge.xRange),"yRange"in ge&&d(80,$t=ge.yRange),"zRange"in ge&&d(81,L=ge.zRange),"rRange"in ge&&d(82,N=ge.rRange),"padding"in ge&&d(83,j=ge.padding),"extents"in ge&&d(84,H=ge.extents),"flatData"in ge&&d(85,Y=ge.flatData),"custom"in ge&&d(86,ue=ge.custom),"$$scope"in ge&&d(89,qt=ge.$$scope)},l.$$.update=()=>{l.$$.dirty[1]&8388608&&Tr&&d(87,V.x=Tr,V),l.$$.dirty[1]&16777216&&pr&&d(87,V.y=pr,V),l.$$.dirty[1]&33554432&&hr&&d(87,V.z=hr,V),l.$$.dirty[1]&67108864&&gn&&d(87,V.r=gn,V),l.$$.dirty[1]&268435456&&fr&&d(87,V.xDomain=fr,V),l.$$.dirty[1]&536870912&&dr&&d(87,V.yDomain=dr,V),l.$$.dirty[1]&1073741824&&wr&&d(87,V.zDomain=wr,V),l.$$.dirty[2]&1&&Vr&&d(87,V.rDomain=Vr,V),l.$$.dirty[2]&131072&&Sr&&d(87,V.xRange=Sr,V),l.$$.dirty[2]&262144&&$t&&d(87,V.yRange=$t,V),l.$$.dirty[2]&524288&&L&&d(87,V.zRange=L,V),l.$$.dirty[2]&1048576&&N&&d(87,V.rRange=N,V),l.$$.dirty[1]&1048576&&Ti(re,xr=Zt,xr),l.$$.dirty[0]&1&&Ti(ye,zi=cr,zi),l.$$.dirty[0]&2&&Ti(Le,rt=Wr,rt),l.$$.dirty[2]&4194304&&Ti(Fe,Pe=kh(H),Pe),l.$$.dirty[1]&134217728&&Ti(ke,kt=Zi,kt),l.$$.dirty[1]&134217728|l.$$.dirty[2]&8388608&&Ti(Be,Mt=Y||Zi,Mt),l.$$.dirty[2]&2097152&&Ti(gt,Ut=j,Ut),l.$$.dirty[1]&8388608&&Ti(ut,ft=ns(Tr),ft),l.$$.dirty[1]&16777216&&Ti(ze,st=ns(pr),st),l.$$.dirty[1]&33554432&&Ti(nt,Me=ns(hr),Me),l.$$.dirty[1]&67108864&&Ti(Ye,lt=ns(gn),lt),l.$$.dirty[1]&268435456&&Ti(et,Ve=fr,Ve),l.$$.dirty[1]&536870912&&Ti(Gt,ii=dr,ii),l.$$.dirty[1]&1073741824&&Ti(at,xt=wr,xt),l.$$.dirty[2]&1&&Ti(ei,Xe=Vr,Xe),l.$$.dirty[2]&2&&Ti(wi,Ue=an,Ue),l.$$.dirty[2]&4&&Ti(Wt,Ot=Xi,Ot),l.$$.dirty[2]&8&&Ti(ui,ni=Yn,ni),l.$$.dirty[2]&16&&Ti(ti,He=wn,He),l.$$.dirty[2]&32&&Ti(Er,qe=Ar,qe),l.$$.dirty[2]&64&&Ti(gi,Ge=Jn,Ge),l.$$.dirty[2]&128&&Ti(Ni,tt=Qn,tt),l.$$.dirty[2]&256&&Ti(bi,xe=Oi,xe),l.$$.dirty[2]&512&&Ti(Jt,ve=$n,ve),l.$$.dirty[2]&1024&&Ti(ci,he=Cn,he),l.$$.dirty[2]&2048&&Ti(Cr,oe=Pr,oe),l.$$.dirty[2]&4096&&Ti(fa,te=q,te),l.$$.dirty[2]&131072&&Ti(nr,X=Sr,X),l.$$.dirty[2]&262144&&Ti(qr,D=$t,D),l.$$.dirty[2]&524288&&Ti(Va,F=L,F),l.$$.dirty[2]&1048576&&Ti(ba,C=N,C),l.$$.dirty[2]&8192&&Ti(Ki,B=pt,B),l.$$.dirty[2]&16384&&Ti(xa,I=mr,I),l.$$.dirty[2]&32768&&Ti(Mr,k=gr,k),l.$$.dirty[2]&65536&&Ti(ar,a=jr,a),l.$$.dirty[2]&16777216&&Ti(Di,v=ue,v),l.$$.dirty[2]&33554432&&Ti(yn,y=V,y),l.$$.dirty[2]&67108864&&ag("LayerCake",h)},d(88,h={activeGetters:On,width:Dr,height:wa,percentRange:re,aspectRatio:qa,containerWidth:ye,containerHeight:Le,x:ut,y:ze,z:nt,r:Ye,custom:Di,data:ke,xNice:wi,yNice:Wt,zNice:ui,rNice:ti,xReverse:Er,yReverse:gi,zReverse:Ni,rReverse:bi,xPadding:Jt,yPadding:ci,zPadding:Cr,rPadding:fa,padding:Sn,flatData:Be,extents:Xr,xDomain:Lr,yDomain:ea,zDomain:Yr,rDomain:Sa,xRange:ja,yRange:ls,zRange:mo,rRange:js,config:yn,xScale:ss,xGet:Nl,yScale:fo,yGet:Ul,zScale:No,zGet:Vl,rScale:Uo,rGet:Vs}),[cr,Wr,Ur,fn,dn,mn,rt,zi,qi,Fi,li,re,ye,Le,Fe,ke,Be,gt,ut,ze,nt,Ye,et,Gt,at,ei,wi,Wt,ui,ti,Er,gi,Ni,bi,Jt,ci,Cr,fa,nr,qr,Va,ba,Ki,xa,Mr,ar,yn,Di,Dr,wa,qa,Zt,Ci,Gi,Tr,pr,hr,gn,Zi,fr,dr,wr,Vr,an,Xi,Yn,wn,Ar,Jn,Qn,Oi,$n,Cn,Pr,q,pt,mr,gr,jr,Sr,$t,L,N,j,H,Y,ue,V,h,qt,ur,Nn,Ea]}class w0 extends pn{constructor(p){super(),hn(this,p,x0,b0,cn,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const S0=l=>({element:l&1}),Hd=l=>({element:l[0]}),E0=l=>({}),Wd=l=>({});function k0(l){let p,d,h,y,v;const a=l[12].defs,k=Nu(a,l,l[11],Wd),I=l[12].default,B=Nu(I,l,l[11],Hd);return{c(){p=Wn("svg"),d=Wn("defs"),k&&k.c(),h=Wn("g"),B&&B.c(),this.h()},l(C){p=Xn(C,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var F=Ze(p);d=Xn(F,"defs",{});var D=Ze(d);k&&k.l(D),D.forEach(se),h=Xn(F,"g",{class:!0,transform:!0});var X=Ze(h);B&&B.l(X),X.forEach(se),F.forEach(se),this.h()},h(){ne(h,"class","layercake-layout-svg_g"),ne(h,"transform",y="translate("+l[7].left+", "+l[7].top+")"),ne(p,"class","layercake-layout-svg svelte-u84d8d"),ne(p,"viewBox",l[4]),ne(p,"width",l[5]),ne(p,"height",l[6]),Qe(p,"z-index",l[2]),Qe(p,"pointer-events",l[3]===!1?"none":null)},m(C,F){De(C,p,F),Ae(p,d),k&&k.m(d,null),Ae(p,h),B&&B.m(h,null),l[13](h),l[14](p),v=!0},p(C,[F]){k&&k.p&&(!v||F&2048)&&Uu(k,a,C,C[11],v?ju(a,C[11],F,E0):Vu(C[11]),Wd),B&&B.p&&(!v||F&2049)&&Uu(B,I,C,C[11],v?ju(I,C[11],F,S0):Vu(C[11]),Hd),(!v||F&128&&y!==(y="translate("+C[7].left+", "+C[7].top+")"))&&ne(h,"transform",y),(!v||F&16)&&ne(p,"viewBox",C[4]),(!v||F&32)&&ne(p,"width",C[5]),(!v||F&64)&&ne(p,"height",C[6]),F&4&&Qe(p,"z-index",C[2]),F&8&&Qe(p,"pointer-events",C[3]===!1?"none":null)},i(C){v||(ot(k,C),ot(B,C),v=!0)},o(C){_t(k,C),_t(B,C),v=!1},d(C){C&&se(p),k&&k.d(C),B&&B.d(C),l[13](null),l[14](null)}}}function I0(l,p,d){let h,y,v,{$$slots:a={},$$scope:k}=p,{element:I=void 0}=p,{innerElement:B=void 0}=p,{zIndex:C=void 0}=p,{pointerEvents:F=void 0}=p,{viewBox:D=void 0}=p;const{containerWidth:X,containerHeight:te,padding:oe}=Wu("LayerCake");Ht(l,X,xe=>d(5,h=xe)),Ht(l,te,xe=>d(6,y=xe)),Ht(l,oe,xe=>d(7,v=xe));function he(xe){Ns[xe?"unshift":"push"](()=>{B=xe,d(1,B)})}function ve(xe){Ns[xe?"unshift":"push"](()=>{I=xe,d(0,I)})}return l.$$set=xe=>{"element"in xe&&d(0,I=xe.element),"innerElement"in xe&&d(1,B=xe.innerElement),"zIndex"in xe&&d(2,C=xe.zIndex),"pointerEvents"in xe&&d(3,F=xe.pointerEvents),"viewBox"in xe&&d(4,D=xe.viewBox),"$$scope"in xe&&d(11,k=xe.$$scope)},[I,B,C,F,D,h,y,v,X,te,oe,k,a,he,ve]}class z0 extends pn{constructor(p){super(),hn(this,p,I0,k0,cn,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Xd(l,p,d){const h=l.slice();return h[23]=p[d],h[25]=d,h}function Yd(l){let p,d,h,y;return{c(){p=Wn("rect"),this.h()},l(v){p=Xn(v,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"class","group-rect"),ne(p,"data-id",l[25]),ne(p,"x",d=l[11].bandwidth?l[7](l[23]):l[7](l[23])[0]),ne(p,"y",h=l[13](l[12](l[23]))-1),ne(p,"width",y=l[11].bandwidth?l[11].bandwidth():l[9](l[23])),ne(p,"height","3"),ne(p,"fill","#308182"),ne(p,"stroke",l[0]),ne(p,"stroke-width",l[1])},m(v,a){De(v,p,a)},p(v,a){a&3200&&d!==(d=v[11].bandwidth?v[7](v[23]):v[7](v[23])[0])&&ne(p,"x",d),a&13312&&h!==(h=v[13](v[12](v[23]))-1)&&ne(p,"y",h),a&3584&&y!==(y=v[11].bandwidth?v[11].bandwidth():v[9](v[23]))&&ne(p,"width",y),a&1&&ne(p,"stroke",v[0]),a&2&&ne(p,"stroke-width",v[1])},d(v){v&&se(p)}}}function Jd(l){let p,d,h,y,v,a,k,I,B=l[12]&&Yd(l);return{c(){p=Wn("rect"),B&&B.c(),a=Wn("text"),this.h()},l(C){p=Xn(C,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),Ze(p).forEach(se),B&&B.l(C),a=Xn(C,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),Ze(a).forEach(se),this.h()},h(){ne(p,"class","group-rect"),ne(p,"data-id",l[25]),ne(p,"x",d=l[11].bandwidth?l[7](l[23]):l[7](l[23])[0]),ne(p,"y",h=l[6](l[23])),ne(p,"width",y=l[11].bandwidth?l[11].bandwidth():l[9](l[23])),ne(p,"height",v=l[8](l[23])),ne(p,"fill",l[4]),ne(p,"stroke",l[0]),ne(p,"stroke-width",l[1]),ne(a,"x",k=l[11].bandwidth?l[7](l[23])+l[11].bandwidth()/2:l[7](l[23])[0]),ne(a,"y",I=l[6](l[23])-4),ne(a,"dx",l[2]),ne(a,"dy",l[3]),ne(a,"text-anchor",l[5])},m(C,F){De(C,p,F),B&&B.m(C,F),De(C,a,F)},p(C,F){F&3200&&d!==(d=C[11].bandwidth?C[7](C[23]):C[7](C[23])[0])&&ne(p,"x",d),F&1088&&h!==(h=C[6](C[23]))&&ne(p,"y",h),F&3584&&y!==(y=C[11].bandwidth?C[11].bandwidth():C[9](C[23]))&&ne(p,"width",y),F&1280&&v!==(v=C[8](C[23]))&&ne(p,"height",v),F&16&&ne(p,"fill",C[4]),F&1&&ne(p,"stroke",C[0]),F&2&&ne(p,"stroke-width",C[1]),C[12]?B?B.p(C,F):(B=Yd(C),B.c(),B.m(a.parentNode,a)):B&&(B.d(1),B=null),F&3200&&k!==(k=C[11].bandwidth?C[7](C[23])+C[11].bandwidth()/2:C[7](C[23])[0])&&ne(a,"x",k),F&1088&&I!==(I=C[6](C[23])-4)&&ne(a,"y",I),F&4&&ne(a,"dx",C[2]),F&8&&ne(a,"dy",C[3]),F&32&&ne(a,"text-anchor",C[5])},d(C){C&&(se(p),se(a)),B&&B.d(C)}}}function T0(l){let p,d=xi(l[10]),h=[];for(let y=0;y<d.length;y+=1)h[y]=Jd(Xd(l,d,y));return{c(){p=Wn("g");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Xn(y,"g",{class:!0});var v=Ze(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(se),this.h()},h(){ne(p,"class","column-group svelte-wgzwsk")},m(y,v){De(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,[v]){if(v&16383){d=xi(y[10]);let a;for(a=0;a<d.length;a+=1){const k=Xd(y,d,a);h[a]?h[a].p(k,v):(h[a]=Jd(k),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},i:tr,o:tr,d(y){y&&se(p),un(h,y)}}}function A0(l,p,d){let h,y,v,a,k,I,B,C,F;const{data:D,xGet:X,yGet:te,yRange:oe,xScale:he,yScale:ve,y:xe,z:tt}=Wu("LayerCake");Ht(l,D,Xe=>d(10,I=Xe)),Ht(l,X,Xe=>d(7,k=Xe)),Ht(l,te,Xe=>d(6,v=Xe)),Ht(l,oe,Xe=>d(21,a=Xe)),Ht(l,he,Xe=>d(11,B=Xe)),Ht(l,ve,Xe=>d(13,F=Xe)),Ht(l,tt,Xe=>d(12,C=Xe));let{stroke:Ge=""}=p,{strokeWidth:qe=0}=p,{dxTick:He=0}=p,{dyTick:ni=0}=p,{fill:Ot="#00205b"}=p,{textAnchor:Ue="middle"}=p;return l.$$set=Xe=>{"stroke"in Xe&&d(0,Ge=Xe.stroke),"strokeWidth"in Xe&&d(1,qe=Xe.strokeWidth),"dxTick"in Xe&&d(2,He=Xe.dxTick),"dyTick"in Xe&&d(3,ni=Xe.dyTick),"fill"in Xe&&d(4,Ot=Xe.fill),"textAnchor"in Xe&&d(5,Ue=Xe.textAnchor)},l.$$.update=()=>{l.$$.dirty&128&&d(9,h=Xe=>{const xt=k(Xe);return Math.max(0,xt[1]-xt[0])}),l.$$.dirty&2097216&&d(8,y=Xe=>a[0]-v(Xe))},[Ge,qe,He,ni,Ot,Ue,v,k,y,h,I,B,C,F,D,X,te,oe,he,ve,tt,a]}class P0 extends pn{constructor(p){super(),hn(this,p,A0,T0,cn,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function Qd(l,p,d){const h=l.slice();return h[28]=p[d],h[30]=d,h}function $d(l){let p,d,h,y;return{c(){p=Wn("line"),this.h()},l(v){p=Xn(v,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"y1",d=l[20]*-1),ne(p,"y2",h=l[14]&&l[30]%2==0?l[10]+l[8]+2:l[10]+l[8]-13),ne(p,"x1","0"),ne(p,"x2","0"),ne(p,"stroke",l[11]),ne(p,"stroke-width",y=l[15]&&Array.isArray(l[4])&&l[30]==Math.floor(l[4].length/2)?2:1),ne(p,"class","svelte-fwjh80"),as(p,"baseline",l[13])},m(v,a){De(v,p,a)},p(v,a){a&1048576&&d!==(d=v[20]*-1)&&ne(p,"y1",d),a&17664&&h!==(h=v[14]&&v[30]%2==0?v[10]+v[8]+2:v[10]+v[8]-13)&&ne(p,"y2",h),a&2048&&ne(p,"stroke",v[11]),a&32784&&y!==(y=v[15]&&Array.isArray(v[4])&&v[30]==Math.floor(v[4].length/2)?2:1)&&ne(p,"stroke-width",y),a&8192&&as(p,"baseline",v[13])},d(v){v&&se(p)}}}function C0(l){let p=l[1](l[28])+"",d;return{c(){d=Vt(p)},l(h){d=jt(h,p)},m(h,y){De(h,d,y)},p(h,y){y&262146&&p!==(p=h[1](h[28])+"")&&ki(d,p)},d(h){h&&se(d)}}}function M0(l){let p,d=l[1](l[28])+"",h,y;return{c(){p=Vt(l[5]),h=Vt(d),y=Vt(l[6])},l(v){p=jt(v,l[5]),h=jt(v,d),y=jt(v,l[6])},m(v,a){De(v,p,a),De(v,h,a),De(v,y,a)},p(v,a){a&32&&ki(p,v[5]),a&262146&&d!==(d=v[1](v[28])+"")&&ki(h,d),a&64&&ki(y,v[6])},d(v){v&&(se(p),se(h),se(y))}}}function em(l){let p,d,h,y,v,a,k,I=l[0]!==!1&&$d(l);function B(D,X){return D[30]==D[18].length-1?M0:C0}let C=B(l),F=C(l);return{c(){p=Wn("g"),I&&I.c(),d=Wn("text"),F.c(),this.h()},l(D){p=Xn(D,"g",{class:!0,transform:!0});var X=Ze(p);I&&I.l(X),d=Xn(X,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var te=Ze(d);F.l(te),te.forEach(se),X.forEach(se),this.h()},h(){ne(d,"x",h=l[7]||l[16]?l[17].bandwidth()/2:0),ne(d,"y",y=l[3]?l[20]*-1-6:l[14]&&l[30]%2==0?l[8]+15:l[8]),ne(d,"dx",v=l[24](l[30])=="start"?l[9]-2:l[24](l[30])=="end"?l[9]+2:l[9]),ne(d,"dy",l[10]),ne(d,"text-anchor",l[24](l[30])),ne(d,"fill",l[12]),ne(d,"class","svelte-fwjh80"),as(d,"bold",l[15]&&Array.isArray(l[4])&&l[30]==Math.floor(l[4].length/2)),ne(p,"class",a="tick tick-"+l[28]+" svelte-fwjh80"),ne(p,"transform",k="translate("+l[17](l[28])+","+l[19][0]+")")},m(D,X){De(D,p,X),I&&I.m(p,null),Ae(p,d),F.m(d,null)},p(D,X){D[0]!==!1?I?I.p(D,X):(I=$d(D),I.c(),I.m(p,d)):I&&(I.d(1),I=null),C===(C=B(D))&&F?F.p(D,X):(F.d(1),F=C(D),F&&(F.c(),F.m(d,null))),X&196736&&h!==(h=D[7]||D[16]?D[17].bandwidth()/2:0)&&ne(d,"x",h),X&1065224&&y!==(y=D[3]?D[20]*-1-6:D[14]&&D[30]%2==0?D[8]+15:D[8])&&ne(d,"y",y),X&512&&v!==(v=D[24](D[30])=="start"?D[9]-2:D[24](D[30])=="end"?D[9]+2:D[9])&&ne(d,"dx",v),X&1024&&ne(d,"dy",D[10]),X&4096&&ne(d,"fill",D[12]),X&32784&&as(d,"bold",D[15]&&Array.isArray(D[4])&&D[30]==Math.floor(D[4].length/2)),X&262144&&a!==(a="tick tick-"+D[28]+" svelte-fwjh80")&&ne(p,"class",a),X&917504&&k!==(k="translate("+D[17](D[28])+","+D[19][0]+")")&&ne(p,"transform",k)},d(D){D&&se(p),I&&I.d(),F.d()}}}function tm(l){let p,d,h;return{c(){p=Wn("line"),this.h()},l(y){p=Xn(y,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"class","baseline svelte-fwjh80"),ne(p,"y1",l[20]),ne(p,"y2","0"),ne(p,"x1",d=l[17](0)),ne(p,"x2",h=l[17](0)),ne(p,"stroke",l[11])},m(y,v){De(y,p,v)},p(y,v){v&1048576&&ne(p,"y1",y[20]),v&131072&&d!==(d=y[17](0))&&ne(p,"x1",d),v&131072&&h!==(h=y[17](0))&&ne(p,"x2",h),v&2048&&ne(p,"stroke",y[11])},d(y){y&&se(p)}}}function D0(l){let p,d,h=xi(l[18]),y=[];for(let a=0;a<h.length;a+=1)y[a]=em(Qd(l,h,a));let v=l[2]===!0&&tm(l);return{c(){p=Wn("g");for(let a=0;a<y.length;a+=1)y[a].c();d=oi(),v&&v.c(),this.h()},l(a){p=Xn(a,"g",{class:!0});var k=Ze(p);for(let I=0;I<y.length;I+=1)y[I].l(k);d=oi(),v&&v.l(k),k.forEach(se),this.h()},h(){ne(p,"class","axis x-axis")},m(a,k){De(a,p,k);for(let I=0;I<y.length;I+=1)y[I]&&y[I].m(p,null);Ae(p,d),v&&v.m(p,null)},p(a,[k]){if(k&18874363){h=xi(a[18]);let I;for(I=0;I<h.length;I+=1){const B=Qd(a,h,I);y[I]?y[I].p(B,k):(y[I]=em(B),y[I].c(),y[I].m(p,d))}for(;I<y.length;I+=1)y[I].d(1);y.length=h.length}a[2]===!0?v?v.p(a,k):(v=tm(a),v.c(),v.m(p,null)):v&&(v.d(1),v=null)},i:tr,o:tr,d(a){a&&se(p),un(y,a),v&&v.d()}}}function L0(l,p,d){let h,y,v,a,k;const{width:I,height:B,xScale:C,yScale:F,yRange:D}=Wu("LayerCake");Ht(l,B,Me=>d(20,k=Me)),Ht(l,C,Me=>d(17,v=Me)),Ht(l,D,Me=>d(19,a=Me));let{gridlines:X=!0}=p,{formatTick:te=Me=>Me}=p,{baseline:oe=!1}=p,{flipped:he=!1}=p,{snapTicks:ve=!1}=p,{ticks:xe=void 0}=p,{prefix:tt=""}=p,{suffix:Ge=""}=p,{xTick:qe=void 0}=p,{yTick:He=15}=p,{dxTick:ni=0}=p,{dyTick:Ot=0}=p,{lineColor:Ue="#999"}=p,{textColor:Xe="#555"}=p,{solid:xt=!1}=p,{stagger:ii=!1}=p,{median:Ve=!0}=p;function lt(Me){if(ve===!0){if(Me===0)return"start";if(Me===y.length-1)return"end"}return"middle"}return l.$$set=Me=>{"gridlines"in Me&&d(0,X=Me.gridlines),"formatTick"in Me&&d(1,te=Me.formatTick),"baseline"in Me&&d(2,oe=Me.baseline),"flipped"in Me&&d(3,he=Me.flipped),"snapTicks"in Me&&d(25,ve=Me.snapTicks),"ticks"in Me&&d(4,xe=Me.ticks),"prefix"in Me&&d(5,tt=Me.prefix),"suffix"in Me&&d(6,Ge=Me.suffix),"xTick"in Me&&d(7,qe=Me.xTick),"yTick"in Me&&d(8,He=Me.yTick),"dxTick"in Me&&d(9,ni=Me.dxTick),"dyTick"in Me&&d(10,Ot=Me.dyTick),"lineColor"in Me&&d(11,Ue=Me.lineColor),"textColor"in Me&&d(12,Xe=Me.textColor),"solid"in Me&&d(13,xt=Me.solid),"stagger"in Me&&d(14,ii=Me.stagger),"median"in Me&&d(15,Ve=Me.median)},l.$$.update=()=>{l.$$.dirty&131072&&d(16,h=typeof v.bandwidth=="function"),l.$$.dirty&196624&&d(18,y=Array.isArray(xe)?xe:h?v.domain():v.ticks(xe))},[X,te,oe,he,xe,tt,Ge,qe,He,ni,Ot,Ue,Xe,xt,ii,Ve,h,v,y,a,k,B,C,D,lt,ve]}class R0 extends pn{constructor(p){super(),hn(this,p,L0,D0,cn,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function B0(l){let p,d,h,y;return p=new P0({props:{fill:l[1],formatVal:l[5]}}),h=new R0({props:{gridlines:!1}}),{c(){hi(p.$$.fragment),d=wt(),hi(h.$$.fragment)},l(v){fi(p.$$.fragment,v),d=St(v),fi(h.$$.fragment,v)},m(v,a){di(p,v,a),De(v,d,a),di(h,v,a),y=!0},p(v,a){const k={};a&2&&(k.fill=v[1]),a&32&&(k.formatVal=v[5]),p.$set(k)},i(v){y||(ot(p.$$.fragment,v),ot(h.$$.fragment,v),y=!0)},o(v){_t(p.$$.fragment,v),_t(h.$$.fragment,v),y=!1},d(v){v&&se(d),mi(p,v),mi(h,v)}}}function F0(l){let p,d;return p=new z0({props:{$$slots:{default:[B0]},$$scope:{ctx:l}}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&1058&&(v.$$scope={dirty:y,ctx:h}),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function O0(l){let p,d,h;return d=new w0({props:{padding:{top:15,right:0,bottom:20,left:0},x:l[2],y:l[3],z:l[4],xScale:mg().paddingInner([.02]).round(!0),xDomain:l[7],yDomain:l[6],zDomain:l[6],data:l[0],$$slots:{default:[F0]},$$scope:{ctx:l}}}),{c(){p=Oe("div"),hi(d.$$.fragment),this.h()},l(y){p=Ne(y,"DIV",{class:!0});var v=Ze(p);fi(d.$$.fragment,v),v.forEach(se),this.h()},h(){ne(p,"class","chart-container svelte-1i1qsul")},m(y,v){De(y,p,v),di(d,p,null),h=!0},p(y,[v]){const a={};v&4&&(a.x=y[2]),v&8&&(a.y=y[3]),v&16&&(a.z=y[4]),v&128&&(a.xDomain=y[7]),v&64&&(a.yDomain=y[6]),v&64&&(a.zDomain=y[6]),v&1&&(a.data=y[0]),v&1058&&(a.$$scope={dirty:v,ctx:y}),d.$set(a)},i(y){h||(ot(d.$$.fragment,y),h=!0)},o(y){_t(d.$$.fragment,y),h=!1},d(y){y&&se(p),mi(d)}}}function N0(l,p,d){let h,y,v,{data:a}=p,{suffix:k="%"}=p,{decimals:I=null}=p,{fill:B="#00205B"}=p,{xKey:C="x"}=p,{yKey:F="y"}=p,{zKey:D=null}=p;return l.$$set=X=>{"data"in X&&d(0,a=X.data),"suffix"in X&&d(8,k=X.suffix),"decimals"in X&&d(9,I=X.decimals),"fill"in X&&d(1,B=X.fill),"xKey"in X&&d(2,C=X.xKey),"yKey"in X&&d(3,F=X.yKey),"zKey"in X&&d(4,D=X.zKey)},l.$$.update=()=>{l.$$.dirty&5&&d(7,h=a.map(X=>X[C])),l.$$.dirty&9&&d(6,y=[0,Math.max(...a.map(X=>X[F]))]),l.$$.dirty&768&&d(5,v=X=>X.toFixed(I)+k)},[a,B,C,F,D,v,y,h,k,I]}class Kh extends pn{constructor(p){super(),hn(this,p,N0,O0,cn,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4})}}function im(l,p,d){const h=l.slice();return h[6]=p[d],h[8]=d,h}function rm(l){let p,d=xi(l[0]),h=[];for(let y=0;y<d.length;y+=1)h[y]=nm(im(l,d,y));return{c(){p=Wn("svg");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Xn(y,"svg",{class:!0});var v=Ze(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(se),this.h()},h(){ne(p,"class","stack svelte-pzvhwz")},m(y,v){De(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,v){if(v&31){d=xi(y[0]);let a;for(a=0;a<d.length;a+=1){const k=im(y,d,a);h[a]?h[a].p(k,v):(h[a]=nm(k),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&se(p),un(h,y)}}}function nm(l){let p,d;return{c(){p=Wn("rect"),this.h()},l(h){p=Xn(h,"rect",{class:!0,x:!0,style:!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"class","cell svelte-pzvhwz"),ne(p,"x",d=l[4][l[8]]/l[3]*100+"%"),Qe(p,"width",l[6][l[1]]/l[3]*100+"%"),Qe(p,"fill",l[2][l[8]])},m(h,y){De(h,p,y)},p(h,y){y&24&&d!==(d=h[4][h[8]]/h[3]*100+"%")&&ne(p,"x",d),y&11&&Qe(p,"width",h[6][h[1]]/h[3]*100+"%"),y&4&&Qe(p,"fill",h[2][h[8]])},d(h){h&&se(p)}}}function U0(l){let p,d=l[3]&&l[4]&&rm(l);return{c(){d&&d.c(),p=oi()},l(h){d&&d.l(h),p=oi()},m(h,y){d&&d.m(h,y),De(h,p,y)},p(h,[y]){h[3]&&h[4]?d?d.p(h,y):(d=rm(h),d.c(),d.m(p.parentNode,p)):d&&(d.d(1),d=null)},i:tr,o:tr,d(h){h&&se(p),d&&d.d(h)}}}function V0(l,p,d){let{data:h}=p,{yKey:y="y"}=p,{colors:v=["#308182","#3878c5","#002417","#BD00BD","lightgrey"]}=p,a,k;function I(){d(3,a=h.map(C=>C[y]).reduce((C,F)=>C+F,0));let B=[0];h.forEach(C=>B.push(B[B.length-1]+C[y])),d(4,k=B)}return l.$$set=B=>{"data"in B&&d(0,h=B.data),"yKey"in B&&d(1,y=B.yKey),"colors"in B&&d(2,v=B.colors)},l.$$.update=()=>{l.$$.dirty&3&&(h||y)&&I()},[h,y,v,a,k]}class Hh extends pn{constructor(p){super(),hn(this,p,V0,U0,cn,{data:0,yKey:1,colors:2})}}function am(l,p,d){const h=l.slice();return h[10]=p[d],h[12]=d,h}function j0(l){let p,d,h=l[6](l[10][l[3]])+"",y,v;return{c(){p=Oe("span"),d=Vt("(NI "),y=Vt(h),v=Vt(")"),this.h()},l(a){p=Ne(a,"SPAN",{class:!0,style:!0});var k=Ze(p);d=jt(k,"(NI "),y=jt(k,h),v=jt(k,")"),k.forEach(se),this.h()},h(){ne(p,"class",""),Qe(p,"color","#1460aa")},m(a,k){De(a,p,k),Ae(p,d),Ae(p,y),Ae(p,v)},p(a,k){k&9&&h!==(h=a[6](a[10][a[3]])+"")&&ki(y,h)},d(a){a&&se(p)}}}function q0(l){let p;return{c(){p=Oe("span"),this.h()},l(d){p=Ne(d,"SPAN",{class:!0,style:!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"class",""),Qe(p,"color","#1460aa")},m(d,h){De(d,p,h)},p:tr,d(d){d&&se(p)}}}function G0(l){let p,d,h=_d(Math.round(l[10][l[3]]),"%)")+"",y;return{c(){p=Oe("span"),d=Vt("(2011 "),y=Vt(h),this.h()},l(v){p=Ne(v,"SPAN",{class:!0,style:!0});var a=Ze(p);d=jt(a,"(2011 "),y=jt(a,h),a.forEach(se),this.h()},h(){ne(p,"class",""),Qe(p,"color","#1460aa")},m(v,a){De(v,p,a),Ae(p,d),Ae(p,y)},p(v,a){a&9&&h!==(h=_d(Math.round(v[10][v[3]]),"%)")+"")&&ki(y,h)},d(v){v&&se(p)}}}function om(l){let p,d,h,y,v,a=l[10][l[1]]+"",k,I,B,C=l[6](l[10][l[2]])+"",F,D,X;function te(ve,xe){if(ve[3]=="prev"&&ve[4])return G0;if(ve[3]=="prev"&&!ve[4])return q0;if(ve[3])return j0}let oe=te(l),he=oe&&oe(l);return{c(){p=Oe("tr"),d=Oe("td"),h=Wn("svg"),y=Wn("rect"),v=wt(),k=Vt(a),I=wt(),B=Oe("td"),F=Vt(C),D=wt(),he&&he.c(),X=wt(),this.h()},l(ve){p=Ne(ve,"TR",{});var xe=Ze(p);d=Ne(xe,"TD",{class:!0});var tt=Ze(d);h=Xn(tt,"svg",{width:!0,height:!0,class:!0});var Ge=Ze(h);y=Xn(Ge,"rect",{width:!0,height:!0,style:!0}),Ze(y).forEach(se),Ge.forEach(se),v=St(tt),k=jt(tt,a),tt.forEach(se),I=St(xe),B=Ne(xe,"TD",{class:!0,style:!0});var qe=Ze(B);F=jt(qe,C),D=St(qe),he&&he.l(qe),qe.forEach(se),X=St(xe),xe.forEach(se),this.h()},h(){ne(y,"width","20"),ne(y,"height","30"),Qe(y,"fill",l[5][l[12]]),ne(h,"width","20"),ne(h,"height","30"),ne(h,"class","bullet svelte-1gvovsq"),ne(d,"class","svelte-1gvovsq"),ne(B,"class","cell-right svelte-1gvovsq"),Qe(B,"vertical-align","top")},m(ve,xe){De(ve,p,xe),Ae(p,d),Ae(d,h),Ae(h,y),Ae(d,v),Ae(d,k),Ae(p,I),Ae(p,B),Ae(B,F),Ae(B,D),he&&he.m(B,null),Ae(p,X)},p(ve,xe){xe&32&&Qe(y,"fill",ve[5][ve[12]]),xe&3&&a!==(a=ve[10][ve[1]]+"")&&ki(k,a),xe&5&&C!==(C=ve[6](ve[10][ve[2]])+"")&&ki(F,C),oe===(oe=te(ve))&&he?he.p(ve,xe):(he&&he.d(1),he=oe&&oe(ve),he&&(he.c(),he.m(B,null)))},d(ve){ve&&se(p),he&&he.d()}}}function Z0(l){let p,d,h=xi(l[0]),y=[];for(let v=0;v<h.length;v+=1)y[v]=om(am(l,h,v));return{c(){p=Oe("table"),d=Oe("tbody");for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){p=Ne(v,"TABLE",{class:!0});var a=Ze(p);d=Ne(a,"TBODY",{});var k=Ze(d);for(let I=0;I<y.length;I+=1)y[I].l(k);k.forEach(se),a.forEach(se),this.h()},h(){ne(p,"class","legend svelte-1gvovsq")},m(v,a){De(v,p,a),Ae(p,d);for(let k=0;k<y.length;k+=1)y[k]&&y[k].m(d,null)},p(v,[a]){if(a&127){h=xi(v[0]);let k;for(k=0;k<h.length;k+=1){const I=am(v,h,k);y[k]?y[k].p(I,a):(y[k]=om(I),y[k].c(),y[k].m(d,null))}for(;k<y.length;k+=1)y[k].d(1);y.length=h.length}},i:tr,o:tr,d(v){v&&se(p),un(y,v)}}}function K0(l,p,d){let h,{data:y}=p,{xKey:v="x"}=p,{yKey:a="y"}=p,{zKey:k="ni"}=p,{topic_prev_available:I=!0}=p,{colors:B=["#3878c5","#00205B","#308182","#002417","#BD00BD","lightgrey"]}=p,{decimals:C=null}=p;function F(D){let X;return C?X=(D/h*100).toFixed(C)+"%":D/h*100<1?X="<1%":X=(D/h*100).toFixed(0)+"%",X}return l.$$set=D=>{"data"in D&&d(0,y=D.data),"xKey"in D&&d(1,v=D.xKey),"yKey"in D&&d(2,a=D.yKey),"zKey"in D&&d(3,k=D.zKey),"topic_prev_available"in D&&d(4,I=D.topic_prev_available),"colors"in D&&d(5,B=D.colors),"decimals"in D&&d(7,C=D.decimals)},l.$$.update=()=>{l.$$.dirty&5&&(h=y.map(D=>D[a]).reduce((D,X)=>D+X,0)),l.$$.dirty&9&&y.map(D=>D[k]).reduce((D,X)=>D+X,0)},[y,v,a,k,I,B,F,C]}class H0 extends pn{constructor(p){super(),hn(this,p,K0,Z0,cn,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function sm(l){let p,d,h,y;d=new Hh({props:{data:l[0],yKey:l[4],colors:l[6]}});let v=l[8]&&lm(l);return{c(){p=Oe("div"),hi(d.$$.fragment),h=wt(),v&&v.c(),this.h()},l(a){p=Ne(a,"DIV",{class:!0,style:!0});var k=Ze(p);fi(d.$$.fragment,k),h=St(k),v&&v.l(k),k.forEach(se),this.h()},h(){ne(p,"class","chart svelte-1tebgpk"),Qe(p,"height",l[1]*.28+"px")},m(a,k){De(a,p,k),di(d,p,null),Ae(p,h),v&&v.m(p,null),y=!0},p(a,k){const I={};k&1&&(I.data=a[0]),k&16&&(I.yKey=a[4]),k&64&&(I.colors=a[6]),d.$set(I),a[8]?v?v.p(a,k):(v=lm(a),v.c(),v.m(p,null)):v&&(v.d(1),v=null),(!y||k&2)&&Qe(p,"height",a[1]*.28+"px")},i(a){y||(ot(d.$$.fragment,a),y=!0)},o(a){_t(d.$$.fragment,a),y=!1},d(a){a&&se(p),mi(d),v&&v.d()}}}function lm(l){let p,d;return{c(){p=Oe("div"),d=Vt(l[8]),this.h()},l(h){p=Ne(h,"DIV",{class:!0});var y=Ze(p);d=jt(y,l[8]),y.forEach(se),this.h()},h(){ne(p,"class","label svelte-1tebgpk")},m(h,y){De(h,p,y),Ae(p,d)},p(h,y){y&256&&ki(d,h[8])},d(h){h&&se(p)}}}function um(l){let p,d,h,y,v="2011 comparison not available",a;return d=new Hh({props:{data:l[0],yKey:l[4],colors:l[6]}}),{c(){p=Oe("div"),hi(d.$$.fragment),h=wt(),y=Oe("div"),y.textContent=v,this.h()},l(k){p=Ne(k,"DIV",{class:!0,style:!0});var I=Ze(p);fi(d.$$.fragment,I),h=St(I),y=Ne(I,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),Ua(y)!=="svelte-sfzs3m"&&(y.textContent=v),I.forEach(se),this.h()},h(){ne(y,"class","label svelte-1tebgpk"),Qe(y,"background-color","#d8d8d8 "),Qe(y,"color","#000000"),ne(p,"class","chart svelte-1tebgpk"),Qe(p,"height",l[1]*.28+"px")},m(k,I){De(k,p,I),di(d,p,null),Ae(p,h),Ae(p,y),a=!0},p(k,I){const B={};I&1&&(B.data=k[0]),I&16&&(B.yKey=k[4]),I&64&&(B.colors=k[6]),d.$set(B),(!a||I&2)&&Qe(p,"height",k[1]*.28+"px")},i(k){a||(ot(d.$$.fragment,k),a=!0)},o(k){_t(d.$$.fragment,k),a=!1},d(k){k&&se(p),mi(d)}}}function W0(l){let p,d,h,y,v,a,k,I;d=new Hh({props:{data:l[0],yKey:l[3],colors:l[6]}});let B=(l[4]&&l[5]||l[4]=="ni")&&sm(l),C=l[4]=="prev"&&!l[5]&&um(l);return k=new H0({props:{data:l[0],xKey:l[2],yKey:l[3],zKey:l[4],topic_prev_available:l[5],decimals:l[7],colors:l[6]}}),{c(){p=Oe("div"),hi(d.$$.fragment),h=wt(),B&&B.c(),y=wt(),C&&C.c(),v=wt(),a=Oe("div"),hi(k.$$.fragment),this.h()},l(F){p=Ne(F,"DIV",{class:!0,style:!0});var D=Ze(p);fi(d.$$.fragment,D),D.forEach(se),h=St(F),B&&B.l(F),y=St(F),C&&C.l(F),v=St(F),a=Ne(F,"DIV",{class:!0});var X=Ze(a);fi(k.$$.fragment,X),X.forEach(se),this.h()},h(){ne(p,"class","chart svelte-1tebgpk"),Qe(p,"padding-top","3px"),Qe(p,"height",(l[4]?l[1]*.72:l[1])+"px"),ne(a,"class","legend svelte-1tebgpk")},m(F,D){De(F,p,D),di(d,p,null),De(F,h,D),B&&B.m(F,D),De(F,y,D),C&&C.m(F,D),De(F,v,D),De(F,a,D),di(k,a,null),I=!0},p(F,[D]){const X={};D&1&&(X.data=F[0]),D&8&&(X.yKey=F[3]),D&64&&(X.colors=F[6]),d.$set(X),(!I||D&18)&&Qe(p,"height",(F[4]?F[1]*.72:F[1])+"px"),F[4]&&F[5]||F[4]=="ni"?B?(B.p(F,D),D&48&&ot(B,1)):(B=sm(F),B.c(),ot(B,1),B.m(y.parentNode,y)):B&&(Bn(),_t(B,1,1,()=>{B=null}),Fn()),F[4]=="prev"&&!F[5]?C?(C.p(F,D),D&48&&ot(C,1)):(C=um(F),C.c(),ot(C,1),C.m(v.parentNode,v)):C&&(Bn(),_t(C,1,1,()=>{C=null}),Fn());const te={};D&1&&(te.data=F[0]),D&4&&(te.xKey=F[2]),D&8&&(te.yKey=F[3]),D&16&&(te.zKey=F[4]),D&32&&(te.topic_prev_available=F[5]),D&128&&(te.decimals=F[7]),D&64&&(te.colors=F[6]),k.$set(te)},i(F){I||(ot(d.$$.fragment,F),ot(B),ot(C),ot(k.$$.fragment,F),I=!0)},o(F){_t(d.$$.fragment,F),_t(B),_t(C),_t(k.$$.fragment,F),I=!1},d(F){F&&(se(p),se(h),se(y),se(v),se(a)),mi(d),B&&B.d(F),C&&C.d(F),mi(k)}}}function X0(l,p,d){let{data:h}=p,{height:y=80}=p,{xKey:v="x"}=p,{yKey:a="y"}=p,{zKey:k="ni"}=p,{topic_prev_available:I=!0}=p,{colors:B=["#00205B","#3878c5","#002417","#BD00BD","lightgrey"]}=p,{decimals:C=null}=p,{label:F=null}=p;return l.$$set=D=>{"data"in D&&d(0,h=D.data),"height"in D&&d(1,y=D.height),"xKey"in D&&d(2,v=D.xKey),"yKey"in D&&d(3,a=D.yKey),"zKey"in D&&d(4,k=D.zKey),"topic_prev_available"in D&&d(5,I=D.topic_prev_available),"colors"in D&&d(6,B=D.colors),"decimals"in D&&d(7,C=D.decimals),"label"in D&&d(8,F=D.label)},[h,y,v,a,k,I,B,C,F]}class Wh extends pn{constructor(p){super(),hn(this,p,X0,W0,cn,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function cm(l,p,d){const h=l.slice();return h[15]=p[d],h}function pm(l,p,d){const h=l.slice();return h[18]=p[d],h[19]=p,h[20]=d,h}function hm(l,p,d){const h=l.slice();return h[15]=p[d],h[20]=d,h}function fm(l){let p,d=xi(l[5]),h=[];for(let y=0;y<d.length;y+=1)h[y]=dm(hm(l,d,y));return{c(){p=Oe("ul");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Ne(y,"UL",{class:!0});var v=Ze(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(se),this.h()},h(){ne(p,"class","legend-block svelte-ezava7")},m(y,v){De(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,v){if(v&32){d=xi(y[5]);let a;for(a=0;a<d.length;a+=1){const k=hm(y,d,a);h[a]?h[a].p(k,v):(h[a]=dm(k),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&se(p),un(h,y)}}}function dm(l){let p,d,h,y,v=l[15]+"",a,k;return{c(){p=Oe("li"),d=Oe("div"),h=wt(),y=Oe("span"),a=Vt(v),k=wt(),this.h()},l(I){p=Ne(I,"LI",{class:!0});var B=Ze(p);d=Ne(B,"DIV",{class:!0}),Ze(d).forEach(se),h=St(B),y=Ne(B,"SPAN",{});var C=Ze(y);a=jt(C,v),C.forEach(se),k=St(B),B.forEach(se),this.h()},h(){ne(d,"class","legend-vis "+(l[20]==0?"bar":"bar2")+" svelte-ezava7"),ne(p,"class","svelte-ezava7")},m(I,B){De(I,p,B),Ae(p,d),Ae(p,h),Ae(p,y),Ae(y,a),Ae(p,k)},p(I,B){B&32&&v!==(v=I[15]+"")&&ki(a,v)},d(I){I&&se(p)}}}function mm(l){let p,d=`${l[4](l[18][l[0]])}%`,h,y,v=ym(l[18][l[0]])+"",a,k,I=`calc(${l[4](l[18][l[0]])}% + 2px)`;function B(){l[12].call(y,l[19],l[20])}return{c(){p=Oe("div"),h=wt(),y=Oe("div"),a=Vt(v),this.h()},l(C){p=Ne(C,"DIV",{class:!0}),Ze(p).forEach(se),h=St(C),y=Ne(C,"DIV",{class:!0});var F=Ze(y);a=jt(F,v),F.forEach(se),this.h()},h(){ne(p,"class",Ap(l[20]==0?"bar":"bar2")+" svelte-ezava7"),Qe(p,"left","0"),Qe(p,"width",d),Qe(p,"top",l[20]==0?"0":"50%"),Qe(p,"height",l[5][1]?"50%":"100%"),ne(y,"class","label svelte-ezava7"),Ku(()=>B.call(y)),Qe(y,"left",I),Qe(y,"top",l[20]==0?"0":"50%"),Qe(y,"height","50%")},m(C,F){De(C,p,F),De(C,h,F),De(C,y,F),Ae(y,a),k=Hu(y,B.bind(y))},p(C,F){l=C,F&25&&d!==(d=`${l[4](l[18][l[0]])}%`)&&Qe(p,"width",d),F&32&&Qe(p,"height",l[5][1]?"50%":"100%"),F&9&&v!==(v=ym(l[18][l[0]])+"")&&ki(a,v),F&25&&I!==(I=`calc(${l[4](l[18][l[0]])}% + 2px)`)&&Qe(y,"left",I)},d(C){C&&(se(p),se(h),se(y)),k()}}}function gm(l){let p,d=l[15].label+"",h,y,v,a,k=`${l[5][1]?l[1]*2:l[1]}px`,I=`calc(100% - ${l[2]}px)`,B=xi(l[15].values),C=[];for(let F=0;F<B.length;F+=1)C[F]=mm(pm(l,B,F));return{c(){p=Oe("div"),h=Vt(d),y=wt(),v=Oe("div");for(let F=0;F<C.length;F+=1)C[F].c();a=wt(),this.h()},l(F){p=Ne(F,"DIV",{class:!0});var D=Ze(p);h=jt(D,d),D.forEach(se),y=St(F),v=Ne(F,"DIV",{class:!0});var X=Ze(v);for(let te=0;te<C.length;te+=1)C[te].l(X);a=St(X),X.forEach(se),this.h()},h(){ne(p,"class","label-group svelte-ezava7"),ne(v,"class","bar-group svelte-ezava7"),Qe(v,"height",k),Qe(v,"width",I)},m(F,D){De(F,p,D),Ae(p,h),De(F,y,D),De(F,v,D);for(let X=0;X<C.length;X+=1)C[X]&&C[X].m(v,null);Ae(v,a)},p(F,D){if(D&8&&d!==(d=F[15].label+"")&&ki(h,d),D&57){B=xi(F[15].values);let X;for(X=0;X<B.length;X+=1){const te=pm(F,B,X);C[X]?C[X].p(te,D):(C[X]=mm(te),C[X].c(),C[X].m(v,a))}for(;X<C.length;X+=1)C[X].d(1);C.length=B.length}D&34&&k!==(k=`${F[5][1]?F[1]*2:F[1]}px`)&&Qe(v,"height",k),D&4&&I!==(I=`calc(100% - ${F[2]}px)`)&&Qe(v,"width",I)},d(F){F&&(se(p),se(y),se(v)),un(C,F)}}}function Y0(l){let p,d,h=l[5][1]&&fm(l),y=xi(l[3]),v=[];for(let a=0;a<y.length;a+=1)v[a]=gm(cm(l,y,a));return{c(){h&&h.c(),p=wt();for(let a=0;a<v.length;a+=1)v[a].c();d=oi()},l(a){h&&h.l(a),p=St(a);for(let k=0;k<v.length;k+=1)v[k].l(a);d=oi()},m(a,k){h&&h.m(a,k),De(a,p,k);for(let I=0;I<v.length;I+=1)v[I]&&v[I].m(a,k);De(a,d,k)},p(a,[k]){if(a[5][1]?h?h.p(a,k):(h=fm(a),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null),k&63){y=xi(a[3]);let I;for(I=0;I<y.length;I+=1){const B=cm(a,y,I);v[I]?v[I].p(B,k):(v[I]=gm(B),v[I].c(),v[I].m(d.parentNode,d))}for(;I<v.length;I+=1)v[I].d(1);v.length=y.length}},i:tr,o:tr,d(a){a&&(se(p),se(d)),h&&h.d(a),un(v,a)}}}function ym(l){let p;return l==null?p="Not available":l<1?p="<1%":p=l.toFixed(0)+"%",p}function J0(l,p,d){let h,y,v,a,{data:k}=p,{xKey:I="perc"}=p,{yKey:B="category"}=p,{zKey:C="ni"}=p,{formatTick:F=ve=>Math.round(ve)}=p,{suffix:D="%"}=p,{barHeight:X=20}=p,{margin:te=30}=p;function oe(ve,xe){let tt={};for(const qe of ve)tt[qe[xe]]||(tt[qe[xe]]={label:qe[xe],values:[]}),tt[qe[xe]].values.push(qe);let Ge=[];for(const qe in tt)Ge.push(tt[qe]);return Ge}function he(ve,xe){ve[xe].width=this.clientWidth,d(3,a),d(6,k),d(7,B)}return l.$$set=ve=>{"data"in ve&&d(6,k=ve.data),"xKey"in ve&&d(0,I=ve.xKey),"yKey"in ve&&d(7,B=ve.yKey),"zKey"in ve&&d(8,C=ve.zKey),"formatTick"in ve&&d(9,F=ve.formatTick),"suffix"in ve&&d(10,D=ve.suffix),"barHeight"in ve&&d(1,X=ve.barHeight),"margin"in ve&&d(2,te=ve.margin)},l.$$.update=()=>{l.$$.dirty&65&&d(11,h=[0,Math.max(...k.map(ve=>ve[I]))]),l.$$.dirty&192&&k.map(ve=>ve[B]).filter((ve,xe,tt)=>tt.indexOf(ve)===xe),l.$$.dirty&320&&d(5,y=k.map(ve=>ve[C]).filter((ve,xe,tt)=>tt.indexOf(ve)===xe)),l.$$.dirty&2048&&d(4,v=ve=>ve/h[1]*100),l.$$.dirty&192&&d(3,a=oe(k,B))},[I,X,te,a,v,y,k,B,C,F,D,h,he]}class Q0 extends pn{constructor(p){super(),hn(this,p,J0,Y0,cn,{data:6,xKey:0,yKey:7,zKey:8,formatTick:9,suffix:10,barHeight:1,margin:2})}}function _m(l,p,d){const h=l.slice();return h[14]=p[d],h}function vm(l,p,d){const h=l.slice();return h[17]=p[d],h[19]=d,h}function bm(l,p,d){const h=l.slice();return h[17]=p[d],h[19]=d,h}function xm(l,p,d){const h=l.slice();return h[14]=p[d],h[19]=d,h}function wm(l){let p,d=xi(l[7]),h=[];for(let y=0;y<d.length;y+=1)h[y]=Sm(xm(l,d,y));return{c(){p=Oe("ul");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Ne(y,"UL",{class:!0});var v=Ze(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(se),this.h()},h(){ne(p,"class","legend svelte-1hk4284")},m(y,v){De(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,v){if(v&144){d=xi(y[7]);let a;for(a=0;a<d.length;a+=1){const k=xm(y,d,a);h[a]?h[a].p(k,v):(h[a]=Sm(k),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&se(p),un(h,y)}}}function Sm(l){let p,d,h,y,v=l[14]+"",a,k;return{c(){p=Oe("li"),d=Oe("div"),h=wt(),y=Oe("span"),a=Vt(v),k=wt(),this.h()},l(I){p=Ne(I,"LI",{class:!0});var B=Ze(p);d=Ne(B,"DIV",{class:!0}),Ze(d).forEach(se),h=St(B),y=Ne(B,"SPAN",{class:!0});var C=Ze(y);a=jt(C,v),C.forEach(se),k=St(B),B.forEach(se),this.h()},h(){ne(d,"class","legend-vis "+(l[19]==0?"bar":"marker")+" svelte-1hk4284"),Qe(d,"height","1rem"),Qe(d,"width",l[19]==0?"1rem":l[4]+"px"),ne(y,"class",Ap(l[19]==0?"bold":"brackets")+" svelte-1hk4284"),ne(p,"class","svelte-1hk4284")},m(I,B){De(I,p,B),Ae(p,d),Ae(p,h),Ae(p,y),Ae(y,a),Ae(p,k)},p(I,B){B&16&&Qe(d,"width",I[19]==0?"1rem":I[4]+"px"),B&128&&v!==(v=I[14]+"")&&ki(a,v)},d(I){I&&se(p)}}}function Em(l){let p,d=l[1](l[17].perc/100)+"",h,y;return{c(){p=Oe("span"),h=Vt(d),y=Vt(l[2]),this.h()},l(v){p=Ne(v,"SPAN",{class:!0,style:!0});var a=Ze(p);h=jt(a,d),y=jt(a,l[2]),a.forEach(se),this.h()},h(){ne(p,"class",Ap(l[19]==0?"bold":"sml brackets")+" svelte-1hk4284"),Qe(p,"color",l[19]==0?"#000000":"#1460aa")},m(v,a){De(v,p,a),Ae(p,h),Ae(p,y)},p(v,a){a&34&&d!==(d=v[1](v[17].perc/100)+"")&&ki(h,d),a&4&&ki(y,v[2])},d(v){v&&se(p)}}}function $0(l){let p,d=`calc(${l[6](l[17][l[0]])}% - ${l[4]/2}px)`,h=`${l[4]}px`;return{c(){p=Oe("div"),this.h()},l(y){p=Ne(y,"DIV",{class:!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"class","marker svelte-1hk4284"),Qe(p,"left",d),Qe(p,"border-left-width",h)},m(y,v){De(y,p,v)},p(y,v){v&113&&d!==(d=`calc(${y[6](y[17][y[0]])}% - ${y[4]/2}px)`)&&Qe(p,"left",d),v&16&&h!==(h=`${y[4]}px`)&&Qe(p,"border-left-width",h)},d(y){y&&se(p)}}}function e1(l){let p,d=`${l[6](l[17][l[0]])}%`;return{c(){p=Oe("div"),this.h()},l(h){p=Ne(h,"DIV",{class:!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"class","bar svelte-1hk4284"),Qe(p,"left","0"),Qe(p,"width",d)},m(h,y){De(h,p,y)},p(h,y){y&97&&d!==(d=`${h[6](h[17][h[0]])}%`)&&Qe(p,"width",d)},d(h){h&&se(p)}}}function km(l){let p;function d(v,a){return v[19]==0?e1:$0}let y=d(l)(l);return{c(){y.c(),p=oi()},l(v){y.l(v),p=oi()},m(v,a){y.m(v,a),De(v,p,a)},p(v,a){y.p(v,a)},d(v){v&&se(p),y.d(v)}}}function Im(l){let p,d=l[14].label+"",h,y,v,a,k,I=`${l[3]}px`,B=xi(l[14].values),C=[];for(let X=0;X<B.length;X+=1)C[X]=Em(bm(l,B,X));let F=xi(l[14].values),D=[];for(let X=0;X<F.length;X+=1)D[X]=km(vm(l,F,X));return{c(){p=Oe("div"),h=Vt(d),y=wt();for(let X=0;X<C.length;X+=1)C[X].c();v=wt(),a=Oe("div");for(let X=0;X<D.length;X+=1)D[X].c();k=wt(),this.h()},l(X){p=Ne(X,"DIV",{class:!0});var te=Ze(p);h=jt(te,d),y=St(te);for(let he=0;he<C.length;he+=1)C[he].l(te);te.forEach(se),v=St(X),a=Ne(X,"DIV",{class:!0});var oe=Ze(a);for(let he=0;he<D.length;he+=1)D[he].l(oe);k=St(oe),oe.forEach(se),this.h()},h(){ne(p,"class","label-group svelte-1hk4284"),ne(a,"class","bar-group svelte-1hk4284"),Qe(a,"height",I)},m(X,te){De(X,p,te),Ae(p,h),Ae(p,y);for(let oe=0;oe<C.length;oe+=1)C[oe]&&C[oe].m(p,null);De(X,v,te),De(X,a,te);for(let oe=0;oe<D.length;oe+=1)D[oe]&&D[oe].m(a,null);Ae(a,k)},p(X,te){if(te&32&&d!==(d=X[14].label+"")&&ki(h,d),te&38){B=xi(X[14].values);let oe;for(oe=0;oe<B.length;oe+=1){const he=bm(X,B,oe);C[oe]?C[oe].p(he,te):(C[oe]=Em(he),C[oe].c(),C[oe].m(p,null))}for(;oe<C.length;oe+=1)C[oe].d(1);C.length=B.length}if(te&113){F=xi(X[14].values);let oe;for(oe=0;oe<F.length;oe+=1){const he=vm(X,F,oe);D[oe]?D[oe].p(he,te):(D[oe]=km(he),D[oe].c(),D[oe].m(a,k))}for(;oe<D.length;oe+=1)D[oe].d(1);D.length=F.length}te&8&&I!==(I=`${X[3]}px`)&&Qe(a,"height",I)},d(X){X&&(se(p),se(v),se(a)),un(C,X),un(D,X)}}}function t1(l){let p,d,h=l[7][1]&&wm(l),y=xi(l[5]),v=[];for(let a=0;a<y.length;a+=1)v[a]=Im(_m(l,y,a));return{c(){h&&h.c(),p=wt();for(let a=0;a<v.length;a+=1)v[a].c();d=oi()},l(a){h&&h.l(a),p=St(a);for(let k=0;k<v.length;k+=1)v[k].l(a);d=oi()},m(a,k){h&&h.m(a,k),De(a,p,k);for(let I=0;I<v.length;I+=1)v[I]&&v[I].m(a,k);De(a,d,k)},p(a,[k]){if(a[7][1]?h?h.p(a,k):(h=wm(a),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null),k&127){y=xi(a[5]);let I;for(I=0;I<y.length;I+=1){const B=_m(a,y,I);v[I]?v[I].p(B,k):(v[I]=Im(B),v[I].c(),v[I].m(d.parentNode,d))}for(;I<v.length;I+=1)v[I].d(1);v.length=y.length}},i:tr,o:tr,d(a){a&&(se(p),se(d)),h&&h.d(a),un(v,a)}}}function i1(l,p,d){let h,y,v,a,{data:k}=p,{xKey:I="perc"}=p,{yKey:B="category"}=p,{zKey:C="group"}=p,{formatTick:F=he=>Math.round(100*he)}=p,{suffix:D="%"}=p,{barHeight:X=25}=p,{markerWidth:te=3}=p;function oe(he,ve){let xe={};for(const Ge of he)xe[Ge[ve]]||(xe[Ge[ve]]={label:Ge[ve],values:[]}),xe[Ge[ve]].values.push(Ge);let tt=[];for(const Ge in xe)tt.push(xe[Ge]);return tt}return l.$$set=he=>{"data"in he&&d(8,k=he.data),"xKey"in he&&d(0,I=he.xKey),"yKey"in he&&d(9,B=he.yKey),"zKey"in he&&d(10,C=he.zKey),"formatTick"in he&&d(1,F=he.formatTick),"suffix"in he&&d(2,D=he.suffix),"barHeight"in he&&d(3,X=he.barHeight),"markerWidth"in he&&d(4,te=he.markerWidth)},l.$$.update=()=>{l.$$.dirty&257&&d(11,h=[0,Math.max(...k.map(he=>he[I]))]),l.$$.dirty&768&&k.map(he=>he[B]).filter((he,ve,xe)=>xe.indexOf(he)===ve),l.$$.dirty&1280&&d(7,y=k.map(he=>he[C]).filter((he,ve,xe)=>xe.indexOf(he)===ve)),l.$$.dirty&2048&&d(6,v=he=>he/h[1]*100),l.$$.dirty&768&&d(5,a=oe(k,B))},[I,F,D,X,te,a,v,y,k,B,C,h]}class Xh extends pn{constructor(p){super(),hn(this,p,i1,t1,cn,{data:8,xKey:0,yKey:9,zKey:10,formatTick:1,suffix:2,barHeight:3,markerWidth:4})}}function zm(l,p,d){const h=l.slice();return h[12]=p[d],h[14]=d,h}function Tm(l,p,d){const h=l.slice();return h[15]=p[d],h[17]=d,h}function Am(l,p,d){const h=l.slice();return h[15]=p[d],h[17]=d,h}function Pm(l,p,d){const h=l.slice();return h[19]=p[d],h[14]=d,h}function Cm(l){let p,d=xi(l[5]),h=[];for(let y=0;y<d.length;y+=1)h[y]=Mm(Pm(l,d,y));return{c(){p=Oe("ul");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Ne(y,"UL",{class:!0});var v=Ze(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(se),this.h()},h(){ne(p,"class","legend svelte-pmaxst")},m(y,v){De(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,v){if(v&36){d=xi(y[5]);let a;for(a=0;a<d.length;a+=1){const k=Pm(y,d,a);h[a]?h[a].p(k,v):(h[a]=Mm(k),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&se(p),un(h,y)}}}function Mm(l){let p,d,h,y,v=l[19]+"",a,k;return{c(){p=Oe("li"),d=Oe("div"),h=wt(),y=Oe("span"),a=Vt(v),k=wt(),this.h()},l(I){p=Ne(I,"LI",{class:!0});var B=Ze(p);d=Ne(B,"DIV",{class:!0}),Ze(d).forEach(se),h=St(B),y=Ne(B,"SPAN",{class:!0});var C=Ze(y);a=jt(C,v),C.forEach(se),k=St(B),B.forEach(se),this.h()},h(){ne(d,"class","legend-vis "+(l[14]==0?"bar":"markerSmall")+" svelte-pmaxst"),Qe(d,"height","1rem"),Qe(d,"width",l[14]==0?"1rem":l[2]+"px"),ne(y,"class",Ap(l[14]==0?"bold":"brackets")+" svelte-pmaxst"),ne(p,"class","svelte-pmaxst")},m(I,B){De(I,p,B),Ae(p,d),Ae(p,h),Ae(p,y),Ae(y,a),Ae(p,k)},p(I,B){B&4&&Qe(d,"width",I[14]==0?"1rem":I[2]+"px"),B&32&&v!==(v=I[19]+"")&&ki(a,v)},d(I){I&&se(p)}}}function r1(l){let p,d=xi(l[12].values),h=[];for(let y=0;y<d.length;y+=1)h[y]=Dm(Tm(l,d,y));return{c(){for(let y=0;y<h.length;y+=1)h[y].c();p=oi()},l(y){for(let v=0;v<h.length;v+=1)h[v].l(y);p=oi()},m(y,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(y,v);De(y,p,v)},p(y,v){if(v&89){d=xi(y[12].values);let a;for(a=0;a<d.length;a+=1){const k=Tm(y,d,a);h[a]?h[a].p(k,v):(h[a]=Dm(k),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&se(p),un(h,y)}}}function n1(l){let p,d=xi(l[12].values),h=[];for(let y=0;y<d.length;y+=1)h[y]=Lm(Am(l,d,y));return{c(){for(let y=0;y<h.length;y+=1)h[y].c();p=oi()},l(y){for(let v=0;v<h.length;v+=1)h[v].l(y);p=oi()},m(y,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(y,v);De(y,p,v)},p(y,v){if(v&89){d=xi(y[12].values);let a;for(a=0;a<d.length;a+=1){const k=Am(y,d,a);h[a]?h[a].p(k,v):(h[a]=Lm(k),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&se(p),un(h,y)}}}function Dm(l){let p,d,h=`calc(100% - ${l[15].offset<0?l[4](l[15][l[0]]-l[15].offset):l[4](l[15][l[0]])}%)`,y=`${l[4](l[15].offset)}%`,v=`${l[17]/l[6].length*100}%`,a=`${1/l[6].length*100}%`;return{c(){p=Oe("div"),this.h()},l(k){p=Ne(k,"DIV",{class:!0,style:!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"class","marker svelte-pmaxst"),ne(p,"style",d="border-"+(l[15].offset<0?"top":"bottom")+": none"),Qe(p,"top",h),Qe(p,"height",y),Qe(p,"left",v),Qe(p,"width",a)},m(k,I){De(k,p,I)},p(k,I){I&8&&d!==(d="border-"+(k[15].offset<0?"top":"bottom")+": none")&&ne(p,"style",d);const B=I&8;(I&25&&h!==(h=`calc(100% - ${k[15].offset<0?k[4](k[15][k[0]]-k[15].offset):k[4](k[15][k[0]])}%)`)||B)&&Qe(p,"top",h),(I&24&&y!==(y=`${k[4](k[15].offset)}%`)||B)&&Qe(p,"height",y),(I&72&&v!==(v=`${k[17]/k[6].length*100}%`)||B)&&Qe(p,"left",v),(I&72&&a!==(a=`${1/k[6].length*100}%`)||B)&&Qe(p,"width",a)},d(k){k&&se(p)}}}function Lm(l){let p,d=`${100-l[4](l[15][l[0]])}%`,h=`${l[4](l[15][l[0]])}%`,y=`${l[17]/l[6].length*100}%`,v=`calc(${1/l[6].length*100}% - 2px)`;return{c(){p=Oe("div"),this.h()},l(a){p=Ne(a,"DIV",{class:!0}),Ze(p).forEach(se),this.h()},h(){ne(p,"class","bar svelte-pmaxst"),Qe(p,"top",d),Qe(p,"height",h),Qe(p,"left",y),Qe(p,"width",v)},m(a,k){De(a,p,k)},p(a,k){k&25&&d!==(d=`${100-a[4](a[15][a[0]])}%`)&&Qe(p,"top",d),k&25&&h!==(h=`${a[4](a[15][a[0]])}%`)&&Qe(p,"height",h),k&64&&y!==(y=`${a[17]/a[6].length*100}%`)&&Qe(p,"left",y),k&64&&v!==(v=`calc(${1/a[6].length*100}% - 2px)`)&&Qe(p,"width",v)},d(a){a&&se(p)}}}function Rm(l){let p;function d(v,a){return v[14]==0?n1:r1}let y=d(l)(l);return{c(){y.c(),p=oi()},l(v){y.l(v),p=oi()},m(v,a){y.m(v,a),De(v,p,a)},p(v,a){y.p(v,a)},d(v){v&&se(p),y.d(v)}}}function a1(l){let p,d,h=`${l[1]}px`,y,v,a,k='<div class="column svelte-pmaxst">0-14</div> <div class="column svelte-pmaxst">15-39</div> <div class="column svelte-pmaxst">40-64</div> <div class="column svelte-pmaxst">65+</div>',I=l[5][1]&&Cm(l),B=xi(l[3]),C=[];for(let F=0;F<B.length;F+=1)C[F]=Rm(zm(l,B,F));return{c(){I&&I.c(),p=wt(),d=Oe("div");for(let F=0;F<C.length;F+=1)C[F].c();y=wt(),v=Oe("div"),a=Oe("div"),a.innerHTML=k,this.h()},l(F){I&&I.l(F),p=St(F),d=Ne(F,"DIV",{class:!0});var D=Ze(d);for(let te=0;te<C.length;te+=1)C[te].l(D);D.forEach(se),y=St(F),v=Ne(F,"DIV",{class:!0});var X=Ze(v);a=Ne(X,"DIV",{class:!0,"data-svelte-h":!0}),Ua(a)!=="svelte-47v26m"&&(a.innerHTML=k),X.forEach(se),this.h()},h(){ne(d,"class","bar-group svelte-pmaxst"),Qe(d,"height",h),ne(a,"class","row svelte-pmaxst"),Qe(a,"width","100%"),ne(v,"class","x-scale svelte-pmaxst")},m(F,D){I&&I.m(F,D),De(F,p,D),De(F,d,D);for(let X=0;X<C.length;X+=1)C[X]&&C[X].m(d,null);De(F,y,D),De(F,v,D),Ae(v,a)},p(F,[D]){if(F[5][1]?I?I.p(F,D):(I=Cm(F),I.c(),I.m(p.parentNode,p)):I&&(I.d(1),I=null),D&89){B=xi(F[3]);let X;for(X=0;X<B.length;X+=1){const te=zm(F,B,X);C[X]?C[X].p(te,D):(C[X]=Rm(te),C[X].c(),C[X].m(d,null))}for(;X<C.length;X+=1)C[X].d(1);C.length=B.length}D&2&&h!==(h=`${F[1]}px`)&&Qe(d,"height",h)},i:tr,o:tr,d(F){F&&(se(p),se(d),se(y),se(v)),I&&I.d(F),un(C,F)}}}function o1(l,p,d){let h,y,v,a,k,{data:I}=p,{xKey:B="category"}=p,{yKey:C="perc"}=p,{zKey:F="group"}=p,{height:D=100}=p,{markerWidth:X=3}=p;function te(oe,he){let ve={};for(const tt of oe){ve[tt[he]]||(ve[tt[he]]={label:tt[he],values:[]});let Ge=ve[tt[he]].values.length,qe=Ge==0?0:tt[C]-ve[tt[he]].values[Ge-1][C];ve[tt[he]].values.push({...tt,offset:qe})}let xe=[];for(const tt in ve)xe.push(ve[tt]);return console.log(xe),xe}return l.$$set=oe=>{"data"in oe&&d(7,I=oe.data),"xKey"in oe&&d(8,B=oe.xKey),"yKey"in oe&&d(0,C=oe.yKey),"zKey"in oe&&d(9,F=oe.zKey),"height"in oe&&d(1,D=oe.height),"markerWidth"in oe&&d(2,X=oe.markerWidth)},l.$$.update=()=>{l.$$.dirty&384&&d(6,h=I.map(oe=>oe[B]).filter((oe,he,ve)=>ve.indexOf(oe)===he)),l.$$.dirty&129&&d(10,y=[0,Math.max(...I.map(oe=>oe[C]))]),l.$$.dirty&640&&d(5,v=I.map(oe=>oe[F]).filter((oe,he,ve)=>ve.indexOf(oe)===he)),l.$$.dirty&1024&&d(4,a=oe=>Math.abs(oe/y[1])*100),l.$$.dirty&640&&d(3,k=te(I,F))},[C,D,X,k,a,v,h,I,B,F,y]}class Yh extends pn{constructor(p){super(),hn(this,p,o1,a1,cn,{data:7,xKey:8,yKey:0,zKey:9,height:1,markerWidth:2})}}function s1(l){let p,d='<a href="#" tabindex="0" class="svelte-4glskh">Back to top</a>',h,y;return{c(){p=Oe("div"),p.innerHTML=d,this.h()},l(v){p=Ne(v,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),Ua(p)!=="svelte-86r4eh"&&(p.innerHTML=d),this.h()},h(){ne(p,"role","region"),ne(p,"class","back_to_start svelte-4glskh"),as(p,"hidden",l[0])},m(v,a){De(v,p,a),h||(y=[Th(window,"scroll",l[2]),Th(p,"click",l[1])],h=!0)},p(v,[a]){a&1&&as(p,"hidden",v[0])},i:tr,o:tr,d(v){v&&se(p),h=!1,h_(y)}}}function l1(l,p,d){let{buttonVisibleOnPX:h=200}=p,y=!0;const v=()=>{document.body.scrollIntoView()},a=()=>document.documentElement||document.body,k=()=>{a().scrollTop>h?d(0,y=!1):d(0,y=!0)};return l.$$set=I=>{"buttonVisibleOnPX"in I&&d(3,h=I.buttonVisibleOnPX)},[y,v,k,h]}class u1 extends pn{constructor(p){super(),hn(this,p,l1,s1,cn,{buttonVisibleOnPX:3})}}function c1(l){let p,d,h=l[4][l[0]].title+"",y,v,a,k,I,B,C,F,D,X,te=l[4][l[0]].info+"",oe,he,ve;return{c(){p=Oe("div"),d=Oe("div"),y=Vt(h),v=wt(),a=Oe("img"),C=wt(),F=Oe("div"),D=Oe("div"),X=new po(!1),this.h()},l(xe){p=Ne(xe,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var tt=Ze(p);d=Ne(tt,"DIV",{class:!0});var Ge=Ze(d);y=jt(Ge,h),v=St(Ge),a=Ne(Ge,"IMG",{class:!0,src:!0,alt:!0}),Ge.forEach(se),tt.forEach(se),C=St(xe),F=Ne(xe,"DIV",{class:!0,id:!0});var qe=Ze(F);D=Ne(qe,"DIV",{class:!0,"aria-hidden":!0});var He=Ze(D);X=ho(He,!1),He.forEach(se),qe.forEach(se),this.h()},h(){ne(a,"class","i-button"),Sp(a.src,k=er+"\\img\\i-button.svg")||ne(a,"src",k),ne(a,"alt","Information button"),ne(d,"class","blocktitle"),ne(p,"class","row"),Qe(p,"display","flex"),Qe(p,"cursor","pointer"),ne(p,"data-bs-toggle","collapse"),ne(p,"data-bs-target",I="#"+l[0]+"-info"),ne(p,"aria-expanded","false"),ne(p,"aria-controls",B=l[0]+"-info"),X.a=null,ne(D,"class","card card-body svelte-1qrf6oz"),ne(D,"aria-hidden","true"),ne(F,"class","collapse svelte-1qrf6oz"),ne(F,"id",oe=l[0]+"-info")},m(xe,tt){De(xe,p,tt),Ae(p,d),Ae(d,y),Ae(d,v),Ae(d,a),l[6](p),De(xe,C,tt),De(xe,F,tt),Ae(F,D),X.m(te,D),l[7](D),he||(ve=Th(d,"click",l[3]),he=!0)},p(xe,[tt]){tt&1&&h!==(h=xe[4][xe[0]].title+"")&&ki(y,h),tt&1&&I!==(I="#"+xe[0]+"-info")&&ne(p,"data-bs-target",I),tt&1&&B!==(B=xe[0]+"-info")&&ne(p,"aria-controls",B),tt&1&&te!==(te=xe[4][xe[0]].info+"")&&X.p(te),tt&1&&oe!==(oe=xe[0]+"-info")&&ne(F,"id",oe)},i:tr,o:tr,d(xe){xe&&(se(p),se(C),se(F)),l[6](null),l[7](null),he=!1,ve()}}}function p1(l,p,d){let{id:h}=p,{place:y}=p,v,a;function k(D){let te=D.replaceAll("[",".").replaceAll("]","").split("."),oe=y.meta_data;for(let he=0;he<te.length;he++)if(oe.hasOwnProperty(te[he])&&(oe=oe[te[he]],te[he]=="last_updated")){let ve=oe.split("-");oe=ve[2]+"/"+ve[1]+"/"+ve[0]}return oe}function I(){d(1,v.ariaHidden=!a.ariaExpanded,v)}let B={popden:{title:"Population density",info:"Population density is the number of usual residents per square kilometer. A square kilometer is approximately equivalent to the floor space of 8 Titanics. It is rounded to 1 decimal place. <p class = 'pibutton'>Access data at: <a href='"+k("MYETotal[0].dataset_url")+"'>"+k("MYETotal[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("MYETotal[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("MYETotal[0].email")+"'>Email for more information</a> </p>"},pop:{title:"Population",info:"Population is based on the number of usual residents at 30th June in the mid-year population estimates.  <p class = 'pibutton'>Access data at: <a href='"+k("MYETotal[0].dataset_url")+"'>"+k("MYETotal[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("MYETotal[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("MYETotal[0].email")+"'>Email for more information</a> </p>"},generalhealth:{title:"General health",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>General health is a self-assessment of a person's general state of health. It is not based over any specified period of time. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},wellbeing:{title:"Personal wellbeing",info:"<p>Average Happiness score out of 10 for people aged 16+.  Average Life satisfaction score out of 10 for people aged 16+.<p>Average score out of 10 where 0 is not at all and 10 is completely.</p></p><p class = 'pibutton'>Access data at: <a href='"+k("wellbeing[0].dataset_url")+"'>"+k("wellbeing[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("wellbeing[0].last_updated")+"</p> <p>Loneliness is the percentage of people aged 16+ who were lonely 'often/always' or 'some of the time'.</p><p class = 'pibutton'>Access data at: <a href='"+k("lonely[0].dataset_url")+"'>"+k("lonely[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("lonely[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("lonely[0].email")+"'>Email for more information</a> </p>"},lifeexpectancy:{title:"Life expectancy at birth",info:"<p class = 'pibutton'>Life expectancy at birth is the average number of years a person born in the current period could expect to live if the current mortality patterns remain constant.  Further information on definitions is available on the <a href = 'https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health Inequalities webpage</a></p><p class = 'pibutton'>Access data at: <a href='"+k("LE[0].dataset_url")+"'>"+k("LE[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("LE[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("LE[0].email")+"'>Email for more information</a> </p>"},env_problem:{title:"Environmental problems",info:" <p class = 'pibutton'>Access data at: <a href='"+k("Env_problem[0].dataset_url")+"'>"+k("Env_problem[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Env_problem[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("Env_problem[0].email")+"'>Email for more information</a> </p>"},renewable:{title:"Household renewable energy systems",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},cars:{title:"Car or van availability",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The number of cars or vans that are owned, or available for use, by members of a household. It includes company cars and vans that are available for private use.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},active:{title:"Active travel",info:"<p class = 'pibutton'>Access data at: <a href='"+k("Env_active[0].dataset_url")+"'>"+k("Env_active[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Env_active[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("Env_active[0].email")+"'>Email for more information</a> </p>"},crime:{title:"Police recorded crimes",info:"<p class = 'pibutton'>Access data at: <a href='"+k("crime[0].dataset_url")+"'>"+k("crime[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("crime[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("crime[0].email")+"'>Email for more information</a> </p>"},crimetype:{title:"Types of crime",info:"<p class = 'pibutton'>Access data at: <a href='"+k("crime[0].dataset_url")+"'>"+k("crime[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("crime[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("crime[0].email")+"'>Email for more information</a> </p><p class = 'pibutton'>Crime per 1,000 population based on mid-year population estimate</p>"},crimeworry:{title:"Worry about crime",info:"<p class = 'pibutton'>Access data at: <a href='"+k("crimeworry[0].dataset_url")+"'>"+k("crimeworry[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("crimeworry[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("crimeworry[0].email")+"'>Email for more information</a> </p>"},crimeperception:{title:"Views on crime",info:"<p class = 'pibutton'>Access data at: <a href='"+k("crimeperception[0].dataset_url")+"'>"+k("crimeperception[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("crimeperception[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("crimeperception[0].email")+"'>Email for more information</a> </p>"},carers:{title:"Unpaid care giving",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Unpaid care covers looking after giving help or support to anyone because they have long-term physical or mental health conditions or illnesses, or problems related to old age. It does not include any activities as part of paid employment. All unpaid care statistics are restricted to persons aged 5 and over. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},hospitalactivity:{title:"Annual admissions to hospital",info:"<p class = 'pibutton'>Access data at: <a href='"+k("Admiss[0].dataset_url")+"'>"+k("Admiss[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Admiss[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("Admiss[0].email")+"'>Email for more information</a> </p>"},primarycare:{title:"Primary care providers",info:"<p class = 'pibutton'>Access data at: <a href='"+k("GP[0].dataset_url")+"'>"+k("GP[0].title")+"</a>, <a href='"+k("DEN[0].dataset_url")+"'>"+k("DEN[0].title")+"</a> and <a href='"+k("DEN_REG[0].dataset_url")+"'>"+k("DEN_REG[0].title")+"</a></p>"},employmentrates:{title:"Work status of adults",info:"<p class = 'pibutton'>Access data at: <a href='"+k("LMS[0].dataset_url")+"'>"+k("LMS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("LMS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("LMS[0].email")+"'>Email for more information</a> </p><p>Unemployed rates are based on those aged 16 and over, while both Employed and Inactive rates are based on those aged 16 to 64. Inactive includes students, early retirees, or people looking after a home, who are long-term sick or disabled. </p>"},employed:{title:"Work and wages",info:"<p class = 'pibutton'>Access data on number employed at: <a href='"+k("LMS[0].dataset_url")+"'>"+k("LMS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("LMS[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+k("LMS[0].email")+"'>Email for more information</a> </p><p >Access wages data at: <a href='"+k("ASHE_weekly[0].dataset_url")+"'>"+k("ASHE_weekly[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("ASHE_weekly[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("ASHE_weekly[0].email")+"'>Email for more information</a> </p><p>Median salary is the median gross weekly earnings for full-time employees.  The Median measures the amount earned by the average individual, that is the level of earnings at which half the population are above and half the population are below</p>"},wages:{title:"Average annual wage",info:"<p class = 'pibutton'>Access data at: <a href='"+k("ASHE[0].dataset_url")+"'>"+k("ASHE[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("ASHE[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("ASHE[0].email")+"'>Email for more information</a> </p><p>Median is the ..... </p>"},bres:{title:"Type of work",info:"<p class = 'pibutton'>Access data at: <a href='"+k("BRES[0].dataset_url")+"'>"+k("BRES[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("BRES[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+k("BRES[0].email")+"'>Email for more information</a> </p>"},pensionagebenefits:{title:"State Pension",info:"<p class = 'pibutton'>Access data at: <a href='"+k("BS[0].dataset_url")+"'>"+k("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("BS[0].email")+"'>Email for more information</a> </p>"},ucbenefits:{title:"Universal Credit",info:"<p class = 'pibutton'>Access data at: <a href='"+k("BS[0].dataset_url")+"'>"+k("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("BS[0].email")+"'>Email for more information</a> </p>"},pipbenefits:{title:"Personal Independence Payment",info:"<p class = 'pibutton'>Access data at:  <a href='"+k("BS[0].dataset_url")+"'>"+k("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("BS[0].email")+"'>Email for more information</a> </p>"},enrollments:{title:"People in education",info:"<p class = 'pibutton'>Access data at: <a href='"+k("Primary[0].dataset_url")+"'>"+k("Primary[0].title")+"</a>, <a href='"+k("PostPrimary[0].dataset_url")+"'>"+k("PostPrimary[0].title")+"</a>,  <a href='"+k("FE[0].dataset_url")+"'>"+k("FE[0].title")+"</a> and <a href='"+k("HE[0].dataset_url")+"'>"+k("HE[0].title")+"</a></p>"},fsme:{title:"Pupils entitled to free school meals",info:"<p class = 'pibutton'>Access data at: <a href='"+k("Primary[0].dataset_url")+"'>"+k("Primary[0].title")+"</a> and <a href='"+k("PostPrimary[0].dataset_url")+"'>"+k("PostPrimary[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Primary[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("Primary[0].email")+"'>Email for more information</a>.  Definitions are available on the <a href = 'https://www.education-ni.gov.uk/articles/school-enrolments-overview'>statistical publication page</a>. </p>"},teachers:{title:"School class size",info:"<p class = 'pibutton'>Access data at: <a href='"+k("ClassSize[0].dataset_url")+"'>"+k("ClassSize[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("ClassSize[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("ClassSize[0].email")+"'>Email for more information</a> </p>"},qualifications:{title:"Highest level of qualifications in the population",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Needs tidied up with proper CSS.   The highest level of qualification categories are as follows:No qualifications;Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;Apprenticeship; Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent; Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and Other: Other qualifications, equivalent unknown.Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent."},attainment:{title:"GCSEs for school leavers",info:" <p class = 'pibutton'>Access data at: <a href='"+k("Attainment[0].dataset_url")+"'>"+k("Attainment[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Attainment[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+k("Attainment[0].email")+"'>Email for more information</a> </p>"},concern:{title:"Concern about the environment",info:" <p class = 'pibutton'>Access data at: <a href='"+k("Env_concern[0].dataset_url")+"'>"+k("Env_concern[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Env_concern[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+k("Env_concern[0].email")+"'>Email for more information</a> </p>"},waste:{title:"Household waste",info:" <p class = 'pibutton'>Access data at: <a href='"+k("Env_waste[0].dataset_url")+"'>"+k("Env_waste[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Env_waste[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+k("Env_waste[0].email")+"'>Email for more information</a> </p>"},ghg:{title:"Greenhouse gas",info:" <p class = 'pibutton'>Access data at: <a href='"+k("Env_ghg[0].dataset_url")+"'>"+k("Env_ghg[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Env_ghg[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+k("Env_ghg[0].email")+"'>Email for more information</a> </p>"},empty:{title:"",info:""},destination:{title:"Next steps for school leavers",info:" <p class = 'pibutton'>Access data at: <a href='"+k("Destination[0].dataset_url")+"'>"+k("Destination[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("Destination[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("Destination[0].email")+"'>Email for more information</a> </p>"},popchange:{title:"Population change",info:" <p class = 'pibutton'>Access data at: <a href='"+k("PopChange[0].dataset_url")+"'>"+k("PopChange[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("PopChange[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("PopChange[0].email")+"'>Email for more information</a> </p>"},broadage:{title:"Age",info:" <p class = 'pibutton'> Age bands used at LGD, DEA and SDZ are different than those at the smaller data zones.  Access data at: <a href='"+k("BroadAge[0].dataset_url")+"'>"+k("BroadAge[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("BroadAge[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("BroadAge[0].email")+"'>Email for more information</a> </p>"},age:{title:"Age",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>A grouping of ages where a persons age is their age at their last birthday on or prior to census day.  Age bands used at data zone are different than those at LGD, DEA and SDZ<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},hhsize:{title:"Household size",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The number of usual residents in the household.      <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},religion:{title:"Religion, Religion brought up in",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The religious group the person belongs to or for people with no current religion their religious group of upbringing.People with no current religion and no religion of upbringing are labelled 'None'.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},language:{title:"Main language",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Person's main language as declared in the Census.Statistics for all language questions are restrictedto persons aged 3 and over. <ahref='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},households:{title:"Households - box with numbers",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>A household is either one person living alone or a group of people living at the same address who share cooking facilities and share a living room, sitting room or dining area. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},SEN:{title:"Special educational needs (SEN)",info:" <p class = 'pibutton'>Access data at:</p><p class = 'pibutton'><a href='"+k("SEN[0].dataset_url")+"'>"+k("SEN[0].title")+"</a></p><p class = 'pibutton'><a href='"+k("Primary[0].dataset_url")+"'>"+k("Primary[0].title")+"</a></p><p class = 'pibutton'><a href='"+k("PostPrimary[0].dataset_url")+"'>"+k("PostPrimary[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("SEN[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+k("SEN[0].email")+"'>Email for more information</a> </p><p class = 'pibutton'>These figures include SEN pupils enrolled in Special Education Schools, Primary Schools and Post-Primary Schools and include Statemented and Non Statemented pupils.  Definitions are available on the <a href = 'https://www.education-ni.gov.uk/articles/school-enrolments-overview'>statistical publication page</a>.</p>"},no_bus:{title:"Business and trade",info:" <p class = 'pibutton'>Access data at: <a href='"+k("business[0].dataset_url")+"'>"+k("business[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("business[0].last_updated")+"</p>  <p class = 'pibutton'>Access data at: <a href='"+k("niets_sales[0].dataset_url")+"'>"+k("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("niets_sales[0].email")+"'>Email for more information</a> </p>"},type_bus:{title:"Type of businesses",info:" <p class = 'pibutton'>Access data at: <a href='"+k("business[0].dataset_url")+"'>"+k("business[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("business[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("business[0].email")+"'>Email for more information</a> </p>"},size_bus:{title:"Employees in businesses",info:" <p class = 'pibutton'>Access data at: <a href='"+k("businessband[0].dataset_url")+"'>"+k("businessband[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("businessband[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("businessband[0].email")+"'>Email for more information</a> </p>"},sector:{title:"Business sectors",info:" <p class = 'pibutton'>Access farms data at: <a href='"+k("farms[0].dataset_url")+"'>"+k("farms[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("farms[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("farms[0].email")+"'>Email for more information</a> </p> <p class = 'pibutton'>Access tourism jobs data at: <a href='"+k("tourism[0].dataset_url")+"'>"+k("tourism[0].title")+"</a></p> <p class = 'pibutton'>Access tourism accomodation data at: <a href='"+k("tourism_estab[0].dataset_url")+"'>"+k("tourism_estab[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("tourism_estab[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("tourism[0].email")+"'>Email for more information</a> </p>"},niets_sales:{title:"Sales partners",info:"<p class = 'pibutton'>Access data at: <a href='"+k("niets_sales[0].dataset_url")+"'>"+k("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("niets_sales[0].email")+"'>Email for more information</a> </p>"},niets_purch:{title:"Purchases partners",info:"<p class = 'pibutton'>Access data at: <a href='"+k("niets_sales[0].dataset_url")+"'>"+k("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+k("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+k("niets_sales[0].email")+"'>Email for more information</a> </p>"}};function C(D){Ns[D?"unshift":"push"](()=>{a=D,d(2,a)})}function F(D){Ns[D?"unshift":"push"](()=>{v=D,d(1,v)})}return l.$$set=D=>{"id"in D&&d(0,h=D.id),"place"in D&&d(5,y=D.place)},[h,v,a,I,B,y,C,F]}class h1 extends pn{constructor(p){super(),hn(this,p,p1,c1,cn,{id:0,place:5})}}function f1(l){let p,d;return{c(){p=Oe("h3"),d=new po(!1),this.h()},l(h){p=Ne(h,"H3",{style:!0});var y=Ze(p);d=ho(y,!1),y.forEach(se),this.h()},h(){d.a=null,Qe(p,"margin","0 0 10px 0")},m(h,y){De(h,p,y),d.m(l[9],p)},p(h,y){y&512&&d.p(h[9])},i:tr,o:tr,d(h){h&&se(p)}}}function d1(l){let p,d;return p=new h1({props:{id:l[0],place:l[2]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&1&&(v.id=h[0]),y&4&&(v.place=h[2]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function Bm(l){let p,d;return{c(){p=Oe("div"),d=Vt(l[12]),this.h()},l(h){p=Ne(h,"DIV",{class:!0});var y=Ze(p);d=jt(y,l[12]),y.forEach(se),this.h()},h(){ne(p,"class","text-small")},m(h,y){De(h,p,y),Ae(p,d)},p(h,y){y&4096&&ki(d,h[12])},d(h){h&&se(p)}}}function m1(l){let p,d;return{c(){p=new po(!1),d=oi(),this.h()},l(h){p=ho(h,!1),d=oi(),this.h()},h(){p.a=d},m(h,y){p.m(l[3],h,y),De(h,d,y)},p(h,y){y&8&&p.p(h[3])},i:tr,o:tr,d(h){h&&(se(d),p.d())}}}function g1(l){let p,d=l[3][l[2].type]+"",h;return{c(){p=new po(!1),h=oi(),this.h()},l(y){p=ho(y,!1),h=oi(),this.h()},h(){p.a=h},m(y,v){p.m(d,y,v),De(y,h,v)},p(y,v){v&12&&d!==(d=y[3][y[2].type]+"")&&p.p(d)},i:tr,o:tr,d(y){y&&(se(h),p.d())}}}function y1(l){let p,d,h,y,v,a;const k=[E1,S1,w1],I=[];function B(C,F){return F&1040&&(p=null),F&1040&&(d=null),p==null&&(p=!!(C[4].hasOwnProperty("none")&C[10]==null)),p?0:(d==null&&(d=!!(C[4].hasOwnProperty("ni")&C[10]=="ni")),d?1:2)}return h=B(l,-1),y=I[h]=k[h](l),{c(){y.c(),v=oi()},l(C){y.l(C),v=oi()},m(C,F){I[h].m(C,F),De(C,v,F),a=!0},p(C,F){let D=h;h=B(C,F),h===D?I[h].p(C,F):(Bn(),_t(I[D],1,1,()=>{I[D]=null}),Fn(),y=I[h],y?y.p(C,F):(y=I[h]=k[h](C),y.c()),ot(y,1),y.m(v.parentNode,v))},i(C){a||(ot(y),a=!0)},o(C){_t(y),a=!1},d(C){C&&se(v),I[h].d(C)}}}function _1(l){let p,d,h,y,v,a;const k=[z1,I1,k1],I=[];function B(C,F){return F&1040&&(p=null),F&1040&&(d=null),p==null&&(p=!!(C[4].hasOwnProperty("none")&C[10]==null)),p?0:(d==null&&(d=!!(C[4].hasOwnProperty("ni")&C[10]=="ni")),d?1:2)}return h=B(l,-1),y=I[h]=k[h](l),{c(){y.c(),v=oi()},l(C){y.l(C),v=oi()},m(C,F){I[h].m(C,F),De(C,v,F),a=!0},p(C,F){let D=h;h=B(C,F),h===D?I[h].p(C,F):(Bn(),_t(I[D],1,1,()=>{I[D]=null}),Fn(),y=I[h],y?y.p(C,F):(y=I[h]=k[h](C),y.c()),ot(y,1),y.m(v.parentNode,v))},i(C){a||(ot(y),a=!0)},o(C){_t(y),a=!1},d(C){C&&se(v),I[h].d(C)}}}function v1(l){let p,d,h,y,v,a;const k=[P1,A1,T1],I=[];function B(C,F){return F&1040&&(p=null),F&1040&&(d=null),p==null&&(p=!!(C[4].hasOwnProperty("none")&C[10]==null)),p?0:(d==null&&(d=!!(C[4].hasOwnProperty("ni")&C[10]=="ni")),d?1:2)}return h=B(l,-1),y=I[h]=k[h](l),{c(){y.c(),v=oi()},l(C){y.l(C),v=oi()},m(C,F){I[h].m(C,F),De(C,v,F),a=!0},p(C,F){let D=h;h=B(C,F),h===D?I[h].p(C,F):(Bn(),_t(I[D],1,1,()=>{I[D]=null}),Fn(),y=I[h],y?y.p(C,F):(y=I[h]=k[h](C),y.c()),ot(y,1),y.m(v.parentNode,v))},i(C){a||(ot(y),a=!0)},o(C){_t(y),a=!1},d(C){C&&se(v),I[h].d(C)}}}function b1(l){let p,d;return p=new Q0({props:{data:l[4],zKey:"group"}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function x1(l){let p,d,h,y,v,a;const k=[D1,M1,C1],I=[];function B(C,F){return F&1040&&(p=null),F&1040&&(d=null),p==null&&(p=!!(C[4].hasOwnProperty("none")&C[10]==null)),p?0:(d==null&&(d=!!(C[4].hasOwnProperty("ni")&C[10]=="ni")),d?1:2)}return h=B(l,-1),y=I[h]=k[h](l),{c(){y.c(),v=oi()},l(C){y.l(C),v=oi()},m(C,F){I[h].m(C,F),De(C,v,F),a=!0},p(C,F){let D=h;h=B(C,F),h===D?I[h].p(C,F):(Bn(),_t(I[D],1,1,()=>{I[D]=null}),Fn(),y=I[h],y?y.p(C,F):(y=I[h]=k[h](C),y.c()),ot(y,1),y.m(v.parentNode,v))},i(C){a||(ot(y),a=!0)},o(C){_t(y),a=!1},d(C){C&&se(v),I[h].d(C)}}}function w1(l){let p,d;return p=new Kh({props:{data:l[4],zKey:l[5]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),y&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function S1(l){let p,d;return p=new Kh({props:{data:l[4].ni,zKey:l[5]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].ni),y&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function E1(l){let p,d;return p=new Kh({props:{data:l[4].none,zKey:l[5]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].none),y&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function k1(l){let p,d;return p=new Xh({props:{data:l[4],zKey:l[5],label:l[6]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function I1(l){let p,d;return p=new Xh({props:{data:l[4].ni,zKey:l[5],label:l[6]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].ni),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function z1(l){let p,d;return p=new Xh({props:{data:l[4].none,zKey:l[5],label:l[6]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].none),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function T1(l){let p,d;return p=new Yh({props:{data:l[4],zKey:l[5],label:l[6]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function A1(l){let p,d;return p=new Yh({props:{data:l[4].ni,zKey:l[5],label:l[6]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].ni),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function P1(l){let p,d;return p=new Yh({props:{data:l[4].none,zKey:l[5],label:l[6]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].none),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function C1(l){let p,d;return p=new Wh({props:{data:l[4],zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),y&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function M1(l){let p,d;return p=new Wh({props:{data:l[4].ni,zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].ni),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),y&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function D1(l){let p,d;return p=new Wh({props:{data:l[4].none,zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].none),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),y&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function Fm(l){let p,d,h,y,v=l[11][l[2].type]+"";return{c(){p=Oe("br"),d=wt(),h=Oe("span"),y=new po(!1),this.h()},l(a){p=Ne(a,"BR",{}),d=St(a),h=Ne(a,"SPAN",{class:!0});var k=Ze(h);y=ho(k,!1),k.forEach(se),this.h()},h(){y.a=null,ne(h,"class","text-small")},m(a,k){De(a,p,k),De(a,d,k),De(a,h,k),y.m(v,h)},p(a,k){k&2052&&v!==(v=a[11][a[2].type]+"")&&y.p(v)},d(a){a&&(se(p),se(d),se(h))}}}function L1(l){let p,d,h,y,v,a,k,I,B,C,F,D,X,te,oe,he;const ve=[d1,f1],xe=[];function tt(Ue,Xe){return Ue[8]==!0|Ue[8]==null?0:1}d=tt(l),h=xe[d]=ve[d](l);let Ge=l[12]!=null&&Bm(l);const qe=[x1,b1,v1,_1,y1,g1,m1],He=[];function ni(Ue,Xe){return Xe&12&&(a=null),Xe&12&&(k=null),Xe&12&&(I=null),Xe&12&&(B=null),Xe&12&&(C=null),Xe&12&&(F=null),a==null&&(a=!!(Ue[3]=="StackedBarChart"|Ue[3].hasOwnProperty(Ue[2].type)&Ue[3][Ue[2].type]=="StackedBarChart")),a?0:(k==null&&(k=!!(Ue[3]=="GroupChart"|Ue[3].hasOwnProperty(Ue[2].type)&Ue[3][Ue[2].type]=="GroupChart")),k?1:(I==null&&(I=!!(Ue[3]=="ProfileChart"|Ue[3].hasOwnProperty(Ue[2].type)&Ue[3][Ue[2].type]=="ProfileChart")),I?2:(B==null&&(B=!!(Ue[3]=="BarChart"|Ue[3].hasOwnProperty(Ue[2].type)&Ue[3][Ue[2].type]=="BarChart")),B?3:(C==null&&(C=!!(Ue[3]=="ColChart"|Ue[3].hasOwnProperty(Ue[2].type)&Ue[3][Ue[2].type]=="ColChart")),C?4:(F==null&&(F=!!Ue[3].hasOwnProperty(Ue[2].type)),F?5:6)))))}D=ni(l,-1),X=He[D]=qe[D](l);let Ot=l[11]!=null&l[10]!=null&&Fm(l);return{c(){p=Oe("div"),h.c(),y=wt(),Ge&&Ge.c(),v=wt(),X.c(),te=wt(),Ot&&Ot.c(),this.h()},l(Ue){p=Ne(Ue,"DIV",{class:!0,style:!0});var Xe=Ze(p);h.l(Xe),y=St(Xe),Ge&&Ge.l(Xe),v=St(Xe),X.l(Xe),te=St(Xe),Ot&&Ot.l(Xe),Xe.forEach(se),this.h()},h(){ne(p,"class",oe=Om(l[0])),ne(p,"style",l[1])},m(Ue,Xe){De(Ue,p,Xe),xe[d].m(p,null),Ae(p,y),Ge&&Ge.m(p,null),Ae(p,v),He[D].m(p,null),Ae(p,te),Ot&&Ot.m(p,null),he=!0},p(Ue,[Xe]){let xt=d;d=tt(Ue),d===xt?xe[d].p(Ue,Xe):(Bn(),_t(xe[xt],1,1,()=>{xe[xt]=null}),Fn(),h=xe[d],h?h.p(Ue,Xe):(h=xe[d]=ve[d](Ue),h.c()),ot(h,1),h.m(p,y)),Ue[12]!=null?Ge?Ge.p(Ue,Xe):(Ge=Bm(Ue),Ge.c(),Ge.m(p,v)):Ge&&(Ge.d(1),Ge=null);let ii=D;D=ni(Ue,Xe),D===ii?He[D].p(Ue,Xe):(Bn(),_t(He[ii],1,1,()=>{He[ii]=null}),Fn(),X=He[D],X?X.p(Ue,Xe):(X=He[D]=qe[D](Ue),X.c()),ot(X,1),X.m(p,te)),Ue[11]!=null&Ue[10]!=null?Ot?Ot.p(Ue,Xe):(Ot=Fm(Ue),Ot.c(),Ot.m(p,null)):Ot&&(Ot.d(1),Ot=null),(!he||Xe&1&&oe!==(oe=Om(Ue[0])))&&ne(p,"class",oe),(!he||Xe&2)&&ne(p,"style",Ue[1])},i(Ue){he||(ot(h),ot(X),he=!0)},o(Ue){_t(h),_t(X),he=!1},d(Ue){Ue&&se(p),xe[d].d(),Ge&&Ge.d(),He[D].d(),Ot&&Ot.d()}}}function Om(l){return l=="empty"?"":"div-grey-box"}function R1(l,p,d){let{id:h}=p,{style:y=""}=p,{place:v}=p,{content:a}=p,{chart_data:k=null}=p,{zKey:I="ni"}=p,{label:B=null}=p,{topic_prev_available:C=!0}=p,{i_button:F=!0}=p,{heading:D=null}=p,{chart_compare_type:X}=p,{compare_content:te=null}=p,{year:oe=null}=p;return l.$$set=he=>{"id"in he&&d(0,h=he.id),"style"in he&&d(1,y=he.style),"place"in he&&d(2,v=he.place),"content"in he&&d(3,a=he.content),"chart_data"in he&&d(4,k=he.chart_data),"zKey"in he&&d(5,I=he.zKey),"label"in he&&d(6,B=he.label),"topic_prev_available"in he&&d(7,C=he.topic_prev_available),"i_button"in he&&d(8,F=he.i_button),"heading"in he&&d(9,D=he.heading),"chart_compare_type"in he&&d(10,X=he.chart_compare_type),"compare_content"in he&&d(11,te=he.compare_content),"year"in he&&d(12,oe=he.year)},[h,y,v,a,k,I,B,C,F,D,X,te,oe]}class Ou extends pn{constructor(p){super(),hn(this,p,R1,L1,cn,{id:0,style:1,place:2,content:3,chart_data:4,zKey:5,label:6,topic_prev_available:7,i_button:8,heading:9,chart_compare_type:10,compare_content:11,year:12})}}function Nm(l,p,d){const h=l.slice();return h[13]=p[d],h[15]=d,h}function Um(l){let p=l[6][l[10][l[15]]].show.includes(l[3].type),d,h,y=p&&Vm(l);return{c(){y&&y.c(),d=oi()},l(v){y&&y.l(v),d=oi()},m(v,a){y&&y.m(v,a),De(v,d,a),h=!0},p(v,a){a&72&&(p=v[6][v[10][v[15]]].show.includes(v[3].type)),p?y?(y.p(v,a),a&72&&ot(y,1)):(y=Vm(v),y.c(),ot(y,1),y.m(d.parentNode,d)):y&&(Bn(),_t(y,1,1,()=>{y=null}),Fn())},i(v){h||(ot(y),h=!0)},o(v){_t(y),h=!1},d(v){v&&se(d),y&&y.d(v)}}}function Vm(l){let p,d;return p=new Ou({props:{id:l[6][l[10][l[15]]].id,style:l[6][l[10][l[15]]].style,place:l[3],year:l[6][l[10][l[15]]].year,content:l[6][l[10][l[15]]].content,chart_data:l[6][l[10][l[15]]].chart_data,zKey:l[6][l[10][l[15]]].zKey,label:l[6][l[10][l[15]]].label,topic_prev_available:l[6][l[10][l[15]]].topic_prev_available,chart_compare_type:l[8],i_button:l[6][l[10][l[15]]].i_button,heading:l[6][l[10][l[15]]].title,compare_content:l[6][l[10][l[15]]].compare_content}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&64&&(v.id=h[6][h[10][h[15]]].id),y&64&&(v.style=h[6][h[10][h[15]]].style),y&8&&(v.place=h[3]),y&64&&(v.year=h[6][h[10][h[15]]].year),y&64&&(v.content=h[6][h[10][h[15]]].content),y&64&&(v.chart_data=h[6][h[10][h[15]]].chart_data),y&64&&(v.zKey=h[6][h[10][h[15]]].zKey),y&64&&(v.label=h[6][h[10][h[15]]].label),y&64&&(v.topic_prev_available=h[6][h[10][h[15]]].topic_prev_available),y&256&&(v.chart_compare_type=h[8]),y&64&&(v.i_button=h[6][h[10][h[15]]].i_button),y&64&&(v.heading=h[6][h[10][h[15]]].title),y&64&&(v.compare_content=h[6][h[10][h[15]]].compare_content),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function jm(l){let p,d;return p=new Ou({props:{id:l[6][l[10][l[15]]].id,style:l[6][l[10][l[15]]].style,place:l[3],year:l[6][l[10][l[15]]].year,content:l[6][l[10][l[15]]].content,chart_data:l[6][l[10][l[15]]].chart_data,zKey:l[6][l[10][l[15]]].zKey,label:l[6][l[10][l[15]]].label,topic_prev_available:l[6][l[10][l[15]]].topic_prev_available,chart_compare_type:l[8],i_button:l[6][l[10][l[15]]].i_button,compare_content:l[6][l[10][l[15]]].compare_content}}),{c(){hi(p.$$.fragment)},l(h){fi(p.$$.fragment,h)},m(h,y){di(p,h,y),d=!0},p(h,y){const v={};y&64&&(v.id=h[6][h[10][h[15]]].id),y&64&&(v.style=h[6][h[10][h[15]]].style),y&8&&(v.place=h[3]),y&64&&(v.year=h[6][h[10][h[15]]].year),y&64&&(v.content=h[6][h[10][h[15]]].content),y&64&&(v.chart_data=h[6][h[10][h[15]]].chart_data),y&64&&(v.zKey=h[6][h[10][h[15]]].zKey),y&64&&(v.label=h[6][h[10][h[15]]].label),y&64&&(v.topic_prev_available=h[6][h[10][h[15]]].topic_prev_available),y&256&&(v.chart_compare_type=h[8]),y&64&&(v.i_button=h[6][h[10][h[15]]].i_button),y&64&&(v.compare_content=h[6][h[10][h[15]]].compare_content),p.$set(v)},i(h){d||(ot(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){mi(p,h)}}}function qm(l){let p=l[6][l[10][l[15]]].hasOwnProperty("show"),d,h=!l[6][l[10][l[15]]].hasOwnProperty("show"),y,v,a=p&&Um(l),k=h&&jm(l);return{c(){a&&a.c(),d=wt(),k&&k.c(),y=oi()},l(I){a&&a.l(I),d=St(I),k&&k.l(I),y=oi()},m(I,B){a&&a.m(I,B),De(I,d,B),k&&k.m(I,B),De(I,y,B),v=!0},p(I,B){B&64&&(p=I[6][I[10][I[15]]].hasOwnProperty("show")),p?a?(a.p(I,B),B&64&&ot(a,1)):(a=Um(I),a.c(),ot(a,1),a.m(d.parentNode,d)):a&&(Bn(),_t(a,1,1,()=>{a=null}),Fn()),B&64&&(h=!I[6][I[10][I[15]]].hasOwnProperty("show")),h?k?(k.p(I,B),B&64&&ot(k,1)):(k=jm(I),k.c(),ot(k,1),k.m(y.parentNode,y)):k&&(Bn(),_t(k,1,1,()=>{k=null}),Fn())},i(I){v||(ot(a),ot(k),v=!0)},o(I){_t(a),_t(k),v=!1},d(I){I&&(se(d),se(y)),a&&a.d(I),k&&k.d(I)}}}function Gm(l){let p,d="More Statistics",h,y,v;return{c(){p=Oe("h3"),p.textContent=d,h=wt(),y=Oe("div"),v=new po(!1),this.h()},l(a){p=Ne(a,"H3",{"data-svelte-h":!0}),Ua(p)!=="svelte-151lbd2"&&(p.textContent=d),h=St(a),y=Ne(a,"DIV",{class:!0});var k=Ze(y);v=ho(k,!1),k.forEach(se),this.h()},h(){v.a=null,ne(y,"class","accordion-more svelte-9ol09s")},m(a,k){De(a,p,k),De(a,h,k),De(a,y,k),v.m(l[7],y)},p(a,k){k&128&&v.p(a[7])},d(a){a&&(se(p),se(h),se(y))}}}function B1(l){let p,d,h,y,v,a,k,I,B,C,F,D,X,te,oe=l[3].name+"",he,ve,xe=l[3].type.toLocaleUpperCase()+"",tt,Ge,qe,He,ni,Ot,Ue,Xe,xt,ii,Ve,lt,Me,st=xi({length:l[10].length}),ft=[];for(let kt=0;kt<st.length;kt+=1)ft[kt]=qm(Nm(l,st,kt));const Ut=kt=>_t(ft[kt],1,1,()=>{ft[kt]=null});let Mt=l[7]!=""&&Gm(l);return{c(){p=Oe("div"),d=Oe("h2"),h=Oe("button"),y=Oe("span"),v=Oe("img"),k=wt(),I=Vt(l[2]),D=wt(),X=Oe("div"),te=Oe("div"),he=Vt(oe),ve=wt(),tt=Vt(xe),Ge=Vt(". "),qe=new po(!1),He=wt(),ni=Oe("span"),Ot=Vt(l[5]),Ue=wt(),Xe=Oe("div");for(let kt=0;kt<ft.length;kt+=1)ft[kt].c();ii=wt(),Mt&&Mt.c(),this.h()},l(kt){p=Ne(kt,"DIV",{class:!0});var Pe=Ze(p);d=Ne(Pe,"H2",{class:!0,id:!0});var rt=Ze(d);h=Ne(rt,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var zi=Ze(h);y=Ne(zi,"SPAN",{class:!0});var xr=Ze(y);v=Ne(xr,"IMG",{src:!0,alt:!0,height:!0,class:!0}),k=St(xr),I=jt(xr,l[2]),xr.forEach(se),zi.forEach(se),rt.forEach(se),D=St(Pe),X=Ne(Pe,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var qi=Ze(X);te=Ne(qi,"DIV",{class:!0});var Fi=Ze(te);he=jt(Fi,oe),ve=St(Fi),tt=jt(Fi,xe),Ge=jt(Fi,". "),qe=ho(Fi,!1),He=St(Fi),ni=Ne(Fi,"SPAN",{class:!0});var li=Ze(ni);Ot=jt(li,l[5]),li.forEach(se),Ue=St(Fi),Xe=Ne(Fi,"DIV",{class:!0});var ur=Ze(Xe);for(let qt=0;qt<ft.length;qt+=1)ft[qt].l(ur);ur.forEach(se),ii=St(Fi),Mt&&Mt.l(Fi),Fi.forEach(se),qi.forEach(se),Pe.forEach(se),this.h()},h(){Sp(v.src,a=er+"/img/"+l[1])||ne(v,"src",a),ne(v,"alt","logo"),ne(v,"height","40"),ne(v,"class","accordion-dept-logo"),ne(y,"class","accordion-button-title svelte-9ol09s"),ne(h,"class","accordion-button collapsed svelte-9ol09s"),ne(h,"type","button"),ne(h,"data-bs-toggle","collapse"),ne(h,"data-bs-target",B="#panelsStayOpen-collapse"+l[0]),ne(h,"aria-expanded","false"),ne(h,"aria-controls",C="panelsStayOpen-collapse"+l[0]),ne(d,"class","accordion-header svelte-9ol09s"),ne(d,"id",F="panelsStayOpen-heading"+l[0]),qe.a=He,ne(ni,"class","accordion-button-title-sub svelte-9ol09s"),ne(Xe,"class","grid mt svelte-9ol09s"),Ku(()=>l[11].call(Xe)),ne(te,"class","accordion-body svelte-9ol09s"),ne(X,"id",Ve="panelsStayOpen-collapse"+l[0]),ne(X,"class","accordion-collapse collapse svelte-9ol09s"),ne(X,"aria-labelledby",lt="panelsStayOpen-heading"+l[0]),ne(p,"class","accordion-item svelte-9ol09s")},m(kt,Pe){De(kt,p,Pe),Ae(p,d),Ae(d,h),Ae(h,y),Ae(y,v),Ae(y,k),Ae(y,I),Ae(p,D),Ae(p,X),Ae(X,te),Ae(te,he),Ae(te,ve),Ae(te,tt),Ae(te,Ge),qe.m(l[4],te),Ae(te,He),Ae(te,ni),Ae(ni,Ot),Ae(te,Ue),Ae(te,Xe);for(let rt=0;rt<ft.length;rt+=1)ft[rt]&&ft[rt].m(Xe,null);xt=Hu(Xe,l[11].bind(Xe)),Ae(te,ii),Mt&&Mt.m(te,null),Me=!0},p(kt,[Pe]){if((!Me||Pe&2&&!Sp(v.src,a=er+"/img/"+kt[1]))&&ne(v,"src",a),(!Me||Pe&4)&&ki(I,kt[2]),(!Me||Pe&1&&B!==(B="#panelsStayOpen-collapse"+kt[0]))&&ne(h,"data-bs-target",B),(!Me||Pe&1&&C!==(C="panelsStayOpen-collapse"+kt[0]))&&ne(h,"aria-controls",C),(!Me||Pe&1&&F!==(F="panelsStayOpen-heading"+kt[0]))&&ne(d,"id",F),(!Me||Pe&8)&&oe!==(oe=kt[3].name+"")&&ki(he,oe),(!Me||Pe&8)&&xe!==(xe=kt[3].type.toLocaleUpperCase()+"")&&ki(tt,xe),(!Me||Pe&16)&&qe.p(kt[4]),(!Me||Pe&32)&&ki(Ot,kt[5]),Pe&1352){st=xi({length:kt[10].length});let rt;for(rt=0;rt<st.length;rt+=1){const zi=Nm(kt,st,rt);ft[rt]?(ft[rt].p(zi,Pe),ot(ft[rt],1)):(ft[rt]=qm(zi),ft[rt].c(),ot(ft[rt],1),ft[rt].m(Xe,null))}for(Bn(),rt=st.length;rt<ft.length;rt+=1)Ut(rt);Fn()}kt[7]!=""?Mt?Mt.p(kt,Pe):(Mt=Gm(kt),Mt.c(),Mt.m(te,null)):Mt&&(Mt.d(1),Mt=null),(!Me||Pe&1&&Ve!==(Ve="panelsStayOpen-collapse"+kt[0]))&&ne(X,"id",Ve),(!Me||Pe&1&&lt!==(lt="panelsStayOpen-heading"+kt[0]))&&ne(X,"aria-labelledby",lt)},i(kt){if(!Me){for(let Pe=0;Pe<st.length;Pe+=1)ot(ft[Pe]);Me=!0}},o(kt){ft=ft.filter(Boolean);for(let Pe=0;Pe<ft.length;Pe+=1)_t(ft[Pe]);Me=!1},d(kt){kt&&se(p),un(ft,kt),xt(),Mt&&Mt.d()}}}function F1(l,p,d){let{id:h}=p,{img:y}=p,{heading:v}=p,{place:a}=p,{sub_heading:k}=p,{description:I}=p,{boxes:B}=p,{more:C}=p,{chart_compare_type:F}=p,D=Object.keys(B),X;function te(){X=this.clientWidth,d(9,X)}return l.$$set=oe=>{"id"in oe&&d(0,h=oe.id),"img"in oe&&d(1,y=oe.img),"heading"in oe&&d(2,v=oe.heading),"place"in oe&&d(3,a=oe.place),"sub_heading"in oe&&d(4,k=oe.sub_heading),"description"in oe&&d(5,I=oe.description),"boxes"in oe&&d(6,B=oe.boxes),"more"in oe&&d(7,C=oe.more),"chart_compare_type"in oe&&d(8,F=oe.chart_compare_type)},[h,y,v,a,k,I,B,C,F,X,D,te]}class Bs extends pn{constructor(p){super(),hn(this,p,F1,B1,cn,{id:0,img:1,heading:2,place:3,sub_heading:4,description:5,boxes:6,more:7,chart_compare_type:8})}}function Zm(l){let p,d,h,y,v,a,k,I,B,C=l[2].substr(0,2).toUpperCase()=="BT"&l[9](l[2]),F=C&&Km(l);return{c(){p=Oe("div"),d=Oe("div"),h=Oe("img"),v=Vt("You searched for "),a=Oe("strong"),k=Vt(l[2]),I=Vt("."),B=wt(),F&&F.c(),this.h()},l(D){p=Ne(D,"DIV",{id:!0,class:!0});var X=Ze(p);d=Ne(X,"DIV",{});var te=Ze(d);h=Ne(te,"IMG",{src:!0,alt:!0,class:!0}),v=jt(te,"You searched for "),a=Ne(te,"STRONG",{});var oe=Ze(a);k=jt(oe,l[2]),oe.forEach(se),I=jt(te,"."),te.forEach(se),B=St(X),F&&F.l(X),X.forEach(se),this.h()},h(){Sp(h.src,y=g_+"/img/search.svg")||ne(h,"src",y),ne(h,"alt","search-symbol"),ne(h,"class","svelte-19iexfz"),ne(p,"id","search-result"),ne(p,"class","svelte-19iexfz")},m(D,X){De(D,p,X),Ae(p,d),Ae(d,h),Ae(d,v),Ae(d,a),Ae(a,k),Ae(d,I),Ae(p,B),F&&F.m(p,null)},p(D,X){X&4&&ki(k,D[2]),X&4&&(C=D[2].substr(0,2).toUpperCase()=="BT"&D[9](D[2])),C?F?F.p(D,X):(F=Km(D),F.c(),F.m(p,null)):F&&(F.d(1),F=null)},d(D){D&&se(p),F&&F.d()}}}function Km(l){let p,d,h,y=l[0].name+"",v,a,k,I,B,C,F,D,X,te,oe,he,ve,xe,tt;return{c(){p=Oe("div"),d=Vt("This postcode is located within the "),h=Oe("strong"),v=Vt(y),a=Vt(" District Electoral Area."),k=wt(),I=Oe("div"),B=Vt("You can view more localised information for this postcode at Super Data Zone level by selecting "),C=Oe("strong"),F=Oe("a"),D=Vt(l[3]),te=Vt(" or at Data Zone level by selecting "),oe=Oe("strong"),he=Oe("a"),ve=Vt(l[5]),tt=Vt(". Note that many of the statistics produced are not broken down to these smaller geography levels."),this.h()},l(Ge){p=Ne(Ge,"DIV",{style:!0});var qe=Ze(p);d=jt(qe,"This postcode is located within the "),h=Ne(qe,"STRONG",{});var He=Ze(h);v=jt(He,y),He.forEach(se),a=jt(qe," District Electoral Area."),qe.forEach(se),k=St(Ge),I=Ne(Ge,"DIV",{style:!0});var ni=Ze(I);B=jt(ni,"You can view more localised information for this postcode at Super Data Zone level by selecting "),C=Ne(ni,"STRONG",{});var Ot=Ze(C);F=Ne(Ot,"A",{href:!0});var Ue=Ze(F);D=jt(Ue,l[3]),Ue.forEach(se),Ot.forEach(se),te=jt(ni," or at Data Zone level by selecting "),oe=Ne(ni,"STRONG",{});var Xe=Ze(oe);he=Ne(Xe,"A",{href:!0});var xt=Ze(he);ve=jt(xt,l[5]),xt.forEach(se),Xe.forEach(se),tt=jt(ni,". Note that many of the statistics produced are not broken down to these smaller geography levels."),ni.forEach(se),this.h()},h(){Qe(p,"margin-left","1em"),ne(F,"href",X=er+"/"+l[4]),ne(he,"href",xe=er+"/"+l[6]),Qe(I,"margin-left","1em")},m(Ge,qe){De(Ge,p,qe),Ae(p,d),Ae(p,h),Ae(h,v),Ae(p,a),De(Ge,k,qe),De(Ge,I,qe),Ae(I,B),Ae(I,C),Ae(C,F),Ae(F,D),Ae(I,te),Ae(I,oe),Ae(oe,he),Ae(he,ve),Ae(I,tt)},p(Ge,qe){qe&1&&y!==(y=Ge[0].name+"")&&ki(v,y),qe&8&&ki(D,Ge[3]),qe&16&&X!==(X=er+"/"+Ge[4])&&ne(F,"href",X),qe&32&&ki(ve,Ge[5]),qe&64&&xe!==(xe=er+"/"+Ge[6])&&ne(he,"href",xe)},d(Ge){Ge&&(se(p),se(k),se(I))}}}function O1(l){let p=l[7]()&l[1].search_code==l[0].code&l[8](),d,h=p&&Zm(l);return{c(){h&&h.c(),d=oi()},l(y){h&&h.l(y),d=oi()},m(y,v){h&&h.m(y,v),De(y,d,v)},p(y,[v]){v&3&&(p=y[7]()&y[1].search_code==y[0].code&y[8]()),p?h?h.p(y,v):(h=Zm(y),h.c(),h.m(d.parentNode,d)):h&&(h.d(1),h=null)},i:tr,o:tr,d(y){y&&se(d),h&&h.d(y)}}}function N1(l,p,d){let{place:h}=p,{storage:y=localStorage}=p,v;function a(){return y.hasOwnProperty("search_name")}function k(){return d(2,v=y.search_name),y.removeItem("search_name"),!0}let I,B,C,F;Bh(()=>{setInterval(function(){a()&y.search_code==h.code&&(d(2,v=y.search_name),k())},500)});function D(X){let te=X.replaceAll(" ","");return fetch("https://raw.githubusercontent.com/NISRA-Tech-Lab/local-stats-dev/main/search_data/CPD_LIGHT_JULY_2024.csv").then(oe=>oe.text()).then(oe=>{const he=oe.split(`
`);let ve;for(let xe=0;xe<he.length;xe++){let tt=he[xe].split(",");if(tt[0]==te){ve=tt;break}}d(3,I=ve[21]),d(4,B=ve[20]),d(5,C=ve[19]),d(6,F=ve[18])}),!0}return l.$$set=X=>{"place"in X&&d(0,h=X.place),"storage"in X&&d(1,y=X.storage)},[h,y,v,I,B,C,F,a,k,D]}class U1 extends pn{constructor(p){super(),hn(this,p,N1,O1,cn,{place:0,storage:1})}}function Hm(l,p,d){const h=l.slice();return h[30]=p[d],h[32]=d,h}function Wm(l,p,d){const h=l.slice();return h[33]=p[d],h[32]=d,h}function Xm(l,p,d){const h=l.slice();return h[35]=p[d],h}function Ym(l,p,d){const h=l.slice();return h[33]=p[d],h[32]=d,h}function Jm(l){let p,d,h,y,v="Home",a,k=" &gt; ",I,B,C,F,D=l[0].place.name+"",X,te,oe,he,ve,xe="Search for your area:",tt,Ge,qe,He,ni=`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input"),\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]',\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`,Ot,Ue,Xe=`<button class="btn svelte-pk8ijs" style="width: 33%" alt="Opens the About page" onclick="window.location.href=&#39;${er}/about&#39;;">About</button> <button class="btn svelte-pk8ijs" style="width: 33%" title="Click to print this page to pdf or printer" onclick="window.print();return false;">Print / PDF</button> <button class="btn svelte-pk8ijs" style="width: 30%" type="share" alt="Share this page">Share</button>`,xt,ii,Ve,lt,Me,st,ft,Ut,Mt,kt,Pe,rt,zi,xr,qi,Fi,li,ur,qt,fn,dn,mn,Zt,Ci,Gi,cr,Wr,Ur,Tr,pr,hr,gn,Zi,fr,dr,wr,Vr,an,Xi=l[0].place.type!="ni"&&Qm(l);Ge=new l_({props:{search_data:l[0].search_data,group:"typestr",search:!0}}),Ge.$on("select",l[11]),ii=new U1({props:{place:l[0].place}}),Me=new Ou({props:{id:"overview",i_button:!1,heading:"About "+l[0].place.name,place:l[0].place,style:"line-height: 1.3;",content:{ni:"Northern Ireland has 11 Local Government Districts (LGDs),  which can be subdivided into District Electoral Areas (DEAs), then further into Super Data Zones and Data Zones. Statistics can be viewed for these smaller areas.",lgd:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+Pn[l[0].place.type].pl+".  It includes the larger settlements of "+l[0].place.lgd_location_description+".",dea:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+Pn[l[0].place.type].pl+" in Northern Ireland.  It is within <a href = '"+er+"/"+l[0].place.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+l[0].place.parents[0].name+" </a> and covers "+l[0].place.dea_location_description+".",sdz:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+Pn[l[0].place.type].pl+". Super Data Zones are new statistical areas developed for census. They are broadly similar in population size and housing type.",dz:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+Pn[l[0].place.type].pl+".  Data Zones are smaller divisions of Super Data Zones. There are on average 4 in each Super Data Zone."},chart_compare_type:l[6]}}),ft=new Ou({props:{id:"pop",place:l[0].place,year:"Population estimates "+Je("MYETotal",l[0].place),content:'<span class="text-big" style="font-size: 2.8em;">'+l[0].place.data.MYETotal.value.toLocaleString()+"</span>",chart_compare_type:l[6],compare_content:{ni:"",lgd:'<span class = "em" style = "background-color: lightgrey">'+yp(l[0].place.data.population.value[2021].all/l[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population<br>The "+l[12](l[0].place.data.population.value_rank[2021].all)+" population of 11 Local Government Districts",dea:'<span class = "em" style = "background-color: lightgrey">'+yp(l[0].place.data.population.value[2021].all/l[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population",sdz:"Data not available for area comparison",dz:" Data not available for area comparison"}}}),Mt=new Ou({props:{id:"popden",place:l[0].place,year:"Population estimates "+Je("MYETotal",l[0].place),content:'<div class = "row" style = "display: flex; align-items: center"><div style="font-weight: bold; font-size: 2.8em;">'+ng(l[0].place)+'</div><div style = "margin-left: 10px; line-height: 1.25em;"> people per square kilometer</div></div>',chart_compare_type:l[6],compare_content:{ni:"",lgd:l[18](l[0].place),dea:l[18](l[0].place),sdz:l[18](l[0].place),dz:l[18](l[0].place)}}});function Yn(q,pt){return q[0].place.type!="ni"?j1:V1}let wn=Yn(l),Ar=wn(l);function Jn(q){l[20](q)}let Qn={location:{bounds:l[0].place.bounds},options:{fitBoundsOptions:{padding:20}},style:u_,$$slots:{default:[G1]},$$scope:{ctx:l}};l[3]!==void 0&&(Qn.map=l[3]),Fi=new Q_({props:Qn}),Ns.push(()=>m_(Fi,"map",Jn));let Oi=l[0].place.type!="ni"&&tg(l);function $n(q,pt){return q[0].place.children[0]?K1:Z1}let Cn=$n(l),Pr=Cn(l);return Gi=new Bs({props:{id:"people",img:"nisra-taxonomy-icon-census.png",heading:"People and communities",place:l[0].place,sub_heading:l[17]("People and communities",l[0].place),description:"",chart_compare_type:l[6],boxes:{box_1:{id:"popchange",year:"Population Estimates "+Je("BroadAge",l[0].place),content:l[13](l[0].place),show:["ni","lgd"]},box_1a:{id:"popchange",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Population change</span>"},box_2:{id:"broadage",year:"Population Estimates "+Je("BroadAge",l[0].place),content:"GroupChart",chart_data:l[9]("BroadAge"),show:["ni","lgd","dea","sdz"]},box_2a:{id:"age",year:l[16]("age"),content:"GroupChart",chart_data:l[9]("age"),show:["dz"]},box_4:{id:"hhsize",year:l[16]("hh_size"),content:"GroupChart",chart_data:l[9]("hh_size")},box_5:{id:"religion",year:l[16]("religion_or_religion_brought_up_in"),content:"GroupChart",chart_data:l[9]("religion_or_religion_brought_up_in")},box_7:{id:"language",year:l[16]("mainlang"),content:"StackedBarChart",chart_data:l[0].place&&l[8](["mainlang"],["2011"],["2021"]),zKey:l[6],label:l[7],topic_prev_available:!0}},more:`More information on the size of the population is available in the latest <a href='https://www.nisra.gov.uk/publications/2022-mid-year-population-estimates-northern-ireland'>mid-year estimates release</a>, \r
					which includes an <a href='https://www.nisra.gov.uk/system/files/statistics/MYE22-summary.pdf'>infographic</a>, \r
					<a href='https://www.nisra.gov.uk/system/files/statistics/MYE22-Factsheets.pdf'>Fact Sheets</a>, \r
					a <a href='https://www.nisra.gov.uk/system/files/statistics/Statistical%20Bulletin%20-%202022%20Mid-year%20Population%20Estimates%20for%20Northern%20Ireland.pdf'>publication</a> \r
					and statistical tables. Population characteristics are from the census data which can be explored further in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/N92000002/'>Census Area Explorer</a>, \r
					bespoke tables can be created using the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a> and the NISRA website has \r
					<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'>statistical bulletins</a> providing commentary on a range of census population characteristics.`}}),Wr=new Bs({props:{id:"health",img:"nisra-taxonomy-icon-health.png",heading:"Health and social care",place:l[0].place,sub_heading:l[17]("Health and social care",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_0:{id:"generalhealth",year:l[16]("general_health"),content:"GroupChart",chart_data:l[9]("general_health")},box_2a:{id:"wellbeing",year:Je("wellbeing",l[0].place),content:"<p>Happiness</p><span class='text-big'>"+l[14]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy. </span><p>Life Satisfaction</p><span class='text-big'>"+l[14]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><p>Loneliness</p><span class='text-big'>"+l[14]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'>  of people who feel lonely at least some of the time. </span>",show:["ni"]},box_2b:{id:"wellbeing",year:Je("wellbeing",l[0].place),content:"<p>Happiness</p><span class='text-big'>"+l[14]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy.</span><span style='color: #1460aa'> (NI "+l[0].ni.data.Happy.value+"/10) </span></p><p>Life Satisfaction</p><span class='text-big'>"+l[14]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><span style='color: #1460aa'> (NI "+l[0].ni.data.Satisfy.value+"/10) </span></p><p>Loneliness</p><span class='text-big'>"+l[14]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'> of people who feel lonely at least some of the time. </span> <span style='color: #1460aa'> (NI "+l[0].ni.data.Lonely.value+"%) </span></p>",show:["lgd"]},box_2c:{id:"wellbeing",content:"Data on happiness, life satisfaction and loneliness is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Personal wellbeing</span>"},box_3a:{id:"lifeexpectancy",year:Je("LE",l[0].place),content:"<p>Male</p> <span class='text-big'>"+l[14]("LE.value.Males").toLocaleString()+"</span> years<p>Female</p> <span class='text-big'>"+l[14]("LE.value.Females").toLocaleString()+"</span> years",show:["ni"]},box_3b:{id:"lifeexpectancy",year:Je("LE",l[0].place),content:"<p>Male</p> <span class='text-big'>"+l[14]("LE.value.Males").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+l[0].ni.data.LE.value.Males+") </span></p><p>Female</p> <span class='text-big'>"+l[14]("LE.value.Females").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+l[0].ni.data.LE.value.Females+") </span></p>",show:["lgd","dea"]},box_3c:{id:"lifeexpectancy",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Life expectancy at birth</span>"},box_4:{id:"carers",content:"GroupChart",year:l[16]("provision_care"),chart_data:l[9]("provision_care")},box_5:{id:"hospitalactivity",year:Je("Admiss",l[0].place),content:"<p><span class='text-big'>"+l[14]("Admiss.value").toLocaleString()+"</span> hospital admissions</p><p>The most frequent primary reason was for <span class='text-bold' >"+l[14]("Admiss.text")+"</span>.</p>",show:["ni","dea"]},box_5a:{id:"hospitalactivity",content:"Data is available for NI and District Electoral Areas",show:["lgd","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Annual admissions to hospital</span>"},box_6:{id:"primarycare",year:Je("GP",l[0].place),content:"<p><span class='text-big'>"+l[14]("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+l[14]("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p><span class='text-big'>"+l[14]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.  </span> <span class='text-big'>"+(l[14]("DEN_REG.value.Dental_Registrations")/l[14]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist.</p>",show:["ni"]},box_6a:{id:"primarycare",year:Je("GP",l[0].place),content:"<p><span class='text-big'>"+l[14]("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+l[14]("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p>"+l[15]("GP.value.PRACLIST").toLocaleString()+"<span style='color: #1460aa'> (NI "+l[0].ni.data.GP.value.PRACLIST.toLocaleString()+" patients per practice) </span></p><p><span class='text-big'>"+l[14]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(l[14]("DEN_REG.value.Dental_Registrations")/l[14]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist. <span style='color: #1460aa'> (NI "+(l[0].ni.data.DEN_REG.value.Dental_Registrations/l[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["lgd"]},box_6b:{id:"primarycare",year:Je("DEN",l[0].place),content:"<p><span class='text-big'>"+l[14]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(l[14]("DEN_REG.value.Dental_Registrations")/l[14]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist. <span style='color: #1460aa'> (NI "+(l[0].ni.data.DEN_REG.value.Dental_Registrations/l[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["dea"]},box_6c:{id:"primarycare",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Primary care providers</span>"}},more:`<p>Significant volumes of information are prepared by the <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research'>Department of Health</a> \r
				and the <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/'>\r
				Business Services Organisation</a>, including statistics on <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health inequalities</a>, \r
				Primary care (including <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/1776-2/'>Medical</a>, \r
				<a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-dental-services-statistics/'>Dental</a>, \r
				<a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-pharmaceutical-services-and-prescribing-statistics/'>\r
				Pharmaceutical</a> and <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-ophthalmic-services-statistics/'>\r
				Ophthalmic</a>), <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/family-health-services-statistics'>\r
				Family health services</a>, <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research/hospital-waiting-times-statistics'>\r
				Hospital waiting times statistics</a>, <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research-mental-health-and-learning-disabilities/mental-health-learning-disability-and-autism-statistics'>\r
				Mental health, learning disability and autism</a>, <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research-social-services/social-care-statistics'>\r
				Social care</a>, <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/workforce-statistics'>Workforce</a>, and COVID-19.\r
				DoH also have information on 				<a href = 'https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health Inequalities</a>\r
				and <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research/doh-commissioned-surveys'> Commissioned Surveys</a> which includes the Health Survey Northern Ireland.\r
\r
				A number of <a href='https://visual.nisra.gov.uk/?body=entity/health'>interactive dashboards</a> are available and a compendium dashboard for <a href='https://visual.nisra.gov.uk/?body=entity/las'>\r
				Making Life Better</a>.\r
				\r
				The <a href='https://www.nisra.gov.uk/statistics/census'>2021 census</a> collected data on general health, long-term conditions and carers which can \r
				be explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/N92000002/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p><p></p>`}}),Tr=new Bs({props:{id:"work",img:"nisra-taxonomy-icon-labour-market.png",heading:"Work, pay and benefits",place:l[0].place,sub_heading:l[17]("Work, pay and benefits",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"employmentrates",year:Je("LMS",l[0].place),content:"GroupChart",chart_data:l[9]("LMS"),show:["ni","lgd"]},box_1b:{id:"employmentrates",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work status of adults</span>"},box_2a:{id:"employed",year:Je("LMS",l[0].place),content:"<p>People employed</p> <span class='text-big'>"+l[14]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">'+l[14]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> ",show:["ni"]},box_2b:{id:"employed",year:Je("LMS",l[0].place),content:"<p>People employed</p> <span class='text-big'>"+l[14]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">'+l[14]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> <span style='color: #1460aa'> (NI "+l[0].ni.data.ASHE_weekly.value.toLocaleString(void 0,{maximumFractionDigits:0})+") </span></p>",show:["lgd"]},box_2c:{id:"employed",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work and wages</span>"},box_3b:{id:"bres",year:Je("BRES",l[0].place),content:"GroupChart",chart_data:l[9]("BRES"),show:["ni","lgd"]},box_3c:{id:"bres",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of work</span>"},box_4:{id:"ucbenefits",year:Je("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.UC.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.UC/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_5:{id:"pipbenefits",year:Je("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.PIP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.PIP/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_6:{id:"pensionagebenefits",year:Je("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.RP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.RP/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}}},more:`<p>The monthly <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/labour-market-overview'>Labour Market Report</a>\r
				contains the most up to date labour market statistics. The <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/annual-survey-hours-and-earnings'>\r
				Annual Survey of Hours and Earnings</a> provides data on hourly, weekly and annual earnings. The <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/quarterly-employment-survey'>\r
				Quarterly Employment Survey</a> provides short-term employee jobs estimates for NI. Further information is available for the \r
				unemployed <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/claimant-count'>Claimant Count</a>, \r
				claimant numbers for <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/disability-benefits'>Disability Benefits</a>, \r
				and <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/work-related-benefits'>Work Related Benefits</a>. \r
				Statistics on <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/redundancies'>Redundancies</a> \r
				and <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/job-vacancies'>Job Vacancies</a> are also available. \r
				A number of <a href='https://visual.nisra.gov.uk/?body=entity/lm'>interactive dashboards</a> are available. \r
				The <a href='https://www.nisra.gov.uk/statistics/census'>2021 census</a> collected data on occupations, industry and number of hours worked which can be \r
				explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/N92000002/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>`}}),hr=new Bs({props:{id:"education",img:"nisra-taxonomy-icon-child-education-skills.png",heading:"Education and skills",place:l[0].place,sub_heading:l[17]("Schools, colleges and universities",l[0].place),description:"",chart_compare_type:l[6],boxes:{box_1:{id:"enrollments",content:"<p style='margin:0'>Primary school <span class='text-big'>"+l[14]("Primary.value.All").toLocaleString()+"</span> <p style='margin:0'>Post primary school <span class='text-big'>"+l[14]("PostPrimary.value.All").toLocaleString()+" </span><p style='margin:0'>NI Further education colleges <span class='text-big'>"+l[14]("FE.value").toLocaleString()+"</span><p style='margin:0'>UK Higher education institutions <span class='text-big'>"+l[14]("HE.value").toLocaleString()+" </span>",year:"School:"+Je("Primary",l[0].place)+", FE:"+Je("FE",l[0].place)+", HE:"+Je("HE",l[0].place),show:["ni","lgd","dea"]},box_1b:{id:"enrollments",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>People in education</span>"},box_2a:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(l[14]("Primary.perc.FSME")).toFixed(1)+"% </span><p style='margin:0'>Post primary school <span class='text-big'>"+Number(l[14]("PostPrimary.perc.FSME")).toFixed(1)+"% </span>",year:Je("Primary",l[0].place),show:["ni"]},box_2b:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(l[14]("Primary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+l[0].ni.data.Primary.perc.FSME.toFixed(1)+"%) </span></p><p style='margin:0'>Post primary school <span class='text-big'>"+Number(l[14]("PostPrimary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+l[0].ni.data.PostPrimary.perc.FSME.toFixed(1)+"%) </span></p>",year:Je("Primary",l[0].place),show:["lgd","dea"]},box_2c:{id:"fsme",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Pupils entitled to free school meals</span>"},box_3a:{id:"SEN",year:Je("SEN",l[0].place),content:"<p> <span class='text-big'>"+l[14]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(l[14]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils",show:["ni"]},box_3b:{id:"SEN",year:Je("SEN",l[0].place),content:"<p> <span class='text-big'>"+l[14]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(l[14]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils<span style='color: #1460aa'> (NI "+l[0].ni.data.AllSchools.perc.SEN.toFixed(1)+"%) </span></p>",show:["lgd","dea"]},box_3c:{id:"SEN",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Special educational needs (SEN)</span>"},box_4:{id:"qualifications",content:"GroupChart",year:l[16]("highest_level_of_qualifications"),chart_data:l[9]("highest_level_of_qualifications")},box_5a:{id:"attainment",year:Je("Attainment",l[0].place),content:"<span class='text-big'>"+l[14]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C.</p><span class = 'text-small'>Includes GCSE English and Maths</span> <br> <span class='text-big'>",show:["ni"]},box_5b:{id:"attainment",year:Je("Attainment",l[0].place),content:"<span class='text-big'>"+l[14]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C.</p><span class = 'text-small'>Includes GCSE English and Maths</span> <br> "+l[15]("Attainment.value").toLocaleString()+"<span style='color: #1460aa'>(NI "+l[0].ni.data.Attainment.value.toLocaleString(void 0,{minimumFractionDigits:1})+"%) </span>",show:["lgd"]},box_5c:{id:"attainment",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>GCSEs for school leavers</span>"},box_6:{id:"destination",year:Je("Destination",l[0].place),content:"GroupChart",chart_data:l[9]("Destination"),show:["ni","lgd","dea"]},box_6b:{id:"destination",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Next steps for school leavers</span>"}},more:"<p>The <a href='https://www.nisra.gov.uk/statistics/children-education-and-skills/school-education-statistics'>Department of Education</a> publishes statistics on <a href='https://www.education-ni.gov.uk/articles/school-enrolments-overview'>school enrolments</a>, <a href='https://www.education-ni.gov.uk/articles/school-performance'>school performance</a>, <a href='https://www.education-ni.gov.uk/articles/school-leavers'>school leavers</a>, qualifications and destinations, <a href='https://www.education-ni.gov.uk/articles/pupil-attendance'>pupil attendance</a>, suspensions and expulsions, school meals and <a href='https://www.education-ni.gov.uk/articles/education-workforce'>education workforce</a>. The <a href='https://www.nisra.gov.uk/statistics/children-education-and-skills/higher-and-further-education-and-training-statistics'>Department for the Economy</a> publishes <a href='https://www.economy-ni.gov.uk/topics/statistics-and-economic-research/higher-education-statistics-and-research'>Higher</a> and <a href='https://www.economy-ni.gov.uk/topics/statistics-and-economic-research/further-education-statistics-and-research'>Further</a> education and <a href='https://www.economy-ni.gov.uk/articles/training-success-statistics'>training</a> statistics. The <a href='https://www.nisra.gov.uk/statistics/census'>2021 census</a> collected data on qualifications which can be explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/N92000002/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>"}}),Zi=new Bs({props:{id:"environment",img:"nisra-taxonomy-icon-summary-stats.png",heading:"Environment",place:l[0].place,sub_heading:l[17]("Environment",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"concern",year:Je("Env_concern",l[0].place),content:"GroupChart",chart_data:l[9]("Env_concern"),show:["ni","lgd"]},box_1b:{id:"concern",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Concern about the environment</span>"},box_2:{id:"env_problem",year:Je("Env_problem",l[0].place),content:"<p>The most important environment problems in Northern Ireland were: <span class='text-bold' 'text-big'>"+l[14]("env_problem.text")+"</span>.</p>",show:["ni"]},box_2b:{id:"env_problem",year:Je("Env_problem",l[0].place),content:"<p>The most important environment problems in this area were: </p><p><span class='text-bold' >"+l[14]("env_problem.text")+"</span>.</p><p><span style='color: #1460aa'>(NI: "+l[0].ni.data.env_problem.text+")</span>.</p>",show:["lgd"]},box_2c:{id:"env_problem",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Environmental problems</span>"},box_3:{id:"ghg",year:Je("Env_ghg",l[0].place),content:"<p><span class='text-big'>"+l[14]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((l[14]("Env_ghg.value.GHGALL")/l[14]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%</span> reduction since 2005.</p>",show:["ni"]},box_3a:{id:"ghg",year:Je("Env_ghg",l[0].place),content:"<p><span class='text-big'>"+l[14]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((l[14]("Env_ghg.value.GHGALL")/l[14]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%</span> reduction since 2005.</p><span style='color: #1460aa'>(NI "+((l[0].ni.data.Env_ghg.value.GHGALL/l[0].ni.data.Env_ghg.value.GHGALL_BASE-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%) </span>",show:["lgd"]},box_3c:{id:"ghg",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Greenhouse gas</span>"},box_4:{id:"active",year:Je("Env_active",l[0].place),content:"<span class='text-big'>"+l[14]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0})+"%</span><p>  journeys made by walking, cycling and public transport.</p>",show:["ni"]},box_4a:{id:"active",year:Je("Env_active",l[0].place),content:"<span class='text-big'>"+l[14]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0})+"%</span><p>journeys made by walking, cycling and public transport.<span style='color: #1460aa'> (NI "+l[0].ni.data.Env_active.value.JWCPT+"%) </span></p>",show:["lgd"]},box_4b:{id:"active",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Active travel</span>"},box_5:{id:"waste",year:Je("Env_waste",l[0].place),content:"GroupChart",chart_data:l[9]("Env_waste"),show:["ni","lgd"]},box_5a:{id:"waste",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Household waste</span>"},box_6:{id:"renewable",year:l[16]("renewable_energy"),content:"StackedBarChart",chart_data:l[0].place&&l[8](["renewable_energy"],["2011"],["2021"]),zKey:l[6],label:l[7],topic_prev_available:!0}},more:`<p>The <a href='https://www.daera-ni.gov.uk/landing-pages/statistics'>Department of Agriculture, Environment and Rural Affairs (DAERA)</a>\r
				publishes statistics on the Environment from a range of sources, including \r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-greenhouse-gas-inventory'>greenhouse gas inventory</a>,\r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-local-authority-collected-municipal-waste-management-statistics'>\r
				local authority collected municipal waste management statistics</a>, \r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-environmental-statistics-report'>environmental statistics report</a>, \r
				<a href='https://www.daera-ni.gov.uk/topics/water/bathing-water-quality'>bathing water quality</a> and <a href = 'https://www.daera-ni.gov.uk/articles/air-pollution-northern-ireland'>air pollution</a>.  \r
\r
\r
	\r
\r
				The <a href='https://www.nisra.gov.uk/statistics/census'>2021 census</a> \r
				collected data on renewable energy systems which can be\r
				explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/N92000002/'>Census Area Explorer</a> \r
				and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>\r
				\r
				\r
			\r
				`}}),dr=new Bs({props:{id:"crime",img:"nisra-taxonomy-icon-crime-justice.png",heading:"Crime and justice",place:l[0].place,sub_heading:l[17]("Crime and Court Activity",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"crime",year:Je("crime",l[0].place),content:"<p><span class='text-big'>"+l[14]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(l[14]("crime.value.allcrime")/l[14]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+" </span> crimes recorded per 1,000 population.</p>",show:["ni"]},box_1a:{id:"crime",year:Je("crime",l[0].place),content:"<p><span class='text-big'>"+l[14]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(l[14]("crime.value.allcrime")/l[14]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+" </span> crimes recorded per 1,000 population.<span style='color: #1460aa'> (NI "+(l[0].ni.data.crime.value.allcrime/l[0].ni.data.MYETotal.value*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+")</span></p>",show:["lgd","dea"]},box_1b:{id:"crime",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Police recorded crimes</span>"},box_2:{id:"crimetype",year:Je("crime",l[0].place),content:"GroupChart",chart_data:l[9]("crime"),show:["ni","lgd","dea"]},box_2a:{id:"crimetype",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Types of crime</span>"},box_3:{id:"crimeworry",year:Je("crimeworry",l[0].place),content:"<p> <span class='text-big' >"+l[14]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> of people are highly worried about crime.</p>",show:["ni"]},box_3a:{id:"crimeworry",year:Je("crimeworry",l[0].place),content:"<p> <span class='text-big' >"+l[14]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> of people are highly worried about crime.<span style='color: #1460aa'> (NI "+l[0].ni.data.crimeworry.value.WorryC2.toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_3b:{id:"crimeworry",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Worry about crime</span>"},box_4:{id:"crimeperception",year:Je("crimeperception",l[0].place),content:"<p> <span class='text-big' >"+l[14]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.</p>",show:["ni"]},box_4a:{id:"crimeperception",year:Je("crimeperception",l[0].place),content:"<p> <span class='text-big' >"+l[14]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.<span style='color: #1460aa'> (NI "+l[0].ni.data.crimeperception.value.ASB8.toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_4b:{id:"crimeperception",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Views on crime</span>"}},more:`<p>Police Service of Northern Ireland (PSNI) crime statistics are published by \r
		NISRA statisticians within the\r
		<a href='https://www.psni.police.uk/inside-psni/Statistics/'>Police Service of Northern Ireland</a>.\r
		 Statistical information is available on \r
		 <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/police-recorded-crime-statistics'>Police Recorded Crime Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/anti-social-behaviour-statistics'>Anti-Social Behaviour Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/domestic-abuse-statistics'>Domestic Abuse Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/hate-motivation-statistics'>Hate Motivation Statistics</a>, <a href='https://www.psni.police.uk/official-statistics/drug-seizure-statistics'>Drug Seizure Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/road-traffic-collision-statistics'>Road Traffic Collision Statistics</a>, <a href='https://www.psni.police.uk/official-statistics/security-situation-statistics'>Security Situation Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/stop-and-search-statistics'>Stop and Search Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/statistics-police-use-force'>Statistics on Police Use of Force</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/motoring-offence-statistics'>Motoring Offence Statistics</a> and <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/police-and-criminal-evidence-pace-order'>Police and Criminal Evidence (PACE) Order Statistics</a>.</p>\r
<p>Statistics on the police complaints system are published by\r
<a href='https://www.policeombudsman.org/Statistics-and-Research'>\r
Police Ombudsmans Office for Northern Ireland</a>.</p>\r
<p><a href='https://www.justice-ni.gov.uk/topics/doj-statistics-and-research'>Department of Justice statistics</a> include reoffending, victims and witnesses, prosecutions and convictions.; Statistics are also available from the <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/ni-prison-service-statistics'>Northern Ireland Prison Service</a>, <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/ni-courts-and-tribunals-service-statistics'>Northern Ireland Courts and Tribunals Service</a>, <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/youth-justice-statistics'>Youth Justice Agency statistics and </a>, <a href='https://www.justice-ni.gov.uk/topics/legal-aid/legal-services-agency-northern-ireland'>Legal Services Agency</a> and <a href='https://www.ppsni.gov.uk/statistics-and-research'>Public Prosecutions Service for Northern Ireland (PPSNI)</a>.</p>\r
<p><a href='https://www.pbni.org.uk/statistics-and-research'>Probation Board for Northern Ireland (PBNI)</a> publish statistical information on their Caseload, Stakeholder Survey Reports, and other statistical reports.</p>\r
\r
`}}),Vr=new Bs({props:{id:"business",img:"nisra-taxonomy-icon-business-energy.png",heading:"Business, economy and trade",place:l[0].place,sub_heading:l[17]("Business sectors",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"no_bus",year:Je("business",l[0].place),content:"<span class='text-big'>"+l[14]("business.value.BCOUNTS").toLocaleString()+" </span> businesses, with a total of <span class='text-big'>"+l[14]("niets_sales.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>million in sales and <span class='text-big'>"+l[14]("niets_purch.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>million in purchases.",show:["ni","lgd"]},box_1a:{id:"no_bus",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Business and trade</span>"},box_2:{id:"niets_sales",year:Je("niets_sales",l[0].place),content:"GroupChart",chart_data:l[9]("niets_sales"),show:["ni","lgd"]},box_2a:{id:"niets_sales",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Sales partners</span>"},box_3:{id:"niets_purch",year:Je("niets_purch",l[0].place),content:"GroupChart",chart_data:l[9]("niets_purch"),show:["ni","lgd"]},box_3a:{id:"niets_purch",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Purchases partners</span>"},box_4:{id:"type_bus",year:Je("business",l[0].place),content:"GroupChart",chart_data:l[9]("businesstype"),show:["ni","lgd"]},box_4a:{id:"type_bus",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of businesses</span>"},box_5:{id:"size_bus",year:Je("businessband",l[0].place),content:"GroupChart",chart_data:l[9]("businessband"),show:["ni","lgd"]},box_5a:{id:"size_bus",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Employees in businesses</span>"},box_6:{id:"sector",year:"Agriculture "+Je("farms",l[0].place)+", Tourism "+Je("tourism",l[0].place),content:"<p><strong>Agriculture</strong></p><span class='text-big'>"+l[14]("farms.value.F").toLocaleString()+" </span> farms with <span class='text-big'>"+l[14]("farms.value.FA").toLocaleString()+" </span> farmers.<p><strong>Tourism</strong></p><span class='text-big'>"+l[14]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs and <span class='text-big'>"+l[14]("tourism_estab.value.estab").toLocaleString()+" </span> accomodation establishments.",show:["ni","lgd"]},box_6a:{id:"sector",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Business sectors</span>"}},more:`<strong>Business statistics</strong>\r
		<p>Further statistics are available on number, type and size of businesses, collected through the\r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/annual-business-inquiry'>Annual Business Inquiry</a>,\r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/research-and-development'>Research and Development</a>\r
		Survey and the <a href='https://www.nisra.gov.uk/statistics/business-statistics/inter-departmental-business-register'>Inter Departmental Business Register</a>.</p>\r
		<p>Statistics for specific business sectors include: the <a href='https://www.daera-ni.gov.uk/publications/size-and-performance-ni-food-and-drinks-processing-sector'>\r
		Food and Drinks Processing Sector</a> \r
		and the \r
		<a href='https://www.daera-ni.gov.uk/articles/agricultural-statistics'>Agriculture sector</a> \r
		both produced by DAERA; \r
		<a href='https://www.infrastructure-ni.gov.uk/articles/northern-ireland-transport-statistics'>Northern Ireland travel and transport statistics</a> produced by the Department for Infrastructure, and \r
		<a href='https://www.nisra.gov.uk/statistics/tourism/annual-and-quarterly-tourism-statistics-publications'>Tourism sector</a>\r
		published by \r
		<a href='https://www.nisra.gov.uk/statistics/economy/nisra-economic-and-labour-market-statistics-elms'>Economic and Labour Market Statistics (ELMS)</a>. Interactive dashboards are available for \r
		<a href='https://datavis.nisra.gov.uk/tourism/alternative_sources.html'>Tourism statistics</a> and \r
		<a href='https://datavis.nisra.gov.uk/daera/food-drink-processing-sector.html'>Food and Drink Processing Sector Statistics</a>.</p>\r
		<p><strong>Economy and trade statistics</strong></p>\r
		<p>Other economy and trade statistics are published by \r
		<a href='https://www.nisra.gov.uk/statistics/economy/nisra-economic-and-labour-market-statistics-elms'>Economic and Labour Market Statistics (ELMS)</a> NISRA, including \r
		<a href='https://www.nisra.gov.uk/statistics/economy/economic-output-statistics'>Economic Output Statistics</a> (which includes the Index of Services, Index of Production and;Construction Output Statistics), \r
		<a href='https://www.nisra.gov.uk/statistics/economy/economic-accounts-project'>Economic Accounts</a> (including Supply-Use Tables and Input-Output tables), \r
		<a href='https://www.nisra.gov.uk/statistics/economy/eu-exit-analysis'>research and analysis on EU Exit</a>, and \r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/broad-economy-sales-and-exports-statistics'>Economic Trade Statistics</a> (NIETS) (formerly known as Broad Economy Sales and Exports Statistics). Interactive dashboards are available for the \r
		<a href='https://datavis.nisra.gov.uk/economy-and-labour-market/economic-output-quarterly.html'>quarterly economic outputs</a> and NI \r
		<a href='https://visual.nisra.gov.uk/?body=entity/niets'>Economic Trade</a> statistics.</p>`}}),{c(){p=Oe("div"),d=Oe("div"),h=Oe("span"),y=Oe("a"),y.textContent=v,a=new po(!1),I=wt(),Xi&&Xi.c(),B=wt(),C=Oe("br"),F=Oe("span"),X=Vt(D),te=wt(),oe=Oe("div"),he=Oe("div"),ve=Oe("b"),ve.textContent=xe,tt=wt(),hi(Ge.$$.fragment),qe=wt(),He=Oe("script"),He.textContent=ni,Ot=wt(),Ue=Oe("div"),Ue.innerHTML=Xe,xt=wt(),hi(ii.$$.fragment),Ve=wt(),lt=Oe("div"),hi(Me.$$.fragment),st=wt(),hi(ft.$$.fragment),Ut=wt(),hi(Mt.$$.fragment),kt=wt(),Pe=Oe("div"),rt=Oe("div"),zi=Oe("h3"),Ar.c(),xr=wt(),qi=Oe("div"),hi(Fi.$$.fragment),ur=wt(),qt=Oe("div"),Oi&&Oi.c(),fn=wt(),dn=Oe("div"),Pr.c(),Zt=wt(),Ci=Oe("div"),hi(Gi.$$.fragment),cr=wt(),hi(Wr.$$.fragment),Ur=wt(),hi(Tr.$$.fragment),pr=wt(),hi(hr.$$.fragment),gn=wt(),hi(Zi.$$.fragment),fr=wt(),hi(dr.$$.fragment),wr=wt(),hi(Vr.$$.fragment),this.h()},l(q){p=Ne(q,"DIV",{class:!0});var pt=Ze(p);d=Ne(pt,"DIV",{class:!0});var mr=Ze(d);h=Ne(mr,"SPAN",{class:!0});var gr=Ze(h);y=Ne(gr,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0,"data-svelte-h":!0}),Ua(y)!=="svelte-7bn769"&&(y.textContent=v),a=ho(gr,!1),I=St(gr),Xi&&Xi.l(gr),gr.forEach(se),B=St(mr),C=Ne(mr,"BR",{class:!0}),F=Ne(mr,"SPAN",{class:!0,style:!0});var jr=Ze(F);X=jt(jr,D),jr.forEach(se),mr.forEach(se),te=St(pt),oe=Ne(pt,"DIV",{class:!0});var Sr=Ze(oe);he=Ne(Sr,"DIV",{style:!0,class:!0});var $t=Ze(he);ve=Ne($t,"B",{class:!0,"data-svelte-h":!0}),Ua(ve)!=="svelte-1qrfbgv"&&(ve.textContent=xe),tt=St($t),fi(Ge.$$.fragment,$t),qe=St($t),He=Ne($t,"SCRIPT",{class:!0,"data-svelte-h":!0}),Ua(He)!=="svelte-cb3i93"&&(He.textContent=ni),Ot=St($t),Ue=Ne($t,"DIV",{width:!0,class:!0,"data-svelte-h":!0}),Ua(Ue)!=="svelte-4t6luz"&&(Ue.innerHTML=Xe),$t.forEach(se),Sr.forEach(se),pt.forEach(se),xt=St(q),fi(ii.$$.fragment,q),Ve=St(q),lt=Ne(q,"DIV",{id:!0,class:!0});var L=Ze(lt);fi(Me.$$.fragment,L),st=St(L),fi(ft.$$.fragment,L),Ut=St(L),fi(Mt.$$.fragment,L),L.forEach(se),kt=St(q),Pe=Ne(q,"DIV",{class:!0});var N=Ze(Pe);rt=Ne(N,"DIV",{style:!0,class:!0});var j=Ze(rt);zi=Ne(j,"H3",{class:!0});var H=Ze(zi);Ar.l(H),H.forEach(se),j.forEach(se),xr=St(N),qi=Ne(N,"DIV",{id:!0,style:!0,class:!0});var Y=Ze(qi);fi(Fi.$$.fragment,Y),Y.forEach(se),ur=St(N),qt=Ne(N,"DIV",{class:!0});var ue=Ze(qt);Oi&&Oi.l(ue),ue.forEach(se),fn=St(N),dn=Ne(N,"DIV",{class:!0});var fe=Ze(dn);Pr.l(fe),fe.forEach(se),N.forEach(se),Zt=St(q),Ci=Ne(q,"DIV",{class:!0,id:!0});var V=Ze(Ci);fi(Gi.$$.fragment,V),cr=St(V),fi(Wr.$$.fragment,V),Ur=St(V),fi(Tr.$$.fragment,V),pr=St(V),fi(hr.$$.fragment,V),gn=St(V),fi(Zi.$$.fragment,V),fr=St(V),fi(dr.$$.fragment,V),wr=St(V),fi(Vr.$$.fragment,V),V.forEach(se),this.h()},h(){ne(y,"href",er+"/"),ne(y,"data-sveltekit-noscroll",""),ne(y,"data-sveltekit-keepfocus",""),ne(y,"class","svelte-pk8ijs"),a.a=I,ne(h,"class","text-small svelte-pk8ijs"),ne(C,"class","svelte-pk8ijs"),ne(F,"class","text-big title svelte-pk8ijs"),Qe(F,"font-size","2.5em"),Qe(F,"line-height","1em"),ne(d,"class","svelte-pk8ijs"),ne(ve,"class","svelte-pk8ijs"),ne(He,"class","svelte-pk8ijs"),ne(Ue,"width","100%"),ne(Ue,"class","svelte-pk8ijs"),Qe(he,"width","350px"),Qe(he,"padding-top","5px"),ne(he,"class","svelte-pk8ijs"),as(he,"float-right",l[2]>1),ne(oe,"class","svelte-pk8ijs"),ne(p,"class","grid mtl svelte-pk8ijs"),ne(lt,"id","grid"),ne(lt,"class","grid mt svelte-pk8ijs"),ne(zi,"class","svelte-pk8ijs"),Qe(rt,"grid-column","span "+l[2]),ne(rt,"class","svelte-pk8ijs"),ne(qi,"id","map"),Qe(qi,"padding-right","45px"),Qe(qi,"grid-column","span "+(l[2]==2?2:l[2]&&l[2]>2?l[2]-1:1)),ne(qi,"class","svelte-pk8ijs"),ne(qt,"class","svelte-pk8ijs"),ne(dn,"class","svelte-pk8ijs"),ne(Pe,"class","grid mt svelte-pk8ijs"),Ku(()=>l[21].call(Pe)),ne(Ci,"class","accordion svelte-pk8ijs"),ne(Ci,"id","accordionPanelsStayOpenExample")},m(q,pt){De(q,p,pt),Ae(p,d),Ae(d,h),Ae(h,y),a.m(k,h),Ae(h,I),Xi&&Xi.m(h,null),Ae(d,B),Ae(d,C),Ae(d,F),Ae(F,X),Ae(p,te),Ae(p,oe),Ae(oe,he),Ae(he,ve),Ae(he,tt),di(Ge,he,null),Ae(he,qe),Ae(he,He),Ae(he,Ot),Ae(he,Ue),De(q,xt,pt),di(ii,q,pt),De(q,Ve,pt),De(q,lt,pt),di(Me,lt,null),Ae(lt,st),di(ft,lt,null),Ae(lt,Ut),di(Mt,lt,null),De(q,kt,pt),De(q,Pe,pt),Ae(Pe,rt),Ae(rt,zi),Ar.m(zi,null),Ae(Pe,xr),Ae(Pe,qi),di(Fi,qi,null),Ae(Pe,ur),Ae(Pe,qt),Oi&&Oi.m(qt,null),Ae(Pe,fn),Ae(Pe,dn),Pr.m(dn,null),mn=Hu(Pe,l[21].bind(Pe)),De(q,Zt,pt),De(q,Ci,pt),di(Gi,Ci,null),Ae(Ci,cr),di(Wr,Ci,null),Ae(Ci,Ur),di(Tr,Ci,null),Ae(Ci,pr),di(hr,Ci,null),Ae(Ci,gn),di(Zi,Ci,null),Ae(Ci,fr),di(dr,Ci,null),Ae(Ci,wr),di(Vr,Ci,null),an=!0},p(q,pt){q[0].place.type!="ni"?Xi?Xi.p(q,pt):(Xi=Qm(q),Xi.c(),Xi.m(h,null)):Xi&&(Xi.d(1),Xi=null),(!an||pt[0]&1)&&D!==(D=q[0].place.name+"")&&ki(X,D);const mr={};pt[0]&1&&(mr.search_data=q[0].search_data),Ge.$set(mr),(!an||pt[0]&4)&&as(he,"float-right",q[2]>1);const gr={};pt[0]&1&&(gr.place=q[0].place),ii.$set(gr);const jr={};pt[0]&1&&(jr.heading="About "+q[0].place.name),pt[0]&1&&(jr.place=q[0].place),pt[0]&1&&(jr.content={ni:"Northern Ireland has 11 Local Government Districts (LGDs),  which can be subdivided into District Electoral Areas (DEAs), then further into Super Data Zones and Data Zones. Statistics can be viewed for these smaller areas.",lgd:q[0].place.name+" is one of "+q[0].place.count.toLocaleString()+" "+Pn[q[0].place.type].pl+".  It includes the larger settlements of "+q[0].place.lgd_location_description+".",dea:q[0].place.name+" is one of "+q[0].place.count.toLocaleString()+" "+Pn[q[0].place.type].pl+" in Northern Ireland.  It is within <a href = '"+er+"/"+q[0].place.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+q[0].place.parents[0].name+" </a> and covers "+q[0].place.dea_location_description+".",sdz:q[0].place.name+" is one of "+q[0].place.count.toLocaleString()+" "+Pn[q[0].place.type].pl+". Super Data Zones are new statistical areas developed for census. They are broadly similar in population size and housing type.",dz:q[0].place.name+" is one of "+q[0].place.count.toLocaleString()+" "+Pn[q[0].place.type].pl+".  Data Zones are smaller divisions of Super Data Zones. There are on average 4 in each Super Data Zone."}),pt[0]&64&&(jr.chart_compare_type=q[6]),Me.$set(jr);const Sr={};pt[0]&1&&(Sr.place=q[0].place),pt[0]&1&&(Sr.year="Population estimates "+Je("MYETotal",q[0].place)),pt[0]&1&&(Sr.content='<span class="text-big" style="font-size: 2.8em;">'+q[0].place.data.MYETotal.value.toLocaleString()+"</span>"),pt[0]&64&&(Sr.chart_compare_type=q[6]),pt[0]&1&&(Sr.compare_content={ni:"",lgd:'<span class = "em" style = "background-color: lightgrey">'+yp(q[0].place.data.population.value[2021].all/q[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population<br>The "+q[12](q[0].place.data.population.value_rank[2021].all)+" population of 11 Local Government Districts",dea:'<span class = "em" style = "background-color: lightgrey">'+yp(q[0].place.data.population.value[2021].all/q[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population",sdz:"Data not available for area comparison",dz:" Data not available for area comparison"}),ft.$set(Sr);const $t={};pt[0]&1&&($t.place=q[0].place),pt[0]&1&&($t.year="Population estimates "+Je("MYETotal",q[0].place)),pt[0]&1&&($t.content='<div class = "row" style = "display: flex; align-items: center"><div style="font-weight: bold; font-size: 2.8em;">'+ng(q[0].place)+'</div><div style = "margin-left: 10px; line-height: 1.25em;"> people per square kilometer</div></div>'),pt[0]&64&&($t.chart_compare_type=q[6]),pt[0]&1&&($t.compare_content={ni:"",lgd:q[18](q[0].place),dea:q[18](q[0].place),sdz:q[18](q[0].place),dz:q[18](q[0].place)}),Mt.$set($t),wn===(wn=Yn(q))&&Ar?Ar.p(q,pt):(Ar.d(1),Ar=wn(q),Ar&&(Ar.c(),Ar.m(zi,null))),(!an||pt[0]&4)&&Qe(rt,"grid-column","span "+q[2]);const L={};pt[0]&1&&(L.location={bounds:q[0].place.bounds}),pt[0]&48|pt[1]&256&&(L.$$scope={dirty:pt,ctx:q}),!li&&pt[0]&8&&(li=!0,L.map=q[3],d_(()=>li=!1)),Fi.$set(L),(!an||pt[0]&4)&&Qe(qi,"grid-column","span "+(q[2]==2?2:q[2]&&q[2]>2?q[2]-1:1)),q[0].place.type!="ni"?Oi?Oi.p(q,pt):(Oi=tg(q),Oi.c(),Oi.m(qt,null)):Oi&&(Oi.d(1),Oi=null),Cn===(Cn=$n(q))&&Pr?Pr.p(q,pt):(Pr.d(1),Pr=Cn(q),Pr&&(Pr.c(),Pr.m(dn,null)));const N={};pt[0]&1&&(N.place=q[0].place),pt[0]&1&&(N.sub_heading=q[17]("People and communities",q[0].place)),pt[0]&64&&(N.chart_compare_type=q[6]),pt[0]&193&&(N.boxes={box_1:{id:"popchange",year:"Population Estimates "+Je("BroadAge",q[0].place),content:q[13](q[0].place),show:["ni","lgd"]},box_1a:{id:"popchange",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Population change</span>"},box_2:{id:"broadage",year:"Population Estimates "+Je("BroadAge",q[0].place),content:"GroupChart",chart_data:q[9]("BroadAge"),show:["ni","lgd","dea","sdz"]},box_2a:{id:"age",year:q[16]("age"),content:"GroupChart",chart_data:q[9]("age"),show:["dz"]},box_4:{id:"hhsize",year:q[16]("hh_size"),content:"GroupChart",chart_data:q[9]("hh_size")},box_5:{id:"religion",year:q[16]("religion_or_religion_brought_up_in"),content:"GroupChart",chart_data:q[9]("religion_or_religion_brought_up_in")},box_7:{id:"language",year:q[16]("mainlang"),content:"StackedBarChart",chart_data:q[0].place&&q[8](["mainlang"],["2011"],["2021"]),zKey:q[6],label:q[7],topic_prev_available:!0}}),Gi.$set(N);const j={};pt[0]&1&&(j.place=q[0].place),pt[0]&1&&(j.sub_heading=q[17]("Health and social care",q[0].place)),pt[0]&64&&(j.chart_compare_type=q[6]),pt[0]&1&&(j.boxes={box_0:{id:"generalhealth",year:q[16]("general_health"),content:"GroupChart",chart_data:q[9]("general_health")},box_2a:{id:"wellbeing",year:Je("wellbeing",q[0].place),content:"<p>Happiness</p><span class='text-big'>"+q[14]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy. </span><p>Life Satisfaction</p><span class='text-big'>"+q[14]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><p>Loneliness</p><span class='text-big'>"+q[14]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'>  of people who feel lonely at least some of the time. </span>",show:["ni"]},box_2b:{id:"wellbeing",year:Je("wellbeing",q[0].place),content:"<p>Happiness</p><span class='text-big'>"+q[14]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy.</span><span style='color: #1460aa'> (NI "+q[0].ni.data.Happy.value+"/10) </span></p><p>Life Satisfaction</p><span class='text-big'>"+q[14]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><span style='color: #1460aa'> (NI "+q[0].ni.data.Satisfy.value+"/10) </span></p><p>Loneliness</p><span class='text-big'>"+q[14]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'> of people who feel lonely at least some of the time. </span> <span style='color: #1460aa'> (NI "+q[0].ni.data.Lonely.value+"%) </span></p>",show:["lgd"]},box_2c:{id:"wellbeing",content:"Data on happiness, life satisfaction and loneliness is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Personal wellbeing</span>"},box_3a:{id:"lifeexpectancy",year:Je("LE",q[0].place),content:"<p>Male</p> <span class='text-big'>"+q[14]("LE.value.Males").toLocaleString()+"</span> years<p>Female</p> <span class='text-big'>"+q[14]("LE.value.Females").toLocaleString()+"</span> years",show:["ni"]},box_3b:{id:"lifeexpectancy",year:Je("LE",q[0].place),content:"<p>Male</p> <span class='text-big'>"+q[14]("LE.value.Males").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+q[0].ni.data.LE.value.Males+") </span></p><p>Female</p> <span class='text-big'>"+q[14]("LE.value.Females").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+q[0].ni.data.LE.value.Females+") </span></p>",show:["lgd","dea"]},box_3c:{id:"lifeexpectancy",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Life expectancy at birth</span>"},box_4:{id:"carers",content:"GroupChart",year:q[16]("provision_care"),chart_data:q[9]("provision_care")},box_5:{id:"hospitalactivity",year:Je("Admiss",q[0].place),content:"<p><span class='text-big'>"+q[14]("Admiss.value").toLocaleString()+"</span> hospital admissions</p><p>The most frequent primary reason was for <span class='text-bold' >"+q[14]("Admiss.text")+"</span>.</p>",show:["ni","dea"]},box_5a:{id:"hospitalactivity",content:"Data is available for NI and District Electoral Areas",show:["lgd","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Annual admissions to hospital</span>"},box_6:{id:"primarycare",year:Je("GP",q[0].place),content:"<p><span class='text-big'>"+q[14]("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+q[14]("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p><span class='text-big'>"+q[14]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.  </span> <span class='text-big'>"+(q[14]("DEN_REG.value.Dental_Registrations")/q[14]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist.</p>",show:["ni"]},box_6a:{id:"primarycare",year:Je("GP",q[0].place),content:"<p><span class='text-big'>"+q[14]("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+q[14]("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p>"+q[15]("GP.value.PRACLIST").toLocaleString()+"<span style='color: #1460aa'> (NI "+q[0].ni.data.GP.value.PRACLIST.toLocaleString()+" patients per practice) </span></p><p><span class='text-big'>"+q[14]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(q[14]("DEN_REG.value.Dental_Registrations")/q[14]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist. <span style='color: #1460aa'> (NI "+(q[0].ni.data.DEN_REG.value.Dental_Registrations/q[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["lgd"]},box_6b:{id:"primarycare",year:Je("DEN",q[0].place),content:"<p><span class='text-big'>"+q[14]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(q[14]("DEN_REG.value.Dental_Registrations")/q[14]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%</span> of the population are registered with a dentist. <span style='color: #1460aa'> (NI "+(q[0].ni.data.DEN_REG.value.Dental_Registrations/q[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["dea"]},box_6c:{id:"primarycare",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Primary care providers</span>"}}),Wr.$set(j);const H={};pt[0]&1&&(H.place=q[0].place),pt[0]&1&&(H.sub_heading=q[17]("Work, pay and benefits",q[0].place)),pt[0]&64&&(H.chart_compare_type=q[6]),pt[0]&1&&(H.boxes={box_1:{id:"employmentrates",year:Je("LMS",q[0].place),content:"GroupChart",chart_data:q[9]("LMS"),show:["ni","lgd"]},box_1b:{id:"employmentrates",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work status of adults</span>"},box_2a:{id:"employed",year:Je("LMS",q[0].place),content:"<p>People employed</p> <span class='text-big'>"+q[14]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">'+q[14]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> ",show:["ni"]},box_2b:{id:"employed",year:Je("LMS",q[0].place),content:"<p>People employed</p> <span class='text-big'>"+q[14]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">'+q[14]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> <span style='color: #1460aa'> (NI "+q[0].ni.data.ASHE_weekly.value.toLocaleString(void 0,{maximumFractionDigits:0})+") </span></p>",show:["lgd"]},box_2c:{id:"employed",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work and wages</span>"},box_3b:{id:"bres",year:Je("BRES",q[0].place),content:"GroupChart",chart_data:q[9]("BRES"),show:["ni","lgd"]},box_3c:{id:"bres",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of work</span>"},box_4:{id:"ucbenefits",year:Je("BS",q[0].place),content:'<span class="text-big">'+q[0].place.data.BS.value.UC.toLocaleString()+'</span> claimants<br><span class="text-big">'+(q[0].place.data.BS.value.UC/q[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.UC/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.UC/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.UC/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.UC/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_5:{id:"pipbenefits",year:Je("BS",q[0].place),content:'<span class="text-big">'+q[0].place.data.BS.value.PIP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(q[0].place.data.BS.value.PIP/q[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.PIP/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.PIP/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.PIP/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.PIP/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_6:{id:"pensionagebenefits",year:Je("BS",q[0].place),content:'<span class="text-big">'+q[0].place.data.BS.value.RP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(q[0].place.data.BS.value.RP/q[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.RP/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.RP/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.RP/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(q[0].ni.data.BS.value.RP/q[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}}}),Tr.$set(H);const Y={};pt[0]&1&&(Y.place=q[0].place),pt[0]&1&&(Y.sub_heading=q[17]("Schools, colleges and universities",q[0].place)),pt[0]&64&&(Y.chart_compare_type=q[6]),pt[0]&1&&(Y.boxes={box_1:{id:"enrollments",content:"<p style='margin:0'>Primary school <span class='text-big'>"+q[14]("Primary.value.All").toLocaleString()+"</span> <p style='margin:0'>Post primary school <span class='text-big'>"+q[14]("PostPrimary.value.All").toLocaleString()+" </span><p style='margin:0'>NI Further education colleges <span class='text-big'>"+q[14]("FE.value").toLocaleString()+"</span><p style='margin:0'>UK Higher education institutions <span class='text-big'>"+q[14]("HE.value").toLocaleString()+" </span>",year:"School:"+Je("Primary",q[0].place)+", FE:"+Je("FE",q[0].place)+", HE:"+Je("HE",q[0].place),show:["ni","lgd","dea"]},box_1b:{id:"enrollments",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>People in education</span>"},box_2a:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(q[14]("Primary.perc.FSME")).toFixed(1)+"% </span><p style='margin:0'>Post primary school <span class='text-big'>"+Number(q[14]("PostPrimary.perc.FSME")).toFixed(1)+"% </span>",year:Je("Primary",q[0].place),show:["ni"]},box_2b:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(q[14]("Primary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+q[0].ni.data.Primary.perc.FSME.toFixed(1)+"%) </span></p><p style='margin:0'>Post primary school <span class='text-big'>"+Number(q[14]("PostPrimary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+q[0].ni.data.PostPrimary.perc.FSME.toFixed(1)+"%) </span></p>",year:Je("Primary",q[0].place),show:["lgd","dea"]},box_2c:{id:"fsme",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Pupils entitled to free school meals</span>"},box_3a:{id:"SEN",year:Je("SEN",q[0].place),content:"<p> <span class='text-big'>"+q[14]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(q[14]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils",show:["ni"]},box_3b:{id:"SEN",year:Je("SEN",q[0].place),content:"<p> <span class='text-big'>"+q[14]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(q[14]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils<span style='color: #1460aa'> (NI "+q[0].ni.data.AllSchools.perc.SEN.toFixed(1)+"%) </span></p>",show:["lgd","dea"]},box_3c:{id:"SEN",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Special educational needs (SEN)</span>"},box_4:{id:"qualifications",content:"GroupChart",year:q[16]("highest_level_of_qualifications"),chart_data:q[9]("highest_level_of_qualifications")},box_5a:{id:"attainment",year:Je("Attainment",q[0].place),content:"<span class='text-big'>"+q[14]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C.</p><span class = 'text-small'>Includes GCSE English and Maths</span> <br> <span class='text-big'>",show:["ni"]},box_5b:{id:"attainment",year:Je("Attainment",q[0].place),content:"<span class='text-big'>"+q[14]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C.</p><span class = 'text-small'>Includes GCSE English and Maths</span> <br> "+q[15]("Attainment.value").toLocaleString()+"<span style='color: #1460aa'>(NI "+q[0].ni.data.Attainment.value.toLocaleString(void 0,{minimumFractionDigits:1})+"%) </span>",show:["lgd"]},box_5c:{id:"attainment",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>GCSEs for school leavers</span>"},box_6:{id:"destination",year:Je("Destination",q[0].place),content:"GroupChart",chart_data:q[9]("Destination"),show:["ni","lgd","dea"]},box_6b:{id:"destination",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Next steps for school leavers</span>"}}),hr.$set(Y);const ue={};pt[0]&1&&(ue.place=q[0].place),pt[0]&1&&(ue.sub_heading=q[17]("Environment",q[0].place)),pt[0]&64&&(ue.chart_compare_type=q[6]),pt[0]&193&&(ue.boxes={box_1:{id:"concern",year:Je("Env_concern",q[0].place),content:"GroupChart",chart_data:q[9]("Env_concern"),show:["ni","lgd"]},box_1b:{id:"concern",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Concern about the environment</span>"},box_2:{id:"env_problem",year:Je("Env_problem",q[0].place),content:"<p>The most important environment problems in Northern Ireland were: <span class='text-bold' 'text-big'>"+q[14]("env_problem.text")+"</span>.</p>",show:["ni"]},box_2b:{id:"env_problem",year:Je("Env_problem",q[0].place),content:"<p>The most important environment problems in this area were: </p><p><span class='text-bold' >"+q[14]("env_problem.text")+"</span>.</p><p><span style='color: #1460aa'>(NI: "+q[0].ni.data.env_problem.text+")</span>.</p>",show:["lgd"]},box_2c:{id:"env_problem",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Environmental problems</span>"},box_3:{id:"ghg",year:Je("Env_ghg",q[0].place),content:"<p><span class='text-big'>"+q[14]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((q[14]("Env_ghg.value.GHGALL")/q[14]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%</span> reduction since 2005.</p>",show:["ni"]},box_3a:{id:"ghg",year:Je("Env_ghg",q[0].place),content:"<p><span class='text-big'>"+q[14]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((q[14]("Env_ghg.value.GHGALL")/q[14]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%</span> reduction since 2005.</p><span style='color: #1460aa'>(NI "+((q[0].ni.data.Env_ghg.value.GHGALL/q[0].ni.data.Env_ghg.value.GHGALL_BASE-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0})+"%) </span>",show:["lgd"]},box_3c:{id:"ghg",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Greenhouse gas</span>"},box_4:{id:"active",year:Je("Env_active",q[0].place),content:"<span class='text-big'>"+q[14]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0})+"%</span><p>  journeys made by walking, cycling and public transport.</p>",show:["ni"]},box_4a:{id:"active",year:Je("Env_active",q[0].place),content:"<span class='text-big'>"+q[14]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0})+"%</span><p>journeys made by walking, cycling and public transport.<span style='color: #1460aa'> (NI "+q[0].ni.data.Env_active.value.JWCPT+"%) </span></p>",show:["lgd"]},box_4b:{id:"active",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Active travel</span>"},box_5:{id:"waste",year:Je("Env_waste",q[0].place),content:"GroupChart",chart_data:q[9]("Env_waste"),show:["ni","lgd"]},box_5a:{id:"waste",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Household waste</span>"},box_6:{id:"renewable",year:q[16]("renewable_energy"),content:"StackedBarChart",chart_data:q[0].place&&q[8](["renewable_energy"],["2011"],["2021"]),zKey:q[6],label:q[7],topic_prev_available:!0}}),Zi.$set(ue);const fe={};pt[0]&1&&(fe.place=q[0].place),pt[0]&1&&(fe.sub_heading=q[17]("Crime and Court Activity",q[0].place)),pt[0]&64&&(fe.chart_compare_type=q[6]),pt[0]&1&&(fe.boxes={box_1:{id:"crime",year:Je("crime",q[0].place),content:"<p><span class='text-big'>"+q[14]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(q[14]("crime.value.allcrime")/q[14]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+" </span> crimes recorded per 1,000 population.</p>",show:["ni"]},box_1a:{id:"crime",year:Je("crime",q[0].place),content:"<p><span class='text-big'>"+q[14]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(q[14]("crime.value.allcrime")/q[14]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+" </span> crimes recorded per 1,000 population.<span style='color: #1460aa'> (NI "+(q[0].ni.data.crime.value.allcrime/q[0].ni.data.MYETotal.value*1e3).toLocaleString(void 0,{maximumFractionDigits:0})+")</span></p>",show:["lgd","dea"]},box_1b:{id:"crime",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Police recorded crimes</span>"},box_2:{id:"crimetype",year:Je("crime",q[0].place),content:"GroupChart",chart_data:q[9]("crime"),show:["ni","lgd","dea"]},box_2a:{id:"crimetype",content:"Data is available for NI, Local Government Districts and District Electoral Areas",show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Types of crime</span>"},box_3:{id:"crimeworry",year:Je("crimeworry",q[0].place),content:"<p> <span class='text-big' >"+q[14]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> of people are highly worried about crime.</p>",show:["ni"]},box_3a:{id:"crimeworry",year:Je("crimeworry",q[0].place),content:"<p> <span class='text-big' >"+q[14]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> of people are highly worried about crime.<span style='color: #1460aa'> (NI "+q[0].ni.data.crimeworry.value.WorryC2.toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_3b:{id:"crimeworry",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Worry about crime</span>"},box_4:{id:"crimeperception",year:Je("crimeperception",q[0].place),content:"<p> <span class='text-big' >"+q[14]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.</p>",show:["ni"]},box_4a:{id:"crimeperception",year:Je("crimeperception",q[0].place),content:"<p> <span class='text-big' >"+q[14]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.<span style='color: #1460aa'> (NI "+q[0].ni.data.crimeperception.value.ASB8.toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_4b:{id:"crimeperception",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Views on crime</span>"}}),dr.$set(fe);const V={};pt[0]&1&&(V.place=q[0].place),pt[0]&1&&(V.sub_heading=q[17]("Business sectors",q[0].place)),pt[0]&64&&(V.chart_compare_type=q[6]),pt[0]&1&&(V.boxes={box_1:{id:"no_bus",year:Je("business",q[0].place),content:"<span class='text-big'>"+q[14]("business.value.BCOUNTS").toLocaleString()+" </span> businesses, with a total of <span class='text-big'>"+q[14]("niets_sales.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>million in sales and <span class='text-big'>"+q[14]("niets_purch.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0})+" </span>million in purchases.",show:["ni","lgd"]},box_1a:{id:"no_bus",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Business and trade</span>"},box_2:{id:"niets_sales",year:Je("niets_sales",q[0].place),content:"GroupChart",chart_data:q[9]("niets_sales"),show:["ni","lgd"]},box_2a:{id:"niets_sales",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Sales partners</span>"},box_3:{id:"niets_purch",year:Je("niets_purch",q[0].place),content:"GroupChart",chart_data:q[9]("niets_purch"),show:["ni","lgd"]},box_3a:{id:"niets_purch",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Purchases partners</span>"},box_4:{id:"type_bus",year:Je("business",q[0].place),content:"GroupChart",chart_data:q[9]("businesstype"),show:["ni","lgd"]},box_4a:{id:"type_bus",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of businesses</span>"},box_5:{id:"size_bus",year:Je("businessband",q[0].place),content:"GroupChart",chart_data:q[9]("businessband"),show:["ni","lgd"]},box_5a:{id:"size_bus",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Employees in businesses</span>"},box_6:{id:"sector",year:"Agriculture "+Je("farms",q[0].place)+", Tourism "+Je("tourism",q[0].place),content:"<p><strong>Agriculture</strong></p><span class='text-big'>"+q[14]("farms.value.F").toLocaleString()+" </span> farms with <span class='text-big'>"+q[14]("farms.value.FA").toLocaleString()+" </span> farmers.<p><strong>Tourism</strong></p><span class='text-big'>"+q[14]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs and <span class='text-big'>"+q[14]("tourism_estab.value.estab").toLocaleString()+" </span> accomodation establishments.",show:["ni","lgd"]},box_6a:{id:"sector",content:"Data is available for NI and Local Government Districts",show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Business sectors</span>"}}),Vr.$set(V)},i(q){an||(ot(Ge.$$.fragment,q),ot(ii.$$.fragment,q),ot(Me.$$.fragment,q),ot(ft.$$.fragment,q),ot(Mt.$$.fragment,q),ot(Fi.$$.fragment,q),ot(Gi.$$.fragment,q),ot(Wr.$$.fragment,q),ot(Tr.$$.fragment,q),ot(hr.$$.fragment,q),ot(Zi.$$.fragment,q),ot(dr.$$.fragment,q),ot(Vr.$$.fragment,q),an=!0)},o(q){_t(Ge.$$.fragment,q),_t(ii.$$.fragment,q),_t(Me.$$.fragment,q),_t(ft.$$.fragment,q),_t(Mt.$$.fragment,q),_t(Fi.$$.fragment,q),_t(Gi.$$.fragment,q),_t(Wr.$$.fragment,q),_t(Tr.$$.fragment,q),_t(hr.$$.fragment,q),_t(Zi.$$.fragment,q),_t(dr.$$.fragment,q),_t(Vr.$$.fragment,q),an=!1},d(q){q&&(se(p),se(xt),se(Ve),se(lt),se(kt),se(Pe),se(Zt),se(Ci)),Xi&&Xi.d(),mi(Ge),mi(ii,q),mi(Me),mi(ft),mi(Mt),Ar.d(),mi(Fi),Oi&&Oi.d(),Pr.d(),mn(),mi(Gi),mi(Wr),mi(Tr),mi(hr),mi(Zi),mi(dr),mi(Vr)}}}function Qm(l){let p,d=xi([...l[0].place.parents].reverse()),h=[];for(let y=0;y<d.length;y+=1)h[y]=$m(Ym(l,d,y));return{c(){for(let y=0;y<h.length;y+=1)h[y].c();p=oi()},l(y){for(let v=0;v<h.length;v+=1)h[v].l(y);p=oi()},m(y,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(y,v);De(y,p,v)},p(y,v){if(v[0]&1){d=xi([...y[0].place.parents].reverse());let a;for(a=0;a<d.length;a+=1){const k=Ym(y,d,a);h[a]?h[a].p(k,v):(h[a]=$m(k),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&se(p),un(h,y)}}}function $m(l){let p,d=l[33].name+"",h,y,v,a=" &gt; ",k;return{c(){p=Oe("a"),h=Vt(d),v=new po(!1),k=oi(),this.h()},l(I){p=Ne(I,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var B=Ze(p);h=jt(B,d),B.forEach(se),v=ho(I,!1),k=oi(),this.h()},h(){ne(p,"href",y=er+"/"+l[33].code+"/"),ne(p,"data-sveltekit-noscroll",""),ne(p,"data-sveltekit-keepfocus",""),ne(p,"class","svelte-pk8ijs"),v.a=k},m(I,B){De(I,p,B),Ae(p,h),v.m(a,I,B),De(I,k,B)},p(I,B){B[0]&1&&d!==(d=I[33].name+"")&&ki(h,d),B[0]&1&&y!==(y=er+"/"+I[33].code+"/")&&ne(p,"href",y)},d(I){I&&(se(p),se(k),v.d())}}}function V1(l){let p,d="Zoom and click on map to explore other areas";return{c(){p=Oe("p"),p.textContent=d,this.h()},l(h){p=Ne(h,"P",{class:!0,"data-svelte-h":!0}),Ua(p)!=="svelte-2jr00x"&&(p.textContent=d),this.h()},h(){ne(p,"class","text-bold svelte-pk8ijs")},m(h,y){De(h,p,y)},p:tr,d(h){h&&se(p)}}}function j1(l){let p,d,h=l[0].place.name+"",y,v,a=Pn[l[0].place.type].name+"",k,I,B,C="",F,D,X='<span class="text-bold svelte-pk8ijs">Zoom and click on map to explore other areas</span>';return{c(){p=Vt("You are currently viewing "),d=Oe("span"),y=Vt(h),v=wt(),k=Vt(a),I=wt(),B=Oe("span"),B.innerHTML=C,F=wt(),D=Oe("p"),D.innerHTML=X,this.h()},l(te){p=jt(te,"You are currently viewing "),d=Ne(te,"SPAN",{style:!0,class:!0});var oe=Ze(d);y=jt(oe,h),oe.forEach(se),v=St(te),k=jt(te,a),I=St(te),B=Ne(te,"SPAN",{style:!0,class:!0,"data-svelte-h":!0}),Ua(B)!=="svelte-1p4e1wj"&&(B.innerHTML=C),F=St(te),D=Ne(te,"P",{class:!0,"data-svelte-h":!0}),Ua(D)!=="svelte-13ivmis"&&(D.innerHTML=X),this.h()},h(){Qe(d,"color","#3878c5"),ne(d,"class","svelte-pk8ijs"),Qe(B,"color","#00205b"),ne(B,"class","svelte-pk8ijs"),ne(D,"class","svelte-pk8ijs")},m(te,oe){De(te,p,oe),De(te,d,oe),Ae(d,y),De(te,v,oe),De(te,k,oe),De(te,I,oe),De(te,B,oe),De(te,F,oe),De(te,D,oe)},p(te,oe){oe[0]&1&&h!==(h=te[0].place.name+"")&&ki(y,h),oe[0]&1&&a!==(a=Pn[te[0].place.type].name+"")&&ki(k,a)},d(te){te&&(se(p),se(d),se(v),se(k),se(I),se(B),se(F),se(D))}}}function q1(l){let p,d,h,y,v,a,k;const I=[Fu[l[35]],{id:l[35]+"-fill"},{type:"fill"},{isChild:l[5][l[35]]},{click:!0},{selected:l[4].selected},{highlight:!0},{highlighted:l[4].highlighted},{hover:!0},{hovered:l[4].hovered},{layout:{visibility:l[4].type==l[35]||l[4].childType==l[35]?"visible":"none"}},{paint:l[4].type==l[35]?nn["fill-self"]:l[4].childType==l[35]?nn["fill-child"]:nn.fill}];let B={};for(let te=0;te<I.length;te+=1)B=_p(B,I[te]);p=new Eh({props:B}),p.$on("select",l[10]);const C=[Fu[l[35]],{id:l[35]+"-bounds"},{type:"line"},{selected:l[4].selected},{highlight:!0},{highlighted:l[4].highlighted},{layout:{visibility:l[4].type==l[35]||l[4].childType==l[35]?"visible":"none"}},{paint:l[4].type==l[35]?nn["line-active"]:l[4].childType==l[35]?nn["line-child"]:nn.line}];let F={};for(let te=0;te<C.length;te+=1)F=_p(F,C[te]);h=new Eh({props:F});const D=[Fu[l[35]],{id:l[35]+"-self"},{type:"line"},{selected:l[4].selected},{layout:{visibility:l[4].type==l[35]?"visible":"none"}},{paint:l[4].type==l[35]?nn["line-self"]:nn.line}];let X={};for(let te=0;te<D.length;te+=1)X=_p(X,D[te]);return v=new Eh({props:X}),{c(){hi(p.$$.fragment),d=wt(),hi(h.$$.fragment),y=wt(),hi(v.$$.fragment),a=wt()},l(te){fi(p.$$.fragment,te),d=St(te),fi(h.$$.fragment,te),y=St(te),fi(v.$$.fragment,te),a=St(te)},m(te,oe){di(p,te,oe),De(te,d,oe),di(h,te,oe),De(te,y,oe),di(v,te,oe),De(te,a,oe),k=!0},p(te,oe){const he=oe[0]&48?xh(I,[I[0],I[1],I[2],oe[0]&32&&{isChild:te[5][te[35]]},I[4],oe[0]&16&&{selected:te[4].selected},I[6],oe[0]&16&&{highlighted:te[4].highlighted},I[8],oe[0]&16&&{hovered:te[4].hovered},oe[0]&16&&{layout:{visibility:te[4].type==te[35]||te[4].childType==te[35]?"visible":"none"}},oe[0]&16&&{paint:te[4].type==te[35]?nn["fill-self"]:te[4].childType==te[35]?nn["fill-child"]:nn.fill}]):{};p.$set(he);const ve=oe[0]&16?xh(C,[C[0],C[1],C[2],{selected:te[4].selected},C[4],{highlighted:te[4].highlighted},{layout:{visibility:te[4].type==te[35]||te[4].childType==te[35]?"visible":"none"}},{paint:te[4].type==te[35]?nn["line-active"]:te[4].childType==te[35]?nn["line-child"]:nn.line}]):{};h.$set(ve);const xe=oe[0]&16?xh(D,[D[0],D[1],D[2],{selected:te[4].selected},{layout:{visibility:te[4].type==te[35]?"visible":"none"}},{paint:te[4].type==te[35]?nn["line-self"]:nn.line}]):{};v.$set(xe)},i(te){k||(ot(p.$$.fragment,te),ot(h.$$.fragment,te),ot(v.$$.fragment,te),k=!0)},o(te){_t(p.$$.fragment,te),_t(h.$$.fragment,te),_t(v.$$.fragment,te),k=!1},d(te){te&&(se(d),se(y),se(a)),mi(p,te),mi(h,te),mi(v,te)}}}function eg(l){let p,d;const h=[c_[l[35]]];let y={$$slots:{default:[q1]},$$scope:{ctx:l}};for(let v=0;v<h.length;v+=1)y=_p(y,h[v]);return p=new tv({props:y}),{c(){hi(p.$$.fragment)},l(v){fi(p.$$.fragment,v)},m(v,a){di(p,v,a),d=!0},p(v,a){const k={};a[0]&48|a[1]&256&&(k.$$scope={dirty:a,ctx:v}),p.$set(k)},i(v){d||(ot(p.$$.fragment,v),d=!0)},o(v){_t(p.$$.fragment,v),d=!1},d(v){mi(p,v)}}}function G1(l){let p,d,h=xi(["dz","sdz","dea","lgd"]),y=[];for(let a=0;a<4;a+=1)y[a]=eg(Xm(l,h,a));const v=a=>_t(y[a],1,1,()=>{y[a]=null});return{c(){for(let a=0;a<4;a+=1)y[a].c();p=oi()},l(a){for(let k=0;k<4;k+=1)y[k].l(a);p=oi()},m(a,k){for(let I=0;I<4;I+=1)y[I]&&y[I].m(a,k);De(a,p,k),d=!0},p(a,k){if(k[0]&1072){h=xi(["dz","sdz","dea","lgd"]);let I;for(I=0;I<4;I+=1){const B=Xm(a,h,I);y[I]?(y[I].p(B,k),ot(y[I],1)):(y[I]=eg(B),y[I].c(),ot(y[I],1),y[I].m(p.parentNode,p))}for(Bn(),I=4;I<4;I+=1)v(I);Fn()}},i(a){if(!d){for(let k=0;k<4;k+=1)ot(y[k]);d=!0}},o(a){y=y.filter(Boolean);for(let k=0;k<4;k+=1)_t(y[k]);d=!1},d(a){a&&se(p),un(y,a)}}}function tg(l){let p,d,h=l[0].place.name+"",y,v,a,k=xi([...l[0].place.parents].reverse()),I=[];for(let B=0;B<k.length;B+=1)I[B]=ig(Wm(l,k,B));return{c(){p=Oe("span"),d=Vt("Select a larger area containing "),y=Vt(h),v=wt(),a=Oe("span");for(let B=0;B<I.length;B+=1)I[B].c();this.h()},l(B){p=Ne(B,"SPAN",{class:!0});var C=Ze(p);d=jt(C,"Select a larger area containing "),y=jt(C,h),C.forEach(se),v=St(B),a=Ne(B,"SPAN",{class:!0});var F=Ze(a);for(let D=0;D<I.length;D+=1)I[D].l(F);F.forEach(se),this.h()},h(){ne(p,"class","text-bold svelte-pk8ijs"),ne(a,"class","text-small svelte-pk8ijs")},m(B,C){De(B,p,C),Ae(p,d),Ae(p,y),De(B,v,C),De(B,a,C);for(let F=0;F<I.length;F+=1)I[F]&&I[F].m(a,null)},p(B,C){if(C[0]&1&&h!==(h=B[0].place.name+"")&&ki(y,h),C[0]&1){k=xi([...B[0].place.parents].reverse());let F;for(F=0;F<k.length;F+=1){const D=Wm(B,k,F);I[F]?I[F].p(D,C):(I[F]=ig(D),I[F].c(),I[F].m(a,null))}for(;F<I.length;F+=1)I[F].d(1);I.length=k.length}},d(B){B&&(se(p),se(v),se(a)),un(I,B)}}}function ig(l){let p,d,h=l[32]>0?" ":"",y,v=l[33].name+"",a,k;return{c(){p=Oe("span"),d=new po(!1),y=Oe("a"),a=Vt(v),this.h()},l(I){p=Ne(I,"SPAN",{style:!0,class:!0});var B=Ze(p);d=ho(B,!1),y=Ne(B,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var C=Ze(y);a=jt(C,v),C.forEach(se),B.forEach(se),this.h()},h(){d.a=y,ne(y,"href",k=er+"/"+l[33].code),ne(y,"data-sveltekit-noscroll",""),ne(y,"data-sveltekit-keepfocus",""),ne(y,"class","svelte-pk8ijs"),Qe(p,"display","block"),Qe(p,"margin-left",(l[32]>0?(l[32]-1)*15:0)+"px"),ne(p,"class","svelte-pk8ijs")},m(I,B){De(I,p,B),d.m(h,p),Ae(p,y),Ae(y,a)},p(I,B){B[0]&1&&v!==(v=I[33].name+"")&&ki(a,v),B[0]&1&&k!==(k=er+"/"+I[33].code)&&ne(y,"href",k)},d(I){I&&se(p)}}}function Z1(l){let p,d,h=l[0].place.name+"",y,v,a=Pn[l[0].place.type].name+"",k;return{c(){p=Oe("span"),d=Vt("No areas below "),y=Vt(h),v=wt(),k=Vt(a),this.h()},l(I){p=Ne(I,"SPAN",{class:!0});var B=Ze(p);d=jt(B,"No areas below "),y=jt(B,h),v=St(B),k=jt(B,a),B.forEach(se),this.h()},h(){ne(p,"class","muted svelte-pk8ijs")},m(I,B){De(I,p,B),Ae(p,d),Ae(p,y),Ae(p,v),Ae(p,k)},p(I,B){B[0]&1&&h!==(h=I[0].place.name+"")&&ki(y,h),B[0]&1&&a!==(a=Pn[I[0].place.type].name+"")&&ki(k,a)},d(I){I&&se(p)}}}function K1(l){let p,d,h=(l[0].place.children[0]?Pn[l[0].place.children[0].type].name:"Areas")+"",y,v,a=l[0].place.name+"",k,I,B,C,F=xi(l[0].place.children),D=[];for(let X=0;X<F.length;X+=1)D[X]=rg(Hm(l,F,X));return{c(){p=Oe("span"),d=Vt("Select a "),y=Vt(h),v=Vt(" within "),k=Vt(a),I=Oe("br"),B=wt(),C=Oe("span");for(let X=0;X<D.length;X+=1)D[X].c();this.h()},l(X){p=Ne(X,"SPAN",{class:!0});var te=Ze(p);d=jt(te,"Select a "),y=jt(te,h),v=jt(te," within "),k=jt(te,a),te.forEach(se),I=Ne(X,"BR",{class:!0}),B=St(X),C=Ne(X,"SPAN",{class:!0});var oe=Ze(C);for(let he=0;he<D.length;he+=1)D[he].l(oe);oe.forEach(se),this.h()},h(){ne(p,"class","text-bold svelte-pk8ijs"),ne(I,"class","svelte-pk8ijs"),ne(C,"class","text-small svelte-pk8ijs")},m(X,te){De(X,p,te),Ae(p,d),Ae(p,y),Ae(p,v),Ae(p,k),De(X,I,te),De(X,B,te),De(X,C,te);for(let oe=0;oe<D.length;oe+=1)D[oe]&&D[oe].m(C,null)},p(X,te){if(te[0]&1&&h!==(h=(X[0].place.children[0]?Pn[X[0].place.children[0].type].name:"Areas")+"")&&ki(y,h),te[0]&1&&a!==(a=X[0].place.name+"")&&ki(k,a),te[0]&1){F=xi(X[0].place.children);let oe;for(oe=0;oe<F.length;oe+=1){const he=Hm(X,F,oe);D[oe]?D[oe].p(he,te):(D[oe]=rg(he),D[oe].c(),D[oe].m(C,null))}for(;oe<D.length;oe+=1)D[oe].d(1);D.length=F.length}},d(X){X&&(se(p),se(I),se(B),se(C)),un(D,X)}}}function rg(l){let p,d=l[30].name+"",h,y,v=l[32]<l[0].place.children.length-1?", ":"",a;return{c(){p=Oe("a"),h=Vt(d),a=Vt(v),this.h()},l(k){p=Ne(k,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var I=Ze(p);h=jt(I,d),I.forEach(se),a=jt(k,v),this.h()},h(){ne(p,"href",y=er+"/"+l[30].code),ne(p,"data-sveltekit-noscroll",""),ne(p,"data-sveltekit-keepfocus",""),ne(p,"class","svelte-pk8ijs")},m(k,I){De(k,p,I),Ae(p,h),De(k,a,I)},p(k,I){I[0]&1&&d!==(d=k[30].name+"")&&ki(h,d),I[0]&1&&y!==(y=er+"/"+k[30].code)&&ne(p,"href",y),I[0]&1&&v!==(v=k[32]<k[0].place.children.length-1?", ":"")&&ki(a,v)},d(k){k&&(se(p),se(a))}}}function H1(l){let p,d,h=l[0].place&&l[0].ni&&Jm(l);return{c(){h&&h.c(),p=oi()},l(y){h&&h.l(y),p=oi()},m(y,v){h&&h.m(y,v),De(y,p,v),d=!0},p(y,v){y[0].place&&y[0].ni?h?(h.p(y,v),v[0]&1&&ot(h,1)):(h=Jm(y),h.c(),ot(h,1),h.m(p.parentNode,p)):h&&(Bn(),_t(h,1,1,()=>{h=null}),Fn())},i(y){d||(ot(h),d=!0)},o(y){_t(h),d=!1},d(y){y&&se(p),h&&h.d(y)}}}function W1(l){let p,d,h,y,v,a,k,I,B,C,F,D,X,te,oe,he;return document.title=p=l[0].place.name+" Local Statistics Explorer",X=new u1({}),oe=new y_({props:{column:"wide",$$slots:{default:[H1]},$$scope:{ctx:l}}}),{c(){d=Oe("meta"),h=Oe("meta"),v=Oe("meta"),a=Oe("meta"),I=Oe("meta"),C=Oe("meta"),D=wt(),hi(X.$$.fragment),te=wt(),hi(oe.$$.fragment),this.h()},l(ve){const xe=f_("svelte-ovl3z1",document.head);d=Ne(xe,"META",{name:!0,content:!0,class:!0}),h=Ne(xe,"META",{property:!0,content:!0,class:!0}),v=Ne(xe,"META",{property:!0,content:!0,class:!0}),a=Ne(xe,"META",{property:!0,content:!0,class:!0}),I=Ne(xe,"META",{property:!0,content:!0,class:!0}),C=Ne(xe,"META",{name:!0,content:!0,class:!0}),xe.forEach(se),D=St(ve),fi(X.$$.fragment,ve),te=St(ve),fi(oe.$$.fragment,ve),this.h()},h(){ne(d,"name","description"),ne(d,"content",""),ne(d,"class","svelte-pk8ijs"),ne(h,"property","og:title"),ne(h,"content",y=l[0].place.name+" Local Statistics"),ne(h,"class","svelte-pk8ijs"),ne(v,"property","og:type"),ne(v,"content","website"),ne(v,"class","svelte-pk8ijs"),ne(a,"property","og:url"),ne(a,"content",k=wp.base+"/"+l[0].place.code+"/"),ne(a,"class","svelte-pk8ijs"),ne(I,"property","og:description"),ne(I,"content",B="Explore NISRA Statistics for "+l[0].place.name+"."),ne(I,"class","svelte-pk8ijs"),ne(C,"name","description"),ne(C,"content",F="Explore NISRA Statistics for "+l[0].place.name+"."),ne(C,"class","svelte-pk8ijs")},m(ve,xe){Ae(document.head,d),Ae(document.head,h),Ae(document.head,v),Ae(document.head,a),Ae(document.head,I),Ae(document.head,C),De(ve,D,xe),di(X,ve,xe),De(ve,te,xe),di(oe,ve,xe),he=!0},p(ve,xe){(!he||xe[0]&1)&&p!==(p=ve[0].place.name+" Local Statistics Explorer")&&(document.title=p),(!he||xe[0]&1&&y!==(y=ve[0].place.name+" Local Statistics"))&&ne(h,"content",y),(!he||xe[0]&1&&k!==(k=wp.base+"/"+ve[0].place.code+"/"))&&ne(a,"content",k),(!he||xe[0]&1&&B!==(B="Explore NISRA Statistics for "+ve[0].place.name+"."))&&ne(I,"content",B),(!he||xe[0]&1&&F!==(F="Explore NISRA Statistics for "+ve[0].place.name+"."))&&ne(C,"content",F);const tt={};xe[0]&255|xe[1]&256&&(tt.$$scope={dirty:xe,ctx:ve}),oe.$set(tt)},i(ve){he||(ot(X.$$.fragment,ve),ot(oe.$$.fragment,ve),he=!0)},o(ve){_t(X.$$.fragment,ve),_t(oe.$$.fragment,ve),he=!1},d(ve){ve&&(se(D),se(te)),se(d),se(h),se(v),se(a),se(I),se(C),mi(X,ve),mi(oe,ve)}}}function yp(l){let p=(l*100).toFixed(1);return p<.1?"<0.1%":p+"%"}function Je(l,p){return p.meta_data.hasOwnProperty(l)?p.meta_data[l][0].year:null}function ng(l){let p=l.data.MYETotal.value/(l.hectares/100);return p<10?p="<10":p=(Math.round(p*10)/10).toLocaleString(void 0,{minimumFractionDigits:1}),p}function X1(l,p,d){let h,y,v,{data:a}=p,k,I,B=null,C={selected:null,type:null,childType:null,highlighted:[],hovered:null},F={};Object.keys(Fu).forEach(Ve=>d(5,F[Ve]=!1,F));function D(Ve,lt,Me){const st=(li,ur)=>li+ur;let ft=Ve[0],Ut=Me[0],Mt=lt[0],kt="perc",Pe=a.place.data[ft][kt][Ut],rt=a.place.data[ft][kt][Mt],zi=a.ni.data[ft][kt][Ut],xr=Rl[ft].map(li=>li.category),qi=Rl[ft].map(li=>li.label?li.label:li.category);return xr.map((li,ur)=>Array.isArray(li)?{x:qi[ur],y:li.map(qt=>Pe[qt]).reduce(st,0),ni:li.map(qt=>zi[qt]).reduce(st,0),prev:li.map(qt=>rt[qt]).reduce(st,0)}:{x:qi[ur],y:Pe[li],ni:zi[li],prev:rt[li]})}function X(Ve){let lt=[];if(a.place.data.hasOwnProperty(Ve)){let Me=a.place.data[Ve].perc,st,ft;Me.hasOwnProperty("2021")?(st=Me[2021],ft=a.ni.data[Ve].perc[2021]):(st=Me,ft=a.ni.data[Ve].perc);let Ut,Mt,kt=Object.keys(Rl[Ve]);for(let Pe=0;Pe<kt.length;Pe++){for(let rt=0;rt<Object.keys(st).length;rt++)if(Rl[Ve][kt[Pe]].category==Object.keys(st)[rt]){Ut=Rl[Ve][kt[Pe]].category,Mt=Rl[Ve][kt[Pe]].label;break}st[Ut]<=100&&(lt.push({group:"Northern Ireland",category:Mt,perc:ft[Ut],width:0}),a.place.name!="Northern Ireland"&&lt.push({group:a.place.name,category:Mt,perc:st[Ut],width:0}))}}return lt}function te(Ve){B&&B.fitBounds(Ve,{padding:20})}function oe(Ve){let lt=JSON.parse(JSON.stringify(C)),Me=a.place.code,st=a.place.type,ft=a.place.children[0]?a.place.children.map(rt=>rt.code):[],Ut=a.place.type=="rgn"?"cty":ft[0]?a.place.children[0].type:null;d(4,C.selected=Me,C),d(4,C.type=st,C),d(4,C.childType=Ut,C),d(4,C.highlighted=ft,C);let Mt=Object.keys(Fu),kt=["fill-color","fill-opacity"],Pe=["line-color","line-width","line-opacity"];B&&(C.type!=lt.type||C.childType!=lt.childType)&&(Mt.forEach(rt=>{let zi=rt==st||Ut&&rt==Ut?"visible":"none";B.setLayoutProperty(rt+"-fill","visibility",zi),B.setLayoutProperty(rt+"-bounds","visibility",zi),a.place.type!="ni"&&B.setLayoutProperty(rt+"-self","visibility",zi),d(5,F[rt]=rt==Ut,F)}),a.place.type!="ni"&&(kt.forEach(rt=>B.setPaintProperty(st+"-fill",rt,nn[ft[0]?"fill-active":"fill-self"][rt])),Pe.forEach(rt=>{B.setPaintProperty(st+"-bounds",rt,nn["line-active"][rt]),B.setPaintProperty(st+"-self",rt,nn["line-self"][rt])})),Ut&&(kt.forEach(rt=>B.setPaintProperty(Ut+"-fill",rt,nn["fill-child"][rt])),Pe.forEach(rt=>B.setPaintProperty(Ut+"-bounds",rt,nn["line-child"][rt]))))}function he(Ve){oe(),te(a.place.bounds)}function ve(Ve){vd(`${er}/${Ve.detail.code}/`,{noScroll:!0,keepFocus:!0})}function xe(Ve){vd(`${er}/${Ve.detail.value}/`,{noScroll:!0,keepFocus:!0})}function tt(){d(2,I=k<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}function Ge(Ve){return Ve==1?"largest":Ve==a.place.count?"smallest":Ve+a_(Ve)+" largest"}function qe(Ve){let lt="";if(Ve.data.hasOwnProperty("PopChange")){let Me=Ve.data.PopChange.value,st=Object.keys(Me).slice(-1),ft=st-10,Ut=(Me[st]-Me[ft])/Me[ft]*100,Mt;Ut<0?Mt="Down":Ut>0&&(Mt="Up"),lt="<p>The population of "+Ve.name+" in "+ft+' was <span class="text-big">'+Me[ft].toLocaleString()+"</span> and in "+st+' was <span class="text-big">'+Me[st].toLocaleString()+'</span><p><span class="em '+o_(Ut)+'">'+Mt+" "+s_(Ut,"%",1)+"</span> since "+ft+" Mid-Year Population Estimate</p>"}return lt}function He(Ve){let Me=Ve.replaceAll("[",".").replaceAll("]","").split("."),st=a.place.data;for(let ft=0;ft<Me.length;ft++)st.hasOwnProperty(Me[ft])?st=st[Me[ft]]:st=[];return st}function ni(Ve){let Me=Ve.replaceAll("[",".").replaceAll("]","").split("."),st=a.ni.data,ft=He(Ve);Me[0]=="grouped_data_nocompare"|Me[0]=="grouped_data_areacompare"&&(st=a.ni);for(let Ut=0;Ut<Me.length;Ut++)st.hasOwnProperty(Me[Ut])?st=st[Me[Ut]]:st=[];return ft>st+2?st="<p>This is higher than the NI value</p>":ft<st-2?st="<p>This is lower than the NI value</p>":st="<p>This is similar to the NI value</p>",st}function Ot(Ve){return a.place.data.hasOwnProperty(Ve)?"Census "+Object.keys(a.place.data[Ve].perc).slice(-1):null}function Ue(Ve,lt){if(lt.type=="ni")return"";if(lt.type=="lgd")return"You can also explore "+Ve+" data for <a href = '"+er+"/"+lt.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[0].name+"</a>";if(lt.type=="dea")return"You can also explore "+Ve+" data for <a href = '"+er+"/"+lt.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[0].name+"</a> and <a href = '"+er+"/"+lt.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[1].name+"</a>";if(lt.type=="sdz")return"You can also explore "+Ve+" data for <a href = '"+er+"/"+lt.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[0].name+"</a>, <a href = '"+er+"/"+lt.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[1].name+"</a> and <a href = '"+er+"/"+lt.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[2].name+"</a>";if(lt.type=="dz")return"You can also explore "+Ve+" data for <a href = '"+er+"/"+lt.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[0].name+"</a>, <a href = '"+er+"/"+lt.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[1].name+"</a>, <a href = '"+er+"/"+lt.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[2].name+"</a> and <a href = '"+er+"/"+lt.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+lt.parents[3].name+"</a>"}function Xe(Ve){let lt=Ve.data.MYETotal.value/(Ve.hectares/100),Me=a.ni.data.MYETotal.value/(a.ni.hectares/100),st=lt/Me;return Math.round(st)==1?st='Approximately <span class = "em" style = "background-color: lightgrey">the same density level</span> as the Northern Ireland average':st>1?st='Approximately <span class = "em" style = "background-color: lightgrey">'+st.toFixed(0)+" times </span> the Northern Ireland average":st='Approximately <span class = "em" style = "background-color: lightgrey">1/'+(1/st).toFixed(0)+" </span> of the Northern Ireland average",st}function xt(Ve){B=Ve,d(3,B)}function ii(){k=this.clientWidth,d(1,k)}return l.$$set=Ve=>{"data"in Ve&&d(0,a=Ve.data)},l.$$.update=()=>{l.$$.dirty[0]&2&&k&&tt(),l.$$.dirty[0]&1&&d(7,h=a.place&&a.place.type!="ni"?"NI 2021":null),l.$$.dirty[0]&524289&&d(6,y=v?null:a.place.type!="ni"?"ni":null),l.$$.dirty[0]&1&&a.place&&he(a.place)},d(19,v=!1),[a,k,I,B,C,F,y,h,D,X,ve,xe,Ge,qe,He,ni,Ot,Ue,Xe,v,xt,ii]}class ab extends pn{constructor(p){super(),hn(this,p,X1,W1,cn,{data:0},null,[-1,-1])}}export{ab as component,nb as universal};
